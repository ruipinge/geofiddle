{"version":3,"file":"index-BpyC5ojK.js","sources":["../../src/components/map/providers/google/useGoogleMapsLoader.ts","../../src/components/map/providers/google/GoogleGeometryLayer.tsx","../../src/components/map/providers/google/GoogleMap.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\ninterface GoogleMapsConfig {\n    apiKey: string;\n    mapId: string;\n}\n\ninterface GoogleMapsLoaderState {\n    isLoaded: boolean;\n    error: string | null;\n    config: GoogleMapsConfig | null;\n}\n\nlet loadPromise: Promise<GoogleMapsConfig> | null = null;\nlet loadedConfig: GoogleMapsConfig | null = null;\n\nfunction isGoogleMapsLoaded(): boolean {\n    return typeof google !== 'undefined' && typeof google.maps !== 'undefined';\n}\n\nasync function loadGoogleMapsApi(): Promise<GoogleMapsConfig> {\n    // Return cached config if already loaded\n    if (loadedConfig && isGoogleMapsLoaded()) {\n        return loadedConfig;\n    }\n\n    // Return existing promise if already loading\n    if (loadPromise) {\n        return loadPromise;\n    }\n\n    loadPromise = (async () => {\n        // Fetch config from PRIVATE.json\n        const response = await fetch('/PRIVATE.json');\n        if (!response.ok) {\n            throw new Error('Failed to load Google Maps configuration. Make sure PRIVATE.json exists.');\n        }\n\n        const config = await response.json() as GoogleMapsConfig;\n        if (!config.apiKey) {\n            throw new Error('Google Maps API key not found in PRIVATE.json');\n        }\n\n        // Check if already loaded by another call\n        if (isGoogleMapsLoaded()) {\n            loadedConfig = config;\n            return config;\n        }\n\n        // Load Google Maps script\n        await new Promise<void>((resolve, reject) => {\n            const script = document.createElement('script');\n            script.src = `https://maps.googleapis.com/maps/api/js?key=${config.apiKey}&libraries=geometry&v=weekly`;\n            script.async = true;\n            script.defer = true;\n            script.onload = () => { resolve(); };\n            script.onerror = () => { reject(new Error('Failed to load Google Maps script')); };\n            document.head.appendChild(script);\n        });\n\n        loadedConfig = config;\n        return config;\n    })();\n\n    return loadPromise;\n}\n\nexport function useGoogleMapsLoader(): GoogleMapsLoaderState {\n    const [state, setState] = useState<GoogleMapsLoaderState>({\n        isLoaded: Boolean(loadedConfig) && isGoogleMapsLoaded(),\n        error: null,\n        config: loadedConfig,\n    });\n\n    useEffect(() => {\n        if (state.isLoaded) {\n            return;\n        }\n\n        loadGoogleMapsApi()\n            .then((config) => {\n                setState({\n                    isLoaded: true,\n                    error: null,\n                    config,\n                });\n            })\n            .catch((err: unknown) => {\n                setState({\n                    isLoaded: false,\n                    error: err instanceof Error ? err.message : 'Failed to load Google Maps',\n                    config: null,\n                });\n            });\n    }, [state.isLoaded]);\n\n    return state;\n}\n","import { useEffect, useRef } from 'react';\nimport type { ParsedFeature } from '@/types';\nimport type { FeatureCollection, Polygon } from 'geojson';\nimport type { BBox } from '../types';\n\n// Style colors matching MapLibre\nconst COLORS = {\n    base: {\n        fill: '#3b82f6',\n        stroke: '#2563eb',\n        fillOpacity: 0.2,\n    },\n    hover: {\n        fill: '#8b5cf6', // violet-500\n        stroke: '#7c3aed', // violet-600\n        fillOpacity: 0.3,\n    },\n    selected: {\n        fill: '#f97316', // orange-500\n        stroke: '#ea580c', // orange-600\n        fillOpacity: 0.4,\n    },\n    drawing: {\n        fill: '#f97316', // orange-500\n        stroke: '#f97316',\n        fillOpacity: 0.2,\n    },\n    envelope: {\n        fill: '#10b981', // emerald-500\n        stroke: '#059669', // emerald-600\n        fillOpacity: 0.1,\n    },\n};\n\ninterface GoogleGeometryLayerProps {\n    map: google.maps.Map | null;\n    features: ParsedFeature[];\n    selectedFeatureId: string | null;\n    hoveredFeatureId: string | null;\n    isEnvelopeHovered: boolean;\n    envelope: BBox | null;\n    drawingPreview: GeoJSON.FeatureCollection | null;\n}\n\nexport function GoogleGeometryLayer({\n    map,\n    features,\n    selectedFeatureId,\n    hoveredFeatureId,\n    isEnvelopeHovered,\n    envelope,\n    drawingPreview,\n}: GoogleGeometryLayerProps) {\n    const dataLayerRef = useRef<google.maps.Data | null>(null);\n    const drawingLayerRef = useRef<google.maps.Data | null>(null);\n    const envelopeLayerRef = useRef<google.maps.Data | null>(null);\n\n    // Initialize data layers\n    useEffect(() => {\n        if (!map) {\n            return;\n        }\n\n        // Create main data layer for features\n        const dataLayer = new google.maps.Data();\n        dataLayer.setMap(map);\n        dataLayerRef.current = dataLayer;\n\n        // Create drawing preview layer\n        const drawingLayer = new google.maps.Data();\n        drawingLayer.setMap(map);\n        drawingLayerRef.current = drawingLayer;\n\n        // Create envelope layer\n        const envelopeLayer = new google.maps.Data();\n        envelopeLayer.setMap(map);\n        envelopeLayerRef.current = envelopeLayer;\n\n        return () => {\n            dataLayer.setMap(null);\n            drawingLayer.setMap(null);\n            envelopeLayer.setMap(null);\n            dataLayerRef.current = null;\n            drawingLayerRef.current = null;\n            envelopeLayerRef.current = null;\n        };\n    }, [map]);\n\n    // Update features\n    useEffect(() => {\n        const dataLayer = dataLayerRef.current;\n        if (!dataLayer) {\n            return;\n        }\n\n        // Clear existing features\n        dataLayer.forEach((feature: google.maps.Data.Feature) => {\n            dataLayer.remove(feature);\n        });\n\n        if (features.length === 0) {\n            return;\n        }\n\n        // Add features as GeoJSON\n        const geojson: FeatureCollection = {\n            type: 'FeatureCollection',\n            features: features.map((f) => ({\n                ...f,\n                properties: {\n                    ...f.properties,\n                    _featureId: f.id,\n                },\n            })),\n        };\n\n        try {\n            dataLayer.addGeoJson(geojson);\n        } catch {\n            // GeoJSON parsing failed silently\n        }\n    }, [features]);\n\n    // Update styling based on selection/hover\n    useEffect(() => {\n        const dataLayer = dataLayerRef.current;\n        if (!dataLayer) {\n            return;\n        }\n\n        dataLayer.setStyle((feature: google.maps.Data.Feature) => {\n            const featureId = feature.getProperty('_featureId') as string | undefined;\n\n            let colors = COLORS.base;\n            let strokeWeight = 2;\n            let zIndex = 1;\n\n            if (featureId === selectedFeatureId) {\n                colors = COLORS.selected;\n                strokeWeight = 4;\n                zIndex = 3;\n            } else if (featureId === hoveredFeatureId) {\n                colors = COLORS.hover;\n                strokeWeight = 3;\n                zIndex = 2;\n            }\n\n            return {\n                fillColor: colors.fill,\n                fillOpacity: colors.fillOpacity,\n                strokeColor: colors.stroke,\n                strokeWeight,\n                zIndex,\n                // Point styling\n                icon: {\n                    path: google.maps.SymbolPath.CIRCLE,\n                    fillColor: colors.stroke,\n                    fillOpacity: 1,\n                    strokeColor: '#ffffff',\n                    strokeWeight: 2,\n                    scale: featureId === selectedFeatureId ? 10 : (featureId === hoveredFeatureId ? 8 : 6),\n                },\n            };\n        });\n    }, [selectedFeatureId, hoveredFeatureId]);\n\n    // Update drawing preview\n    useEffect(() => {\n        const drawingLayer = drawingLayerRef.current;\n        if (!drawingLayer) {\n            return;\n        }\n\n        // Clear existing drawing preview\n        drawingLayer.forEach((feature: google.maps.Data.Feature) => {\n            drawingLayer.remove(feature);\n        });\n\n        if (!drawingPreview || drawingPreview.features.length === 0) {\n            return;\n        }\n\n        try {\n            drawingLayer.addGeoJson(drawingPreview);\n        } catch {\n            // GeoJSON parsing failed silently\n        }\n\n        // Style drawing preview\n        drawingLayer.setStyle({\n            fillColor: COLORS.drawing.fill,\n            fillOpacity: COLORS.drawing.fillOpacity,\n            strokeColor: COLORS.drawing.stroke,\n            strokeWeight: 2,\n            // Dashed line effect using icons\n            strokeOpacity: 0.8,\n            // Point styling for drawing\n            icon: {\n                path: google.maps.SymbolPath.CIRCLE,\n                fillColor: COLORS.drawing.fill,\n                fillOpacity: 1,\n                strokeColor: '#ffffff',\n                strokeWeight: 2,\n                scale: 6,\n            },\n            zIndex: 10,\n        });\n    }, [drawingPreview]);\n\n    // Update envelope display\n    useEffect(() => {\n        const envelopeLayer = envelopeLayerRef.current;\n        if (!envelopeLayer) {\n            return;\n        }\n\n        // Clear existing envelope\n        envelopeLayer.forEach((feature: google.maps.Data.Feature) => {\n            envelopeLayer.remove(feature);\n        });\n\n        if (!isEnvelopeHovered || !envelope) {\n            return;\n        }\n\n        // Create envelope polygon\n        const [minLon, minLat, maxLon, maxLat] = envelope;\n        const envelopePolygon: Polygon = {\n            type: 'Polygon',\n            coordinates: [[\n                [minLon, minLat],\n                [maxLon, minLat],\n                [maxLon, maxLat],\n                [minLon, maxLat],\n                [minLon, minLat],\n            ]],\n        };\n\n        const geojson: FeatureCollection = {\n            type: 'FeatureCollection',\n            features: [{\n                type: 'Feature',\n                geometry: envelopePolygon,\n                properties: {},\n            }],\n        };\n\n        try {\n            envelopeLayer.addGeoJson(geojson);\n        } catch {\n            // GeoJSON parsing failed silently\n        }\n\n        // Style envelope\n        envelopeLayer.setStyle({\n            fillColor: COLORS.envelope.fill,\n            fillOpacity: COLORS.envelope.fillOpacity,\n            strokeColor: COLORS.envelope.stroke,\n            strokeWeight: 2,\n            strokeOpacity: 0.8,\n            zIndex: 0,\n        });\n    }, [isEnvelopeHovered, envelope]);\n\n    return null;\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { useGoogleMapsLoader } from './useGoogleMapsLoader';\nimport { GoogleGeometryLayer } from './GoogleGeometryLayer';\nimport type { MapProviderProps } from '../types';\n\nexport function GoogleMap({\n    viewState,\n    onViewStateChange,\n    basemap,\n    features,\n    selectedFeatureId,\n    hoveredFeatureId,\n    isEnvelopeHovered,\n    envelope,\n    isDrawing,\n    drawingPreview,\n    onMapClick,\n    children,\n}: MapProviderProps) {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const mapRef = useRef<google.maps.Map | null>(null);\n    const isUpdatingRef = useRef(false);\n    const { isLoaded, error, config } = useGoogleMapsLoader();\n    const [mapReady, setMapReady] = useState(false);\n\n    // Use refs to store callbacks so they don't cause re-initialization\n    const onViewStateChangeRef = useRef(onViewStateChange);\n    const onMapClickRef = useRef(onMapClick);\n    const initialViewStateRef = useRef(viewState);\n\n    // Keep refs up to date\n    useEffect(() => {\n        onViewStateChangeRef.current = onViewStateChange;\n    }, [onViewStateChange]);\n\n    useEffect(() => {\n        onMapClickRef.current = onMapClick;\n    }, [onMapClick]);\n\n    // Initialize map\n    useEffect(() => {\n        if (!isLoaded || !containerRef.current || mapRef.current) {\n            return;\n        }\n\n        const initialView = initialViewStateRef.current;\n        const mapOptions: google.maps.MapOptions = {\n            center: { lat: initialView.latitude, lng: initialView.longitude },\n            zoom: initialView.zoom,\n            mapId: config?.mapId,\n            disableDefaultUI: false,\n            zoomControl: true,\n            mapTypeControl: false,\n            streetViewControl: false,\n            fullscreenControl: false,\n            gestureHandling: 'greedy',\n        };\n\n        const map = new google.maps.Map(containerRef.current, mapOptions);\n        mapRef.current = map;\n\n        // Handle map movement\n        map.addListener('idle', () => {\n            if (isUpdatingRef.current) {\n                return;\n            }\n\n            const center = map.getCenter();\n            const zoom = map.getZoom();\n\n            if (center && zoom !== undefined) {\n                onViewStateChangeRef.current({\n                    latitude: center.lat(),\n                    longitude: center.lng(),\n                    zoom,\n                });\n            }\n        });\n\n        // Handle map click\n        map.addListener('click', (e: google.maps.MapMouseEvent) => {\n            if (e.latLng) {\n                onMapClickRef.current({\n                    lng: e.latLng.lng(),\n                    lat: e.latLng.lat(),\n                });\n            }\n        });\n\n        setMapReady(true);\n\n        return () => {\n            // Cleanup is handled by React - Google Maps doesn't have a destroy method\n            mapRef.current = null;\n            setMapReady(false);\n        };\n    }, [isLoaded, config?.mapId]);\n\n    // Sync view state from props to map\n    useEffect(() => {\n        const map = mapRef.current;\n        if (!map || !mapReady) {\n            return;\n        }\n\n        const currentCenter = map.getCenter();\n        const currentZoom = map.getZoom();\n\n        if (!currentCenter || currentZoom === undefined) {\n            return;\n        }\n\n        const needsUpdate =\n            Math.abs(currentCenter.lat() - viewState.latitude) > 0.0001 ||\n            Math.abs(currentCenter.lng() - viewState.longitude) > 0.0001 ||\n            Math.abs(currentZoom - viewState.zoom) > 0.1;\n\n        if (needsUpdate) {\n            isUpdatingRef.current = true;\n            map.setCenter({ lat: viewState.latitude, lng: viewState.longitude });\n            map.setZoom(viewState.zoom);\n\n            // Reset flag after animation\n            setTimeout(() => {\n                isUpdatingRef.current = false;\n            }, 100);\n        }\n    }, [viewState.latitude, viewState.longitude, viewState.zoom, mapReady]);\n\n    // Update cursor for drawing mode\n    useEffect(() => {\n        const map = mapRef.current;\n        if (!map || !mapReady) {\n            return;\n        }\n\n        map.setOptions({\n            draggableCursor: isDrawing ? 'crosshair' : undefined,\n        });\n    }, [isDrawing, mapReady]);\n\n    // Update basemap\n    useEffect(() => {\n        const map = mapRef.current;\n        if (!map || !mapReady) {\n            return;\n        }\n\n        map.setMapTypeId(basemap === 'satellite' ? 'hybrid' : 'roadmap');\n    }, [basemap, mapReady]);\n\n    if (error) {\n        return (\n            <div className=\"flex h-full w-full items-center justify-center bg-neutral-100\">\n                <div className=\"max-w-md rounded-lg bg-white p-6 shadow-lg\">\n                    <h3 className=\"mb-2 text-lg font-semibold text-red-600\">\n                        Failed to load Google Maps\n                    </h3>\n                    <p className=\"text-sm text-neutral-600\">{error}</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (!isLoaded) {\n        return (\n            <div className=\"flex h-full w-full items-center justify-center bg-neutral-100\">\n                <div className=\"text-neutral-600\">Loading Google Maps...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"relative h-full w-full\">\n            <div ref={containerRef} className=\"h-full w-full\" />\n            {children}\n            {mapReady && mapRef.current && (\n                <GoogleGeometryLayer\n                    map={mapRef.current}\n                    features={features}\n                    selectedFeatureId={selectedFeatureId}\n                    hoveredFeatureId={hoveredFeatureId}\n                    isEnvelopeHovered={isEnvelopeHovered}\n                    envelope={envelope}\n                    drawingPreview={drawingPreview}\n                />\n            )}\n        </div>\n    );\n}\n"],"names":["loadPromise","loadedConfig","isGoogleMapsLoaded","loadGoogleMapsApi","response","config","resolve","reject","script","useGoogleMapsLoader","state","setState","useState","useEffect","err","COLORS","GoogleGeometryLayer","map","features","selectedFeatureId","hoveredFeatureId","isEnvelopeHovered","envelope","drawingPreview","dataLayerRef","useRef","drawingLayerRef","envelopeLayerRef","dataLayer","drawingLayer","envelopeLayer","feature","geojson","f","featureId","colors","strokeWeight","zIndex","minLon","minLat","maxLon","maxLat","GoogleMap","viewState","onViewStateChange","basemap","isDrawing","onMapClick","children","containerRef","mapRef","isUpdatingRef","isLoaded","error","mapReady","setMapReady","onViewStateChangeRef","onMapClickRef","initialViewStateRef","initialView","mapOptions","center","zoom","e","currentCenter","currentZoom","jsxs","jsx"],"mappings":"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"}