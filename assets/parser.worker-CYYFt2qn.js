(function(){"use strict";function Ps(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var _r={};function Cs(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ze={exports:{}},Ns={},Gs=Object.freeze({__proto__:null,default:Ns}),Yr=Ps(Gs),Zr;function Ts(){return Zr||(Zr=1,(function(t,e){var r=(function(){var i=function(P,M,b,N){for(b=b||{},N=P.length;N--;b[P[N]]=M);return b},s=[1,12],a=[1,13],o=[1,9],n=[1,10],u=[1,11],h=[1,14],f=[1,15],m=[14,18,22,24],g=[18,22],y=[22,24],E={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(M,b,N,T,S,D,B){var v=D.length-1;switch(S){case 1:this.$=M.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(M);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=D[v-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=D[v-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[D[v-2],D[v]];break;case 16:this.$={},this.$[D[v][0]]=D[v][1];break;case 17:this.$=D[v-2],D[v-2][D[v][0]]!==void 0&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(D[v][0])),D[v-2][D[v][0]]=D[v][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[D[v]];break;case 21:this.$=D[v-2],D[v-2].push(D[v]);break}},table:[{3:5,4:s,5:6,6:a,7:3,8:o,9:4,10:n,11:u,12:1,13:2,15:7,16:8,17:h,23:f},{1:[3]},{14:[1,16]},i(m,[2,7]),i(m,[2,8]),i(m,[2,9]),i(m,[2,10]),i(m,[2,11]),i(m,[2,12]),i(m,[2,3]),i(m,[2,4]),i(m,[2,5]),i([14,18,21,22,24],[2,1]),i(m,[2,2]),{3:20,4:s,18:[1,17],19:18,20:19},{3:5,4:s,5:6,6:a,7:3,8:o,9:4,10:n,11:u,13:23,15:7,16:8,17:h,23:f,24:[1,21],25:22},{1:[2,6]},i(m,[2,13]),{18:[1,24],22:[1,25]},i(g,[2,16]),{21:[1,26]},i(m,[2,18]),{22:[1,28],24:[1,27]},i(y,[2,20]),i(m,[2,14]),{3:20,4:s,20:29},{3:5,4:s,5:6,6:a,7:3,8:o,9:4,10:n,11:u,13:30,15:7,16:8,17:h,23:f},i(m,[2,19]),{3:5,4:s,5:6,6:a,7:3,8:o,9:4,10:n,11:u,13:31,15:7,16:8,17:h,23:f},i(g,[2,17]),i(g,[2,15]),i(y,[2,21])],defaultActions:{16:[2,6]},parseError:function(M,b){if(b.recoverable)this.trace(M);else{let N=function(T,S){this.message=T,this.hash=S};throw N.prototype=Error,new N(M,b)}},parse:function(M){var b=this,N=[0],T=[null],S=[],D=this.table,B="",v=0,d=0,A=2,C=1,I=S.slice.call(arguments,1),F=Object.create(this.lexer),q={yy:{}};for(var Q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Q)&&(q.yy[Q]=this.yy[Q]);F.setInput(M,q.yy),q.yy.lexer=F,q.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var j=F.yylloc;S.push(j);var V=F.options&&F.options.ranges;typeof q.yy.parseError=="function"?this.parseError=q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var H=function(){var U;return U=F.lex()||C,typeof U!="number"&&(U=b.symbols_[U]||U),U},Y,k,it,Z,z={},$,et,nt,W;;){if(k=N[N.length-1],this.defaultActions[k]?it=this.defaultActions[k]:((Y===null||typeof Y>"u")&&(Y=H()),it=D[k]&&D[k][Y]),typeof it>"u"||!it.length||!it[0]){var lt="";W=[];for($ in D[k])this.terminals_[$]&&$>A&&W.push("'"+this.terminals_[$]+"'");F.showPosition?lt="Parse error on line "+(v+1)+`:
`+F.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[Y]||Y)+"'":lt="Parse error on line "+(v+1)+": Unexpected "+(Y==C?"end of input":"'"+(this.terminals_[Y]||Y)+"'"),this.parseError(lt,{text:F.match,token:this.terminals_[Y]||Y,line:F.yylineno,loc:j,expected:W})}if(it[0]instanceof Array&&it.length>1)throw new Error("Parse Error: multiple actions possible at state: "+k+", token: "+Y);switch(it[0]){case 1:N.push(Y),T.push(F.yytext),S.push(F.yylloc),N.push(it[1]),Y=null,d=F.yyleng,B=F.yytext,v=F.yylineno,j=F.yylloc;break;case 2:if(et=this.productions_[it[1]][1],z.$=T[T.length-et],z._$={first_line:S[S.length-(et||1)].first_line,last_line:S[S.length-1].last_line,first_column:S[S.length-(et||1)].first_column,last_column:S[S.length-1].last_column},V&&(z._$.range=[S[S.length-(et||1)].range[0],S[S.length-1].range[1]]),Z=this.performAction.apply(z,[B,d,v,q.yy,it[1],T,S].concat(I)),typeof Z<"u")return Z;et&&(N=N.slice(0,-1*et*2),T=T.slice(0,-1*et),S=S.slice(0,-1*et)),N.push(this.productions_[it[1]][0]),T.push(z.$),S.push(z._$),nt=D[N[N.length-2]][N[N.length-1]],N.push(nt);break;case 3:return!0}}return!0}},x=(function(){var P={EOF:1,parseError:function(b,N){if(this.yy.parser)this.yy.parser.parseError(b,N);else throw new Error(b)},setInput:function(M,b){return this.yy=b||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var b=M.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},unput:function(M){var b=M.length,N=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===T.length?this.yylloc.first_column:0)+T[T.length-N.length].length-N[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(M){this.unput(this.match.slice(M))},pastInput:function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var M=this.pastInput(),b=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+b+"^"},test_match:function(M,b){var N,T,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),T=M[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],N=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var D in S)this[D]=S[D];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,b,N,T;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),D=0;D<S.length;D++)if(N=this._input.match(this.rules[S[D]]),N&&(!b||N[0].length>b[0].length)){if(b=N,T=D,this.options.backtrack_lexer){if(M=this.test_match(N,S[D]),M!==!1)return M;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(M=this.test_match(b,S[T]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(b,N,T,S){switch(T){case 0:break;case 1:return 6;case 2:return N.yytext=N.yytext.substr(1,N.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return P})();E.lexer=x;function _(){this.yy={}}return _.prototype=E,E.Parser=_,new _})();typeof Cs<"u"&&(e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)},e.main=function(s){s[1]||(console.log("Usage: "+s[0]+" FILE"),process.exit(1));var a=Yr.readFileSync(Yr.normalize(s[1]),"utf8");return e.parser.parse(a)},require.main===t&&e.main(process.argv.slice(1)))})(Ze,Ze.exports)),Ze.exports}var Er={},Mr,ti;function Is(){if(ti)return Mr;ti=1;function t(i){var s=0;if(i.length>2)for(var a,o,n=0;n<i.length-1;n++)a=i[n],o=i[n+1],s+=(o[0]-a[0])*(o[1]+a[1]);return s>=0}function e(i){if(i&&i.length>0){if(t(i[0]))return!1;var s=i.slice(1,i.length);if(!s.every(t))return!1}return!0}function r(i){if(i.type==="Polygon")return e(i.coordinates);if(i.type==="MultiPolygon")return i.coordinates.every(e)}return Mr=function(s,a){r(s)||a.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:s.__line__})},Mr}var ei;function Rs(){if(ei)return Er;ei=1;var t=Is();function e(r,i){var s=[],a=0,o=10,n=6;function u(d){if((!i||i.noDuplicateMembers!==!1)&&d.__duplicateProperties__&&s.push({message:"An object contained duplicate members, making parsing ambigous: "+d.__duplicateProperties__.join(", "),line:d.__line__}),!f(d,"type","string"))if(B[d.type])d&&B[d.type](d);else{var A=v[d.type.toLowerCase()];A!==void 0?s.push({message:"Expected "+A+" but got "+d.type+" (case sensitive)",line:d.__line__}):s.push({message:"The type "+d.type+" is unknown",line:d.__line__})}}function h(d,A){return d.every(function(C){return C!==null&&typeof C===A})}function f(d,A,C){if(typeof d[A]>"u")return s.push({message:'"'+A+'" member required',line:d.__line__});if(C==="array"){if(!Array.isArray(d[A]))return s.push({message:'"'+A+'" member should be an array, but is an '+typeof d[A]+" instead",line:d.__line__})}else{if(C==="object"&&d[A]&&d[A].constructor!==Object)return s.push({message:'"'+A+'" member should be '+C+", but is an "+d[A].constructor.name+" instead",line:d.__line__});if(C&&typeof d[A]!==C)return s.push({message:'"'+A+'" member should be '+C+", but is an "+typeof d[A]+" instead",line:d.__line__})}}function m(d){if(E(d),d.properties!==void 0&&s.push({message:'FeatureCollection object cannot contain a "properties" member',line:d.__line__}),d.coordinates!==void 0&&s.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:d.__line__}),!f(d,"features","array")){if(!h(d.features,"object"))return s.push({message:"Every feature must be an object",line:d.__line__});d.features.forEach(D)}}function g(d,A){if(!Array.isArray(d))return s.push({message:"position should be an array, is a "+typeof d+" instead",line:d.__line__||A});if(d.length<2)return s.push({message:"position must have 2 or more elements",line:d.__line__||A});if(d.length>3)return s.push({message:"position should not have more than 3 elements",level:"message",line:d.__line__||A});if(!h(d,"number"))return s.push({message:"each element in a position must be a number",line:d.__line__||A});if(i&&i.precisionWarning){if(a===o)return a+=1,s.push({message:"truncated warnings: we've encountered coordinate precision warning "+o+" times, no more warnings will be reported",level:"message",line:d.__line__||A});a<o&&d.forEach(function(C){var I=0,F=String(C).split(".")[1];if(F!==void 0&&(I=F.length),I>n)return a+=1,s.push({message:"precision of coordinates should be reduced",level:"message",line:d.__line__||A})})}}function y(d,A,C,I){if(I===void 0&&d.__line__!==void 0&&(I=d.__line__),C===0)return g(d,I);if(C===1&&A){if(A==="LinearRing"){if(!Array.isArray(d[d.length-1]))return s.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:I}),!0;if(d.length<4&&s.push({message:"a LinearRing of coordinates needs to have four or more positions",line:I}),d.length&&(d[d.length-1].length!==d[0].length||!d[d.length-1].every(function(q,Q){return d[0][Q]===q})))return s.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:I}),!0}else if(A==="Line"&&d.length<2)return s.push({message:"a line needs to have two or more coordinates to be valid",line:I})}if(!Array.isArray(d))s.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:I});else{var F=d.map(function(q){return y(q,A,C-1,q.__line__||I)});return F.some(function(q){return q})}}function E(d){if(d.bbox){if(Array.isArray(d.bbox))return h(d.bbox,"number")||s.push({message:"each element in a bbox member must be a number",line:d.bbox.__line__}),d.bbox.length===4||d.bbox.length===6||s.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:d.bbox.__line__}),s.length;s.push({message:"bbox member must be an array of numbers, but is a "+typeof d.bbox,line:d.__line__})}}function x(d){d.properties!==void 0&&s.push({message:'geometry object cannot contain a "properties" member',line:d.__line__}),d.geometry!==void 0&&s.push({message:'geometry object cannot contain a "geometry" member',line:d.__line__}),d.features!==void 0&&s.push({message:'geometry object cannot contain a "features" member',line:d.__line__})}function _(d){E(d),x(d),f(d,"coordinates","array")||g(d.coordinates)}function P(d){E(d),!f(d,"coordinates","array")&&(y(d.coordinates,"LinearRing",2)||i&&i.ignoreRightHandRule===!0||t(d,s))}function M(d){E(d),!f(d,"coordinates","array")&&(y(d.coordinates,"LinearRing",3)||i&&i.ignoreRightHandRule===!0||t(d,s))}function b(d){E(d),f(d,"coordinates","array")||y(d.coordinates,"Line",1)}function N(d){E(d),f(d,"coordinates","array")||y(d.coordinates,"Line",2)}function T(d){E(d),f(d,"coordinates","array")||y(d.coordinates,"",1)}function S(d){E(d),f(d,"geometries","array")||(h(d.geometries,"object")||s.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:d.__line__}),d.geometries.length===1&&s.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:d.geometries.__line__}),d.geometries.forEach(function(A){A&&(A.type==="GeometryCollection"&&s.push({message:"GeometryCollection should avoid nested geometry collections",line:d.geometries.__line__}),u(A))}))}function D(d){E(d),d.id!==void 0&&typeof d.id!="string"&&typeof d.id!="number"&&s.push({message:'Feature "id" member must have a string or number value',line:d.__line__}),d.features!==void 0&&s.push({message:'Feature object cannot contain a "features" member',line:d.__line__}),d.coordinates!==void 0&&s.push({message:'Feature object cannot contain a "coordinates" member',line:d.__line__}),d.type!=="Feature"&&s.push({message:"GeoJSON features must have a type=feature member",line:d.__line__}),f(d,"properties","object"),f(d,"geometry","object")||d.geometry&&u(d.geometry)}var B={Point:_,Feature:D,MultiPoint:T,LineString:b,MultiLineString:N,FeatureCollection:m,GeometryCollection:S,Polygon:P,MultiPolygon:M},v=Object.keys(B).reduce(function(d,A){return d[A.toLowerCase()]=A,d},{});return typeof r!="object"||r===null||r===void 0?(s.push({message:"The root of a GeoJSON object must be an object.",line:0}),s):(u(r),s.forEach(function(d){({}).hasOwnProperty.call(d,"line")&&d.line===void 0&&delete d.line}),s)}return Er.hint=e,Er}var ri;function Os(){if(ri)return _r;ri=1;var t=Ts(),e=Rs();function r(i,s){var a,o=[];if(typeof i=="object")a=i;else if(typeof i=="string")try{a=t.parse(i)}catch(h){var n=h.message.match(/line (\d+)/),u=parseInt(n[1],10);return[{line:u-1,message:h.message,error:h}]}else return[{message:"Expected string or object as input",line:0}];return o=o.concat(e.hint(a,s)),o}return _r.hint=r,_r}var Fs=Os();function ii(t){const e=[];let r=0,i=-1;for(let s=0;s<t.length;s++){const a=t[s];a==="{"?(r===0&&(i=s),r++):a==="}"&&(r--,r===0&&i!==-1&&(e.push(t.slice(i,s+1)),i=-1))}return e}function Ls(t){let e;try{e=JSON.parse(t)}catch(i){return{features:[],errors:[{message:i instanceof Error?i.message:"Invalid JSON"}]}}const r=Fs.hint(e);return r.length>0?{features:[],errors:r.map(i=>({message:i.message,line:i.line}))}:{features:ks(e),errors:[]}}function Bs(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"geojson"};const r=ii(e);if(r.length===0)return{features:[],errors:[{message:"No valid JSON objects found"}]};const i=[],s=[];for(let a=0;a<r.length;a++){const o=r[a];if(!o)continue;const n=Ls(o);if(n.errors.length>0){const u=r.length>1?`Object ${String(a+1)}: `:"";s.push(...n.errors.map(h=>({...h,message:u+h.message})))}else i.push(...n.features)}return i.length>0?{features:qs(i),errors:s,detectedFormat:"geojson"}:{features:[],errors:s.length>0?s:[{message:"No features found in GeoJSON"}]}}function ks(t){switch(t.type){case"FeatureCollection":return t.features;case"Feature":return[t];case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":return[{type:"Feature",geometry:t,properties:{}}];default:return[]}}function qs(t){return t.map((e,r)=>{var i;return{...e,id:((i=e.id)==null?void 0:i.toString())??`feature-${String(r)}`,properties:e.properties??{}}})}function Us(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function js(t){const e=t.trim();if(!e.startsWith("{"))return!1;const r=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection"],i=ii(e);if(i.length===0)return!1;try{const s=i[0];if(!s)return!1;const a=JSON.parse(s);return typeof a.type=="string"&&r.includes(a.type)}catch{return!1}}const $s={name:"geojson",parse:Bs,format:Us,detect:js};var Se={exports:{}},si;function zs(){if(si)return Se.exports;si=1,Se.exports=r,Se.exports.parse=r,Se.exports.stringify=i;var t=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,e=new RegExp("^"+t.source+"(\\s"+t.source+"){1,}");function r(s){var a=s.split(";"),o=a.pop(),n=(a.shift()||"").split("=").pop(),u=0;function h(S){var D=o.substring(u).match(S);return D?(u+=D[0].length,D[0]):null}function f(S){return S&&n.match(/\d+/)&&(S.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+n}}),S}function m(){h(/^\s*/)}function g(){m();for(var S=0,D=[],B=[D],v=D,d;d=h(/^(\()/)||h(/^(\))/)||h(/^(,)/)||h(e);){if(d==="(")B.push(v),v=[],B[B.length-1].push(v),S++;else if(d===")"){if(v.length===0||(v=B.pop(),!v))return null;if(S--,S===0)break}else if(d===",")v=[],B[B.length-1].push(v);else if(!d.split(/\s/g).some(isNaN))Array.prototype.push.apply(v,d.split(/\s/g).map(parseFloat));else return null;m()}return S!==0?null:D}function y(){for(var S=[],D,B;B=h(e)||h(/^(,)/);)B===","?(S.push(D),D=[]):B.split(/\s/g).some(isNaN)||(D||(D=[]),Array.prototype.push.apply(D,B.split(/\s/g).map(parseFloat))),m();if(D)S.push(D);else return null;return S.length?S:null}function E(){if(!h(/^(point(\sz)?)/i)||(m(),!h(/^(\()/)))return null;var S=y();return!S||(m(),!h(/^(\))/))?null:{type:"Point",coordinates:S[0]}}function x(){if(!h(/^(multipoint)/i))return null;m();var S=o.substring(o.indexOf("(")+1,o.length-1).replace(/\(/g,"").replace(/\)/g,"");o="MULTIPOINT ("+S+")";var D=g();return D?(m(),{type:"MultiPoint",coordinates:D}):null}function _(){if(!h(/^(multilinestring)/i))return null;m();var S=g();return S?(m(),{type:"MultiLineString",coordinates:S}):null}function P(){if(!h(/^(linestring(\sz)?)/i)||(m(),!h(/^(\()/)))return null;var S=y();return!S||!h(/^(\))/)?null:{type:"LineString",coordinates:S}}function M(){if(!h(/^(polygon(\sz)?)/i))return null;m();var S=g();return S?{type:"Polygon",coordinates:S}:null}function b(){if(!h(/^(multipolygon)/i))return null;m();var S=g();return S?{type:"MultiPolygon",coordinates:S}:null}function N(){var S=[],D;if(!h(/^(geometrycollection)/i)||(m(),!h(/^(\()/)))return null;for(;D=T();)S.push(D),m(),h(/^(,)/),m();return h(/^(\))/)?{type:"GeometryCollection",geometries:S}:null}function T(){return E()||P()||M()||x()||_()||b()||N()}return f(T())}function i(s){s.type==="Feature"&&(s=s.geometry);function a(f){return f.join(" ")}function o(f){return f.map(a).join(", ")}function n(f){return f.map(o).map(h).join(", ")}function u(f){return f.map(n).map(h).join(", ")}function h(f){return"("+f+")"}switch(s.type){case"Point":return"POINT ("+a(s.coordinates)+")";case"LineString":return"LINESTRING ("+o(s.coordinates)+")";case"Polygon":return"POLYGON ("+n(s.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+o(s.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+u(s.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+n(s.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+s.geometries.map(i).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return Se.exports}var ai=zs();function ni(t){var a;const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"wkt"};const r=e.split(/\n\s*\n/).filter(o=>o.trim()),i=[],s=[];for(let o=0;o<r.length;o++){const n=(a=r[o])==null?void 0:a.trim();if(n)try{const u=ai.parse(n);u?i.push({type:"Feature",id:`feature-${String(o)}`,geometry:u,properties:{}}):s.push({message:`Failed to parse WKT at block ${String(o+1)}`})}catch(u){s.push({message:u instanceof Error?u.message:`Invalid WKT at block ${String(o+1)}`})}}return{features:i,errors:s,detectedFormat:"wkt"}}function Vs(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"ewkt"};let r,i=e;const s=/^SRID=(\d+);/i.exec(e);if(s){const o=parseInt(s[1]??"0",10);switch(i=e.slice(s[0].length),o){case 4326:r="EPSG:4326";break;case 3857:r="EPSG:3857";break;case 27700:r="EPSG:27700";break}}return{...ni(i),detectedFormat:"ewkt",detectedProjection:r}}function oi(t){return t.map(e=>ai.stringify(e.geometry)).filter(Boolean).join(`

`)}function Ws(t,e=4326){const r=oi(t);return r?r.split(`

`).map(i=>`SRID=${String(e)};${i}`).join(`

`):""}function Hs(t){const e=t.trim().toUpperCase();return["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GEOMETRYCOLLECTION"].some(i=>e.startsWith(i))}function Xs(t){return/^SRID=\d+;/i.test(t.trim())}const Js={name:"wkt",parse:ni,format:oi,detect:Hs},Qs={name:"ewkt",parse:Vs,format:(t,e)=>{const r={"EPSG:4326":4326,"EPSG:3857":3857,"EPSG:27700":27700},i=e!=null&&e.projection?r[e.projection]??4326:4326;return Ws(t,i)},detect:Xs};function Ks(t){return t.trim().replace(/(?:\r\n|\r|\n)/g," ").replace(/\s+/g," ")}function Ys(t){const e=Ks(t);if(!e)return[];const r=e.split(/[#&\\:/|;,\s]/),i=[];for(const s of r){if(!s)continue;const a=Number(s);if(Number.isNaN(a))throw new Error(`Invalid number: ${s}`);i.push(a)}return i}function Zs(t){const e=t.trim();if(!e)return[];const r=e.split(/[#&\\:/|;,\t ]+/),i=[];for(const s of r){if(!s)continue;const a=Number(s);if(Number.isNaN(a))throw new Error(`Invalid number: ${s}`);i.push(a)}return i}function ta(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"csv"};try{const r=e.split(/\r?\n/).filter(s=>s.trim()),i=[];for(let s=0;s<r.length;s++){const a=r[s];if(!a)continue;const o=Zs(a);if(o.length===0)continue;if(o.length%2!==0)return{features:[],errors:[{message:`Line ${String(s+1)}: Odd number of coordinates - expected pairs of x,y (lon,lat)`}]};const n=[];for(let h=0;h<o.length;h+=2){const f=o[h]??0,m=o[h+1]??0;n.push([f,m])}const u=ea(n,s);i.push(u)}return i.length===0?{features:[],errors:[{message:"No coordinates found in input"}]}:{features:i,errors:[],detectedFormat:"csv"}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse CSV"}]}}}function ea(t,e){const r=`feature-${String(e)}`;if(t.length===1){const n=t[0];if(!n)throw new Error("Expected coordinate at index 0");return{type:"Feature",id:r,geometry:{type:"Point",coordinates:n},properties:{index:e}}}const i=t[0],s=t[t.length-1];return i&&s&&i[0]===s[0]&&i[1]===s[1]&&t.length>3?{type:"Feature",id:r,geometry:{type:"Polygon",coordinates:[t]},properties:{index:e}}:{type:"Feature",id:r,geometry:{type:"LineString",coordinates:t},properties:{index:e}}}function ra(t){const e=[];for(const r of t){const i=ui(r.geometry);if(i.length>0){const s=i.map(([a,o])=>`${String(a)},${String(o)}`).join(",");e.push(s)}}return e.join(`
`)}function ui(t){switch(t.type){case"Point":return[[t.coordinates[0]??0,t.coordinates[1]??0]];case"MultiPoint":case"LineString":return t.coordinates.map(e=>[e[0]??0,e[1]??0]);case"MultiLineString":case"Polygon":return t.coordinates.flat().map(e=>[e[0]??0,e[1]??0]);case"MultiPolygon":return t.coordinates.flat(2).map(e=>[e[0]??0,e[1]??0]);case"GeometryCollection":return t.geometries.flatMap(e=>ui(e));default:return[]}}function ia(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("[")||e.toUpperCase().startsWith("POINT")||e.toUpperCase().startsWith("LINESTRING")||e.toUpperCase().startsWith("POLYGON")||e.toUpperCase().startsWith("SRID=")||e.startsWith("<"))return!1;try{const r=Ys(e);return r.length>=2&&r.length%2===0}catch{return!1}}const sa={name:"csv",parse:ta,format:ra,detect:ia};function hi(t,e=5){const r=Math.pow(10,e),i=[];let s=0,a=0,o=0;for(;s<t.length;){let n=0,u=0,h;do h=t.charCodeAt(s++)-63,u|=(h&31)<<n,n+=5;while(h>=32);a+=(u&1)!==0?~(u>>1):u>>1,n=0,u=0;do h=t.charCodeAt(s++)-63,u|=(h&31)<<n,n+=5;while(h>=32);o+=(u&1)!==0?~(u>>1):u>>1,i.push([o/r,a/r])}return i}function aa(t,e=5){const r=Math.pow(10,e);let i="",s=0,a=0;for(const o of t){const n=o[0]??0,u=o[1]??0,h=Math.round(u*r),f=Math.round(n*r);i+=li(h-s),i+=li(f-a),s=h,a=f}return i}function li(t){let e="",r=t<0?~(t<<1):t<<1;for(;r>=32;)e+=String.fromCharCode((32|r&31)+63),r>>=5;return e+=String.fromCharCode(r+63),e}function ci(t){const e=`polyline${String(t)}`;function r(a){const o=a.trim();if(!o)return{features:[],errors:[],detectedFormat:e};try{const n=hi(o,t);return n.length===0?{features:[],errors:[{message:"No coordinates decoded from polyline"}]}:{features:[{type:"Feature",id:"feature-0",geometry:{type:"LineString",coordinates:n},properties:{pointCount:n.length}}],errors:[],detectedFormat:e,detectedProjection:"EPSG:4326"}}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Failed to decode polyline"}]}}}function i(a){const o=[];for(const n of a){const u=fi(n.geometry);o.push(...u)}return o.length===0?"":aa(o,t)}function s(a){const o=a.trim();if(o.startsWith("{")||o.startsWith("[")||o.startsWith("<")||/[\s,;:]/.test(o)||!/^[?-~]+$/.test(o))return!1;try{const n=hi(o,t);if(n.length<2)return!1;for(const[u,h]of n)if(h===void 0||u===void 0||h<-90||h>90||u<-180||u>180)return!1;return!0}catch{return!1}}return{name:e,parse:r,format:i,detect:s}}function fi(t){switch(t.type){case"Point":return[t.coordinates];case"MultiPoint":case"LineString":return t.coordinates;case"MultiLineString":case"Polygon":return t.coordinates.flat();case"MultiPolygon":return t.coordinates.flat(2);case"GeometryCollection":return t.geometries.flatMap(e=>fi(e));default:return[]}}const na=ci(5),oa=ci(6);var wr={exports:{}},De={},Bt={},Jt={},gi;function tr(){if(gi)return Jt;gi=1;function t(a,o,n){if(n===void 0&&(n=Array.prototype),a&&typeof n.find=="function")return n.find.call(a,o);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var h=a[u];if(o.call(void 0,h,u,a))return h}}function e(a,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(a):a}function r(a,o){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=o[n]);return a}var i=e({HTML:"text/html",isHTML:function(a){return a===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Jt.assign=r,Jt.find=t,Jt.freeze=e,Jt.MIME_TYPE=i,Jt.NAMESPACE=s,Jt}var mi;function di(){if(mi)return Bt;mi=1;var t=tr(),e=t.find,r=t.NAMESPACE;function i(l){return l!==""}function s(l){return l?l.split(/[\t\n\f\r ]+/).filter(i):[]}function a(l,c){return l.hasOwnProperty(c)||(l[c]=!0),l}function o(l){if(!l)return[];var c=s(l);return Object.keys(c.reduce(a,{}))}function n(l){return function(c){return l&&l.indexOf(c)!==-1}}function u(l,c){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])}function h(l,c){var p=l.prototype;if(!(p instanceof c)){let w=function(){};w.prototype=c.prototype,w=new w,u(p,w),l.prototype=p=w}p.constructor!=l&&(typeof l!="function"&&console.error("unknown Class:"+l),p.constructor=l)}var f={},m=f.ELEMENT_NODE=1,g=f.ATTRIBUTE_NODE=2,y=f.TEXT_NODE=3,E=f.CDATA_SECTION_NODE=4,x=f.ENTITY_REFERENCE_NODE=5,_=f.ENTITY_NODE=6,P=f.PROCESSING_INSTRUCTION_NODE=7,M=f.COMMENT_NODE=8,b=f.DOCUMENT_NODE=9,N=f.DOCUMENT_TYPE_NODE=10,T=f.DOCUMENT_FRAGMENT_NODE=11,S=f.NOTATION_NODE=12,D={},B={};D.INDEX_SIZE_ERR=(B[1]="Index size error",1),D.DOMSTRING_SIZE_ERR=(B[2]="DOMString size error",2);var v=D.HIERARCHY_REQUEST_ERR=(B[3]="Hierarchy request error",3);D.WRONG_DOCUMENT_ERR=(B[4]="Wrong document",4),D.INVALID_CHARACTER_ERR=(B[5]="Invalid character",5),D.NO_DATA_ALLOWED_ERR=(B[6]="No data allowed",6),D.NO_MODIFICATION_ALLOWED_ERR=(B[7]="No modification allowed",7);var d=D.NOT_FOUND_ERR=(B[8]="Not found",8);D.NOT_SUPPORTED_ERR=(B[9]="Not supported",9);var A=D.INUSE_ATTRIBUTE_ERR=(B[10]="Attribute in use",10);D.INVALID_STATE_ERR=(B[11]="Invalid state",11),D.SYNTAX_ERR=(B[12]="Syntax error",12),D.INVALID_MODIFICATION_ERR=(B[13]="Invalid modification",13),D.NAMESPACE_ERR=(B[14]="Invalid namespace",14),D.INVALID_ACCESS_ERR=(B[15]="Invalid access",15);function C(l,c){if(c instanceof Error)var p=c;else p=this,Error.call(this,B[l]),this.message=B[l],Error.captureStackTrace&&Error.captureStackTrace(this,C);return p.code=l,c&&(this.message=this.message+": "+c),p}C.prototype=Error.prototype,u(D,C);function I(){}I.prototype={length:0,item:function(l){return l>=0&&l<this.length?this[l]:null},toString:function(l,c){for(var p=[],w=0;w<this.length;w++)Ut(this[w],p,l,c);return p.join("")},filter:function(l){return Array.prototype.filter.call(this,l)},indexOf:function(l){return Array.prototype.indexOf.call(this,l)}};function F(l,c){this._node=l,this._refresh=c,q(this)}function q(l){var c=l._node._inc||l._node.ownerDocument._inc;if(l._inc!==c){var p=l._refresh(l._node);if(Ke(l,"length",p.length),!l.$$length||p.length<l.$$length)for(var w=p.length;w in l;w++)Object.prototype.hasOwnProperty.call(l,w)&&delete l[w];u(p,l),l._inc=c}}F.prototype.item=function(l){return q(this),this[l]||null},h(F,I);function Q(){}function j(l,c){for(var p=l.length;p--;)if(l[p]===c)return p}function V(l,c,p,w){if(w?c[j(c,w)]=p:c[c.length++]=p,l){p.ownerElement=l;var O=l.ownerDocument;O&&(w&&et(O,l,w),$(O,l,p))}}function H(l,c,p){var w=j(c,p);if(w>=0){for(var O=c.length-1;w<O;)c[w]=c[++w];if(c.length=O,l){var J=l.ownerDocument;J&&(et(J,l,p),p.ownerElement=null)}}else throw new C(d,new Error(l.tagName+"@"+p))}Q.prototype={length:0,item:I.prototype.item,getNamedItem:function(l){for(var c=this.length;c--;){var p=this[c];if(p.nodeName==l)return p}},setNamedItem:function(l){var c=l.ownerElement;if(c&&c!=this._ownerElement)throw new C(A);var p=this.getNamedItem(l.nodeName);return V(this._ownerElement,this,l,p),p},setNamedItemNS:function(l){var c=l.ownerElement,p;if(c&&c!=this._ownerElement)throw new C(A);return p=this.getNamedItemNS(l.namespaceURI,l.localName),V(this._ownerElement,this,l,p),p},removeNamedItem:function(l){var c=this.getNamedItem(l);return H(this._ownerElement,this,c),c},removeNamedItemNS:function(l,c){var p=this.getNamedItemNS(l,c);return H(this._ownerElement,this,p),p},getNamedItemNS:function(l,c){for(var p=this.length;p--;){var w=this[p];if(w.localName==c&&w.namespaceURI==l)return w}return null}};function Y(){}Y.prototype={hasFeature:function(l,c){return!0},createDocument:function(l,c,p){var w=new z;if(w.implementation=this,w.childNodes=new I,w.doctype=p||null,p&&w.appendChild(p),c){var O=w.createElementNS(l,c);w.appendChild(O)}return w},createDocumentType:function(l,c,p){var w=new _e;return w.name=l,w.nodeName=l,w.publicId=c||"",w.systemId=p||"",w}};function k(){}k.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(l,c){return Dt(this,l,c)},replaceChild:function(l,c){Dt(this,l,c,Tt),c&&this.removeChild(c)},removeChild:function(l){return W(this,l)},appendChild:function(l){return this.insertBefore(l,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(l){return ee(this.ownerDocument||this,this,l)},normalize:function(){for(var l=this.firstChild;l;){var c=l.nextSibling;c&&c.nodeType==y&&l.nodeType==y?(this.removeChild(c),l.appendData(c.data)):(l.normalize(),l=c)}},isSupported:function(l,c){return this.ownerDocument.implementation.hasFeature(l,c)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(l){for(var c=this;c;){var p=c._nsMap;if(p){for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)&&p[w]===l)return w}c=c.nodeType==g?c.ownerDocument:c.parentNode}return null},lookupNamespaceURI:function(l){for(var c=this;c;){var p=c._nsMap;if(p&&Object.prototype.hasOwnProperty.call(p,l))return p[l];c=c.nodeType==g?c.ownerDocument:c.parentNode}return null},isDefaultNamespace:function(l){var c=this.lookupPrefix(l);return c==null}};function it(l){return l=="<"&&"&lt;"||l==">"&&"&gt;"||l=="&"&&"&amp;"||l=='"'&&"&quot;"||"&#"+l.charCodeAt()+";"}u(f,k),u(f,k.prototype);function Z(l,c){if(c(l))return!0;if(l=l.firstChild)do if(Z(l,c))return!0;while(l=l.nextSibling)}function z(){this.ownerDocument=this}function $(l,c,p){l&&l._inc++;var w=p.namespaceURI;w===r.XMLNS&&(c._nsMap[p.prefix?p.localName:""]=p.value)}function et(l,c,p,w){l&&l._inc++;var O=p.namespaceURI;O===r.XMLNS&&delete c._nsMap[p.prefix?p.localName:""]}function nt(l,c,p){if(l&&l._inc){l._inc++;var w=c.childNodes;if(p)w[w.length++]=p;else{for(var O=c.firstChild,J=0;O;)w[J++]=O,O=O.nextSibling;w.length=J,delete w[w.length]}}}function W(l,c){var p=c.previousSibling,w=c.nextSibling;return p?p.nextSibling=w:l.firstChild=w,w?w.previousSibling=p:l.lastChild=p,c.parentNode=null,c.previousSibling=null,c.nextSibling=null,nt(l.ownerDocument,l),c}function lt(l){return l&&(l.nodeType===k.DOCUMENT_NODE||l.nodeType===k.DOCUMENT_FRAGMENT_NODE||l.nodeType===k.ELEMENT_NODE)}function U(l){return l&&(rt(l)||K(l)||X(l)||l.nodeType===k.DOCUMENT_FRAGMENT_NODE||l.nodeType===k.COMMENT_NODE||l.nodeType===k.PROCESSING_INSTRUCTION_NODE)}function X(l){return l&&l.nodeType===k.DOCUMENT_TYPE_NODE}function rt(l){return l&&l.nodeType===k.ELEMENT_NODE}function K(l){return l&&l.nodeType===k.TEXT_NODE}function ut(l,c){var p=l.childNodes||[];if(e(p,rt)||X(c))return!1;var w=e(p,X);return!(c&&w&&p.indexOf(w)>p.indexOf(c))}function vt(l,c){var p=l.childNodes||[];function w(J){return rt(J)&&J!==c}if(e(p,w))return!1;var O=e(p,X);return!(c&&O&&p.indexOf(O)>p.indexOf(c))}function tt(l,c,p){if(!lt(l))throw new C(v,"Unexpected parent node type "+l.nodeType);if(p&&p.parentNode!==l)throw new C(d,"child not in parent");if(!U(c)||X(c)&&l.nodeType!==k.DOCUMENT_NODE)throw new C(v,"Unexpected node type "+c.nodeType+" for parent node type "+l.nodeType)}function Ot(l,c,p){var w=l.childNodes||[],O=c.childNodes||[];if(c.nodeType===k.DOCUMENT_FRAGMENT_NODE){var J=O.filter(rt);if(J.length>1||e(O,K))throw new C(v,"More than one element or text in fragment");if(J.length===1&&!ut(l,p))throw new C(v,"Element in fragment can not be inserted before doctype")}if(rt(c)&&!ut(l,p))throw new C(v,"Only one element can be added and only after doctype");if(X(c)){if(e(w,X))throw new C(v,"Only one doctype is allowed");var ct=e(w,rt);if(p&&w.indexOf(ct)<w.indexOf(p))throw new C(v,"Doctype can only be inserted before an element");if(!p&&ct)throw new C(v,"Doctype can not be appended since element is present")}}function Tt(l,c,p){var w=l.childNodes||[],O=c.childNodes||[];if(c.nodeType===k.DOCUMENT_FRAGMENT_NODE){var J=O.filter(rt);if(J.length>1||e(O,K))throw new C(v,"More than one element or text in fragment");if(J.length===1&&!vt(l,p))throw new C(v,"Element in fragment can not be inserted before doctype")}if(rt(c)&&!vt(l,p))throw new C(v,"Only one element can be added and only after doctype");if(X(c)){if(e(w,function(It){return X(It)&&It!==p}))throw new C(v,"Only one doctype is allowed");var ct=e(w,rt);if(p&&w.indexOf(ct)<w.indexOf(p))throw new C(v,"Doctype can only be inserted before an element")}}function Dt(l,c,p,w){tt(l,c,p),l.nodeType===k.DOCUMENT_NODE&&(w||Ot)(l,c,p);var O=c.parentNode;if(O&&O.removeChild(c),c.nodeType===T){var J=c.firstChild;if(J==null)return c;var ct=c.lastChild}else J=ct=c;var xt=p?p.previousSibling:l.lastChild;J.previousSibling=xt,ct.nextSibling=p,xt?xt.nextSibling=J:l.firstChild=J,p==null?l.lastChild=ct:p.previousSibling=ct;do{J.parentNode=l;var It=l.ownerDocument||l;_t(J,It)}while(J!==ct&&(J=J.nextSibling));return nt(l.ownerDocument||l,l),c.nodeType==T&&(c.firstChild=c.lastChild=null),c}function _t(l,c){if(l.ownerDocument!==c){if(l.ownerDocument=c,l.nodeType===m&&l.attributes)for(var p=0;p<l.attributes.length;p++){var w=l.attributes.item(p);w&&(w.ownerDocument=c)}for(var O=l.firstChild;O;)_t(O,c),O=O.nextSibling}}function ot(l,c){c.parentNode&&c.parentNode.removeChild(c),c.parentNode=l,c.previousSibling=l.lastChild,c.nextSibling=null,c.previousSibling?c.previousSibling.nextSibling=c:l.firstChild=c,l.lastChild=c,nt(l.ownerDocument,l,c);var p=l.ownerDocument||l;return _t(c,p),c}z.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(l,c){if(l.nodeType==T){for(var p=l.firstChild;p;){var w=p.nextSibling;this.insertBefore(p,c),p=w}return l}return Dt(this,l,c),_t(l,this),this.documentElement===null&&l.nodeType===m&&(this.documentElement=l),l},removeChild:function(l){return this.documentElement==l&&(this.documentElement=null),W(this,l)},replaceChild:function(l,c){Dt(this,l,c,Tt),_t(l,this),c&&this.removeChild(c),rt(l)&&(this.documentElement=l)},importNode:function(l,c){return Ae(this,l,c)},getElementById:function(l){var c=null;return Z(this.documentElement,function(p){if(p.nodeType==m&&p.getAttribute("id")==l)return c=p,!0}),c},getElementsByClassName:function(l){var c=o(l);return new F(this,function(p){var w=[];return c.length>0&&Z(p.documentElement,function(O){if(O!==p&&O.nodeType===m){var J=O.getAttribute("class");if(J){var ct=l===J;if(!ct){var xt=o(J);ct=c.every(n(xt))}ct&&w.push(O)}}}),w})},createElement:function(l){var c=new ht;c.ownerDocument=this,c.nodeName=l,c.tagName=l,c.localName=l,c.childNodes=new I;var p=c.attributes=new Q;return p._ownerElement=c,c},createDocumentFragment:function(){var l=new te;return l.ownerDocument=this,l.childNodes=new I,l},createTextNode:function(l){var c=new pe;return c.ownerDocument=this,c.appendData(l),c},createComment:function(l){var c=new ve;return c.ownerDocument=this,c.appendData(l),c},createCDATASection:function(l){var c=new ye;return c.ownerDocument=this,c.appendData(l),c},createProcessingInstruction:function(l,c){var p=new Me;return p.ownerDocument=this,p.tagName=p.nodeName=p.target=l,p.nodeValue=p.data=c,p},createAttribute:function(l){var c=new qt;return c.ownerDocument=this,c.name=l,c.nodeName=l,c.localName=l,c.specified=!0,c},createEntityReference:function(l){var c=new Ee;return c.ownerDocument=this,c.nodeName=l,c},createElementNS:function(l,c){var p=new ht,w=c.split(":"),O=p.attributes=new Q;return p.childNodes=new I,p.ownerDocument=this,p.nodeName=c,p.tagName=c,p.namespaceURI=l,w.length==2?(p.prefix=w[0],p.localName=w[1]):p.localName=c,O._ownerElement=p,p},createAttributeNS:function(l,c){var p=new qt,w=c.split(":");return p.ownerDocument=this,p.nodeName=c,p.name=c,p.namespaceURI=l,p.specified=!0,w.length==2?(p.prefix=w[0],p.localName=w[1]):p.localName=c,p}},h(z,k);function ht(){this._nsMap={}}ht.prototype={nodeType:m,hasAttribute:function(l){return this.getAttributeNode(l)!=null},getAttribute:function(l){var c=this.getAttributeNode(l);return c&&c.value||""},getAttributeNode:function(l){return this.attributes.getNamedItem(l)},setAttribute:function(l,c){var p=this.ownerDocument.createAttribute(l);p.value=p.nodeValue=""+c,this.setAttributeNode(p)},removeAttribute:function(l){var c=this.getAttributeNode(l);c&&this.removeAttributeNode(c)},appendChild:function(l){return l.nodeType===T?this.insertBefore(l,null):ot(this,l)},setAttributeNode:function(l){return this.attributes.setNamedItem(l)},setAttributeNodeNS:function(l){return this.attributes.setNamedItemNS(l)},removeAttributeNode:function(l){return this.attributes.removeNamedItem(l.nodeName)},removeAttributeNS:function(l,c){var p=this.getAttributeNodeNS(l,c);p&&this.removeAttributeNode(p)},hasAttributeNS:function(l,c){return this.getAttributeNodeNS(l,c)!=null},getAttributeNS:function(l,c){var p=this.getAttributeNodeNS(l,c);return p&&p.value||""},setAttributeNS:function(l,c,p){var w=this.ownerDocument.createAttributeNS(l,c);w.value=w.nodeValue=""+p,this.setAttributeNode(w)},getAttributeNodeNS:function(l,c){return this.attributes.getNamedItemNS(l,c)},getElementsByTagName:function(l){return new F(this,function(c){var p=[];return Z(c,function(w){w!==c&&w.nodeType==m&&(l==="*"||w.tagName==l)&&p.push(w)}),p})},getElementsByTagNameNS:function(l,c){return new F(this,function(p){var w=[];return Z(p,function(O){O!==p&&O.nodeType===m&&(l==="*"||O.namespaceURI===l)&&(c==="*"||O.localName==c)&&w.push(O)}),w})}},z.prototype.getElementsByTagName=ht.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=ht.prototype.getElementsByTagNameNS,h(ht,k);function qt(){}qt.prototype.nodeType=g,h(qt,k);function Ft(){}Ft.prototype={data:"",substringData:function(l,c){return this.data.substring(l,l+c)},appendData:function(l){l=this.data+l,this.nodeValue=this.data=l,this.length=l.length},insertData:function(l,c){this.replaceData(l,0,c)},appendChild:function(l){throw new Error(B[v])},deleteData:function(l,c){this.replaceData(l,c,"")},replaceData:function(l,c,p){var w=this.data.substring(0,l),O=this.data.substring(l+c);p=w+p+O,this.nodeValue=this.data=p,this.length=p.length}},h(Ft,k);function pe(){}pe.prototype={nodeName:"#text",nodeType:y,splitText:function(l){var c=this.data,p=c.substring(l);c=c.substring(0,l),this.data=this.nodeValue=c,this.length=c.length;var w=this.ownerDocument.createTextNode(p);return this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling),w}},h(pe,Ft);function ve(){}ve.prototype={nodeName:"#comment",nodeType:M},h(ve,Ft);function ye(){}ye.prototype={nodeName:"#cdata-section",nodeType:E},h(ye,Ft);function _e(){}_e.prototype.nodeType=N,h(_e,k);function yr(){}yr.prototype.nodeType=S,h(yr,k);function He(){}He.prototype.nodeType=_,h(He,k);function Ee(){}Ee.prototype.nodeType=x,h(Ee,k);function te(){}te.prototype.nodeName="#document-fragment",te.prototype.nodeType=T,h(te,k);function Me(){}Me.prototype.nodeType=P,h(Me,k);function Xe(){}Xe.prototype.serializeToString=function(l,c,p){return Je.call(l,c,p)},k.prototype.toString=Je;function Je(l,c){var p=[],w=this.nodeType==9&&this.documentElement||this,O=w.prefix,J=w.namespaceURI;if(J&&O==null){var O=w.lookupPrefix(J);if(O==null)var ct=[{namespace:J,prefix:null}]}return Ut(this,p,l,c,ct),p.join("")}function Qe(l,c,p){var w=l.prefix||"",O=l.namespaceURI;if(!O||w==="xml"&&O===r.XML||O===r.XMLNS)return!1;for(var J=p.length;J--;){var ct=p[J];if(ct.prefix===w)return ct.namespace!==O}return!0}function we(l,c,p){l.push(" ",c,'="',p.replace(/[<>&"\t\n\r]/g,it),'"')}function Ut(l,c,p,w,O){if(O||(O=[]),w)if(l=w(l),l){if(typeof l=="string"){c.push(l);return}}else return;switch(l.nodeType){case m:var J=l.attributes,ct=J.length,Et=l.firstChild,xt=l.tagName;p=r.isHTML(l.namespaceURI)||p;var It=xt;if(!p&&!l.prefix&&l.namespaceURI){for(var Xt,jt=0;jt<J.length;jt++)if(J.item(jt).name==="xmlns"){Xt=J.item(jt).value;break}if(!Xt)for(var re=O.length-1;re>=0;re--){var ie=O[re];if(ie.prefix===""&&ie.namespace===l.namespaceURI){Xt=ie.namespace;break}}if(Xt!==l.namespaceURI)for(var re=O.length-1;re>=0;re--){var ie=O[re];if(ie.namespace===l.namespaceURI){ie.prefix&&(It=ie.prefix+":"+xt);break}}}c.push("<",It);for(var se=0;se<ct;se++){var Lt=J.item(se);Lt.prefix=="xmlns"?O.push({prefix:Lt.localName,namespace:Lt.value}):Lt.nodeName=="xmlns"&&O.push({prefix:"",namespace:Lt.value})}for(var se=0;se<ct;se++){var Lt=J.item(se);if(Qe(Lt,p,O)){var ae=Lt.prefix||"",Ye=Lt.namespaceURI;we(c,ae?"xmlns:"+ae:"xmlns",Ye),O.push({prefix:ae,namespace:Ye})}Ut(Lt,c,p,w,O)}if(xt===It&&Qe(l,p,O)){var ae=l.prefix||"",Ye=l.namespaceURI;we(c,ae?"xmlns:"+ae:"xmlns",Ye),O.push({prefix:ae,namespace:Ye})}if(Et||p&&!/^(?:meta|link|img|br|hr|input)$/i.test(xt)){if(c.push(">"),p&&/^script$/i.test(xt))for(;Et;)Et.data?c.push(Et.data):Ut(Et,c,p,w,O.slice()),Et=Et.nextSibling;else for(;Et;)Ut(Et,c,p,w,O.slice()),Et=Et.nextSibling;c.push("</",It,">")}else c.push("/>");return;case b:case T:for(var Et=l.firstChild;Et;)Ut(Et,c,p,w,O.slice()),Et=Et.nextSibling;return;case g:return we(c,l.name,l.value);case y:return c.push(l.data.replace(/[<&>]/g,it));case E:return c.push("<![CDATA[",l.data,"]]>");case M:return c.push("<!--",l.data,"-->");case N:var Ds=l.publicId,be=l.systemId;if(c.push("<!DOCTYPE ",l.name),Ds)c.push(" PUBLIC ",Ds),be&&be!="."&&c.push(" ",be),c.push(">");else if(be&&be!=".")c.push(" SYSTEM ",be,">");else{var xs=l.internalSubset;xs&&c.push(" [",xs,"]"),c.push(">")}return;case P:return c.push("<?",l.target," ",l.data,"?>");case x:return c.push("&",l.nodeName,";");default:c.push("??",l.nodeName)}}function Ae(l,c,p){var w;switch(c.nodeType){case m:w=c.cloneNode(!1),w.ownerDocument=l;case T:break;case g:p=!0;break}if(w||(w=c.cloneNode(!1)),w.ownerDocument=l,w.parentNode=null,p)for(var O=c.firstChild;O;)w.appendChild(Ae(l,O,p)),O=O.nextSibling;return w}function ee(l,c,p){var w=new c.constructor;for(var O in c)if(Object.prototype.hasOwnProperty.call(c,O)){var J=c[O];typeof J!="object"&&J!=w[O]&&(w[O]=J)}switch(c.childNodes&&(w.childNodes=new I),w.ownerDocument=l,w.nodeType){case m:var ct=c.attributes,xt=w.attributes=new Q,It=ct.length;xt._ownerElement=w;for(var Xt=0;Xt<It;Xt++)w.setAttributeNode(ee(l,ct.item(Xt),!0));break;case g:p=!0}if(p)for(var jt=c.firstChild;jt;)w.appendChild(ee(l,jt,p)),jt=jt.nextSibling;return w}function Ke(l,c,p){l[c]=p}try{if(Object.defineProperty){let l=function(c){switch(c.nodeType){case m:case T:var p=[];for(c=c.firstChild;c;)c.nodeType!==7&&c.nodeType!==8&&p.push(l(c)),c=c.nextSibling;return p.join("");default:return c.nodeValue}};Object.defineProperty(F.prototype,"length",{get:function(){return q(this),this.$$length}}),Object.defineProperty(k.prototype,"textContent",{get:function(){return l(this)},set:function(c){switch(this.nodeType){case m:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(c||String(c))&&this.appendChild(this.ownerDocument.createTextNode(c));break;default:this.data=c,this.value=c,this.nodeValue=c}}}),Ke=function(c,p,w){c["$$"+p]=w}}}catch{}return Bt.DocumentType=_e,Bt.DOMException=C,Bt.DOMImplementation=Y,Bt.Element=ht,Bt.Node=k,Bt.NodeList=I,Bt.XMLSerializer=Xe,Bt}var xe={},Ar={},pi;function ua(){return pi||(pi=1,(function(t){var e=tr().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Ar)),Ar}var er={},vi;function ha(){if(vi)return er;vi=1;var t=tr().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+r.source+"*(?::"+e.source+r.source+"*)?$"),s=0,a=1,o=2,n=3,u=4,h=5,f=6,m=7;function g(v,d){this.message=v,this.locator=d,Error.captureStackTrace&&Error.captureStackTrace(this,g)}g.prototype=new Error,g.prototype.name=g.name;function y(){}y.prototype={parse:function(v,d,A){var C=this.domBuilder;C.startDocument(),N(d,d={}),E(v,d,A,C,this.errorHandler),C.endDocument()}};function E(v,d,A,C,I){function F(ot){if(ot>65535){ot-=65536;var ht=55296+(ot>>10),qt=56320+(ot&1023);return String.fromCharCode(ht,qt)}else return String.fromCharCode(ot)}function q(ot){var ht=ot.slice(1,-1);return Object.hasOwnProperty.call(A,ht)?A[ht]:ht.charAt(0)==="#"?F(parseInt(ht.substr(1).replace("x","0x"))):(I.error("entity not found:"+ot),ot)}function Q(ot){if(ot>z){var ht=v.substring(z,ot).replace(/&#?\w+;/g,q);k&&j(z),C.characters(ht,0,ot-z),z=ot}}function j(ot,ht){for(;ot>=H&&(ht=Y.exec(v));)V=ht.index,H=V+ht[0].length,k.lineNumber++;k.columnNumber=ot-V+1}for(var V=0,H=0,Y=/.*(?:\r\n?|\n)|.*$/g,k=C.locator,it=[{currentNSMap:d}],Z={},z=0;;){try{var $=v.indexOf("<",z);if($<0){if(!v.substr(z).match(/^\s*$/)){var et=C.doc,nt=et.createTextNode(v.substr(z));et.appendChild(nt),C.currentElement=nt}return}switch($>z&&Q($),v.charAt($+1)){case"/":var tt=v.indexOf(">",$+3),W=v.substring($+2,tt).replace(/[ \t\n\r]+$/g,""),lt=it.pop();tt<0?(W=v.substring($+2).replace(/[\s<].*/,""),I.error("end tag name: "+W+" is not complete:"+lt.tagName),tt=$+1+W.length):W.match(/\s</)&&(W=W.replace(/[\s<].*/,""),I.error("end tag name: "+W+" maybe not complete"),tt=$+1+W.length);var U=lt.localNSMap,X=lt.tagName==W,rt=X||lt.tagName&&lt.tagName.toLowerCase()==W.toLowerCase();if(rt){if(C.endElement(lt.uri,lt.localName,W),U)for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&C.endPrefixMapping(K);X||I.fatalError("end tag name: "+W+" is not match the current start tagName:"+lt.tagName)}else it.push(lt);tt++;break;case"?":k&&j($),tt=S(v,$,C);break;case"!":k&&j($),tt=T(v,$,C,I);break;default:k&&j($);var ut=new D,vt=it[it.length-1].currentNSMap,tt=_(v,$,ut,vt,q,I),Ot=ut.length;if(!ut.closed&&b(v,tt,ut.tagName,Z)&&(ut.closed=!0,A.nbsp||I.warning("unclosed xml attribute")),k&&Ot){for(var Tt=x(k,{}),Dt=0;Dt<Ot;Dt++){var _t=ut[Dt];j(_t.offset),_t.locator=x(k,{})}C.locator=Tt,P(ut,C,vt)&&it.push(ut),C.locator=k}else P(ut,C,vt)&&it.push(ut);t.isHTML(ut.uri)&&!ut.closed?tt=M(v,tt,ut.tagName,q,C):tt++}}catch(ot){if(ot instanceof g)throw ot;I.error("element parse error: "+ot),tt=-1}tt>z?z=tt:Q(Math.max($,z)+1)}}function x(v,d){return d.lineNumber=v.lineNumber,d.columnNumber=v.columnNumber,d}function _(v,d,A,C,I,F){function q(k,it,Z){A.attributeNames.hasOwnProperty(k)&&F.fatalError("Attribute "+k+" redefined"),A.addValue(k,it.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,I),Z)}for(var Q,j,V=++d,H=s;;){var Y=v.charAt(V);switch(Y){case"=":if(H===a)Q=v.slice(d,V),H=n;else if(H===o)H=n;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(H===n||H===a)if(H===a&&(F.warning('attribute value must after "="'),Q=v.slice(d,V)),d=V+1,V=v.indexOf(Y,d),V>0)j=v.slice(d,V),q(Q,j,d-1),H=h;else throw new Error("attribute value no end '"+Y+"' match");else if(H==u)j=v.slice(d,V),q(Q,j,d),F.warning('attribute "'+Q+'" missed start quot('+Y+")!!"),d=V+1,H=h;else throw new Error('attribute value must after "="');break;case"/":switch(H){case s:A.setTagName(v.slice(d,V));case h:case f:case m:H=m,A.closed=!0;case u:case a:break;case o:A.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return F.error("unexpected end of input"),H==s&&A.setTagName(v.slice(d,V)),V;case">":switch(H){case s:A.setTagName(v.slice(d,V));case h:case f:case m:break;case u:case a:j=v.slice(d,V),j.slice(-1)==="/"&&(A.closed=!0,j=j.slice(0,-1));case o:H===o&&(j=Q),H==u?(F.warning('attribute "'+j+'" missed quot(")!'),q(Q,j,d)):((!t.isHTML(C[""])||!j.match(/^(?:disabled|checked|selected)$/i))&&F.warning('attribute "'+j+'" missed value!! "'+j+'" instead!!'),q(j,j,d));break;case n:throw new Error("attribute value missed!!")}return V;case"":Y=" ";default:if(Y<=" ")switch(H){case s:A.setTagName(v.slice(d,V)),H=f;break;case a:Q=v.slice(d,V),H=o;break;case u:var j=v.slice(d,V);F.warning('attribute "'+j+'" missed quot(")!!'),q(Q,j,d);case h:H=f;break}else switch(H){case o:A.tagName,(!t.isHTML(C[""])||!Q.match(/^(?:disabled|checked|selected)$/i))&&F.warning('attribute "'+Q+'" missed value!! "'+Q+'" instead2!!'),q(Q,Q,d),d=V,H=a;break;case h:F.warning('attribute space is required"'+Q+'"!!');case f:H=a,d=V;break;case n:H=u,d=V;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}V++}}function P(v,d,A){for(var C=v.tagName,I=null,Y=v.length;Y--;){var F=v[Y],q=F.qName,Q=F.value,k=q.indexOf(":");if(k>0)var j=F.prefix=q.slice(0,k),V=q.slice(k+1),H=j==="xmlns"&&V;else V=q,j=null,H=q==="xmlns"&&"";F.localName=V,H!==!1&&(I==null&&(I={},N(A,A={})),A[H]=I[H]=Q,F.uri=t.XMLNS,d.startPrefixMapping(H,Q))}for(var Y=v.length;Y--;){F=v[Y];var j=F.prefix;j&&(j==="xml"&&(F.uri=t.XML),j!=="xmlns"&&(F.uri=A[j||""]))}var k=C.indexOf(":");k>0?(j=v.prefix=C.slice(0,k),V=v.localName=C.slice(k+1)):(j=null,V=v.localName=C);var it=v.uri=A[j||""];if(d.startElement(it,V,C,v),v.closed){if(d.endElement(it,V,C),I)for(j in I)Object.prototype.hasOwnProperty.call(I,j)&&d.endPrefixMapping(j)}else return v.currentNSMap=A,v.localNSMap=I,!0}function M(v,d,A,C,I){if(/^(?:script|textarea)$/i.test(A)){var F=v.indexOf("</"+A+">",d),q=v.substring(d+1,F);if(/[&<]/.test(q))return/^script$/i.test(A)?(I.characters(q,0,q.length),F):(q=q.replace(/&#?\w+;/g,C),I.characters(q,0,q.length),F)}return d+1}function b(v,d,A,C){var I=C[A];return I==null&&(I=v.lastIndexOf("</"+A+">"),I<d&&(I=v.lastIndexOf("</"+A)),C[A]=I),I<d}function N(v,d){for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&(d[A]=v[A])}function T(v,d,A,C){var I=v.charAt(d+2);switch(I){case"-":if(v.charAt(d+3)==="-"){var F=v.indexOf("-->",d+4);return F>d?(A.comment(v,d+4,F-d-4),F+3):(C.error("Unclosed comment"),-1)}else return-1;default:if(v.substr(d+3,6)=="CDATA["){var F=v.indexOf("]]>",d+9);return A.startCDATA(),A.characters(v,d+9,F-d-9),A.endCDATA(),F+3}var q=B(v,d),Q=q.length;if(Q>1&&/!doctype/i.test(q[0][0])){var j=q[1][0],V=!1,H=!1;Q>3&&(/^public$/i.test(q[2][0])?(V=q[3][0],H=Q>4&&q[4][0]):/^system$/i.test(q[2][0])&&(H=q[3][0]));var Y=q[Q-1];return A.startDTD(j,V,H),A.endDTD(),Y.index+Y[0].length}}return-1}function S(v,d,A){var C=v.indexOf("?>",d);if(C){var I=v.substring(d,C).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return I?(I[0].length,A.processingInstruction(I[1],I[2]),C+2):-1}return-1}function D(){this.attributeNames={}}D.prototype={setTagName:function(v){if(!i.test(v))throw new Error("invalid tagName:"+v);this.tagName=v},addValue:function(v,d,A){if(!i.test(v))throw new Error("invalid attribute:"+v);this.attributeNames[v]=this.length,this[this.length++]={qName:v,value:d,offset:A}},length:0,getLocalName:function(v){return this[v].localName},getLocator:function(v){return this[v].locator},getQName:function(v){return this[v].qName},getURI:function(v){return this[v].uri},getValue:function(v){return this[v].value}};function B(v,d){var A,C=[],I=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(I.lastIndex=d,I.exec(v);A=I.exec(v);)if(C.push(A),A[1])return C}return er.XMLReader=y,er.ParseError=g,er}var yi;function la(){if(yi)return xe;yi=1;var t=tr(),e=di(),r=ua(),i=ha(),s=e.DOMImplementation,a=t.NAMESPACE,o=i.ParseError,n=i.XMLReader;function u(_){return _.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(_){this.options=_||{locator:{}}}h.prototype.parseFromString=function(_,P){var M=this.options,b=new n,N=M.domBuilder||new m,T=M.errorHandler,S=M.locator,D=M.xmlns||{},B=/\/x?html?$/.test(P),v=B?r.HTML_ENTITIES:r.XML_ENTITIES;S&&N.setDocumentLocator(S),b.errorHandler=f(T,N,S),b.domBuilder=M.domBuilder||N,B&&(D[""]=a.HTML),D.xml=D.xml||a.XML;var d=M.normalizeLineEndings||u;return _&&typeof _=="string"?b.parse(d(_),D,v):b.errorHandler.error("invalid doc source"),N.doc};function f(_,P,M){if(!_){if(P instanceof m)return P;_=P}var b={},N=_ instanceof Function;M=M||{};function T(S){var D=_[S];!D&&N&&(D=_.length==2?function(B){_(S,B)}:_),b[S]=D&&function(B){D("[xmldom "+S+"]	"+B+y(M))}||function(){}}return T("warning"),T("error"),T("fatalError"),b}function m(){this.cdata=!1}function g(_,P){P.lineNumber=_.lineNumber,P.columnNumber=_.columnNumber}m.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(_,P,M,b){var N=this.doc,T=N.createElementNS(_,M||P),S=b.length;x(this,T),this.currentElement=T,this.locator&&g(this.locator,T);for(var D=0;D<S;D++){var _=b.getURI(D),B=b.getValue(D),M=b.getQName(D),v=N.createAttributeNS(_,M);this.locator&&g(b.getLocator(D),v),v.value=v.nodeValue=B,T.setAttributeNode(v)}},endElement:function(_,P,M){var b=this.currentElement;b.tagName,this.currentElement=b.parentNode},startPrefixMapping:function(_,P){},endPrefixMapping:function(_){},processingInstruction:function(_,P){var M=this.doc.createProcessingInstruction(_,P);this.locator&&g(this.locator,M),x(this,M)},ignorableWhitespace:function(_,P,M){},characters:function(_,P,M){if(_=E.apply(this,arguments),_){if(this.cdata)var b=this.doc.createCDATASection(_);else var b=this.doc.createTextNode(_);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(_)&&this.doc.appendChild(b),this.locator&&g(this.locator,b)}},skippedEntity:function(_){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(_){(this.locator=_)&&(_.lineNumber=0)},comment:function(_,P,M){_=E.apply(this,arguments);var b=this.doc.createComment(_);this.locator&&g(this.locator,b),x(this,b)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(_,P,M){var b=this.doc.implementation;if(b&&b.createDocumentType){var N=b.createDocumentType(_,P,M);this.locator&&g(this.locator,N),x(this,N),this.doc.doctype=N}},warning:function(_){console.warn("[xmldom warning]	"+_,y(this.locator))},error:function(_){console.error("[xmldom error]	"+_,y(this.locator))},fatalError:function(_){throw new o(_,this.locator)}};function y(_){if(_)return`
@`+(_.systemId||"")+"#[line:"+_.lineNumber+",col:"+_.columnNumber+"]"}function E(_,P,M){return typeof _=="string"?_.substr(P,M):_.length>=P+M||P?new java.lang.String(_,P,M)+"":_}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(_){m.prototype[_]=function(){return null}});function x(_,P){_.currentElement?_.currentElement.appendChild(P):_.doc.appendChild(P)}return xe.__DOMHandler=m,xe.normalizeLineEndings=u,xe.DOMParser=h,xe}var _i;function ca(){if(_i)return De;_i=1;var t=di();return De.DOMImplementation=t.DOMImplementation,De.XMLSerializer=t.XMLSerializer,De.DOMParser=la().DOMParser,De}var Ei;function fa(){return Ei||(Ei=1,(function(t,e){var r=(function(){var i=/\s*/g,s=/^\s*|\s*$/g,a=/\s+/;function o(v){if(!v||!v.length)return 0;for(var d=0,A=0;d<v.length;d++)A=(A<<5)-A+v.charCodeAt(d)|0;return A}function n(v,d){return v.getElementsByTagName(d)}function u(v,d){return v.getAttribute(d)}function h(v,d){return parseFloat(u(v,d))}function f(v,d){var A=n(v,d);return A.length?A[0]:null}function m(v){return v.normalize&&v.normalize(),v}function g(v){for(var d=0,A=[];d<v.length;d++)A[d]=parseFloat(v[d]);return A}function y(v){return v&&m(v),v&&v.textContent||""}function E(v,d){var A={},C,I;for(I=0;I<d.length;I++)C=f(v,d[I]),C&&(A[d[I]]=y(C));return A}function x(v,d){for(var A in d)v[A]=d[A]}function _(v){return g(v.replace(i,"").split(","))}function P(v){for(var d=v.replace(s,"").split(a),A=[],C=0;C<d.length;C++)A.push(_(d[C]));return A}function M(v){var d=[h(v,"lon"),h(v,"lat")],A=f(v,"ele"),C=f(v,"gpxtpx:hr")||f(v,"hr"),I=f(v,"time"),F;return A&&(F=parseFloat(y(A)),isNaN(F)||d.push(F)),{coordinates:d,time:I?y(I):null,heartRate:C?parseFloat(y(C)):null}}function b(){return{type:"FeatureCollection",features:[]}}var N;if(typeof XMLSerializer<"u")N=new XMLSerializer;else{var T=typeof process=="object"&&!process.browser,S=typeof Titanium=="object";if(T||S)N=new(ca()).XMLSerializer;else throw new Error("Unable to initialize serializer")}function D(v){return v.xml!==void 0?v.xml:N.serializeToString(v)}var B={kml:function(v){for(var d=b(),A={},C={},I={},F=["Polygon","LineString","Point","Track","gx:Track"],q=n(v,"Placemark"),Q=n(v,"Style"),j=n(v,"StyleMap"),V=0;V<Q.length;V++){var H=o(D(Q[V])).toString(16);A["#"+u(Q[V],"id")]=H,C[H]=Q[V]}for(var Y=0;Y<j.length;Y++){A["#"+u(j[Y],"id")]=o(D(j[Y])).toString(16);for(var k=n(j[Y],"Pair"),it={},Z=0;Z<k.length;Z++)it[y(f(k[Z],"key"))]=y(f(k[Z],"styleUrl"));I["#"+u(j[Y],"id")]=it}for(var z=0;z<q.length;z++)d.features=d.features.concat(lt(q[z]));function $(U){var X,rt;return U=U||"",U.substr(0,1)==="#"&&(U=U.substr(1)),(U.length===6||U.length===3)&&(X=U),U.length===8&&(rt=parseInt(U.substr(0,2),16)/255,X="#"+U.substr(6,2)+U.substr(4,2)+U.substr(2,2)),[X,isNaN(rt)?void 0:rt]}function et(U){return g(U.split(" "))}function nt(U){var X=n(U,"coord"),rt=[],K=[];X.length===0&&(X=n(U,"gx:coord"));for(var ut=0;ut<X.length;ut++)rt.push(et(y(X[ut])));for(var vt=n(U,"when"),tt=0;tt<vt.length;tt++)K.push(y(vt[tt]));return{coords:rt,times:K}}function W(U){var X,rt,K,ut,vt,tt=[],Ot=[];if(f(U,"MultiGeometry"))return W(f(U,"MultiGeometry"));if(f(U,"MultiTrack"))return W(f(U,"MultiTrack"));if(f(U,"gx:MultiTrack"))return W(f(U,"gx:MultiTrack"));for(K=0;K<F.length;K++)if(rt=n(U,F[K]),rt){for(ut=0;ut<rt.length;ut++)if(X=rt[ut],F[K]==="Point")tt.push({type:"Point",coordinates:_(y(f(X,"coordinates")))});else if(F[K]==="LineString")tt.push({type:"LineString",coordinates:P(y(f(X,"coordinates")))});else if(F[K]==="Polygon"){var Tt=n(X,"LinearRing"),Dt=[];for(vt=0;vt<Tt.length;vt++)Dt.push(P(y(f(Tt[vt],"coordinates"))));tt.push({type:"Polygon",coordinates:Dt})}else if(F[K]==="Track"||F[K]==="gx:Track"){var _t=nt(X);tt.push({type:"LineString",coordinates:_t.coords}),_t.times.length&&Ot.push(_t.times)}}return{geoms:tt,coordTimes:Ot}}function lt(U){var X=W(U),rt,K={},ut=y(f(U,"name")),vt=y(f(U,"address")),tt=y(f(U,"styleUrl")),Ot=y(f(U,"description")),Tt=f(U,"TimeSpan"),Dt=f(U,"TimeStamp"),_t=f(U,"ExtendedData"),ot=f(U,"LineStyle"),ht=f(U,"PolyStyle"),qt=f(U,"visibility");if(!X.geoms.length)return[];if(ut&&(K.name=ut),vt&&(K.address=vt),tt){tt[0]!=="#"&&(tt="#"+tt),K.styleUrl=tt,A[tt]&&(K.styleHash=A[tt]),I[tt]&&(K.styleMapHash=I[tt],K.styleHash=A[I[tt].normal]);var Ft=C[K.styleHash];if(Ft){ot||(ot=f(Ft,"LineStyle")),ht||(ht=f(Ft,"PolyStyle"));var pe=f(Ft,"IconStyle");if(pe){var ve=f(pe,"Icon");if(ve){var ye=y(f(ve,"href"));ye&&(K.icon=ye)}}}}if(Ot&&(K.description=Ot),Tt){var _e=y(f(Tt,"begin")),yr=y(f(Tt,"end"));K.timespan={begin:_e,end:yr}}if(Dt&&(K.timestamp=y(f(Dt,"when"))),ot){var He=$(y(f(ot,"color"))),Ee=He[0],te=He[1],Me=parseFloat(y(f(ot,"width")));Ee&&(K.stroke=Ee),isNaN(te)||(K["stroke-opacity"]=te),isNaN(Me)||(K["stroke-width"]=Me)}if(ht){var Xe=$(y(f(ht,"color"))),Je=Xe[0],Qe=Xe[1],we=y(f(ht,"fill")),Ut=y(f(ht,"outline"));Je&&(K.fill=Je),isNaN(Qe)||(K["fill-opacity"]=Qe),we&&(K["fill-opacity"]=we==="1"?K["fill-opacity"]||1:0),Ut&&(K["stroke-opacity"]=Ut==="1"?K["stroke-opacity"]||1:0)}if(_t){var Ae=n(_t,"Data"),ee=n(_t,"SimpleData");for(rt=0;rt<Ae.length;rt++)K[Ae[rt].getAttribute("name")]=y(f(Ae[rt],"value"));for(rt=0;rt<ee.length;rt++)K[ee[rt].getAttribute("name")]=y(ee[rt])}qt&&(K.visibility=y(qt)),X.coordTimes.length&&(K.coordTimes=X.coordTimes.length===1?X.coordTimes[0]:X.coordTimes);var Ke={type:"Feature",geometry:X.geoms.length===1?X.geoms[0]:{type:"GeometryCollection",geometries:X.geoms},properties:K};return u(U,"id")&&(Ke.id=u(U,"id")),[Ke]}return d},gpx:function(v){var d,A=n(v,"trk"),C=n(v,"rte"),I=n(v,"wpt"),F=b(),q;for(d=0;d<A.length;d++)q=V(A[d]),q&&F.features.push(q);for(d=0;d<C.length;d++)q=H(C[d]),q&&F.features.push(q);for(d=0;d<I.length;d++)F.features.push(Y(I[d]));function Q(Z,z){for(var $=0;$<z;$++)Z.push(null);return Z}function j(Z,z){var $=n(Z,z),et=[],nt=[],W=[],lt=$.length;if(lt<2)return{};for(var U=0;U<lt;U++){var X=M($[U]);et.push(X.coordinates),X.time&&nt.push(X.time),(X.heartRate||W.length)&&(W.length||Q(W,U),W.push(X.heartRate||null))}return{line:et,times:nt,heartRates:W}}function V(Z){for(var z=n(Z,"trkseg"),$=[],et=[],nt=[],W,lt=0;lt<z.length;lt++)if(W=j(z[lt],"trkpt"),W&&(W.line&&$.push(W.line),W.times&&W.times.length&&et.push(W.times),nt.length||W.heartRates&&W.heartRates.length)){if(!nt.length)for(var U=0;U<lt;U++)nt.push(Q([],$[U].length));W.heartRates&&W.heartRates.length?nt.push(W.heartRates):nt.push(Q([],W.line.length||0))}if($.length!==0){var X=it(Z);return x(X,k(f(Z,"extensions"))),et.length&&(X.coordTimes=$.length===1?et[0]:et),nt.length&&(X.heartRates=$.length===1?nt[0]:nt),{type:"Feature",properties:X,geometry:{type:$.length===1?"LineString":"MultiLineString",coordinates:$.length===1?$[0]:$}}}}function H(Z){var z=j(Z,"rtept");if(z.line){var $=it(Z);x($,k(f(Z,"extensions")));var et={type:"Feature",properties:$,geometry:{type:"LineString",coordinates:z.line}};return et}}function Y(Z){var z=it(Z);return x(z,E(Z,["sym"])),{type:"Feature",properties:z,geometry:{type:"Point",coordinates:M(Z).coordinates}}}function k(Z){var z={};if(Z){var $=f(Z,"line");if($){var et=y(f($,"color")),nt=parseFloat(y(f($,"opacity"))),W=parseFloat(y(f($,"width")));et&&(z.stroke=et),isNaN(nt)||(z["stroke-opacity"]=nt),isNaN(W)||(z["stroke-width"]=W*96/25.4)}}return z}function it(Z){var z=E(Z,["name","cmt","desc","type","time","keywords"]),$=n(Z,"link");$.length&&(z.links=[]);for(var et=0,nt;et<$.length;et++)nt={href:u($[et],"href")},x(nt,E($[et],["text","type"])),z.links.push(nt);return z}return F}};return B})();t.exports=r})(wr)),wr.exports}var Mi=fa();function ga(t){const e=[],r=t.split(/<\/kml>/i);for(const i of r){const s=i.trim();if(!s)continue;const a=s.match(/<\?xml[^?]*\?>/i),o=s.match(/<kml[^>]*>/i);if(o){const n=o.index??0;let u=s.slice(n)+"</kml>";a&&(a.index??0)<n&&(u=a[0]+`
`+u),e.push(u)}}return e}function ma(t,e){const i=new DOMParser().parseFromString(t,"text/xml"),s=i.querySelector("parsererror");if(s)return{features:[],errors:[{message:"Invalid XML: "+s.textContent}]};const a=Mi.kml(i);return a.features.length===0?{features:[],errors:[]}:{features:a.features.map((n,u)=>{var g;const h=n.properties??{},f=typeof h.name=="string"?h.name:void 0,m=typeof h.description=="string"?h.description:void 0;return{type:"Feature",id:((g=n.id)==null?void 0:g.toString())??`feature-${String(e+u)}`,geometry:n.geometry,properties:{...h,name:f,description:m}}}),errors:[]}}function da(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"kml"};try{const r=ga(e);r.length===0&&r.push(e);const i=[],s=[];for(let a=0;a<r.length;a++){const o=r[a];if(!o)continue;const n=ma(o,i.length);if(n.errors.length>0){const u=r.length>1?`Document ${String(a+1)}: `:"";s.push(...n.errors.map(h=>({message:u+h.message})))}else i.push(...n.features)}return i.length>0?{features:i,errors:s,detectedFormat:"kml",detectedProjection:"EPSG:4326"}:{features:[],errors:s.length>0?s:[{message:"No features found in KML"}]}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse KML"}]}}}function pa(t){return`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
${t.map((r,i)=>{const s=r.properties,a=s?s.name:void 0,o=typeof a=="string"?a:`Feature ${String(i+1)}`,n=r.geometry;let u="";if(n.type==="Point"){const[h,f,m]=n.coordinates;u=`<Point><coordinates>${String(h)},${String(f)}${m!==void 0?","+String(m):""}</coordinates></Point>`}else n.type==="LineString"?u=`<LineString><coordinates>${n.coordinates.map(f=>`${String(f[0])},${String(f[1])}${f[2]!==void 0?","+String(f[2]):""}`).join(" ")}</coordinates></LineString>`:n.type==="Polygon"&&(u=`<Polygon>${n.coordinates.map((f,m)=>{const g=f.map(E=>`${String(E[0])},${String(E[1])}${E[2]!==void 0?","+String(E[2]):""}`).join(" "),y=m===0?"outerBoundaryIs":"innerBoundaryIs";return`<${y}><LinearRing><coordinates>${g}</coordinates></LinearRing></${y}>`}).join("")}</Polygon>`);return`<Placemark><name>${va(o)}</name>${u}</Placemark>`}).join(`
`)}
</Document>
</kml>`}function va(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function ya(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<kml")?!1:/<kml/i.test(e)}const _a={name:"kml",parse:da,format:pa,detect:ya};function Ea(t){const e=[],r=t.split(/<\/gpx>/i);for(const i of r){const s=i.trim();if(!s)continue;const a=s.match(/<\?xml[^?]*\?>/i),o=s.match(/<gpx[^>]*>/i);if(o){const n=o.index??0;let u=s.slice(n)+"</gpx>";a&&(a.index??0)<n&&(u=a[0]+`
`+u),e.push(u)}}return e}function Ma(t,e){const i=new DOMParser().parseFromString(t,"text/xml"),s=i.querySelector("parsererror");if(s)return{features:[],errors:[{message:"Invalid XML: "+s.textContent}]};const a=Mi.gpx(i);return a.features.length===0?{features:[],errors:[]}:{features:a.features.map((n,u)=>{var g;const h=n.properties??{},f=typeof h.name=="string"?h.name:void 0,m=typeof h.desc=="string"?h.desc:void 0;return{type:"Feature",id:((g=n.id)==null?void 0:g.toString())??`feature-${String(e+u)}`,geometry:n.geometry,properties:{...h,name:f,description:m}}}),errors:[]}}function wa(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"gpx"};try{const r=Ea(e);r.length===0&&r.push(e);const i=[],s=[];for(let a=0;a<r.length;a++){const o=r[a];if(!o)continue;const n=Ma(o,i.length);if(n.errors.length>0){const u=r.length>1?`Document ${String(a+1)}: `:"";s.push(...n.errors.map(h=>({message:u+h.message})))}else i.push(...n.features)}return i.length>0?{features:i,errors:s,detectedFormat:"gpx",detectedProjection:"EPSG:4326"}:{features:[],errors:s.length>0?s:[{message:"No features found in GPX"}]}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse GPX"}]}}}function Aa(t){const e=[];for(const r of t){const i=r.properties,s=i?i.name:void 0,a=typeof s=="string"?s:"",o=r.geometry;if(o.type==="Point"){const[n,u,h]=o.coordinates;e.push(`<wpt lat="${String(u)}" lon="${String(n)}">${a?`<name>${br(a)}</name>`:""}${h!==void 0?`<ele>${String(h)}</ele>`:""}</wpt>`)}else if(o.type==="LineString"){const n=o.coordinates.map(u=>{const[h,f,m]=u;return`<trkpt lat="${String(f)}" lon="${String(h)}">${m!==void 0?`<ele>${String(m)}</ele>`:""}</trkpt>`}).join(`
        `);e.push(`<trk>${a?`<name>${br(a)}</name>`:""}<trkseg>
        ${n}
      </trkseg></trk>`)}else if(o.type==="MultiLineString"){const n=o.coordinates.map(u=>`<trkseg>
        ${u.map(f=>{const[m,g,y]=f;return`<trkpt lat="${String(g)}" lon="${String(m)}">${y!==void 0?`<ele>${String(y)}</ele>`:""}</trkpt>`}).join(`
        `)}
      </trkseg>`).join(`
      `);e.push(`<trk>${a?`<name>${br(a)}</name>`:""}${n}</trk>`)}}return`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="GeoFiddle" xmlns="http://www.topografix.com/GPX/1/1">
  ${e.join(`
  `)}
</gpx>`}function br(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function ba(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<gpx")?!1:/<gpx/i.test(e)}const Sa={name:"gpx",parse:wa,format:Aa,detect:ba};function Da(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Qt=1,Kt=2,ne=3,xa=4,Sr=5,wi=6378137,Pa=6356752314e-3,Ai=.0066943799901413165,Pe=484813681109536e-20,G=Math.PI/2,Ca=.16666666666666666,Na=.04722222222222222,Ga=.022156084656084655,R=1e-10,gt=.017453292519943295,wt=57.29577951308232,st=Math.PI/4,Ce=Math.PI*2,mt=3.14159265359,At={};At.greenwich=0,At.lisbon=-9.131906111111,At.paris=2.337229166667,At.bogota=-74.080916666667,At.madrid=-3.687938888889,At.rome=12.452333333333,At.bern=7.439583333333,At.jakarta=106.807719444444,At.ferro=-17.666666666667,At.brussels=4.367975,At.stockholm=18.058277777778,At.athens=23.7163375,At.oslo=10.722916666667;var Ta={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},bi=/[\s_\-\/\(\)]/g;function $t(t,e){if(t[e])return t[e];for(var r=Object.keys(t),i=e.toLowerCase().replace(bi,""),s=-1,a,o;++s<r.length;)if(a=r[s],o=a.toLowerCase().replace(bi,""),o===i)return t[a]}function Dr(t){var e={},r=t.split("+").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,u){var h=u.split("=");return h.push(!0),n[h[0].toLowerCase()]=h[1],n},{}),i,s,a,o={proj:"projName",datum:"datumCode",rf:function(n){e.rf=parseFloat(n)},lat_0:function(n){e.lat0=n*gt},lat_1:function(n){e.lat1=n*gt},lat_2:function(n){e.lat2=n*gt},lat_ts:function(n){e.lat_ts=n*gt},lon_0:function(n){e.long0=n*gt},lon_1:function(n){e.long1=n*gt},lon_2:function(n){e.long2=n*gt},alpha:function(n){e.alpha=parseFloat(n)*gt},gamma:function(n){e.rectified_grid_angle=parseFloat(n)*gt},lonc:function(n){e.longc=n*gt},x_0:function(n){e.x0=parseFloat(n)},y_0:function(n){e.y0=parseFloat(n)},k_0:function(n){e.k0=parseFloat(n)},k:function(n){e.k0=parseFloat(n)},a:function(n){e.a=parseFloat(n)},b:function(n){e.b=parseFloat(n)},r:function(n){e.a=e.b=parseFloat(n)},r_a:function(){e.R_A=!0},zone:function(n){e.zone=parseInt(n,10)},south:function(){e.utmSouth=!0},towgs84:function(n){e.datum_params=n.split(",").map(function(u){return parseFloat(u)})},to_meter:function(n){e.to_meter=parseFloat(n)},units:function(n){e.units=n;var u=$t(Ta,n);u&&(e.to_meter=u.to_meter)},from_greenwich:function(n){e.from_greenwich=n*gt},pm:function(n){var u=$t(At,n);e.from_greenwich=(u||parseFloat(n))*gt},nadgrids:function(n){n==="@null"?e.datumCode="none":e.nadgrids=n},axis:function(n){var u="ewnsud";n.length===3&&u.indexOf(n.substr(0,1))!==-1&&u.indexOf(n.substr(1,1))!==-1&&u.indexOf(n.substr(2,1))!==-1&&(e.axis=n)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(i in r)s=r[i],i in o?(a=o[i],typeof a=="function"?a(s):e[a]=s):e[i]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class Si{static getId(e){const r=e.find(i=>Array.isArray(i)&&i[0]==="ID");return r&&r.length>=3?{authority:r[1],code:parseInt(r[2],10)}:null}static convertUnit(e,r="unit"){if(!e||e.length<3)return{type:r,name:"unknown",conversion_factor:null};const i=e[1],s=parseFloat(e[2])||null,a=e.find(n=>Array.isArray(n)&&n[0]==="ID"),o=a?{authority:a[1],code:parseInt(a[2],10)}:null;return{type:r,name:i,conversion_factor:s,id:o}}static convertAxis(e){const r=e[1]||"Unknown";let i;const s=r.match(/^\((.)\)$/);if(s){const h=s[1].toUpperCase();if(h==="E")i="east";else if(h==="N")i="north";else if(h==="U")i="up";else throw new Error(`Unknown axis abbreviation: ${h}`)}else i=e[2]?e[2].toLowerCase():"unknown";const a=e.find(h=>Array.isArray(h)&&h[0]==="ORDER"),o=a?parseInt(a[1],10):null,n=e.find(h=>Array.isArray(h)&&(h[0]==="LENGTHUNIT"||h[0]==="ANGLEUNIT"||h[0]==="SCALEUNIT")),u=this.convertUnit(n);return{name:r,direction:i,unit:u,order:o}}static extractAxes(e){return e.filter(r=>Array.isArray(r)&&r[0]==="AXIS").map(r=>this.convertAxis(r)).sort((r,i)=>(r.order||0)-(i.order||0))}static convert(e,r={}){switch(e[0]){case"PROJCRS":r.type="ProjectedCRS",r.name=e[1],r.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,r.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const i=e.find(g=>Array.isArray(g)&&g[0]==="CS");i&&(r.coordinate_system={type:i[1],axis:this.extractAxes(e)});const s=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(s){const g=this.convertUnit(s);r.coordinate_system.unit=g}r.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":r.type="GeographicCRS",r.name=e[1];const a=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(a){const g=this.convert(a);a[0]==="ENSEMBLE"?r.datum_ensemble=g:r.datum=g;const y=e.find(E=>Array.isArray(E)&&E[0]==="PRIMEM");y&&y[1]!=="Greenwich"&&(g.prime_meridian={name:y[1],longitude:parseFloat(y[2])})}r.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},r.id=this.getId(e);break;case"DATUM":r.type="GeodeticReferenceFrame",r.name=e[1],r.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":r.type="DatumEnsemble",r.name=e[1],r.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const o=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");o&&(r.accuracy=parseFloat(o[1]));const n=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");n&&(r.ellipsoid=this.convert(n)),r.id=this.getId(e);break;case"ELLIPSOID":r.type="Ellipsoid",r.name=e[1],r.semi_major_axis=parseFloat(e[2]),r.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),r);break;case"CONVERSION":r.type="Conversion",r.name=e[1],r.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,r.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":r.type="Method",r.name=e[1],r.id=this.getId(e);break;case"PARAMETER":r.type="Parameter",r.name=e[1],r.value=parseFloat(e[2]),r.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),r.id=this.getId(e);break;case"BOUNDCRS":r.type="BoundCRS";const u=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(u){const g=u.find(y=>Array.isArray(y));r.source_crs=g?this.convert(g):null}const h=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(h){const g=h.find(y=>Array.isArray(y));r.target_crs=g?this.convert(g):null}const f=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");f?r.transformation=this.convert(f):r.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(r.type="Transformation",r.name=e[1],r.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,r.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),r.parameters.length===7){const g=r.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}r.id=this.getId(e);break;case"AXIS":r.coordinate_system||(r.coordinate_system={type:"unspecified",axis:[]}),r.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const m=this.convertUnit(e,"LinearUnit");r.coordinate_system&&r.coordinate_system.axis&&r.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=m)}),m.conversion_factor&&m.conversion_factor!==1&&r.semi_major_axis&&(r.semi_major_axis={value:r.semi_major_axis,unit:m});break;default:r.keyword=e[0];break}return r}}class Ia extends Si{static convert(e,r={}){return super.convert(e,r),r.coordinate_system&&r.coordinate_system.subtype==="Cartesian"&&delete r.coordinate_system,r.usage&&delete r.usage,r}}class Ra extends Si{static convert(e,r={}){super.convert(e,r);const i=e.find(a=>Array.isArray(a)&&a[0]==="CS");i&&(r.coordinate_system={subtype:i[1],axis:this.extractAxes(e)});const s=e.find(a=>Array.isArray(a)&&a[0]==="USAGE");if(s){const a=s.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),o=s.find(u=>Array.isArray(u)&&u[0]==="AREA"),n=s.find(u=>Array.isArray(u)&&u[0]==="BBOX");r.usage={},a&&(r.usage.scope=a[1]),o&&(r.usage.area=o[1]),n&&(r.usage.bbox=n.slice(1))}return r}}function Oa(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Fa(t){return(Oa(t)==="2019"?Ra:Ia).convert(t)}function La(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Ne=1,Di=2,xi=3,rr=4,Pi=5,xr=-1,Ba=/\s/,ka=/[A-Za-z]/,qa=/[A-Za-z84_]/,ir=/[,\]]/,Ci=/[\d\.E\-\+]/;function kt(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ne}kt.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==rr)for(;Ba.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ne:return this.neutral(t);case Di:return this.keyword(t);case rr:return this.quoted(t);case Pi:return this.afterquote(t);case xi:return this.number(t);case xr:return}},kt.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=rr;return}if(ir.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)},kt.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ne;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ne,this.currentObject=this.stack.pop(),this.currentObject||(this.state=xr);return}},kt.prototype.number=function(t){if(Ci.test(t)){this.word+=t;return}if(ir.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)},kt.prototype.quoted=function(t){if(t==='"'){this.state=Pi;return}this.word+=t},kt.prototype.keyword=function(t){if(qa.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ne;return}if(ir.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)},kt.prototype.neutral=function(t){if(ka.test(t)){this.word=t,this.state=Di;return}if(t==='"'){this.word="",this.state=rr;return}if(Ci.test(t)){this.word=t,this.state=xi;return}if(ir.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)},kt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===xr)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ua(t){var e=new kt(t);return e.output()}function Pr(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var i=e?{}:t,s=r.reduce(function(a,o){return oe(o,a),a},i);e&&(t[e]=s)}function oe(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},oe(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&oe(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&oe(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Pr(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Pr(e,r,t),e[r].type=r;return;default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return oe(t,e[r]);return Pr(e,r,t)}}var ja=.017453292519943295;function Nt(t){return t*ja}function Ni(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Nt(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Nt(t.lat0>0?90:-90),delete t.lat1)}function Gi(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Ti(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Ii(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Ti(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Ti(t.ellipsoid.semi_minor_axis))))}function sr(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(sr(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(r=>r.value)),e):(Object.keys(t).forEach(r=>{const i=t[r];if(i!==null)switch(r){case"name":if(e.srsCode)break;e.name=i,e.srsCode=i;break;case"type":i==="GeographicCRS"?e.projName="longlat":i==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":i.ellipsoid&&(e.ellps=i.ellipsoid.name,Ii(i,e)),i.prime_meridian&&(e.from_greenwich=i.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=i.name,Ii(i,e);break;case"prime_meridian":e.long0=(i.longitude||0)*Math.PI/180;break;case"coordinate_system":if(i.axis){if(e.axis=i.axis.map(s=>{const a=s.direction;if(a==="east")return"e";if(a==="north")return"n";if(a==="west")return"w";if(a==="south")return"s";throw new Error(`Unknown axis direction: ${a}`)}).join("")+"u",i.unit){const{units:s,to_meter:a}=Gi(i.unit);e.units=s,e.to_meter=a}else if(i.axis[0]&&i.axis[0].unit){const{units:s,to_meter:a}=Gi(i.axis[0].unit);e.units=s,e.to_meter=a}}break;case"id":i.authority&&i.code&&(e.title=i.authority+":"+i.code);break;case"conversion":i.method&&i.method.name&&(e.projName=i.method.name),i.parameters&&i.parameters.forEach(s=>{const a=s.name.toLowerCase().replace(/\s+/g,"_"),o=s.value;s.unit&&s.unit.conversion_factor?e[a]=o*s.unit.conversion_factor:s.unit==="degree"?e[a]=o*Math.PI/180:e[a]=o});break;case"unit":i.name&&(e.units=i.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),i.conversion_factor&&(e.to_meter=i.conversion_factor);break;case"base_crs":sr(i,e),e.datumCode=i.id?i.id.authority+"_"+i.id.code:i.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Ni(e),e)}var $a=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function za(t,e){var r=e[0],i=e[1];!(r in t)&&i in t&&(t[r]=t[i],e.length===3&&(t[r]=e[2](t[r])))}function Ri(t){for(var e=Object.keys(t),r=0,i=e.length;r<i;++r){var s=e[r];$a.indexOf(s)!==-1&&Va(t[s]),typeof t[s]=="object"&&Ri(t[s])}}function Va(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",i=0,s=t.AXIS.length;i<s;++i){var a=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];a[0].indexOf("north")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="north"?r+="n":a[0].indexOf("south")!==-1||(a[0]==="y"||a[0]==="lat")&&a[1]==="south"?r+="s":a[0].indexOf("east")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="east"?r+="e":(a[0].indexOf("west")!==-1||(a[0]==="x"||a[0]==="lon")&&a[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Nt(t.rectified_grid_angle));function n(f){var m=t.to_meter||1;return f*m}var u=function(f){return za(t,f)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Nt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Nt],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",Nt],["lat0","latitude_of_origin",Nt],["lat0","standard_parallel_1",Nt],["lat1","standard_parallel_1",Nt],["lat2","standard_parallel_2",Nt],["azimuth","Azimuth"],["alpha","azimuth",Nt],["srsCode","name"]];h.forEach(u),Ni(t)}function ar(t){if(typeof t=="object")return sr(t);const e=La(t);var r=Ua(t);if(e==="WKT2"){const a=Fa(r);return sr(a)}var i=r[0],s={};return oe(r,s),Ri(s),s[i]}function pt(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?pt[t]=Dr(arguments[1]):pt[t]=ar(arguments[1]):r&&typeof r=="object"&&!("projName"in r)?pt[t]=ar(arguments[1]):(pt[t]=r,r||delete pt[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(i){return Array.isArray(i)?pt.apply(e,i):pt(i)});if(typeof t=="string"){if(t in pt)return pt[t]}else"EPSG"in t?pt["EPSG:"+t.EPSG]=t:"ESRI"in t?pt["ESRI:"+t.ESRI]=t:"IAU2000"in t?pt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Da(pt);function Wa(t){return typeof t=="string"}function Ha(t){return t in pt}function Xa(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var Ja=["3857","900913","3785","102113"];function Qa(t){var e=$t(t,"authority");if(e){var r=$t(e,"epsg");return r&&Ja.indexOf(r)>-1}}function Ka(t){var e=$t(t,"extension");if(e)return $t(e,"proj4")}function Ya(t){return t[0]==="+"}function Za(t){if(Wa(t)){if(Ha(t))return pt[t];if(Xa(t)){var e=ar(t);if(Qa(e))return pt["EPSG:3857"];var r=Ka(e);return r?Dr(r):e}if(Ya(t))return Dr(t)}else return"projName"in t?t:ar(t)}function Oi(t,e){t=t||{};var r,i;if(!e)return t;for(i in e)r=e[i],r!==void 0&&(t[i]=r);return t}function Rt(t,e,r){var i=t*e;return r/Math.sqrt(1-i*i)}function Ge(t){return t<0?-1:1}function L(t,e){return e||Math.abs(t)<=mt?t:t-Ge(t)*Ce}function Gt(t,e,r){var i=t*r,s=.5*t;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(G-e))/i}function Te(t,e){for(var r=.5*t,i,s,a=G-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(a),s=G-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-a,a+=s,Math.abs(s)<=1e-10)return a;return-9999}function tn(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function en(t){var e=t.x,r=t.y;if(r*wt>90&&r*wt<-90&&e*wt>180&&e*wt<-180)return null;var i,s;if(Math.abs(Math.abs(r)-G)<=R)return null;if(this.sphere)i=this.x0+this.a*this.k0*L(e-this.long0,this.over),s=this.y0+this.a*this.k0*Math.log(Math.tan(st+.5*r));else{var a=Math.sin(r),o=Gt(this.e,r,a);i=this.x0+this.a*this.k0*L(e-this.long0,this.over),s=this.y0-this.a*this.k0*Math.log(o)}return t.x=i,t.y=s,t}function rn(t){var e=t.x-this.x0,r=t.y-this.y0,i,s;if(this.sphere)s=G-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var a=Math.exp(-r/(this.a*this.k0));if(s=Te(this.e,a),s===-9999)return null}return i=L(this.long0+e/(this.a*this.k0),this.over),t.x=i,t.y=s,t}var sn=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"],an={init:tn,forward:en,inverse:rn,names:sn};function nn(){}function Fi(t){return t}var Li=["longlat","identity"],on={init:nn,forward:Fi,inverse:Fi,names:Li},un=[an,on],Yt={},ue=[];function Bi(t,e){var r=ue.length;return t.names?(ue[r]=t,t.names.forEach(function(i){Yt[i.toLowerCase()]=r}),this):(console.log(e),!0)}function ki(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function hn(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Yt[e]<"u"&&ue[Yt[e]]||(e=ki(e),e in Yt&&ue[Yt[e]]))return ue[Yt[e]]}function ln(){un.forEach(Bi)}var cn={start:ln,add:Bi,get:hn},qi={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const fn=qi.WGS84;function gn(t,e,r,i){var s=t*t,a=e*e,o=(s-a)/s,n=0;i?(t*=1-o*(Ca+o*(Na+o*Ga)),s=t*t,o=0):n=Math.sqrt(o);var u=(s-a)/a;return{es:o,e:n,ep2:u}}function mn(t,e,r,i,s){if(!t){var a=$t(qi,i);a||(a=fn),t=a.a,e=a.b,r=a.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<R)&&(s=!0,e=t),{a:t,b:e,rf:r,sphere:s}}var nr={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var dn in nr){var Cr=nr[dn];Cr.datumName&&(nr[Cr.datumName]=Cr)}function pn(t,e,r,i,s,a,o){var n={};return t===void 0||t==="none"?n.datum_type=Sr:n.datum_type=xa,e&&(n.datum_params=e.map(parseFloat),(n.datum_params[0]!==0||n.datum_params[1]!==0||n.datum_params[2]!==0)&&(n.datum_type=Qt),n.datum_params.length>3&&(n.datum_params[3]!==0||n.datum_params[4]!==0||n.datum_params[5]!==0||n.datum_params[6]!==0)&&(n.datum_type=Kt,n.datum_params[3]*=Pe,n.datum_params[4]*=Pe,n.datum_params[5]*=Pe,n.datum_params[6]=n.datum_params[6]/1e6+1)),o&&(n.datum_type=ne,n.grids=o),n.a=r,n.b=i,n.es=s,n.ep2=a,n}var Nr={};function vn(t,e,r){return e instanceof ArrayBuffer?yn(t,e,r):{ready:_n(t,e)}}function yn(t,e,r){var i=!0;r!==void 0&&r.includeErrorFields===!1&&(i=!1);var s=new DataView(e),a=wn(s),o=An(s,a),n=bn(s,o,a,i),u={header:o,subgrids:n};return Nr[t]=u,u}async function _n(t,e){for(var r=[],i=await e.getImageCount(),s=i-1;s>=0;s--){var a=await e.getImage(s),o=await a.readRasters(),n=o,u=[a.getWidth(),a.getHeight()],h=a.getBoundingBox().map(Ui),f=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(Ui),m=h[0]+(u[0]-1)*f[0],g=h[3]-(u[1]-1)*f[1],y=n[0],E=n[1],x=[];for(let M=u[1]-1;M>=0;M--)for(let b=u[0]-1;b>=0;b--){var _=M*u[0]+b;x.push([-zt(E[_]),zt(y[_])])}r.push({del:f,lim:u,ll:[-m,g],cvs:x})}var P={header:{nSubgrids:i},subgrids:r};return Nr[t]=P,P}function En(t){if(t===void 0)return null;var e=t.split(",");return e.map(Mn)}function Mn(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Nr[t]||null,isNull:!1}}function Ui(t){return t*Math.PI/180}function zt(t){return t/3600*Math.PI/180}function wn(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function An(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Gr(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Gr(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function bn(t,e,r,i){for(var s=176,a=[],o=0;o<e.nSubgrids;o++){var n=Dn(t,s,r),u=xn(t,s,n,r,i),h=Math.round(1+(n.upperLongitude-n.lowerLongitude)/n.longitudeInterval),f=Math.round(1+(n.upperLatitude-n.lowerLatitude)/n.latitudeInterval);a.push({ll:[zt(n.lowerLongitude),zt(n.lowerLatitude)],del:[zt(n.longitudeInterval),zt(n.latitudeInterval)],lim:[h,f],count:n.gridNodeCount,cvs:Sn(u)});var m=16;i===!1&&(m=8),s+=176+n.gridNodeCount*m}return a}function Sn(t){return t.map(function(e){return[zt(e.longitudeShift),zt(e.latitudeShift)]})}function Dn(t,e,r){return{name:Gr(t,e+8,e+16).trim(),parent:Gr(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function xn(t,e,r,i,s){var a=e+176,o=16;s===!1&&(o=8);for(var n=[],u=0;u<r.gridNodeCount;u++){var h={latitudeShift:t.getFloat32(a+u*o,i),longitudeShift:t.getFloat32(a+u*o+4,i)};s!==!1&&(h.latitudeAccuracy=t.getFloat32(a+u*o+8,i),h.longitudeAccuracy=t.getFloat32(a+u*o+12,i)),n.push(h)}return n}function Pt(t,e){if(!(this instanceof Pt))return new Pt(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(h){if(h)throw h};var r=Za(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var i=Pt.projections.get(r.projName);if(!i){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var s=$t(nr,r.datumCode);s&&(r.datum_params=r.datum_params||(s.towgs84?s.towgs84.split(","):null),r.ellps=s.ellipse,r.datumName=s.datumName?s.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var a=mn(r.a,r.b,r.rf,r.ellps,r.sphere),o=gn(a.a,a.b,a.rf,r.R_A),n=En(r.nadgrids),u=r.datum||pn(r.datumCode,r.datum_params,a.a,a.b,o.es,o.ep2,n);Oi(this,r),Oi(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Pt.projections=cn,Pt.projections.start();function Pn(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Qt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Kt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function ji(t,e,r){var i=t.x,s=t.y,a=t.z?t.z:0,o,n,u,h;if(s<-G&&s>-1.001*G)s=-G;else if(s>G&&s<1.001*G)s=G;else{if(s<-G)return{x:-1/0,y:-1/0,z:t.z};if(s>G)return{x:1/0,y:1/0,z:t.z}}return i>Math.PI&&(i-=2*Math.PI),n=Math.sin(s),h=Math.cos(s),u=n*n,o=r/Math.sqrt(1-e*u),{x:(o+a)*h*Math.cos(i),y:(o+a)*h*Math.sin(i),z:(o*(1-e)+a)*n}}function $i(t,e,r,i){var s=1e-12,a=s*s,o=30,n,u,h,f,m,g,y,E,x,_,P,M,b,N=t.x,T=t.y,S=t.z?t.z:0,D,B,v;if(n=Math.sqrt(N*N+T*T),u=Math.sqrt(N*N+T*T+S*S),n/r<s){if(D=0,u/r<s)return B=G,v=-i,{x:t.x,y:t.y,z:t.z}}else D=Math.atan2(T,N);h=S/u,f=n/u,m=1/Math.sqrt(1-e*(2-e)*f*f),E=f*(1-e)*m,x=h*m,b=0;do b++,y=r/Math.sqrt(1-e*x*x),v=n*E+S*x-y*(1-e*x*x),g=e*y/(y+v),m=1/Math.sqrt(1-g*(2-g)*f*f),_=f*(1-g)*m,P=h*m,M=P*E-_*x,E=_,x=P;while(M*M>a&&b<o);return B=Math.atan(P/Math.abs(_)),{x:D,y:B,z:v}}function Cn(t,e,r){if(e===Qt)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===Kt){var i=r[0],s=r[1],a=r[2],o=r[3],n=r[4],u=r[5],h=r[6];return{x:h*(t.x-u*t.y+n*t.z)+i,y:h*(u*t.x+t.y-o*t.z)+s,z:h*(-n*t.x+o*t.y+t.z)+a}}}function Nn(t,e,r){if(e===Qt)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===Kt){var i=r[0],s=r[1],a=r[2],o=r[3],n=r[4],u=r[5],h=r[6],f=(t.x-i)/h,m=(t.y-s)/h,g=(t.z-a)/h;return{x:f+u*m-n*g,y:-u*f+m+o*g,z:n*f-o*m+g}}}function or(t){return t===Qt||t===Kt}function Gn(t,e,r){if(Pn(t,e)||t.datum_type===Sr||e.datum_type===Sr)return r;var i=t.a,s=t.es;if(t.datum_type===ne){var a=zi(t,!1,r);if(a!==0)return;i=wi,s=Ai}var o=e.a,n=e.b,u=e.es;if(e.datum_type===ne&&(o=wi,n=Pa,u=Ai),s===u&&i===o&&!or(t.datum_type)&&!or(e.datum_type))return r;if(r=ji(r,s,i),or(t.datum_type)&&(r=Cn(r,t.datum_type,t.datum_params)),or(e.datum_type)&&(r=Nn(r,e.datum_type,e.datum_params)),r=$i(r,u,o,n),e.datum_type===ne){var h=zi(e,!0,r);if(h!==0)return}return r}function zi(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-r.x,y:r.y},s={x:Number.NaN,y:Number.NaN},a=[];t:for(var o=0;o<t.grids.length;o++){var n=t.grids[o];if(a.push(n.name),n.isNull){s=i;break}if(n.grid===null){if(n.mandatory)return console.log("Unable to find mandatory grid '"+n.name+"'"),-1;continue}for(var u=n.grid.subgrids,h=0,f=u.length;h<f;h++){var m=u[h],g=(Math.abs(m.del[1])+Math.abs(m.del[0]))/1e4,y=m.ll[0]-g,E=m.ll[1]-g,x=m.ll[0]+(m.lim[0]-1)*m.del[0]+g,_=m.ll[1]+(m.lim[1]-1)*m.del[1]+g;if(!(E>i.y||y>i.x||_<i.y||x<i.x)&&(s=Tn(i,e,m),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*wt+" "+i.y*wt+" tried: '"+a+"'"),-1):(r.x=-s.x,r.y=s.y,0)}function Tn(t,e,r){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var s={x:t.x,y:t.y};s.x-=r.ll[0],s.y-=r.ll[1],s.x=L(s.x-Math.PI)+Math.PI;var a=Vi(s,r);if(e){if(isNaN(a.x))return i;a.x=s.x-a.x,a.y=s.y-a.y;var o=9,n=1e-12,u,h;do{if(h=Vi(a,r),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:s.x-(h.x+a.x),y:s.y-(h.y+a.y)},a.x+=u.x,a.y+=u.y}while(o--&&Math.abs(u.x)>n&&Math.abs(u.y)>n);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=L(a.x+r.ll[0]),i.y=a.y+r.ll[1]}else isNaN(a.x)||(i.x=t.x+a.x,i.y=t.y+a.y);return i}function Vi(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},i={x:Math.floor(r.x),y:Math.floor(r.y)},s={x:r.x-1*i.x,y:r.y-1*i.y},a={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return a;o=i.y*e.lim[0]+i.x;var n={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var u={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var f={x:e.cvs[o][0],y:e.cvs[o][1]},m=s.x*s.y,g=s.x*(1-s.y),y=(1-s.x)*(1-s.y),E=(1-s.x)*s.y;return a.x=y*n.x+g*u.x+E*f.x+m*h.x,a.y=y*n.y+g*u.y+E*f.y+m*h.y,a}function Wi(t,e,r){var i=r.x,s=r.y,a=r.z||0,o,n,u,h={};for(u=0;u<3;u++)if(!(e&&u===2&&r.z===void 0))switch(u===0?(o=i,"ew".indexOf(t.axis[u])!==-1?n="x":n="y"):u===1?(o=s,"ns".indexOf(t.axis[u])!==-1?n="y":n="x"):(o=a,n="z"),t.axis[u]){case"e":h[n]=o;break;case"w":h[n]=-o;break;case"n":h[n]=o;break;case"s":h[n]=-o;break;case"u":r[n]!==void 0&&(h.z=o);break;case"d":r[n]!==void 0&&(h.z=-o);break;default:return null}return h}function Hi(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function In(t){Xi(t.x),Xi(t.y)}function Xi(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Rn(t,e){return(t.datum.datum_type===Qt||t.datum.datum_type===Kt||t.datum.datum_type===ne)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Qt||e.datum.datum_type===Kt||e.datum.datum_type===ne)&&t.datumCode!=="WGS84"}function ur(t,e,r,i){var s;Array.isArray(r)?r=Hi(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var a=r.z!==void 0;if(In(r),t.datum&&e.datum&&Rn(t,e)&&(s=new Pt("WGS84"),r=ur(t,s,r,i),t=s),i&&t.axis!=="enu"&&(r=Wi(t,!1,r)),t.projName==="longlat")r={x:r.x*gt,y:r.y*gt,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=Gn(t.datum,e.datum,r),!!r)return r=r,e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*wt,y:r.y*wt,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),i&&e.axis!=="enu"?Wi(e,!0,r):(r&&!a&&delete r.z,r)}var Ji=Pt("WGS84");function Tr(t,e,r,i){var s,a,o;return Array.isArray(r)?(s=ur(t,e,r,i)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(r.slice(3)):[s.x,s.y,r[2]].concat(r.slice(3)):[s.x,s.y].concat(r.slice(2)):[s.x,s.y]):(a=ur(t,e,r,i),o=Object.keys(r),o.length===2||o.forEach(function(n){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(n==="x"||n==="y"||n==="z")return}else if(n==="x"||n==="y")return;a[n]=r[n]}),a)}function hr(t){return t instanceof Pt?t:typeof t=="object"&&"oProj"in t?t.oProj:Pt(t)}function On(t,e,r){var i,s,a=!1,o;return typeof e>"u"?(s=hr(t),i=Ji,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,s=hr(t),i=Ji,a=!0),i||(i=hr(t)),s||(s=hr(e)),r?Tr(i,s,r):(o={forward:function(n,u){return Tr(i,s,n,u)},inverse:function(n,u){return Tr(s,i,n,u)}},a&&(o.oProj=s),o)}var Qi=6,Ki="AJSAJS",Yi="AFAFAF",he=65,bt=73,Ct=79,Ie=86,Re=90,Fn={forward:Zi,inverse:Ln,toPoint:ts};function Zi(t,e){return e=e||5,qn(Bn({lat:t[1],lon:t[0]}),e)}function Ln(t){var e=Rr(is(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ts(t){var e=Rr(is(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ir(t){return t*(Math.PI/180)}function es(t){return 180*(t/Math.PI)}function Bn(t){var e=t.lat,r=t.lon,i=6378137,s=.00669438,a=.9996,o,n,u,h,f,m,g,y=Ir(e),E=Ir(r),x,_;_=Math.floor((r+180)/6)+1,r===180&&(_=60),e>=56&&e<64&&r>=3&&r<12&&(_=32),e>=72&&e<84&&(r>=0&&r<9?_=31:r>=9&&r<21?_=33:r>=21&&r<33?_=35:r>=33&&r<42&&(_=37)),o=(_-1)*6-180+3,x=Ir(o),n=s/(1-s),u=i/Math.sqrt(1-s*Math.sin(y)*Math.sin(y)),h=Math.tan(y)*Math.tan(y),f=n*Math.cos(y)*Math.cos(y),m=Math.cos(y)*(E-x),g=i*((1-s/4-3*s*s/64-5*s*s*s/256)*y-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*y)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*y)-35*s*s*s/3072*Math.sin(6*y));var P=a*u*(m+(1-h+f)*m*m*m/6+(5-18*h+h*h+72*f-58*n)*m*m*m*m*m/120)+5e5,M=a*(g+u*Math.tan(y)*(m*m/2+(5-h+9*f+4*f*f)*m*m*m*m/24+(61-58*h+h*h+600*f-330*n)*m*m*m*m*m*m/720));return e<0&&(M+=1e7),{northing:Math.round(M),easting:Math.round(P),zoneNumber:_,zoneLetter:kn(e)}}function Rr(t){var e=t.northing,r=t.easting,i=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var a=.9996,o=6378137,n=.00669438,u,h=(1-Math.sqrt(1-n))/(1+Math.sqrt(1-n)),f,m,g,y,E,x,_,P,M,b=r-5e5,N=e;i<"N"&&(N-=1e7),_=(s-1)*6-180+3,u=n/(1-n),x=N/a,P=x/(o*(1-n/4-3*n*n/64-5*n*n*n/256)),M=P+(3*h/2-27*h*h*h/32)*Math.sin(2*P)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*P)+151*h*h*h/96*Math.sin(6*P),f=o/Math.sqrt(1-n*Math.sin(M)*Math.sin(M)),m=Math.tan(M)*Math.tan(M),g=u*Math.cos(M)*Math.cos(M),y=o*(1-n)/Math.pow(1-n*Math.sin(M)*Math.sin(M),1.5),E=b/(f*a);var T=M-f*Math.tan(M)/y*(E*E/2-(5+3*m+10*g-4*g*g-9*u)*E*E*E*E/24+(61+90*m+298*g+45*m*m-252*u-3*g*g)*E*E*E*E*E*E/720);T=es(T);var S=(E-(1+2*m+g)*E*E*E/6+(5-2*g+28*m-3*g*g+8*u+24*m*m)*E*E*E*E*E/120)/Math.cos(M);S=_+es(S);var D;if(t.accuracy){var B=Rr({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});D={top:B.lat,right:B.lon,bottom:T,left:S}}else D={lat:T,lon:S};return D}function kn(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function qn(t,e){var r="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Un(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+i.substr(i.length-5,e)}function Un(t,e,r){var i=rs(r),s=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return jn(s,a,i)}function rs(t){var e=t%Qi;return e===0&&(e=Qi),e}function jn(t,e,r){var i=r-1,s=Ki.charCodeAt(i),a=Yi.charCodeAt(i),o=s+t-1,n=a+e,u=!1;o>Re&&(o=o-Re+he-1,u=!0),(o===bt||s<bt&&o>bt||(o>bt||s<bt)&&u)&&o++,(o===Ct||s<Ct&&o>Ct||(o>Ct||s<Ct)&&u)&&(o++,o===bt&&o++),o>Re&&(o=o-Re+he-1),n>Ie?(n=n-Ie+he-1,u=!0):u=!1,(n===bt||a<bt&&n>bt||(n>bt||a<bt)&&u)&&n++,(n===Ct||a<Ct&&n>Ct||(n>Ct||a<Ct)&&u)&&(n++,n===bt&&n++),n>Ie&&(n=n-Ie+he-1);var h=String.fromCharCode(o)+String.fromCharCode(n);return h}function is(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,i="",s,a=0;!/[A-Z]/.test(s=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;i+=s,a++}var o=parseInt(i,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+t;var n=t.charAt(a++);if(n<="A"||n==="B"||n==="Y"||n>="Z"||n==="I"||n==="O")throw"MGRSPoint zone letter "+n+" not handled: "+t;r=t.substring(a,a+=2);for(var u=rs(o),h=$n(r.charAt(0),u),f=zn(r.charAt(1),u);f<Vn(n);)f+=2e6;var m=e-a;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var g=m/2,y=0,E=0,x,_,P,M,b;return g>0&&(x=1e5/Math.pow(10,g),_=t.substring(a,a+g),y=parseFloat(_)*x,P=t.substring(a+g),E=parseFloat(P)*x),M=y+h,b=E+f,{easting:M,northing:b,zoneLetter:n,zoneNumber:o,accuracy:x}}function $n(t,e){for(var r=Ki.charCodeAt(e-1),i=1e5,s=!1;r!==t.charCodeAt(0);){if(r++,r===bt&&r++,r===Ct&&r++,r>Re){if(s)throw"Bad character: "+t;r=he,s=!0}i+=1e5}return i}function zn(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=Yi.charCodeAt(e-1),i=0,s=!1;r!==t.charCodeAt(0);){if(r++,r===bt&&r++,r===Ct&&r++,r>Ie){if(s)throw"Bad character: "+t;r=he,s=!0}i+=1e5}return i}function Vn(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function le(t,e,r){if(!(this instanceof le))return new le(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var i=t.split(",");this.x=parseFloat(i[0]),this.y=parseFloat(i[1]),this.z=parseFloat(i[2])||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}le.fromMGRS=function(t){return new le(ts(t))},le.prototype.toMGRS=function(t){return Zi([this.x,this.y],t)};var Wn=1,Hn=.25,ss=.046875,as=.01953125,ns=.01068115234375,Xn=.75,Jn=.46875,Qn=.013020833333333334,Kn=.007120768229166667,Yn=.3645833333333333,Zn=.005696614583333333,to=.3076171875;function Or(t){var e=[];e[0]=Wn-t*(Hn+t*(ss+t*(as+t*ns))),e[1]=t*(Xn-t*(ss+t*(as+t*ns)));var r=t*t;return e[2]=r*(Jn-t*(Qn+t*Kn)),r*=t,e[3]=r*(Yn-t*Zn),e[4]=r*t*to,e}function ce(t,e,r,i){return r*=e,e*=e,i[0]*t-r*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var eo=20;function Fr(t,e,r){for(var i=1/(1-e),s=t,a=eo;a;--a){var o=Math.sin(s),n=1-e*o*o;if(n=(ce(s,o,Math.cos(s),r)-t)*(n*Math.sqrt(n))*i,s-=n,Math.abs(n)<R)return s}return s}function ro(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Or(this.es),this.ml0=ce(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function io(t){var e=t.x,r=t.y,i=L(e-this.long0,this.over),s,a,o,n=Math.sin(r),u=Math.cos(r);if(this.es){var f=u*i,m=Math.pow(f,2),g=this.ep2*Math.pow(u,2),y=Math.pow(g,2),E=Math.abs(u)>R?Math.tan(r):0,x=Math.pow(E,2),_=Math.pow(x,2);s=1-this.es*Math.pow(n,2),f=f/Math.sqrt(s);var P=ce(r,n,u,this.en);a=this.a*(this.k0*f*(1+m/6*(1-x+g+m/20*(5-18*x+_+14*g-58*x*g+m/42*(61+179*_-_*x-479*x)))))+this.x0,o=this.a*(this.k0*(P-this.ml0+n*i*f/2*(1+m/12*(5-x+9*g+4*y+m/30*(61+_-58*x+270*g-330*x*g+m/56*(1385+543*_-_*x-3111*x))))))+this.y0}else{var h=u*Math.sin(i);if(Math.abs(Math.abs(h)-1)<R)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=u*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>R)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=a,t.y=o,t}function so(t){var e,r,i,s,a=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,r=Fr(e,this.es,this.en),Math.abs(r)<G){var m=Math.sin(r),g=Math.cos(r),y=Math.abs(g)>R?Math.tan(r):0,E=this.ep2*Math.pow(g,2),x=Math.pow(E,2),_=Math.pow(y,2),P=Math.pow(_,2);e=1-this.es*Math.pow(m,2);var M=a*Math.sqrt(e)/this.k0,b=Math.pow(M,2);e=e*y,i=r-e*b/(1-this.es)*.5*(1-b/12*(5+3*_-9*E*_+E-4*x-b/30*(61+90*_-252*E*_+45*P+46*E-b/56*(1385+3633*_+4095*P+1574*P*_)))),s=L(this.long0+M*(1-b/6*(1+2*_+E-b/20*(5+28*_+24*P+8*E*_+6*E-b/42*(61+662*_+1320*P+720*P*_))))/g,this.over)}else i=G*Ge(o),s=0;else{var n=Math.exp(a/this.k0),u=.5*(n-1/n),h=this.lat0+o/this.k0,f=Math.cos(h);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(u,2))),i=Math.asin(e),o<0&&(i=-i),u===0&&f===0?s=0:s=L(Math.atan2(u,f)+this.long0,this.over)}return t.x=s,t.y=i,t}var ao=["Fast_Transverse_Mercator","Fast Transverse Mercator"],lr={init:ro,forward:io,inverse:so,names:ao};function os(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function St(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),i=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function no(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function oo(t){var e=Math.abs(t);return e=no(e*(1+e/(St(1,e)+1))),t<0?-e:e}function Lr(t,e){for(var r=2*Math.cos(2*e),i=t.length-1,s=t[i],a=0,o;--i>=0;)o=-a+r*s+t[i],a=s,s=o;return e+o*Math.sin(2*e)}function uo(t,e){for(var r=2*Math.cos(e),i=t.length-1,s=t[i],a=0,o;--i>=0;)o=-a+r*s+t[i],a=s,s=o;return Math.sin(e)*o}function ho(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function us(t,e,r){for(var i=Math.sin(e),s=Math.cos(e),a=os(r),o=ho(r),n=2*s*o,u=-2*i*a,h=t.length-1,f=t[h],m=0,g=0,y=0,E,x;--h>=0;)E=g,x=m,g=f,m=y,f=-E+n*g-u*m+t[h],y=-x+u*g+n*m;return n=i*o,u=s*a,[n*f-u*y,n*y+u*f]}function lo(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(lr.init.apply(this),this.forward=lr.forward,this.inverse=lr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=Lr(this.cbg,this.lat0);this.Zb=-this.Qn*(i+uo(this.gtu,2*i))}function co(t){var e=L(t.x-this.long0,this.over),r=t.y;r=Lr(this.cbg,r);var i=Math.sin(r),s=Math.cos(r),a=Math.sin(e),o=Math.cos(e);r=Math.atan2(i,o*s),e=Math.atan2(a*s,St(i,s*o)),e=oo(Math.tan(e));var n=us(this.gtu,2*r,2*e);r=r+n[0],e=e+n[1];var u,h;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*r+this.Zb)+this.y0):(u=1/0,h=1/0),t.x=u,t.y=h,t}function fo(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var i,s;if(Math.abs(e)<=2.623395162778){var a=us(this.utg,2*r,2*e);r=r+a[0],e=e+a[1],e=Math.atan(os(e));var o=Math.sin(r),n=Math.cos(r),u=Math.sin(e),h=Math.cos(e);r=Math.atan2(o*h,St(u,h*n)),e=Math.atan2(u,h*n),i=L(e+this.long0,this.over),s=Lr(this.cgb,r)}else i=1/0,s=1/0;return t.x=i,t.y=s,t}var go=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],cr={init:lo,forward:co,inverse:fo,names:go};function mo(t,e){if(t===void 0){if(t=Math.floor((L(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var po="etmerc";function vo(){var t=mo(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*gt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,cr.init.apply(this),this.forward=cr.forward,this.inverse=cr.inverse}var yo=["Universal Transverse Mercator System","utm"],_o={init:vo,names:yo,dependsOn:po};function Br(t,e){return Math.pow((1-t)/(1+t),e)}var Eo=20;function Mo(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+st)/(Math.pow(Math.tan(.5*this.lat0+st),this.C)*Br(this.e*t,this.ratexp))}function wo(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+st),this.C)*Br(this.e*Math.sin(r),this.ratexp))-G,t.x=this.C*e,t}function Ao(t){for(var e=1e-14,r=t.x/this.C,i=t.y,s=Math.pow(Math.tan(.5*i+st)/this.K,1/this.C),a=Eo;a>0&&(i=2*Math.atan(s*Br(this.e*Math.sin(t.y),-.5*this.e))-G,!(Math.abs(i-t.y)<e));--a)t.y=i;return a?(t.x=r,t.y=i,t):null}var kr={init:Mo,forward:wo,inverse:Ao};function bo(){kr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function So(t){var e,r,i,s;return t.x=L(t.x-this.long0,this.over),kr.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),i=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*i),t.x=s*r*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*r*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Do(t){var e,r,i,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=St(t.x,t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),r=Math.cos(o),s=Math.asin(r*this.sinc0+t.y*e*this.cosc0/a),i=Math.atan2(t.x*e,a*this.cosc0*r-t.y*this.sinc0*e)}else s=this.phic0,i=0;return t.x=i,t.y=s,kr.inverse.apply(this,[t]),t.x=L(t.x+this.long0,this.over),t}var xo=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],Po={init:bo,forward:So,inverse:Do,names:xo};function qr(t,e,r){return e*=r,Math.tan(.5*(G+t))*Math.pow((1-e)/(1+e),.5*r)}function Co(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=R&&(this.k0=.5*(1+Ge(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=R&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=R&&Math.abs(Math.cos(this.lat_ts))>R&&(this.k0=.5*this.cons*Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Gt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Rt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(qr(this.lat0,this.sinlat0,this.e))-G,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function No(t){var e=t.x,r=t.y,i=Math.sin(r),s=Math.cos(r),a,o,n,u,h,f,m=L(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=R&&Math.abs(r+this.lat0)<=R?(t.x=NaN,t.y=NaN,t):this.sphere?(a=2*this.k0/(1+this.sinlat0*i+this.coslat0*s*Math.cos(m)),t.x=this.a*a*s*Math.sin(m)+this.x0,t.y=this.a*a*(this.coslat0*i-this.sinlat0*s*Math.cos(m))+this.y0,t):(o=2*Math.atan(qr(r,i,this.e))-G,u=Math.cos(o),n=Math.sin(o),Math.abs(this.coslat0)<=R?(h=Gt(this.e,r*this.con,this.con*i),f=2*this.a*this.k0*h/this.cons,t.x=this.x0+f*Math.sin(e-this.long0),t.y=this.y0-this.con*f*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<R?(a=2*this.a*this.k0/(1+u*Math.cos(m)),t.y=a*n):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*u*Math.cos(m))),t.y=a*(this.cosX0*n-this.sinX0*u*Math.cos(m))+this.y0),t.x=a*u*Math.sin(m)+this.x0,t))}function Go(t){t.x-=this.x0,t.y-=this.y0;var e,r,i,s,a,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var n=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,r=this.lat0,o<=R?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(n)*this.sinlat0+t.y*Math.sin(n)*this.coslat0/o),Math.abs(this.coslat0)<R?this.lat0>0?e=L(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=L(this.long0+Math.atan2(t.x,t.y),this.over):e=L(this.long0+Math.atan2(t.x*Math.sin(n),o*this.coslat0*Math.cos(n)-t.y*this.sinlat0*Math.sin(n)),this.over),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=R){if(o<=R)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),r=this.con*Te(this.e,i),e=this.con*L(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=R?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/o),e=L(this.long0+Math.atan2(t.x*Math.sin(s),o*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)),this.over)),r=-1*Te(this.e,Math.tan(.5*(G+a)));return t.x=e,t.y=r,t}var To=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],Io={init:Co,forward:No,inverse:Go,names:To,ssfn_:qr};function Ro(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,i=this.rf,s=1/i,a=2*s-Math.pow(s,2),o=this.e=Math.sqrt(a);this.R=this.k0*r*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+o*e)/(1-o*e));this.K=n-this.alpha*u+this.alpha*o/2*h}function Oo(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+r)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(a))),n=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(n))/(1-Math.sin(n)))+this.y0,t.x=this.R*o+this.x0,t}function Fo(t){for(var e=t.x-this.x0,r=t.y-this.y0,i=e/this.R,s=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),n=this.lambda0+o/this.alpha,u=0,h=a,f=-1e3,m=0;Math.abs(h-f)>1e-7;){if(++m>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),f=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=n,t.y=h,t}var Lo=["somerc"],Bo={init:Ro,forward:Oo,inverse:Fo,names:Lo},fe=1e-7;function ko(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1||e.indexOf(ki(r))!==-1}function qo(){var t,e,r,i,s,a,o,n,u,h,f=0,m,g=0,y=0,E=0,x=0,_=0,P=0;this.no_off=ko(this),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),M&&(P=this.alpha),b&&(f=this.rectified_grid_angle),M||b)g=this.longc;else if(y=this.long1,x=this.lat1,E=this.long2,_=this.lat2,Math.abs(x-_)<=fe||(t=Math.abs(x))<=fe||Math.abs(t-G)<=fe||Math.abs(Math.abs(this.lat0)-G)<=fe||Math.abs(Math.abs(_)-G)<=fe)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>R?(n=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*n*n,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/t,i=this.B*e/(r*Math.sqrt(t)),s=i*i-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(Gt(this.e,this.lat0,n),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=s=1),M||b?(M?(m=Math.asin(Math.sin(P)/i),b||(f=P)):(m=f,P=Math.asin(i*Math.sin(m))),this.lam0=g-Math.asin(.5*(s-1/s)*Math.tan(m))/this.B):(a=Math.pow(Gt(this.e,x,Math.sin(x)),this.B),o=Math.pow(Gt(this.e,_,Math.sin(_)),this.B),s=this.E/a,u=(o-a)/(o+a),h=this.E*this.E,h=(h-o*a)/(h+o*a),t=y-E,t<-Math.PI?E-=Ce:t>Math.PI&&(E+=Ce),this.lam0=L(.5*(y+E)-Math.atan(h*Math.tan(.5*this.B*(y-E))/u)/this.B,this.over),m=Math.atan(2*Math.sin(this.B*L(y-this.lam0,this.over))/(s-1/s)),f=P=Math.asin(i*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(P))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(st-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(st+s))}function Uo(t){var e={},r,i,s,a,o,n,u,h;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-G)>R){if(o=this.E/Math.pow(Gt(this.e,t.y,Math.sin(t.y)),this.B),n=1/o,r=.5*(o-n),i=.5*(o+n),a=Math.sin(this.B*t.x),s=(r*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(s)-1)<R)throw new Error;h=.5*this.ArB*Math.log((1-s)/(1+s)),n=Math.cos(this.B*t.x),Math.abs(n)<fe?u=this.A*t.x:u=this.ArB*Math.atan2(r*this.cosgam+a*this.singam,n)}else h=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=h):(u-=this.u_0,e.x=h*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function jo(t){var e,r,i,s,a,o,n,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*r),s=.5*(i-1/i),a=.5*(i+1/i),o=Math.sin(this.BrA*e),n=(o*this.cosgam+s*this.singam)/a,Math.abs(Math.abs(n)-1)<R)u.x=0,u.y=n<0?-G:G;else{if(u.y=this.E/Math.sqrt((1+n)/(1-n)),u.y=Te(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var $o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],zo={init:qo,forward:Uo,inverse:jo,names:$o};function Vo(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<R)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),i=Rt(this.e,e,r),s=Gt(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),n=Rt(this.e,a,o),u=Gt(this.e,this.lat2,a),h=Math.abs(Math.abs(this.lat0)-G)<R?0:Gt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>R?this.ns=Math.log(i/n)/Math.log(s/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Wo(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=R&&(r=Ge(r)*(G-2*R));var i=Math.abs(Math.abs(r)-G),s,a;if(i>R)s=Gt(this.e,r,Math.sin(r)),a=this.a*this.f0*Math.pow(s,this.ns);else{if(i=r*this.ns,i<=0)return null;a=0}var o=this.ns*L(e-this.long0,this.over);return t.x=this.k0*(a*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,t}function Ho(t){var e,r,i,s,a,o=(t.x-this.x0)/this.k0,n=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+n*n),r=1):(e=-Math.sqrt(o*o+n*n),r=-1);var u=0;if(e!==0&&(u=Math.atan2(r*o,r*n)),e!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(e/(this.a*this.f0),r),s=Te(this.e,i),s===-9999)return null}else s=-G;return a=L(u/this.ns+this.long0,this.over),t.x=a,t.y=s,t}var Xo=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],Jo={init:Vo,forward:Wo,inverse:Ho,names:Xo};function Qo(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Ko(t){var e,r,i,s,a,o,n,u=t.x,h=t.y,f=L(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-f*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),a=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(s)),o=this.n*a,n=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=n*Math.cos(o)/1,t.x=n*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Yo(t){var e,r,i,s,a,o,n,u,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x),s=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),r=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(e)),t.x=this.long0-r/this.alfa,n=e,u=0;var f=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-t.y)<1e-10&&(u=1),n=t.y,f+=1;while(u===0&&f<15);return f>=15?null:t}var Zo=["Krovak","krovak"],tu={init:Qo,forward:Ko,inverse:Yo,names:Zo};function Mt(t,e,r,i,s){return t*s-e*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)}function Oe(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Fe(t){return .375*t*(1+.25*t*(1+.46875*t))}function Le(t){return .05859375*t*t*(1+.75*t)}function Be(t){return t*t*t*(35/3072)}function Ur(t,e,r){var i=e*r;return t/Math.sqrt(1-i*i)}function Vt(t){return Math.abs(t)<G?t:t-Ge(t)*Math.PI}function fr(t,e,r,i,s){var a,o;a=t/e;for(var n=0;n<15;n++)if(o=(t-(e*a-r*Math.sin(2*a)+i*Math.sin(4*a)-s*Math.sin(6*a)))/(e-2*r*Math.cos(2*a)+4*i*Math.cos(4*a)-6*s*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function eu(){this.sphere||(this.e0=Oe(this.es),this.e1=Fe(this.es),this.e2=Le(this.es),this.e3=Be(this.es),this.ml0=this.a*Mt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ru(t){var e,r,i=t.x,s=t.y;if(i=L(i-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var a=Math.sin(s),o=Math.cos(s),n=Ur(this.a,this.e,a),u=Math.tan(s)*Math.tan(s),h=i*Math.cos(s),f=h*h,m=this.es*o*o/(1-this.es),g=this.a*Mt(this.e0,this.e1,this.e2,this.e3,s);e=n*h*(1-f*u*(1/6-(8-u+8*m)*f/120)),r=g-this.ml0+n*a/o*f*(.5+(5-u+6*m)*f/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function iu(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,i,s;if(this.sphere){var a=r+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+r,n=fr(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(n)-G)<=R)return t.x=this.long0,t.y=G,r<0&&(t.y*=-1),t;var u=Ur(this.a,this.e,Math.sin(n)),h=u*u*u/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(n),2),m=e*this.a/u,g=m*m;i=n-u*Math.tan(n)/h*m*m*(.5-(1+3*f)*m*m/24),s=m*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(n)}return t.x=L(s+this.long0,this.over),t.y=Vt(i),t}var su=["Cassini","Cassini_Soldner","cass"],au={init:eu,forward:ru,inverse:iu,names:su};function Wt(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var jr=1,$r=2,zr=3,gr=4;function nu(){var t=Math.abs(this.lat0);if(Math.abs(t-G)<R?this.mode=this.lat0<0?jr:$r:Math.abs(t)<R?this.mode=zr:this.mode=gr,this.es>0){var e;switch(this.qp=Wt(this.e,1),this.mmf=.5/(1-this.es),this.apa=du(this.es),this.mode){case $r:this.dd=1;break;case jr:this.dd=1;break;case zr:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case gr:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Wt(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===gr&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ou(t){var e,r,i,s,a,o,n,u,h,f,m=t.x,g=t.y;if(m=L(m-this.long0,this.over),this.sphere){if(a=Math.sin(g),f=Math.cos(g),i=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+f*i:1+this.sinph0*a+this.cosph0*f*i,r<=R)return null;r=Math.sqrt(2/r),e=r*f*Math.sin(m),r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<R)return null;r=st-g*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(m),r*=i}}else{switch(n=0,u=0,h=0,i=Math.cos(m),s=Math.sin(m),a=Math.sin(g),o=Wt(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(n=o/this.qp,u=Math.sqrt(1-n*n)),this.mode){case this.OBLIQ:h=1+this.sinb1*n+this.cosb1*u*i;break;case this.EQUIT:h=1+u*i;break;case this.N_POLE:h=G+g,o=this.qp-o;break;case this.S_POLE:h=g-G,o=this.qp+o;break}if(Math.abs(h)<R)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?r=this.ymf*h*(this.cosb1*n-this.sinb1*u*i):r=(h=Math.sqrt(2/(1+u*i)))*n*this.ymf,e=this.xmf*h*u*s;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*s,r=i*(this.mode===this.S_POLE?h:-h)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function uu(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,i,s,a,o,n,u,h;if(this.sphere){var f=0,m,g=0;if(m=Math.sqrt(e*e+r*r),s=m*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(s),f=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(m)<=R?0:Math.asin(r*g/m),e*=g,r=f*m;break;case this.OBLIQ:s=Math.abs(m)<=R?this.lat0:Math.asin(f*this.sinph0+r*g*this.cosph0/m),e*=g*this.cosph0,r=(f-Math.sin(s)*this.sinph0)*m;break;case this.N_POLE:r=-r,s=G-s;break;case this.S_POLE:s-=G;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,u=Math.sqrt(e*e+r*r),u<R)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*u/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=a*this.sinb1+r*o*this.cosb1/u,n=this.qp*h,r=u*this.cosb1*a-r*this.sinb1*o):(h=r*o/u,n=this.qp*h,r=u*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),n=e*e+r*r,!n)return t.x=this.long0,t.y=this.lat0,t;h=1-n/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(e,r),s=pu(Math.asin(h),this.apa)}return t.x=L(this.long0+i,this.over),t.y=s,t}var hu=.3333333333333333,lu=.17222222222222222,cu=.10257936507936508,fu=.06388888888888888,gu=.0664021164021164,mu=.016415012942191543;function du(t){var e,r=[];return r[0]=t*hu,e=t*t,r[0]+=e*lu,r[1]=e*fu,e*=t,r[0]+=e*cu,r[1]+=e*gu,r[2]=e*mu,r}function pu(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var vu=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],yu={init:nu,forward:ou,inverse:uu,names:vu,S_POLE:jr,N_POLE:$r,EQUIT:zr,OBLIQ:gr};function Ht(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function _u(){Math.abs(this.lat1+this.lat2)<R||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Rt(this.e3,this.sin_po,this.cos_po),this.qs1=Wt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Rt(this.e3,this.sin_po,this.cos_po),this.qs2=Wt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Wt(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>R?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Eu(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=Wt(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*L(e-this.long0,this.over),o=s*Math.sin(a)+this.x0,n=this.rh-s*Math.cos(a)+this.y0;return t.x=o,t.y=n,t}function Mu(t){var e,r,i,s,a,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),s=0,e!==0&&(s=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,r)),a=L(s/this.ns0+this.long0,this.over),t.x=a,t.y=o,t}function wu(t,e){var r,i,s,a,o,n=Ht(.5*e);if(t<R)return n;for(var u=t*t,h=1;h<=25;h++)if(r=Math.sin(n),i=Math.cos(n),s=t*r,a=1-s*s,o=.5*a*a/i*(e/(1-u)-r/a+.5/t*Math.log((1-s)/(1+s))),n=n+o,Math.abs(o)<=1e-7)return n;return null}var Au=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],bu={init:_u,forward:Eu,inverse:Mu,names:Au,phi1z:wu};function Su(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Du(t){var e,r,i,s,a,o,n,u,h=t.x,f=t.y;return i=L(h-this.long0,this.over),e=Math.sin(f),r=Math.cos(f),s=Math.cos(i),o=this.sin_p14*e+this.cos_p14*r*s,a=1,o>0||Math.abs(o)<=R?(n=this.x0+this.a*a*r*Math.sin(i)/o,u=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*r*s)/o):(n=this.x0+this.infinity_dist*r*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*s)),t.x=n,t.y=u,t}function xu(t){var e,r,i,s,a,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),r=Math.sin(s),i=Math.cos(s),o=Ht(i*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),a=L(this.long0+a,this.over)):(o=this.phic0,a=0),t.x=a,t.y=o,t}var Pu=["gnom"],Cu={init:Su,forward:Du,inverse:xu,names:Pu};function Nu(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*G:G;for(var i=Math.asin(.5*e),s,a,o,n,u=0;u<30;u++)if(a=Math.sin(i),o=Math.cos(i),n=t*a,s=Math.pow(1-n*n,2)/(2*o)*(e/(1-t*t)-a/(1-n*n)+.5/t*Math.log((1-n)/(1+n))),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function Gu(){this.sphere||(this.k0=Rt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Tu(t){var e=t.x,r=t.y,i,s,a=L(e-this.long0,this.over);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Wt(this.e,Math.sin(r));i=this.x0+this.a*this.k0*a,s=this.y0+this.a*o*.5/this.k0}return t.x=i,t.y=s,t}function Iu(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=L(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=Nu(this.e,2*t.y*this.k0/this.a),e=L(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=r,t}var Ru=["cea"],Ou={init:Gu,forward:Tu,inverse:Iu,names:Ru};function Fu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Lu(t){var e=t.x,r=t.y,i=L(e-this.long0,this.over),s=Vt(r-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*s,t}function Bu(t){var e=t.x,r=t.y;return t.x=L(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=Vt(this.lat0+(r-this.y0)/this.a),t}var ku=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"],qu={init:Fu,forward:Lu,inverse:Bu,names:ku},hs=20;function Uu(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Oe(this.es),this.e1=Fe(this.es),this.e2=Le(this.es),this.e3=Be(this.es),this.ml0=this.a*Mt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ju(t){var e=t.x,r=t.y,i,s,a,o=L(e-this.long0,this.over);if(a=o*Math.sin(r),this.sphere)Math.abs(r)<=R?(i=this.a*o,s=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(r),s=this.a*(Vt(r-this.lat0)+(1-Math.cos(a))/Math.tan(r)));else if(Math.abs(r)<=R)i=this.a*o,s=-1*this.ml0;else{var n=Ur(this.a,this.e,Math.sin(r))/Math.tan(r);i=n*Math.sin(a),s=this.a*Mt(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+n*(1-Math.cos(a))}return t.x=i+this.x0,t.y=s+this.y0,t}function $u(t){var e,r,i,s,a,o,n,u,h;if(i=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=R)e=L(i/this.a+this.long0,this.over),r=0;else{o=this.lat0+s/this.a,n=i*i/this.a/this.a+o*o,u=o;var f;for(a=hs;a;--a)if(f=Math.tan(u),h=-1*(o*(u*f+1)-u-.5*(u*u+n)*f)/((u-o)/f-1),u+=h,Math.abs(h)<=R){r=u;break}e=L(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(r),this.over)}else if(Math.abs(s+this.ml0)<=R)r=0,e=L(this.long0+i/this.a,this.over);else{o=(this.ml0+s)/this.a,n=i*i/this.a/this.a+o*o,u=o;var m,g,y,E,x;for(a=hs;a;--a)if(x=this.e*Math.sin(u),m=Math.sqrt(1-x*x)*Math.tan(u),g=this.a*Mt(this.e0,this.e1,this.e2,this.e3,u),y=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),E=g/this.a,h=(o*(m*E+1)-E-.5*m*(E*E+n))/(this.es*Math.sin(2*u)*(E*E+n-2*o*E)/(4*m)+(o-E)*(m*y-2/Math.sin(2*u))-y),u-=h,Math.abs(h)<=R){r=u;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=L(this.long0+Math.asin(i*m/this.a)/Math.sin(r),this.over)}return t.x=e,t.y=r,t}var zu=["Polyconic","American_Polyconic","poly"],Vu={init:Uu,forward:ju,inverse:$u,names:zu};function Wu(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Hu(t){var e,r=t.x,i=t.y,s=i-this.lat0,a=r-this.long0,o=s/Pe*1e-5,n=a,u=1,h=0;for(e=1;e<=10;e++)u=u*o,h=h+this.A[e]*u;var f=h,m=n,g=1,y=0,E,x,_=0,P=0;for(e=1;e<=6;e++)E=g*f-y*m,x=y*f+g*m,g=E,y=x,_=_+this.B_re[e]*g-this.B_im[e]*y,P=P+this.B_im[e]*g+this.B_re[e]*y;return t.x=P*this.a+this.x0,t.y=_*this.a+this.y0,t}function Xu(t){var e,r=t.x,i=t.y,s=r-this.x0,a=i-this.y0,o=a/this.a,n=s/this.a,u=1,h=0,f,m,g=0,y=0;for(e=1;e<=6;e++)f=u*o-h*n,m=h*o+u*n,u=f,h=m,g=g+this.C_re[e]*u-this.C_im[e]*h,y=y+this.C_im[e]*u+this.C_re[e]*h;for(var E=0;E<this.iterations;E++){var x=g,_=y,P,M,b=o,N=n;for(e=2;e<=6;e++)P=x*g-_*y,M=_*g+x*y,x=P,_=M,b=b+(e-1)*(this.B_re[e]*x-this.B_im[e]*_),N=N+(e-1)*(this.B_im[e]*x+this.B_re[e]*_);x=1,_=0;var T=this.B_re[1],S=this.B_im[1];for(e=2;e<=6;e++)P=x*g-_*y,M=_*g+x*y,x=P,_=M,T=T+e*(this.B_re[e]*x-this.B_im[e]*_),S=S+e*(this.B_im[e]*x+this.B_re[e]*_);var D=T*T+S*S;g=(b*T+N*S)/D,y=(N*T-b*S)/D}var B=g,v=y,d=1,A=0;for(e=1;e<=9;e++)d=d*B,A=A+this.D[e]*d;var C=this.lat0+A*Pe*1e5,I=this.long0+v;return t.x=I,t.y=C,t}var Ju=["New_Zealand_Map_Grid","nzmg"],Qu={init:Wu,forward:Hu,inverse:Xu,names:Ju};function Ku(){}function Yu(t){var e=t.x,r=t.y,i=L(e-this.long0,this.over),s=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=s,t.y=a,t}function Zu(t){t.x-=this.x0,t.y-=this.y0;var e=L(this.long0+t.x/this.a,this.over),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var th=["Miller_Cylindrical","mill"],eh={init:Ku,forward:Yu,inverse:Zu,names:th},rh=20;function ih(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Or(this.es)}function sh(t){var e,r,i=t.x,s=t.y;if(i=L(i-this.long0,this.over),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var a=this.n*Math.sin(s),o=rh;o;--o){var n=(this.m*s+Math.sin(s)-a)/(this.m+Math.cos(s));if(s-=n,Math.abs(n)<R)break}e=this.a*this.C_x*i*(this.m+Math.cos(s)),r=this.a*this.C_y*s}else{var u=Math.sin(s),h=Math.cos(s);r=this.a*ce(s,u,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t}function ah(t){var e,r,i,s;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Ht((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Ht(Math.sin(e)/this.n)),i=L(i+this.long0,this.over),e=Vt(e)):(e=Fr(t.y/this.a,this.es,this.en),s=Math.abs(e),s<G?(s=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),i=L(r,this.over)):s-R<G&&(i=this.long0)),t.x=i,t.y=e,t}var nh=["Sinusoidal","sinu"],oh={init:ih,forward:sh,inverse:ah,names:nh};function uh(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function hh(t){for(var e=t.x,r=t.y,i=L(e-this.long0,this.over),s=r,a=Math.PI*Math.sin(r);;){var o=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=o,Math.abs(o)<R)break}s/=2,Math.PI/2-Math.abs(r)<R&&(i=0);var n=.900316316158*this.a*i*Math.cos(s)+this.x0,u=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=n,t.y=u,t}function lh(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var i=L(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var s=Math.asin(r);return t.x=i,t.y=s,t}var ch=["Mollweide","moll"],fh={init:uh,forward:hh,inverse:lh,names:ch};function gh(){Math.abs(this.lat1+this.lat2)<R||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Oe(this.es),this.e1=Fe(this.es),this.e2=Le(this.es),this.e3=Be(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Rt(this.e,this.sin_phi,this.cos_phi),this.ml1=Mt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<R?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Rt(this.e,this.sin_phi,this.cos_phi),this.ml2=Mt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Mt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mh(t){var e=t.x,r=t.y,i;if(this.sphere)i=this.a*(this.g-r);else{var s=Mt(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-s)}var a=this.ns*L(e-this.long0,this.over),o=this.x0+i*Math.sin(a),n=this.y0+this.rh-i*Math.cos(a);return t.x=o,t.y=n,t}function dh(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,i,s;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(r!==0&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=L(this.long0+a/this.ns,this.over),i=Vt(this.g-r/this.a),t.x=s,t.y=i,t;var o=this.g-r/this.a;return i=fr(o,this.e0,this.e1,this.e2,this.e3),s=L(this.long0+a/this.ns,this.over),t.x=s,t.y=i,t}var ph=["Equidistant_Conic","eqdc"],vh={init:gh,forward:mh,inverse:dh,names:ph};function yh(){this.R=this.a}function _h(t){var e=t.x,r=t.y,i=L(e-this.long0,this.over),s,a;Math.abs(r)<=R&&(s=this.x0+this.R*i,a=this.y0);var o=Ht(2*Math.abs(r/Math.PI));(Math.abs(i)<=R||Math.abs(Math.abs(r)-G)<=R)&&(s=this.x0,r>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var n=.5*Math.abs(Math.PI/i-i/Math.PI),u=n*n,h=Math.sin(o),f=Math.cos(o),m=f/(h+f-1),g=m*m,y=m*(2/h-1),E=y*y,x=Math.PI*this.R*(n*(m-E)+Math.sqrt(u*(m-E)*(m-E)-(E+u)*(g-E)))/(E+u);i<0&&(x=-x),s=this.x0+x;var _=u+m;return x=Math.PI*this.R*(y*_-n*Math.sqrt((E+u)*(u+1)-_*_))/(E+u),r>=0?a=this.y0+x:a=this.y0-x,t.x=s,t.y=a,t}function Eh(t){var e,r,i,s,a,o,n,u,h,f,m,g,y;return t.x-=this.x0,t.y-=this.y0,m=Math.PI*this.R,i=t.x/m,s=t.y/m,a=i*i+s*s,o=-Math.abs(s)*(1+a),n=o-2*s*s+i*i,u=-2*o+1+2*s*s+a*a,y=s*s/u+(2*n*n*n/u/u/u-9*o*n/u/u)/27,h=(o-n*n/3/u)/u,f=2*Math.sqrt(-h/3),m=3*y/h/f,Math.abs(m)>1&&(m>=0?m=1:m=-1),g=Math.acos(m)/3,t.y>=0?r=(-f*Math.cos(g+Math.PI/3)-n/3/u)*Math.PI:r=-(-f*Math.cos(g+Math.PI/3)-n/3/u)*Math.PI,Math.abs(i)<R?e=this.long0:e=L(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-s*s)+a*a))/2/i,this.over),t.x=e,t.y=r,t}var Mh=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"],wh={init:yh,forward:_h,inverse:Eh,names:Mh};function Ah(t,e,r,i,s,a){const o=i-e,n=Math.atan((1-a)*Math.tan(t)),u=Math.atan((1-a)*Math.tan(r)),h=Math.sin(n),f=Math.cos(n),m=Math.sin(u),g=Math.cos(u);let y=o,E,x=100,_,P,M,b,N,T,S,D,B,v,d,A,C,I;do{if(_=Math.sin(y),P=Math.cos(y),M=Math.sqrt(g*_*(g*_)+(f*m-h*g*P)*(f*m-h*g*P)),M===0)return{azi1:0,s12:0};b=h*m+f*g*P,N=Math.atan2(M,b),T=f*g*_/M,S=1-T*T,D=S!==0?b-2*h*m/S:0,B=a/16*S*(4+a*(4-3*S)),E=y,y=o+(1-B)*a*T*(N+B*M*(D+B*b*(-1+2*D*D)))}while(Math.abs(y-E)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:(v=S*(s*s-s*(1-a)*(s*(1-a)))/(s*(1-a)*(s*(1-a))),d=1+v/16384*(4096+v*(-768+v*(320-175*v))),A=v/1024*(256+v*(-128+v*(74-47*v))),C=A*M*(D+A/4*(b*(-1+2*D*D)-A/6*D*(-3+4*M*M)*(-3+4*D*D))),I=s*(1-a)*d*(N-C),{azi1:Math.atan2(g*_,f*m-h*g*P),s12:I})}function bh(t,e,r,i,s,a){const o=Math.atan((1-a)*Math.tan(t)),n=Math.sin(o),u=Math.cos(o),h=Math.sin(r),f=Math.cos(r),m=Math.atan2(n,u*f),g=u*h,y=1-g*g,E=y*(s*s-s*(1-a)*(s*(1-a)))/(s*(1-a)*(s*(1-a))),x=1+E/16384*(4096+E*(-768+E*(320-175*E))),_=E/1024*(256+E*(-128+E*(74-47*E)));let P=i/(s*(1-a)*x),M,b=100,N,T,S,D;do N=Math.cos(2*m+P),T=Math.sin(P),S=Math.cos(P),D=_*T*(N+_/4*(S*(-1+2*N*N)-_/6*N*(-3+4*T*T)*(-3+4*N*N))),M=P,P=i/(s*(1-a)*x)+D;while(Math.abs(P-M)>1e-12&&--b>0);if(b===0)return{lat2:NaN,lon2:NaN};const B=n*T-u*S*f,v=Math.atan2(n*S+u*T*f,(1-a)*Math.sqrt(g*g+B*B)),d=Math.atan2(T*h,u*S-n*T*f),A=a/16*y*(4+a*(4-3*y)),C=d-(1-A)*a*g*(P+A*T*(N+A*S*(-1+2*N*N))),I=e+C;return{lat2:v,lon2:I}}function Sh(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Dh(t){var e=t.x,r=t.y,i=Math.sin(t.y),s=Math.cos(t.y),a=L(e-this.long0,this.over),o,n,u,h,f,m,g,y,E,x,_;return this.sphere?Math.abs(this.sin_p12-1)<=R?(t.x=this.x0+this.a*(G-r)*Math.sin(a),t.y=this.y0-this.a*(G-r)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=R?(t.x=this.x0+this.a*(G+r)*Math.sin(a),t.y=this.y0+this.a*(G+r)*Math.cos(a),t):(E=this.sin_p12*i+this.cos_p12*s*Math.cos(a),g=Math.acos(E),y=g?g/Math.sin(g):1,t.x=this.x0+this.a*y*s*Math.sin(a),t.y=this.y0+this.a*y*(this.cos_p12*i-this.sin_p12*s*Math.cos(a)),t):(o=Oe(this.es),n=Fe(this.es),u=Le(this.es),h=Be(this.es),Math.abs(this.sin_p12-1)<=R?(f=this.a*Mt(o,n,u,h,G),m=this.a*Mt(o,n,u,h,r),t.x=this.x0+(f-m)*Math.sin(a),t.y=this.y0-(f-m)*Math.cos(a),t):Math.abs(this.sin_p12+1)<=R?(f=this.a*Mt(o,n,u,h,G),m=this.a*Mt(o,n,u,h,r),t.x=this.x0+(f+m)*Math.sin(a),t.y=this.y0+(f+m)*Math.cos(a),t):Math.abs(e)<R&&Math.abs(r-this.lat0)<R?(t.x=t.y=0,t):(x=Ah(this.lat0,this.long0,r,e,this.a,this.f),_=x.azi1,t.x=x.s12*Math.sin(_),t.y=x.s12*Math.cos(_),t))}function xh(t){t.x-=this.x0,t.y-=this.y0;var e,r,i,s,a,o,n,u,h,f,m,g,y,E,x,_;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*G*this.a?void 0:(r=e/this.a,i=Math.sin(r),s=Math.cos(r),a=this.long0,Math.abs(e)<=R?o=this.lat0:(o=Ht(s*this.sin_p12+t.y*i*this.cos_p12/e),n=Math.abs(this.lat0)-G,Math.abs(n)<=R?this.lat0>=0?a=L(this.long0+Math.atan2(t.x,-t.y),this.over):a=L(this.long0-Math.atan2(-t.x,t.y),this.over):a=L(this.long0+Math.atan2(t.x*i,e*this.cos_p12*s-t.y*this.sin_p12*i),this.over)),t.x=a,t.y=o,t)):(u=Oe(this.es),h=Fe(this.es),f=Le(this.es),m=Be(this.es),Math.abs(this.sin_p12-1)<=R?(g=this.a*Mt(u,h,f,m,G),e=Math.sqrt(t.x*t.x+t.y*t.y),y=g-e,o=fr(y/this.a,u,h,f,m),a=L(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=a,t.y=o,t):Math.abs(this.sin_p12+1)<=R?(g=this.a*Mt(u,h,f,m,G),e=Math.sqrt(t.x*t.x+t.y*t.y),y=e-g,o=fr(y/this.a,u,h,f,m),a=L(this.long0+Math.atan2(t.x,t.y),this.over),t.x=a,t.y=o,t):(E=Math.atan2(t.x,t.y),x=Math.sqrt(t.x*t.x+t.y*t.y),_=bh(this.lat0,this.long0,E,x,this.a,this.f),t.x=_.lon2,t.y=_.lat2,t))}var Ph=["Azimuthal_Equidistant","aeqd"],Ch={init:Sh,forward:Dh,inverse:xh,names:Ph};function Nh(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Gh(t){var e,r,i,s,a,o,n,u,h=t.x,f=t.y;return i=L(h-this.long0,this.over),e=Math.sin(f),r=Math.cos(f),s=Math.cos(i),o=this.sin_p14*e+this.cos_p14*r*s,a=1,(o>0||Math.abs(o)<=R)&&(n=this.a*a*r*Math.sin(i),u=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*r*s)),t.x=n,t.y=u,t}function Th(t){var e,r,i,s,a,o,n;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=Ht(e/this.a),i=Math.sin(r),s=Math.cos(r),o=this.long0,Math.abs(e)<=R?(n=this.lat0,t.x=o,t.y=n,t):(n=Ht(s*this.sin_p14+t.y*i*this.cos_p14/e),a=Math.abs(this.lat0)-G,Math.abs(a)<=R?(this.lat0>=0?o=L(this.long0+Math.atan2(t.x,-t.y),this.over):o=L(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=n,t):(o=L(this.long0+Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i),this.over),t.x=o,t.y=n,t))}var Ih=["ortho"],Rh={init:Nh,forward:Gh,inverse:Th,names:Ih},ft={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},at={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Oh(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=G-st/2?this.face=ft.TOP:this.lat0<=-(G-st/2)?this.face=ft.BOTTOM:Math.abs(this.long0)<=st?this.face=ft.FRONT:Math.abs(this.long0)<=G+st?this.face=this.long0>0?ft.RIGHT:ft.LEFT:this.face=ft.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Fh(t){var e={x:0,y:0},r,i,s,a,o,n,u={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,i=t.x,this.face===ft.TOP)a=G-r,i>=st&&i<=G+st?(u.value=at.AREA_0,s=i-G):i>G+st||i<=-(G+st)?(u.value=at.AREA_1,s=i>0?i-mt:i+mt):i>-(G+st)&&i<=-st?(u.value=at.AREA_2,s=i+G):(u.value=at.AREA_3,s=i);else if(this.face===ft.BOTTOM)a=G+r,i>=st&&i<=G+st?(u.value=at.AREA_0,s=-i+G):i<st&&i>=-st?(u.value=at.AREA_1,s=-i):i<-st&&i>=-(G+st)?(u.value=at.AREA_2,s=-i-G):(u.value=at.AREA_3,s=i>0?-i+mt:-i-mt);else{var h,f,m,g,y,E,x;this.face===ft.RIGHT?i=ge(i,+G):this.face===ft.BACK?i=ge(i,+mt):this.face===ft.LEFT&&(i=ge(i,-G)),g=Math.sin(r),y=Math.cos(r),E=Math.sin(i),x=Math.cos(i),h=y*x,f=y*E,m=g,this.face===ft.FRONT?(a=Math.acos(h),s=mr(a,m,f,u)):this.face===ft.RIGHT?(a=Math.acos(f),s=mr(a,m,-h,u)):this.face===ft.BACK?(a=Math.acos(-h),s=mr(a,m,-f,u)):this.face===ft.LEFT?(a=Math.acos(-f),s=mr(a,m,h,u)):(a=s=0,u.value=at.AREA_0)}return n=Math.atan(12/mt*(s+Math.acos(Math.sin(s)*Math.cos(st))-G)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(n)*Math.cos(n))/(1-Math.cos(Math.atan(1/Math.cos(s))))),u.value===at.AREA_1?n+=G:u.value===at.AREA_2?n+=mt:u.value===at.AREA_3&&(n+=1.5*mt),e.x=o*Math.cos(n),e.y=o*Math.sin(n),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function Lh(t){var e={lam:0,phi:0},r,i,s,a,o,n,u,h,f,m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=at.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=at.AREA_1,r-=G):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=at.AREA_2,r=r<0?r+mt:r-mt):(m.value=at.AREA_3,r+=G),f=mt/12*Math.tan(r),o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),n=Math.atan(o),s=Math.cos(r),a=Math.tan(i),u=1-s*s*a*a*(1-Math.cos(Math.atan(1/Math.cos(n)))),u<-1?u=-1:u>1&&(u=1),this.face===ft.TOP)h=Math.acos(u),e.phi=G-h,m.value===at.AREA_0?e.lam=n+G:m.value===at.AREA_1?e.lam=n<0?n+mt:n-mt:m.value===at.AREA_2?e.lam=n-G:e.lam=n;else if(this.face===ft.BOTTOM)h=Math.acos(u),e.phi=h-G,m.value===at.AREA_0?e.lam=-n+G:m.value===at.AREA_1?e.lam=-n:m.value===at.AREA_2?e.lam=-n-G:e.lam=n<0?-n-mt:-n+mt;else{var g,y,E;g=u,f=g*g,f>=1?E=0:E=Math.sqrt(1-f)*Math.sin(n),f+=E*E,f>=1?y=0:y=Math.sqrt(1-f),m.value===at.AREA_1?(f=y,y=-E,E=f):m.value===at.AREA_2?(y=-y,E=-E):m.value===at.AREA_3&&(f=y,y=E,E=-f),this.face===ft.RIGHT?(f=g,g=-y,y=f):this.face===ft.BACK?(g=-g,y=-y):this.face===ft.LEFT&&(f=g,g=y,y=-f),e.phi=Math.acos(-E)-G,e.lam=Math.atan2(y,g),this.face===ft.RIGHT?e.lam=ge(e.lam,-G):this.face===ft.BACK?e.lam=ge(e.lam,-mt):this.face===ft.LEFT&&(e.lam=ge(e.lam,+G))}if(this.es!==0){var x,_,P;x=e.phi<0?1:0,_=Math.tan(e.phi),P=this.b/Math.sqrt(_*_+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-P*P)/(this.one_minus_f*P)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function mr(t,e,r,i){var s;return t<R?(i.value=at.AREA_0,s=0):(s=Math.atan2(e,r),Math.abs(s)<=st?i.value=at.AREA_0:s>st&&s<=G+st?(i.value=at.AREA_1,s-=G):s>G+st||s<=-(G+st)?(i.value=at.AREA_2,s=s>=0?s-mt:s+mt):(i.value=at.AREA_3,s+=G)),s}function ge(t,e){var r=t+e;return r<-mt?r+=Ce:r>+mt&&(r-=Ce),r}var Bh=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],kh={init:Oh,forward:Fh,inverse:Lh,names:Bh},Vr=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ke=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ls=.8487,cs=1.3523,fs=wt/5,qh=1/fs,me=18,dr=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Uh=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function jh(t,e,r,i){for(var s=e;i;--i){var a=t(s);if(s-=a,Math.abs(a)<r)break}return s}function $h(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function zh(t){var e=L(t.x-this.long0,this.over),r=Math.abs(t.y),i=Math.floor(r*fs);i<0?i=0:i>=me&&(i=me-1),r=wt*(r-qh*i);var s={x:dr(Vr[i],r)*e,y:dr(ke[i],r)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*ls+this.x0,s.y=s.y*this.a*cs+this.y0,s}function Vh(t){var e={x:(t.x-this.x0)/(this.a*ls),y:Math.abs(t.y-this.y0)/(this.a*cs)};if(e.y>=1)e.x/=Vr[me][0],e.y=t.y<0?-G:G;else{var r=Math.floor(e.y*me);for(r<0?r=0:r>=me&&(r=me-1);;)if(ke[r][0]>e.y)--r;else if(ke[r+1][0]<=e.y)++r;else break;var i=ke[r],s=5*(e.y-i[0])/(ke[r+1][0]-i[0]);s=jh(function(a){return(dr(i,a)-e.y)/Uh(i,a)},s,R,100),e.x/=dr(Vr[r],s),e.y=(5*r+s)*gt,t.y<0&&(e.y=-e.y)}return e.x=L(e.x+this.long0,this.over),e}var Wh=["Robinson","robin"],Hh={init:$h,forward:zh,inverse:Vh,names:Wh};function Xh(){this.name="geocent"}function Jh(t){var e=ji(t,this.es,this.a);return e}function Qh(t){var e=$i(t,this.es,this.a,this.b);return e}var Kh=["Geocentric","geocentric","geocent","Geocent"],Yh={init:Xh,forward:Jh,inverse:Qh,names:Kh},yt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},qe={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Zh(){if(Object.keys(qe).forEach((function(r){if(typeof this[r]>"u")this[r]=qe[r].def;else{if(qe[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);qe[r].num&&(this[r]=parseFloat(this[r]))}qe[r].degrees&&(this[r]=this[r]*gt)}).bind(this)),Math.abs(Math.abs(this.lat0)-G)<R?this.mode=this.lat0<0?yt.S_POLE:yt.N_POLE:Math.abs(this.lat0)<R?this.mode=yt.EQUIT:(this.mode=yt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function t0(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),i=Math.cos(t.x),s,a;switch(this.mode){case yt.OBLIQ:a=this.sinph0*e+this.cosph0*r*i;break;case yt.EQUIT:a=r*i;break;case yt.S_POLE:a=-e;break;case yt.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),s=a*r*Math.sin(t.x),this.mode){case yt.OBLIQ:a*=this.cosph0*e-this.sinph0*r*i;break;case yt.EQUIT:a*=e;break;case yt.N_POLE:a*=-(r*i);break;case yt.S_POLE:a*=r*i;break}var o,n;return o=a*this.cg+s*this.sg,n=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-a*this.sg)*this.cw*n,a=o*n,t.x=s*this.a,t.y=a*this.a,t}function e0(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,i,s;s=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*s,i=this.pn1*t.y*this.cw*s,t.x=r*this.cg+i*this.sg,t.y=i*this.cg-r*this.sg;var a=St(t.x,t.y);if(Math.abs(a)<R)e.x=0,e.y=t.y;else{var o,n;switch(n=1-a*a*this.pfact,n=(this.p-Math.sqrt(n))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-n*n),this.mode){case yt.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*n*this.cosph0/a),t.y=(o-this.sinph0*Math.sin(e.y))*a,t.x*=n*this.cosph0;break;case yt.EQUIT:e.y=Math.asin(t.y*n/a),t.y=o*a,t.x*=n;break;case yt.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case yt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var r0=["Tilted_Perspective","tpers"],i0={init:Zh,forward:t0,inverse:e0,names:r0};function s0(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function a0(t){var e=t.x,r=t.y,i,s,a,o;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var n=this.radius_p/St(this.radius_p*Math.cos(r),Math.sin(r));if(s=n*Math.cos(e)*Math.cos(r),a=n*Math.sin(e)*Math.cos(r),o=n*Math.sin(r),(this.radius_g-s)*s-a*a-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/St(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(a/i),t.y=this.radius_g_1*Math.atan(o/St(a,i)))}else this.shape==="sphere"&&(i=Math.cos(r),s=Math.cos(e)*i,a=Math.sin(e)*i,o=Math.sin(r),i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/St(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(a/i),t.y=this.radius_g_1*Math.atan(o/St(a,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function n0(t){var e=-1,r=0,i=0,s,a,o,n;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*St(1,i)):(r=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*St(1,r));var u=i/this.radius_p;if(s=r*r+u*u+e*e,a=2*this.radius_g*e,o=a*a-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-a-Math.sqrt(o))/(2*s),e=this.radius_g+n*e,r*=n,i*=n,t.x=Math.atan2(r,e),t.y=Math.atan(i*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+i*i)):(r=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),s=r*r+i*i+e*e,a=2*this.radius_g*e,o=a*a-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-a-Math.sqrt(o))/(2*s),e=this.radius_g+n*e,r*=n,i*=n,t.x=Math.atan2(r,e),t.y=Math.atan(i*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var o0=["Geostationary Satellite View","Geostationary_Satellite","geos"],u0={init:s0,forward:a0,inverse:n0,names:o0},Ue=1.340264,je=-.081106,$e=893e-6,ze=.003796,pr=Math.sqrt(3)/2;function h0(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function l0(t){var e=L(t.x-this.long0,this.over),r=t.y,i=Math.asin(pr*Math.sin(r)),s=i*i,a=s*s*s;return t.x=e*Math.cos(i)/(pr*(Ue+3*je*s+a*(7*$e+9*ze*s))),t.y=i*(Ue+je*s+a*($e+ze*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function c0(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,i=t.y,s,a,o,n,u,h;for(h=0;h<r&&(s=i*i,a=s*s*s,o=i*(Ue+je*s+a*($e+ze*s))-t.y,n=Ue+3*je*s+a*(7*$e+9*ze*s),i-=u=o/n,!(Math.abs(u)<e));++h);return s=i*i,a=s*s*s,t.x=pr*t.x*(Ue+3*je*s+a*(7*$e+9*ze*s))/Math.cos(i),t.y=Math.asin(Math.sin(i)/pr),t.x=L(t.x+this.long0,this.over),t}var f0=["eqearth","Equal Earth","Equal_Earth"],g0={init:h0,forward:l0,inverse:c0,names:f0},Ve=1e-10;function m0(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ve)throw new Error;this.es?(this.en=Or(this.es),this.m1=ce(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=p0,this.forward=d0):(Math.abs(this.phi1)+Ve>=G?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=y0,this.forward=v0)}function d0(t){var e=L(t.x-(this.long0||0),this.over),r=t.y,i,s,a;return i=this.am1+this.m1-ce(r,s=Math.sin(r),a=Math.cos(r),this.en),s=a*e/(i*Math.sqrt(1-this.es*s*s)),t.x=i*Math.sin(s),t.y=this.am1-i*Math.cos(s),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function p0(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,i,s;if(r=St(t.x,t.y=this.am1-t.y),s=Fr(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(s))<G)e=Math.sin(s),i=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else if(Math.abs(e-G)<=Ve)i=0;else throw new Error;return t.x=L(i+(this.long0||0),this.over),t.y=Vt(s),t}function v0(t){var e=L(t.x-(this.long0||0),this.over),r=t.y,i,s;return s=this.cphi1+this.phi1-r,Math.abs(s)>Ve?(t.x=s*Math.sin(i=e*Math.cos(r)/s),t.y=this.cphi1-s*Math.cos(i)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function y0(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,i=St(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-i,Math.abs(r)>G)throw new Error;return Math.abs(Math.abs(r)-G)<=Ve?e=0:e=i*Math.atan2(t.x,t.y)/Math.cos(r),t.x=L(e+(this.long0||0),this.over),t.y=Vt(r),t}var _0=["bonne","Bonne (Werner lat_1=90)"],E0={init:m0,names:_0};const gs={OBLIQUE:{forward:S0,inverse:x0},TRANSVERSE:{forward:D0,inverse:P0}},vr={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function M0(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=Li.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=Pt(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let r;const i=Object.keys(vr),s=n=>{if(typeof this[n]>"u")return;const u=parseFloat(this[n])*gt;if(isNaN(u))throw new Error("Invalid value for "+n+": "+this[n]);return u};for(let n=0;n<i.length;n++){const u=i[n],h=vr[u],f=Object.entries(h);if(f.some(([g])=>typeof this[g]<"u")){r=h;for(let g=0;g<f.length;g++){const[y,E]=f[g],x=s(y);if(typeof x>"u")throw new Error("Missing parameter: "+y+".");this[E]=x}break}}if(!r)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:a,phip:o}=b0(this,r);this.lamp=a,Math.abs(o)>R?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=gs.OBLIQUE):this.projectionType=gs.TRANSVERSE}function w0(t){return this.projectionType.forward(this,t)}function A0(t){return this.projectionType.inverse(this,t)}function b0(t,e){let r,i;if(e===vr.ROTATE){let s=t.oLongC,a=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(a)-G)<=R)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");i=s+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(a)),r=Math.asin(Math.cos(a)*Math.sin(o))}else if(e===vr.NEW_POLE)i=t.oLongP,r=t.oLatP;else{let s=t.oLong1,a=t.oLat1,o=t.oLong2,n=t.oLat2,u=Math.abs(a);if(Math.abs(a)>G-R)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(n)>G-R)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(a-n)<R)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(u<R)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");i=Math.atan2(Math.cos(a)*Math.sin(n)*Math.cos(s)-Math.sin(a)*Math.cos(n)*Math.cos(o),Math.sin(a)*Math.cos(n)*Math.sin(o)-Math.cos(a)*Math.sin(n)*Math.sin(s)),r=Math.atan(-1*Math.cos(i-s)/Math.tan(a))}return{lamp:i,phip:r}}function S0(t,e){let{x:r,y:i}=e;r+=t.long0;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=L(Math.atan2(o*Math.sin(r),t.sphip*o*s+t.cphip*a)+t.lamp),e.y=Math.asin(t.sphip*a-t.cphip*o*s);const n=t.obliqueProjection.forward(e);return t.isIdentity&&(n.x*=wt,n.y*=wt),n}function D0(t,e){let{x:r,y:i}=e;r+=t.long0;const s=Math.cos(i),a=Math.cos(r);e.x=L(Math.atan2(s*Math.sin(r),Math.sin(i))+t.lamp),e.y=Math.asin(-1*s*a);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=wt,o.y*=wt),o}function x0(t,e){t.isIdentity&&(e.x*=gt,e.y*=gt);const r=t.obliqueProjection.inverse(e);let{x:i,y:s}=r;if(i<Number.MAX_VALUE){i-=t.lamp;const a=Math.cos(i),o=Math.sin(s),n=Math.cos(s);e.x=Math.atan2(n*Math.sin(i),t.sphip*n*a-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*n*a)}return e.x=L(e.x+t.long0),e}function P0(t,e){t.isIdentity&&(e.x*=gt,e.y*=gt);const r=t.obliqueProjection.inverse(e);let{x:i,y:s}=r;if(i<Number.MAX_VALUE){const a=Math.cos(s);i-=t.lamp,e.x=Math.atan2(a*Math.sin(i),-1*Math.sin(s)),e.y=Math.asin(a*Math.cos(i))}return e.x=L(e.x+t.long0),e}var C0=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"],N0={init:M0,forward:w0,inverse:A0,names:C0};function G0(t){t.Proj.projections.add(lr),t.Proj.projections.add(cr),t.Proj.projections.add(_o),t.Proj.projections.add(Po),t.Proj.projections.add(Io),t.Proj.projections.add(Bo),t.Proj.projections.add(zo),t.Proj.projections.add(Jo),t.Proj.projections.add(tu),t.Proj.projections.add(au),t.Proj.projections.add(yu),t.Proj.projections.add(bu),t.Proj.projections.add(Cu),t.Proj.projections.add(Ou),t.Proj.projections.add(qu),t.Proj.projections.add(Vu),t.Proj.projections.add(Qu),t.Proj.projections.add(eh),t.Proj.projections.add(oh),t.Proj.projections.add(fh),t.Proj.projections.add(vh),t.Proj.projections.add(wh),t.Proj.projections.add(Ch),t.Proj.projections.add(Rh),t.Proj.projections.add(kh),t.Proj.projections.add(Hh),t.Proj.projections.add(Yh),t.Proj.projections.add(i0),t.Proj.projections.add(u0),t.Proj.projections.add(g0),t.Proj.projections.add(E0),t.Proj.projections.add(N0)}const Zt=Object.assign(On,{defaultDatum:"WGS84",Proj:Pt,WGS84:new Pt("WGS84"),Point:le,toPoint:Hi,defs:pt,nadgrid:vn,transform:ur,mgrs:Fn,version:"__VERSION__"});G0(Zt);var ms,ds=()=>new DecompressionStream("deflate-raw");try{ds(),ms=async t=>{let e=ds(),r=e.writable.getWriter(),i=e.readable.getReader(),s,a=[],o=0,n=0,u;for(r.write(t),r.close();!(u=await i.read()).done;)s=u.value,a.push(s),o+=s.length;return!a[1]&&s||(s=new Uint8Array(o),a.map(h=>(s.set(h,n),n+=h.length))),s}}catch{}var T0=new TextDecoder,Wr=t=>{throw new Error("but-unzip~"+t)},ps=t=>T0.decode(t);function*I0(t,e=ms){let r=t.length-20,i=Math.max(r-65516,2);for(;(r=t.lastIndexOf(80,r-1))!==-1&&!(t[r+1]===75&&t[r+2]===5&&t[r+3]===6)&&r>i;);r===-1&&Wr(2);let s=(h,f)=>t.subarray(r+=h,r+=f),a=new DataView(t.buffer,t.byteOffset),o=h=>a.getUint16(h+r,!0),n=h=>a.getUint32(h+r,!0),u=o(10);for(u!==o(8)&&Wr(3),r=n(16);u--;){let h=o(10),f=o(30),m=o(32),g=n(20),y=n(42),E=ps(s(46,o(28))),x=ps(s(f,m)),_=r,P;r=y,P=s(30+o(26)+o(28),g),yield{filename:E,comment:x,read:()=>h&8?e(P):h?Wr(1):P},r=_}}const R0=/.+\.(shp|dbf|json|prj|cpg)$/i;var O0=async t=>{const e={},r=[];for(const a of I0(t))R0.test(a.filename)&&r.push(Promise.resolve(a.read()).then(o=>e[a.filename]=o));await Promise.all(r);const i={},s=new TextDecoder;for(const[a,o]of Object.entries(e))a.slice(-3).toLowerCase()==="shp"||a.slice(-3).toLowerCase()==="dbf"?i[a]=new DataView(o.buffer,o.byteOffset,o.byteLength):i[a]=s.decode(o);return i};const F0=globalThis.URL;var L0=(t,e)=>{if(!e)return t;const r=new F0(t);return r.pathname=`${r.pathname}.${e}`,r.href};async function We(t,e){const r=L0(t,e),i=e==="prj"||e==="cpg";try{const s=await fetch(r);if(s.status>399)throw new Error(s.statusText);if(i)return s.text();const a=await s.arrayBuffer();return new DataView(a)}catch(s){if(i||e==="dbf")return!1;throw s}}function B0(t){let e=0,r=1;const i=t.length;let s,a;const o=[t[0][0],t[0][1],t[0][0],t[0][1]];for(;r<i;)s=a||t[0],a=t[r],e+=(a[0]-s[0])*(a[1]+s[1]),r++,a[0]<o[0]&&(o[0]=a[0]),a[1]<o[1]&&(o[1]=a[1]),a[0]>o[2]&&(o[2]=a[0]),a[1]>o[3]&&(o[3]=a[1]);return{ring:t,clockWise:e>0,bbox:o,children:[]}}function vs(t,e){return!(t.bbox[0]>e.bbox[0]||t.bbox[1]>e.bbox[1]||t.bbox[2]<e.bbox[2]||t.bbox[3]<e.bbox[3])}function ys(t,e=!1){const r=[],i=[];for(const o of t){const n=B0(o);n.clockWise!==e?r.push(n):i.push(n)}const s=[];for(const o of i){let n;for(const u of r)vs(u,o)&&(n?vs(n,u)&&(n=u):n=u);n?n.children.push(o.ring):s.push(o)}if(e)return{outers:r,orphens:s};if(s.length&&!e){const o=ys(t,!0);if(o.orphens.length===0){const n=[];for(const u of o.outers)n.push([u.ring.toReversed()].concat(u.children.map(h=>h.toReversed())));return n}}const a=[];for(const o of r)a.push([o.ring].concat(o.children));return a}dt.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},dt.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.getFloat64(16,!0)),e},dt.prototype.parsePointArray=function(t,e,r){const i=[];let s=0;for(;s<r;)i.push(this.parseCoord(t,e)),e+=16,s++;return i},dt.prototype.parseZPointArray=function(t,e,r,i){let s=0;for(;s<r;)i[s].push(t.getFloat64(e,!0)),s++,e+=8;return i},dt.prototype.parseArrayGroup=function(t,e,r,i,s){const a=[];let o=0,n,u=0,h;for(;o<i;)o++,r+=4,n=u,o===i?u=s:u=t.getInt32(r,!0),h=u-n,h&&(a.push(this.parsePointArray(t,e,h)),e+=h<<4);return a},dt.prototype.parseZArrayGroup=function(t,e,r,i){let s=0;for(;s<r;)i[s]=this.parseZPointArray(t,e,i[s].length,i[s]),e+=i[s].length<<3,s++;return i},dt.prototype.parseMultiPoint=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const i=this.parseCoord(t,0),s=this.parseCoord(t,16);e.bbox=[i[0],i[1],s[0],s[1]];const a=36;return r===1?(e.type="Point",e.coordinates=this.parseCoord(t,a)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,a,r)),e},dt.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let r;if(e.type==="Point")return e.coordinates.push(t.getFloat64(72,!0)),e;r=e.coordinates.length;const i=52+(r<<4);return e.coordinates=this.parseZPointArray(t,i,r,e.coordinates),e},dt.prototype.parsePolyline=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const i=this.parseCoord(t,0),s=this.parseCoord(t,16);e.bbox=[i[0],i[1],s[0],s[1]];const a=t.getInt32(36,!0);let o,n;return r===1?(e.type="LineString",o=44,e.coordinates=this.parsePointArray(t,o,a)):(e.type="MultiLineString",o=40+(r<<2),n=40,e.coordinates=this.parseArrayGroup(t,o,n,r,a)),e},dt.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const r=e.coordinates.length;let i;return e.type==="LineString"?(i=60+(r<<4),e.coordinates=this.parseZPointArray(t,i,r,e.coordinates),e):(i=56+(e.coordinates.reduce(function(a,o){return a+o.length},0)<<4)+(r<<2),e.coordinates=this.parseZArrayGroup(t,i,r,e.coordinates),e)},dt.prototype.polyFuncs=function(t){return t&&(t.type==="LineString"?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=ys(t.coordinates),t.coordinates.length===1?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)))},dt.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},dt.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const _s={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function k0(t){return t?function(e,r){const i=[e.getFloat64(r,!0),e.getFloat64(r+8,!0)];return t.inverse(i)}:function(e,r){return[e.getFloat64(r,!0),e.getFloat64(r+8,!0)]}}function dt(t,e){if(!(this instanceof dt))return new dt(t,e);this.buffer=t,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}dt.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in _s))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[_s[e]],this.parseCoord=k0(t)},dt.prototype.getShpCode=function(){return this.parseHeader().shpCode},dt.prototype.parseHeader=function(){const t=this.buffer;return{length:t.getInt32(24)<<1,version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}},dt.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength-8,r=[];let i;for(;t<=e&&(i=this.getRow(t),!!i);)t+=8,t+=i.len,i.type?r.push(this.parseFunc(i.data)):r.push(null);return r},dt.prototype.getRow=function(t){const e=this.buffer.getInt32(t),r=this.buffer.getInt32(t+4)<<1;if(r===0)return{id:e,len:r,type:0};if(!(t+r+8>this.buffer.byteLength))return{id:e,len:r,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+t+12,r-4),type:this.buffer.getInt32(t+8,!0)}};function Hr(t,e){return new dt(t,e).rows}var q0=/^(?:ANSI\s)?(\d+)$/m;function Es(t,e){if(!t)return i;try{new TextDecoder(t.trim())}catch{var r=q0.exec(t);return r&&!e?Es("windows-"+r[1],!0):(t=void 0,i)}return i;function i(s){var a=new TextDecoder(t||void 0),o=a.decode(s,{stream:!0})+a.decode();return o.replace(/\0/g,"").trim()}}function U0(t){var e={};return e.lastUpdated=new Date(t.getUint8(1)+1900,t.getUint8(2),t.getUint8(3)),e.records=t.getUint32(4,!0),e.headerLen=t.getUint16(8,!0),e.recLen=t.getUint16(10,!0),e}function j0(t,e,r){for(var i=[],s=32;s<e&&(i.push({name:r(new Uint8Array(t.buffer.slice(t.byteOffset+s,t.byteOffset+s+11))),dataType:String.fromCharCode(t.getUint8(s+11)),len:t.getUint8(s+16),decimal:t.getUint8(s+17)}),t.getUint8(s+32)!==13);)s+=32;return i}function $0(t,e,r,i,s){const a=new Uint8Array(t.buffer.slice(t.byteOffset+e,t.byteOffset+e+r));var o=s(a);switch(i){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return o.toLowerCase()==="y"||o.toLowerCase()==="t";default:return o}}function z0(t,e,r,i){for(var s={},a=0,o=r.length,n,u;a<o;)u=r[a],n=$0(t,e,u.len,u.dataType,i),e+=u.len,typeof n<"u"&&(s[u.name]=n),a++;return s}function Xr(t,e){for(var r=Es(e),i=U0(t),s=j0(t,i.headerLen-1,r),a=(s.length+1<<5)+2,o=i.recLen,n=i.records,u=[];n;)u.push(z0(t,a,s,r)),a+=o,n--;return u}const V0=globalThis.URL,W0=t=>{if(!t)throw new Error("forgot to pass buffer");if(de(t))return new Uint8Array(t);if(de(t.buffer))return t.BYTES_PER_ELEMENT===1?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")},H0=new TextDecoder,Ms=t=>{if(t){if(typeof t=="string")return t;if(de(t)||ArrayBuffer.isView(t)||Jr(t))return H0.decode(t)}},ws=t=>{if(!t)throw new Error("forgot to pass buffer");if(Jr(t))return t;if(de(t))return new DataView(t);if(de(t.buffer))return new DataView(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")};function de(t){return t instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"}function Jr(t){return t instanceof globalThis.DataView||Object.prototype.toString.call(t)==="[object DataView]"}const Qr=function([t,e]){const r={};r.type="FeatureCollection",r.features=[];let i=0;const s=t.length;for(e||(e=[]);i<s;)r.features.push({type:"Feature",geometry:t[i],properties:e[i]||{}}),i++;return r},As=async function(t,e){let r;t=W0(t);const i=await O0(t),s=[];e=e||[];for(r in i)r.indexOf("__MACOSX")===-1&&(r.slice(-4).toLowerCase()===".shp"?(s.push(r.slice(0,-4)),i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=i[r]):r.slice(-4).toLowerCase()===".prj"?i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=Zt(i[r]):r.slice(-5).toLowerCase()===".json"||e.indexOf(r.split(".").pop())>-1?s.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):(r.slice(-4).toLowerCase()===".dbf"||r.slice(-4).toLowerCase()===".cpg")&&(i[r.slice(0,-3)+r.slice(-3).toLowerCase()]=i[r]));if(!s.length)throw new Error("no layers founds");const a=s.map(function(o){let n,u;const h=o.lastIndexOf(".");return h>-1&&o.slice(h).indexOf("json")>-1?(n=JSON.parse(i[o]),n.fileName=o.slice(0,h)):e.indexOf(o.slice(h+1))>-1?(n=i[o],n.fileName=o):(i[o+".dbf"]&&(u=Xr(i[o+".dbf"],i[o+".cpg"])),n=Qr([Hr(i[o+".shp"],i[o+".prj"]),u]),n.fileName=o),n});return a.length===1?a[0]:a};async function X0(t,e){const r=await We(t);return As(r,e)}const J0=async t=>{const e=await Promise.all([We(t,"shp"),We(t,"prj")]);let r=!1;try{e[1]&&(r=Zt(e[1]))}catch{r=!1}return Hr(e[0],r)},Q0=async t=>{const[e,r]=await Promise.all([We(t,"dbf"),We(t,"cpg")]);if(e)return Xr(e,r)},bs=(t,e)=>{var i;return new V0(t,(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.location).pathname.slice(-4).toLowerCase()===e},K0=({shp:t,dbf:e,cpg:r,prj:i})=>{const s=[Z0(t,i)];return e&&s.push(tl(e,r)),Qr(s)},Y0=async function(t,e){if(typeof t!="string"){if(de(t)||ArrayBuffer.isView(t)||Jr(t))return As(t);if(t.shp)return K0(t);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(bs(t,".zip"))return X0(t,e);bs(t,".shp")&&(t=t.slice(0,-4));const r=await Promise.all([J0(t),Q0(t)]);return Qr(r)},Z0=function(t,e){if(t=ws(t),e=Ms(e),typeof e=="string")try{e=Zt(e)}catch{e=!1}return Hr(t,e)},tl=function(t,e){return t=ws(t),e=Ms(e),Xr(t,e)};async function el(t){var e;try{let r;if(typeof t=="string"){if(t.trim()==="")return{features:[],errors:[],detectedFormat:"shapefile"};const n=t.replace(/^data:.*?;base64,/,""),u=atob(n),h=new Uint8Array(u.length);for(let f=0;f<u.length;f++)h[f]=u.charCodeAt(f);r=h.buffer}else r=t;const i=await Y0(r),s=Array.isArray(i)?i:[i],a=[];let o=0;for(const n of s)for(const u of n.features)a.push({type:"Feature",id:((e=u.id)==null?void 0:e.toString())??`feature-${String(o)}`,geometry:u.geometry,properties:u.properties??{}}),o++;return a.length===0?{features:[],errors:[{message:"No features found in shapefile"}]}:{features:a,errors:[],detectedFormat:"shapefile",detectedProjection:"EPSG:4326"}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse shapefile"}]}}}function rl(t){return t.trim()?{features:[],errors:[{message:"Shapefile parsing requires async operation. Use parseShapefile() instead."}]}:{features:[],errors:[],detectedFormat:"shapefile"}}function il(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function sl(t){const e=t.trim();return!!(e.startsWith("data:application/zip")||e.startsWith("data:application/octet-stream")||e.startsWith("data:application/x-zip")||e.startsWith("UEs")||e.startsWith("UEsD"))}const Ss={geojson:$s,ewkt:Qs,wkt:Js,kml:_a,gpx:Sa,shapefile:{name:"shapefile",parse:rl,parseAsync:el,format:il,detect:sl},polyline6:oa,polyline5:na,csv:sa};function al(t,e){const r=Ss[e];return r?r.parse(t):{features:[],errors:[{message:`Unsupported format: ${e}`}]}}function nl(t){const e=t.trim();if(!e)return null;for(const[r,i]of Object.entries(Ss))if(i.detect(e))return r;return null}function ol(t){const e=t.trim();if(!e)return null;const r=nl(e);return r||(hl(e)?"wkt":e.toUpperCase().startsWith("SRID=")?"ewkt":ll(e)?"csv":e.includes("<kml")||e.includes("<Placemark")?"kml":e.includes("<gpx")||e.includes("<trkpt")?"gpx":cl(e)?"polyline5":null)}function ul(t,e){const r=t.trim().toUpperCase();if(e==="ewkt"||r.startsWith("SRID=")){const i=/SRID=(\d+)/i.exec(r);if(i!=null&&i[1])switch(parseInt(i[1],10)){case 4326:return"EPSG:4326";case 3857:return"EPSG:3857";case 27700:return"EPSG:27700"}}return null}function hl(t){const e=["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GEOMETRYCOLLECTION"],r=t.toUpperCase();return e.some(i=>r.startsWith(i))}function ll(t){const e=t.replace(/[\s,;|]/g,"");return/^-?\d+\.?\d*(-?\d+\.?\d*)*$/.test(e)}function cl(t){return t.includes(" ")||t.includes(",")?!1:/^[A-Za-z0-9_~\\`@?>=<;:]+$/.test(t)}Zt.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs"),Zt.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs"),Zt.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs");const Kr={WGS84_MAX:180,BNG_MAX:13e5,WEB_MERCATOR_MAX:2003750834e-2};function fl(t){if(t.length===0)return"EPSG:4326";let e=0;for(const r of t){const i=r[0],s=r[1];i!==void 0&&(e=Math.max(e,Math.abs(i))),s!==void 0&&(e=Math.max(e,Math.abs(s)))}return e<=Kr.WGS84_MAX?"EPSG:4326":e<=Kr.BNG_MAX?"EPSG:27700":e<=Kr.WEB_MERCATOR_MAX?"EPSG:3857":"EPSG:4326"}function gl(t){const e=[],r=i=>{if(!i)return;if(i.type==="GeometryCollection"){for(const a of i.geometries)r(a);return}const s=a=>{if(Array.isArray(a))if(typeof a[0]=="number"&&typeof a[1]=="number")e.push(a);else for(const o of a)s(o)};"coordinates"in i&&s(i.coordinates)};for(const i of t)r(i.geometry);return e}self.onmessage=t=>{const{id:e,rawText:r,inputFormat:i,inputProjection:s}=t.data;if(!r.trim()){const u={id:e,features:[],parseError:null,detectedFormat:null,detectedProjection:null};self.postMessage(u);return}let a=null,o=null;if(i==="auto"?(a=ol(r),o=a):a=i,!a){const u={id:e,features:[],parseError:"Could not auto-detect format. Please select a format manually.",detectedFormat:null,detectedProjection:null};self.postMessage(u);return}let n=null;s==="auto"&&(n=ul(r,a));try{const u=al(r,a);let h=n??u.detectedProjection??null;if(s==="auto"&&!h&&u.features.length>0){const m=gl(u.features);m.length>0&&(h=fl(m))}const f={id:e,features:u.features,parseError:u.errors.length>0?u.errors.map(m=>m.message).join(`
`):null,detectedFormat:o,detectedProjection:h};self.postMessage(f)}catch(u){const h={id:e,features:[],parseError:u instanceof Error?u.message:"Parsing failed",detectedFormat:o,detectedProjection:n};self.postMessage(h)}}})();
//# sourceMappingURL=parser.worker-CYYFt2qn.js.map
