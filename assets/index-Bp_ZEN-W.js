
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="26241be6-9a88-598a-80c0-88de14dd736c")}catch(e){}}();
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./maplibre-gl-aGn2FQTM.js","./maplibre-BVTtx8Jb.js","./index-VbYDf0vg.js","./format-detection-Ich9T_gi.js"])))=>i.map(i=>d[i]);
import{b as rf,c as nf,a as F,R as cs,_ as wn,M as sf,d as af,S as of,L as uf}from"./maplibre-BVTtx8Jb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var hi={exports:{}},pn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo;function cf(){if(oo)return pn;oo=1;var t=rf(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,u,c){var l,h={},f=null,p=null;c!==void 0&&(f=""+c),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(p=u.ref);for(l in u)n.call(u,l)&&!i.hasOwnProperty(l)&&(h[l]=u[l]);if(o&&o.defaultProps)for(l in u=o.defaultProps,u)h[l]===void 0&&(h[l]=u[l]);return{$$typeof:e,type:o,key:f,ref:p,props:h,_owner:s.current}}return pn.Fragment=r,pn.jsx=a,pn.jsxs=a,pn}var uo;function lf(){return uo||(uo=1,hi.exports=cf()),hi.exports}var b=lf(),ls={},co;function hf(){if(co)return ls;co=1;var t=nf();return ls.createRoot=t.createRoot,ls.hydrateRoot=t.hydrateRoot,ls}var ff=hf();const K=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lt=globalThis,ur="10.37.0";function gr(){return ei(lt),lt}function ei(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||ur,e[ur]=e[ur]||{}}function Kr(t,e,r=lt){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[ur]=n[ur]||{};return s[t]||(s[t]=e())}const df=["debug","info","warn","error","log","assert","trace"],pf="Sentry Logger ",Fs={};function Yr(t){if(!("console"in lt))return t();const e=lt.console,r={},n=Object.keys(Fs);n.forEach(s=>{const i=Fs[s];r[s]=e[s],e[s]=i});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function mf(){ya().enabled=!0}function gf(){ya().enabled=!1}function hc(){return ya().enabled}function yf(...t){ga("log",...t)}function _f(...t){ga("warn",...t)}function vf(...t){ga("error",...t)}function ga(t,...e){K&&hc()&&Yr(()=>{lt.console[t](`${pf}[${t}]:`,...e)})}function ya(){return K?Kr("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const H={enable:mf,disable:gf,isEnabled:hc,log:yf,warn:_f,error:vf},fc=50,fr="?",lo=/\(error: (.*)\)/,ho=/captureMessage|captureException/;function dc(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0,s=0)=>{const i=[],a=r.split(`
`);for(let o=n;o<a.length;o++){let u=a[o];u.length>1024&&(u=u.slice(0,1024));const c=lo.test(u)?u.replace(lo,"$1"):u;if(!c.match(/\S*Error: /)){for(const l of e){const h=l(c);if(h){i.push(h);break}}if(i.length>=fc+s)break}}return bf(i.slice(s))}}function Ef(t){return Array.isArray(t)?dc(...t):t}function bf(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(hs(e).function||"")&&e.pop(),e.reverse(),ho.test(hs(e).function||"")&&(e.pop(),ho.test(hs(e).function||"")&&e.pop()),e.slice(0,fc).map(r=>({...r,filename:r.filename||hs(e).filename,function:r.function||fr}))}function hs(t){return t[t.length-1]||{}}const fi="<anonymous>";function xe(t){try{return!t||typeof t!="function"?fi:t.name||fi}catch{return fi}}function fo(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&r.push(...n.stacktrace.frames)}),r}catch{return}}}function pc(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const ws={},po={};function Ve(t,e){ws[t]=ws[t]||[],ws[t].push(e)}function Xe(t,e){if(!po[t]){po[t]=!0;try{e()}catch(r){K&&H.error(`Error while instrumenting ${t}`,r)}}}function Zt(t,e){const r=t&&ws[t];if(r)for(const n of r)try{n(e)}catch(s){K&&H.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${xe(n)}
Error:`,s)}}let di=null;function mc(t){const e="error";Ve(e,t),Xe(e,Sf)}function Sf(){di=lt.onerror,lt.onerror=function(t,e,r,n,s){return Zt("error",{column:n,error:s,line:r,msg:t,url:e}),di?di.apply(this,arguments):!1},lt.onerror.__SENTRY_INSTRUMENTED__=!0}let pi=null;function gc(t){const e="unhandledrejection";Ve(e,t),Xe(e,wf)}function wf(){pi=lt.onunhandledrejection,lt.onunhandledrejection=function(t){return Zt("unhandledrejection",t),pi?pi.apply(this,arguments):!0},lt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const yc=Object.prototype.toString;function ri(t){switch(yc.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Me(t,Error)}}function Qr(t,e){return yc.call(t)===`[object ${e}]`}function _c(t){return Qr(t,"ErrorEvent")}function mo(t){return Qr(t,"DOMError")}function xf(t){return Qr(t,"DOMException")}function Se(t){return Qr(t,"String")}function _a(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function jr(t){return t===null||_a(t)||typeof t!="object"&&typeof t!="function"}function Dn(t){return Qr(t,"Object")}function ni(t){return typeof Event<"u"&&Me(t,Event)}function Mf(t){return typeof Element<"u"&&Me(t,Element)}function Af(t){return Qr(t,"RegExp")}function Zr(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function Pf(t){return Dn(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Me(t,e){try{return t instanceof e}catch{return!1}}function vc(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}function va(t){return typeof Request<"u"&&Me(t,Request)}const Ea=lt,Cf=80;function re(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let i=0,a=0;const o=" > ",u=o.length;let c;const l=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||Cf;for(;r&&i++<n&&(c=Tf(r,l),!(c==="html"||i>1&&a+s.length*u+c.length>=h));)s.push(c),a+=c.length,r=r.parentNode;return s.reverse().join(o)}catch{return"<unknown>"}}function Tf(t,e){const r=t,n=[];if(!(r!=null&&r.tagName))return"";if(Ea.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(a=>r.getAttribute(a)).map(a=>[a,r.getAttribute(a)]):null;if(s!=null&&s.length)s.forEach(a=>{n.push(`[${a[0]}="${a[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const a=r.className;if(a&&Se(a)){const o=a.split(/\s+/);for(const u of o)n.push(`.${u}`)}}const i=["aria-label","type","name","title","alt"];for(const a of i){const o=r.getAttribute(a);o&&n.push(`[${a}="${o}"]`)}return n.join("")}function $n(){try{return Ea.document.location.href}catch{return""}}function Ec(t){if(!Ea.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function Xt(t,e,r){if(!(e in t))return;const n=t[e];if(typeof n!="function")return;const s=r(n);typeof s=="function"&&bc(s,n);try{t[e]=s}catch{K&&H.log(`Failed to replace method "${e}" in object`,t)}}function zt(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{K&&H.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function bc(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,zt(t,"__sentry_original__",e)}catch{}}function ba(t){return t.__sentry_original__}function Sc(t){if(ri(t))return{message:t.message,name:t.name,stack:t.stack,...yo(t)};if(ni(t)){const e={type:t.type,target:go(t.target),currentTarget:go(t.currentTarget),...yo(t)};return typeof CustomEvent<"u"&&Me(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function go(t){try{return Mf(t)?re(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function yo(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function Df(t){const e=Object.keys(Sc(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}let Cr;function qn(t){if(Cr!==void 0)return Cr?Cr(t):t();const e=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),r=lt;return e in r&&typeof r[e]=="function"?(Cr=r[e],Cr(t)):(Cr=null,t())}function Ge(){return qn(()=>Math.random())}function Un(){return qn(()=>Date.now())}function Oi(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function _o(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const s=t[n];try{vc(s)?r.push(pc(s)):r.push(String(s))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function xs(t,e,r=!1){return Se(t)?Af(e)?e.test(t):Se(e)?r?t===e:t.includes(e):!1:!1}function Oe(t,e=[],r=!1){return e.some(n=>xs(t,n,r))}function Nf(){const t=lt;return t.crypto||t.msCrypto}let mi;function If(){return Ge()*16}function te(t=Nf()){try{if(t!=null&&t.randomUUID)return qn(()=>t.randomUUID()).replace(/-/g,"")}catch{}return mi||(mi="10000000100040008000"+1e11),mi.replace(/[018]/g,e=>(e^(If()&15)>>e/4).toString(16))}function wc(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)==null?void 0:r[0]}function ar(t){const{message:e,event_id:r}=t;if(e)return e;const n=wc(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Fi(t,e,r){const n=t.exception=t.exception||{},s=n.values=n.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function $r(t,e){const r=wc(t);if(!r)return;const n={type:"generic",handled:!0},s=r.mechanism;if(r.mechanism={...n,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};r.mechanism.data=i}}function vo(t){if(kf(t))return!0;try{zt(t,"__sentry_captured__",!0)}catch{}return!1}function kf(t){try{return t.__sentry_captured__}catch{}}const xc=1e3;function yr(){return Un()/xc}function Rf(){const{performance:t}=lt;if(!(t!=null&&t.now)||!t.timeOrigin)return yr;const e=t.timeOrigin;return()=>(e+qn(()=>t.now()))/xc}let Eo;function Dt(){return(Eo??(Eo=Rf()))()}let gi=null;function Lf(){var a;const{performance:t}=lt;if(!(t!=null&&t.now))return;const e=3e5,r=qn(()=>t.now()),n=Un(),s=t.timeOrigin;if(typeof s=="number"&&Math.abs(s+r-n)<e)return s;const i=(a=t.timing)==null?void 0:a.navigationStart;return typeof i=="number"&&Math.abs(i+r-n)<e?i:n-r}function Jt(){return gi===null&&(gi=Lf()),gi}function Gf(t){const e=Dt(),r={sid:te(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ff(r)};return t&&qr(r,t),r}function qr(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Dt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:te()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Of(t,e){let r={};t.status==="ok"&&(r={status:"exited"}),qr(t,r)}function Ff(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Hn(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&Object.keys(e).length===0)return t;const n={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Hn(n[s],e[s],r-1));return n}function Ae(){return te()}function we(){return te().substring(16)}const Bi="_sentrySpan";function Ur(t,e){e?zt(t,Bi,e):delete t[Bi]}function Bs(t){return t[Bi]}const Bf=100;class Pe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ae(),sampleRand:Ge()}}clone(){const e=new Pe;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,Ur(e,Bs(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&qr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this.setTags({[e]:r})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,r){return this.setAttributes({[e]:r})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,n=r instanceof Pe?r.getScopeData():Dn(r)?e:void 0,{tags:s,attributes:i,extra:a,user:o,contexts:u,level:c,fingerprint:l=[],propagationContext:h,conversationId:f}=n||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...a},this._contexts={...this._contexts,...u},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),l.length&&(this._fingerprint=l),h&&(this._propagationContext=h),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,Ur(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ae(),sampleRand:Ge()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){var i;const n=typeof r=="number"?r:Bf;if(n<=0)return this;const s={timestamp:yr(),...e,message:e.message?Oi(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Bs(this),conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Hn(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=(r==null?void 0:r.event_id)||te();if(!this._client)return K&&H.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=(n==null?void 0:n.event_id)||te();if(!this._client)return K&&H.warn("No client configured on scope - will not capture message!"),s;const i=(n==null?void 0:n.syntheticException)??new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:i,...n,event_id:s},this),s}captureEvent(e,r){const n=(r==null?void 0:r.event_id)||te();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(K&&H.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function jf(){return Kr("defaultCurrentScope",()=>new Pe)}function $f(){return Kr("defaultIsolationScope",()=>new Pe)}class qf{constructor(e,r){let n;e?n=e:n=new Pe;let s;r?s=r:s=new Pe,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return Zr(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Hr(){const t=gr(),e=ei(t);return e.stack=e.stack||new qf(jf(),$f())}function Uf(t){return Hr().withScope(t)}function Hf(t,e){const r=Hr();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function bo(t){return Hr().withScope(()=>t(Hr().getIsolationScope()))}function zf(){return{withIsolationScope:bo,withScope:Uf,withSetScope:Hf,withSetIsolationScope:(t,e)=>bo(e),getCurrentScope:()=>Hr().getScope(),getIsolationScope:()=>Hr().getIsolationScope()}}function tn(t){const e=ei(t);return e.acs?e.acs:zf()}function Et(){const t=gr();return tn(t).getCurrentScope()}function Te(){const t=gr();return tn(t).getIsolationScope()}function Wf(){return Kr("globalScope",()=>new Pe)}function si(...t){const e=gr(),r=tn(e);if(t.length===2){const[n,s]=t;return n?r.withSetScope(n,s):r.withScope(s)}return r.withScope(t[0])}function _t(){return Et().getClient()}function Vf(t){const e=t.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=e,i={trace_id:r,span_id:s||we()};return n&&(i.parent_span_id=n),i}const pe="sentry.source",Sa="sentry.sample_rate",Mc="sentry.previous_trace_sample_rate",Ce="sentry.op",Tt="sentry.origin",Nn="sentry.idle_span_finish_reason",zn="sentry.measurement_unit",Wn="sentry.measurement_value",So="sentry.custom_span_name",wa="sentry.profile_id",en="sentry.exclusive_time",Xf="sentry.link.type",Jf="gen_ai.conversation.id",Kf=0,xa=1,Ct=2;function Yf(t){if(t<400&&t>=100)return{code:xa};if(t>=400&&t<500)switch(t){case 401:return{code:Ct,message:"unauthenticated"};case 403:return{code:Ct,message:"permission_denied"};case 404:return{code:Ct,message:"not_found"};case 409:return{code:Ct,message:"already_exists"};case 413:return{code:Ct,message:"failed_precondition"};case 429:return{code:Ct,message:"resource_exhausted"};case 499:return{code:Ct,message:"cancelled"};default:return{code:Ct,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Ct,message:"unimplemented"};case 503:return{code:Ct,message:"unavailable"};case 504:return{code:Ct,message:"deadline_exceeded"};default:return{code:Ct,message:"internal_error"}}return{code:Ct,message:"internal_error"}}function Ac(t,e){t.setAttribute("http.response.status_code",e);const r=Yf(e);r.message!=="unknown_error"&&t.setStatus(r)}const Pc="_sentryScope",Cc="_sentryIsolationScope";function Qf(t){try{const e=lt.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function Zf(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function t0(t,e,r){t&&(zt(t,Cc,Qf(r)),zt(t,Pc,e))}function js(t){const e=t;return{scope:e[Pc],isolationScope:Zf(e[Cc])}}const Ma="sentry-",e0=/^sentry-/,r0=8192;function Tc(t){const e=s0(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,i])=>{if(s.match(e0)){const a=s.slice(Ma.length);n[a]=i}return n},{});if(Object.keys(r).length>0)return r}function n0(t){if(!t)return;const e=Object.entries(t).reduce((r,[n,s])=>(s&&(r[`${Ma}${n}`]=s),r),{});return i0(e)}function s0(t){if(!(!t||!Se(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=wo(r);return Object.entries(n).forEach(([s,i])=>{e[s]=i}),e},{}):wo(t)}function wo(t){return t.split(",").map(e=>{const r=e.indexOf("=");if(r===-1)return[];const n=e.slice(0,r),s=e.slice(r+1);return[n,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}function i0(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[r,n],s)=>{const i=`${encodeURIComponent(r)}=${encodeURIComponent(n)}`,a=s===0?i:`${e},${i}`;return a.length>r0?(K&&H.warn(`Not adding key: ${r} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a},"")}const a0=/^o(\d+)\./,o0=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function u0(t){return t==="http"||t==="https"}function rn(t,e=!1){const{host:r,path:n,pass:s,port:i,projectId:a,protocol:o,publicKey:u}=t;return`${o}://${u}${e&&s?`:${s}`:""}@${r}${i?`:${i}`:""}/${n&&`${n}/`}${a}`}function c0(t){const e=o0.exec(t);if(!e){Yr(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,n,s="",i="",a="",o=""]=e.slice(1);let u="",c=o;const l=c.split("/");if(l.length>1&&(u=l.slice(0,-1).join("/"),c=l.pop()),c){const h=c.match(/^\d+/);h&&(c=h[0])}return Dc({host:i,pass:s,path:u,projectId:c,port:a,protocol:r,publicKey:n})}function Dc(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function l0(t){if(!K)return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(H.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:r.match(/^\d+$/)?u0(n)?e&&isNaN(parseInt(e,10))?(H.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(H.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(H.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function h0(t){const e=t.match(a0);return e==null?void 0:e[1]}function f0(t){const e=t.getOptions(),{host:r}=t.getDsn()||{};let n;return e.orgId?n=String(e.orgId):r&&(n=h0(r)),n}function d0(t){const e=typeof t=="string"?c0(t):Dc(t);if(!(!e||!l0(e)))return e}function In(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Nc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function p0(t){if(!t)return;const e=t.match(Nc);if(!e)return;let r;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}function m0(t,e){const r=p0(t),n=Tc(e);if(!(r!=null&&r.traceId))return{traceId:Ae(),sampleRand:Ge()};const s=g0(r,n);n&&(n.sample_rand=s.toString());const{traceId:i,parentSpanId:a,parentSampled:o}=r;return{traceId:i,parentSpanId:a,sampled:o,dsc:n||{},sampleRand:s}}function Ic(t=Ae(),e=we(),r){let n="";return r!==void 0&&(n=r?"-1":"-0"),`${t}-${e}${n}`}function kc(t=Ae(),e=we(),r){return`00-${t}-${e}-${r?"01":"00"}`}function g0(t,e){const r=In(e==null?void 0:e.sample_rand);if(r!==void 0)return r;const n=In(e==null?void 0:e.sample_rate);return n&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?Ge()*n:n+Ge()*(1-n):Ge()}const Rc=0,Aa=1;let xo=!1;function y0(t){const{spanId:e,traceId:r}=t.spanContext(),{data:n,op:s,parent_span_id:i,status:a,origin:o,links:u}=dt(t);return{parent_span_id:i,span_id:e,trace_id:r,data:n,op:s,status:a,origin:o,links:u}}function _0(t){const{spanId:e,traceId:r,isRemote:n}=t.spanContext(),s=n?e:dt(t).parent_span_id,i=js(t).scope,a=n?(i==null?void 0:i.getPropagationContext().propagationSpanId)||we():e;return{parent_span_id:s,span_id:a,trace_id:r}}function v0(t){const{traceId:e,spanId:r}=t.spanContext(),n=Je(t);return Ic(e,r,n)}function E0(t){const{traceId:e,spanId:r}=t.spanContext(),n=Je(t);return kc(e,r,n)}function Lc(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:r,traceFlags:n,...s},attributes:i})=>({span_id:e,trace_id:r,sampled:n===Aa,attributes:i,...s}))}function cr(t){return typeof t=="number"?Mo(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Mo(t.getTime()):Dt()}function Mo(t){return t>9999999999?t/1e3:t}function dt(t){var n;if(S0(t))return t.getSpanJSON();const{spanId:e,traceId:r}=t.spanContext();if(b0(t)){const{attributes:s,startTime:i,name:a,endTime:o,status:u,links:c}=t,l="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(n=t.parentSpanContext)==null?void 0:n.spanId:void 0;return{span_id:e,trace_id:r,data:s,description:a,parent_span_id:l,start_timestamp:cr(i),timestamp:cr(o)||void 0,status:Gc(u),op:s[Ce],origin:s[Tt],links:Lc(c)}}return{span_id:e,trace_id:r,start_timestamp:0,data:{}}}function b0(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function S0(t){return typeof t.getSpanJSON=="function"}function Je(t){const{traceFlags:e}=t.spanContext();return e===Aa}function Gc(t){if(!(!t||t.code===Kf))return t.code===xa?"ok":t.message||"internal_error"}const lr="_sentryChildSpans",ji="_sentryRootSpan";function Oc(t,e){const r=t[ji]||t;zt(e,ji,r),t[lr]?t[lr].add(e):zt(t,lr,new Set([e]))}function w0(t,e){t[lr]&&t[lr].delete(e)}function Ms(t){const e=new Set;function r(n){if(!e.has(n)&&Je(n)){e.add(n);const s=n[lr]?Array.from(n[lr]):[];for(const i of s)r(i)}}return r(t),Array.from(e)}function Ft(t){return t[ji]||t}function Kt(){const t=gr(),e=tn(t);return e.getActiveSpan?e.getActiveSpan():Bs(Et())}function $i(){xo||(Yr(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),xo=!0)}let Ao=!1;function x0(){if(Ao)return;function t(){const e=Kt(),r=e&&Ft(e);if(r){const n="internal_error";K&&H.log(`[Tracing] Root span: ${n} -> Global error occurred`),r.setStatus({code:Ct,message:n})}}t.tag="sentry_tracingErrorCallback",Ao=!0,mc(t),gc(t)}function ue(t){var r;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((r=_t())==null?void 0:r.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function Po(t){H.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function $s(t,e){if(!(e!=null&&e.length)||!t.description)return!1;for(const r of e){if(A0(r)){if(xs(t.description,r))return K&&Po(t),!0;continue}if(!r.name&&!r.op)continue;const n=r.name?xs(t.description,r.name):!0,s=r.op?t.op&&xs(t.op,r.op):!0;if(n&&s)return K&&Po(t),!0}return!1}function M0(t,e){const r=e.parent_span_id,n=e.span_id;if(r)for(const s of t)s.parent_span_id===n&&(s.parent_span_id=r)}function A0(t){return typeof t=="string"||t instanceof RegExp}const Pa="production",Fc="_frozenDsc";function As(t,e){zt(t,Fc,e)}function Bc(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s={environment:r.environment||Pa,release:r.release,public_key:n,trace_id:t,org_id:f0(e)};return e.emit("createDsc",s),s}function jc(t,e){const r=e.getPropagationContext();return r.dsc||Bc(r.traceId,t)}function $e(t){var g;const e=_t();if(!e)return{};const r=Ft(t),n=dt(r),s=n.data,i=r.spanContext().traceState,a=(i==null?void 0:i.get("sentry.sample_rate"))??s[Sa]??s[Mc];function o(v){return(typeof a=="number"||typeof a=="string")&&(v.sample_rate=`${a}`),v}const u=r[Fc];if(u)return o(u);const c=i==null?void 0:i.get("sentry.dsc"),l=c&&Tc(c);if(l)return o(l);const h=Bc(t.spanContext().traceId,e),f=s[pe],p=n.description;return f!=="url"&&p&&(h.transaction=p),ue()&&(h.sampled=String(Je(r)),h.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((g=js(r).scope)==null?void 0:g.getPropagationContext().sampleRand.toString())),o(h),e.emit("createDsc",h,r),h}class qe{constructor(e={}){this._traceId=e.traceId||Ae(),this._spanId=e.spanId||we()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Rc}}end(e){}setAttribute(e,r){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,r,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,r){}}function be(t,e=100,r=1/0){try{return qi("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function $c(t,e=3,r=100*1024){const n=be(t,e);return D0(n)>r?$c(t,e-1,r):n}function qi(t,e,r=1/0,n=1/0,s=N0()){const[i,a]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=P0(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(u===0)return o.replace("object ","");if(i(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const p=c.toJSON();return qi("",p,u-1,n,s)}catch{}const l=Array.isArray(e)?[]:{};let h=0;const f=Sc(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(h>=n){l[p]="[MaxProperties ~]";break}const g=f[p];l[p]=qi(p,g,u-1,n,s),h++}return a(e),l}function P0(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(vc(e))return pc(e);if(Pf(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${xe(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=C0(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function C0(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function T0(t){return~-encodeURI(t).split(/%..|./).length}function D0(t){return T0(JSON.stringify(t))}function N0(){const t=new WeakSet;function e(n){return t.has(n)?!0:(t.add(n),!1)}function r(n){t.delete(n)}return[e,r]}function _r(t,e=[]){return[t,e]}function I0(t,e){const[r,n]=t;return[r,[...n,e]]}function Ui(t,e){const r=t[1];for(const n of r){const s=n[0].type;if(e(n,s))return!0}return!1}function k0(t,e){return Ui(t,(r,n)=>e.includes(n))}function Hi(t){const e=ei(lt);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function R0(t){const[e,r]=t;let n=JSON.stringify(e);function s(i){typeof n=="string"?n=typeof i=="string"?n+i:[Hi(n),i]:n.push(typeof i=="string"?Hi(i):i)}for(const i of r){const[a,o]=i;if(s(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)s(o);else{let u;try{u=JSON.stringify(o)}catch{u=JSON.stringify(be(o))}s(u)}}return typeof n=="string"?n:L0(n)}function L0(t){const e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function G0(t){return[{type:"span"},t]}function O0(t){const e=typeof t.data=="string"?Hi(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const F0={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Co(t){return F0[t]}function qc(t){if(!(t!=null&&t.sdk))return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function B0(t,e,r,n){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:rn(n)},...s&&{trace:s}}}function j0(t,e){var n,s,i,a;if(!e)return t;const r=t.sdk||{};return t.sdk={...r,name:r.name||e.name,version:r.version||e.version,integrations:[...((n=t.sdk)==null?void 0:n.integrations)||[],...e.integrations||[]],packages:[...((s=t.sdk)==null?void 0:s.packages)||[],...e.packages||[]],settings:(i=t.sdk)!=null&&i.settings||e.settings?{...(a=t.sdk)==null?void 0:a.settings,...e.settings}:void 0},t}function $0(t,e,r,n){const s=qc(r),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!n&&e&&{dsn:rn(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return _r(i,[a])}function q0(t,e,r,n){const s=qc(r),i=t.type&&t.type!=="replay_event"?t.type:"event";j0(t,r==null?void 0:r.sdk);const a=B0(t,s,n,e);return delete t.sdkProcessingMetadata,_r(a,[[{type:i},t]])}function U0(t,e){function r(p){return!!p.trace_id&&!!p.public_key}const n=$e(t[0]),s=e==null?void 0:e.getDsn(),i=e==null?void 0:e.getOptions().tunnel,a={sent_at:new Date().toISOString(),...r(n)&&{trace:n},...!!i&&s&&{dsn:rn(s)}},{beforeSendSpan:o,ignoreSpans:u}=(e==null?void 0:e.getOptions())||{},c=u!=null&&u.length?t.filter(p=>!$s(dt(p),u)):t,l=t.length-c.length;l&&(e==null||e.recordDroppedEvent("before_send","span",l));const h=o?p=>{const g=dt(p),v=o(g);return v||($i(),g)}:dt,f=[];for(const p of c){const g=h(p);g&&f.push(G0(g))}return _r(a,f)}function H0(t){if(!K)return;const{description:e="< unknown name >",op:r="< unknown op >",parent_span_id:n}=dt(t),{spanId:s}=t.spanContext(),i=Je(t),a=Ft(t),o=a===t,u=`[Tracing] Starting ${i?"sampled":"unsampled"} ${o?"root ":""}span`,c=[`op: ${r}`,`name: ${e}`,`ID: ${s}`];if(n&&c.push(`parent ID: ${n}`),!o){const{op:l,description:h}=dt(a);c.push(`root ID: ${a.spanContext().spanId}`),l&&c.push(`root op: ${l}`),h&&c.push(`root description: ${h}`)}H.log(`${u}
  ${c.join(`
  `)}`)}function z0(t){if(!K)return;const{description:e="< unknown name >",op:r="< unknown op >"}=dt(t),{spanId:n}=t.spanContext(),i=Ft(t)===t,a=`[Tracing] Finishing "${r}" ${i?"root ":""}span "${e}" with ID ${n}`;H.log(a)}function W0(t,e,r,n=Kt()){const s=n&&Ft(n);s&&(K&&H.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${r}`),s.addEvent(t,{[Wn]:e,[zn]:r}))}function To(t){if(!t||t.length===0)return;const e={};return t.forEach(r=>{const n=r.attributes||{},s=n[zn],i=n[Wn];typeof s=="string"&&typeof i=="number"&&(e[r.name]={value:i,unit:s})}),e}const Do=1e3;class ii{constructor(e={}){this._traceId=e.traceId||Ae(),this._spanId=e.spanId||we(),this._startTime=e.startTimestamp||Dt(),this._links=e.links,this._attributes={},this.setAttributes({[Tt]:"manual",[Ce]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,r){}spanContext(){const{_spanId:e,_traceId:r,_sampled:n}=this;return{spanId:e,traceId:r,traceFlags:n?Aa:Rc}}setAttribute(e,r){return r===void 0?delete this._attributes[e]:this._attributes[e]=r,this}setAttributes(e){return Object.keys(e).forEach(r=>this.setAttribute(r,e[r])),this}updateStartTime(e){this._startTime=cr(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(pe,"custom"),this}end(e){this._endTime||(this._endTime=cr(e),z0(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ce],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Gc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Tt],profile_id:this._attributes[wa],exclusive_time:this._attributes[en],measurements:To(this._events),is_segment:this._isStandaloneSpan&&Ft(this)===this||void 0,segment_id:this._isStandaloneSpan?Ft(this).spanContext().spanId:void 0,links:Lc(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,r,n){K&&H.log("[Tracing] Adding an event to span:",e);const s=No(r)?r:n||Dt(),i=No(r)?{}:r||{},a={name:e,time:cr(s),attributes:i};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=_t();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ft(this)))return;if(this._isStandaloneSpan){this._sampled?X0(U0([this],e)):(K&&H.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const n=this._convertSpanToTransaction();n&&(js(this).scope||Et()).captureEvent(n)}_convertSpanToTransaction(){var l;if(!Io(dt(this)))return;this._name||(K&&H.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:r}=js(this),n=(l=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:l.normalizedRequest;if(this._sampled!==!0)return;const i=Ms(this).filter(h=>h!==this&&!V0(h)).map(h=>dt(h)).filter(Io),a=this._attributes[pe];delete this._attributes[So],i.forEach(h=>{delete h.data[So]});const o={contexts:{trace:y0(this)},spans:i.length>Do?i.sort((h,f)=>h.start_timestamp-f.start_timestamp).slice(0,Do):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:r,dynamicSamplingContext:$e(this)},request:n,...a&&{transaction_info:{source:a}}},u=To(this._events);return u&&Object.keys(u).length&&(K&&H.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),o.measurements=u),o}}function No(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Io(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function V0(t){return t instanceof ii&&t.isStandaloneSpan()}function X0(t){const e=_t();if(!e)return;const r=t[1];if(!r||r.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function J0(t,e,r=()=>{},n=()=>{}){let s;try{s=t()}catch(i){throw e(i),r(),i}return K0(s,e,r,n)}function K0(t,e,r,n){return Zr(t)?t.then(s=>(r(),n(s),s),s=>{throw e(s),r(),s}):(r(),n(t),t)}function Y0(t,e,r){if(!ue(t))return[!1];let n,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:o=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):o}),n=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,n=!0);const i=In(s);if(i===void 0)return K&&H.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return K&&H.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,n];const a=r<i;return a||K&&H.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[a,i,n]}const Uc="__SENTRY_SUPPRESS_TRACING__";function Q0(t,e){const r=Ta();if(r.startSpan)return r.startSpan(t,e);const n=zc(t),{forceTransaction:s,parentSpan:i,scope:a}=t,o=a==null?void 0:a.clone();return si(o,()=>td(i)(()=>{const c=Et(),l=Wc(c,i),f=t.onlyIfParent&&!l?new qe:Hc({parentSpan:l,spanArguments:n,forceTransaction:s,scope:c});return Ur(c,f),J0(()=>e(f),()=>{const{status:p}=dt(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Ct,message:"internal_error"})},()=>{f.end()})}))}function nn(t){const e=Ta();if(e.startInactiveSpan)return e.startInactiveSpan(t);const r=zc(t),{forceTransaction:n,parentSpan:s}=t;return(t.scope?a=>si(t.scope,a):s!==void 0?a=>Ca(s,a):a=>a())(()=>{const a=Et(),o=Wc(a,s);return t.onlyIfParent&&!o?new qe:Hc({parentSpan:o,spanArguments:r,forceTransaction:n,scope:a})})}function Ca(t,e){const r=Ta();return r.withActiveSpan?r.withActiveSpan(t,e):si(n=>(Ur(n,t||void 0),e(n)))}function Hc({parentSpan:t,spanArguments:e,forceTransaction:r,scope:n}){if(!ue()){const a=new qe;if(r||!t){const o={sampled:"false",sample_rate:"0",transaction:e.name,...$e(a)};As(a,o)}return a}const s=Te();let i;if(t&&!r)i=Z0(t,n,e),Oc(t,i);else if(t){const a=$e(t),{traceId:o,spanId:u}=t.spanContext(),c=Je(t);i=ko({traceId:o,parentSpanId:u,...e},n,c),As(i,a)}else{const{traceId:a,dsc:o,parentSpanId:u,sampled:c}={...s.getPropagationContext(),...n.getPropagationContext()};i=ko({traceId:a,parentSpanId:u,...e},n,c),o&&As(i,o)}return H0(i),t0(i,n,s),i}function zc(t){const r={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...r};return n.startTimestamp=cr(t.startTime),delete n.startTime,n}return r}function Ta(){const t=gr();return tn(t)}function ko(t,e,r){var g;const n=_t(),s=(n==null?void 0:n.getOptions())||{},{name:i=""}=t,a={spanAttributes:{...t.attributes},spanName:i,parentSampled:r};n==null||n.emit("beforeSampling",a,{decision:!1});const o=a.parentSampled??r,u=a.spanAttributes,c=e.getPropagationContext(),[l,h,f]=e.getScopeData().sdkProcessingMetadata[Uc]?[!1]:Y0(s,{name:i,parentSampled:o,attributes:u,parentSampleRate:In((g=c.dsc)==null?void 0:g.sample_rate)},c.sampleRand),p=new ii({...t,attributes:{[pe]:"custom",[Sa]:h!==void 0&&f?h:void 0,...u},sampled:l});return!l&&n&&(K&&H.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),n.recordDroppedEvent("sample_rate","transaction")),n&&n.emit("spanStart",p),p}function Z0(t,e,r){const{spanId:n,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[Uc]?!1:Je(t),a=i?new ii({...r,parentSpanId:n,traceId:s,sampled:i}):new qe({traceId:s});Oc(t,a);const o=_t();return o&&(o.emit("spanStart",a),r.endTimestamp&&o.emit("spanEnd",a)),a}function Wc(t,e){if(e)return e;if(e===null)return;const r=Bs(t);if(!r)return;const n=_t();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Ft(r):r}function td(t){return t!==void 0?e=>Ca(t,e):e=>e()}const Ps={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ed="heartbeatFailed",rd="idleTimeout",nd="finalTimeout",sd="externalFinish";function Vc(t,e={}){const r=new Map;let n=!1,s,i=sd,a=!e.disableAutoFinish;const o=[],{idleTimeout:u=Ps.idleTimeout,finalTimeout:c=Ps.finalTimeout,childSpanTimeout:l=Ps.childSpanTimeout,beforeSpanEnd:h,trimIdleSpanEndTimestamp:f=!0}=e,p=_t();if(!p||!ue()){const x=new qe,G={sample_rate:"0",sampled:"false",...$e(x)};return As(x,G),x}const g=Et(),v=Kt(),y=id(t);y.end=new Proxy(y.end,{apply(x,G,E){if(h&&h(y),G instanceof qe)return;const[w,...T]=E,I=w||Dt(),O=cr(I),q=Ms(y).filter(U=>U!==y),J=dt(y);if(!q.length||!f)return C(O),Reflect.apply(x,G,[O,...T]);const Z=p.getOptions().ignoreSpans,W=q==null?void 0:q.reduce((U,L)=>{const et=dt(L);return!et.timestamp||Z&&$s(et,Z)?U:U?Math.max(U,et.timestamp):et.timestamp},void 0),N=J.start_timestamp,B=Math.min(N?N+c/1e3:1/0,Math.max(N||-1/0,Math.min(O,W||1/0)));return C(B),Reflect.apply(x,G,[B,...T])}});function S(){s&&(clearTimeout(s),s=void 0)}function A(x){S(),s=setTimeout(()=>{!n&&r.size===0&&a&&(i=rd,y.end(x))},u)}function P(x){s=setTimeout(()=>{!n&&a&&(i=ed,y.end(x))},l)}function k(x){S(),r.set(x,!0);const G=Dt();P(G+l/1e3)}function R(x){if(r.has(x)&&r.delete(x),r.size===0){const G=Dt();A(G+u/1e3)}}function C(x){n=!0,r.clear(),o.forEach(q=>q()),Ur(g,v);const G=dt(y),{start_timestamp:E}=G;if(!E)return;G.data[Nn]||y.setAttribute(Nn,i);const T=G.status;(!T||T==="unknown")&&y.setStatus({code:xa}),H.log(`[Tracing] Idle span "${G.op}" finished`);const I=Ms(y).filter(q=>q!==y);let O=0;I.forEach(q=>{q.isRecording()&&(q.setStatus({code:Ct,message:"cancelled"}),q.end(x),K&&H.log("[Tracing] Cancelling span since span ended early",JSON.stringify(q,void 0,2)));const J=dt(q),{timestamp:Z=0,start_timestamp:W=0}=J,N=W<=x,B=(c+u)/1e3,U=Z-W<=B;if(K){const L=JSON.stringify(q,void 0,2);N?U||H.log("[Tracing] Discarding span since it finished after idle span final timeout",L):H.log("[Tracing] Discarding span since it happened after idle span was finished",L)}(!U||!N)&&(w0(y,q),O++)}),O>0&&y.setAttribute("sentry.idle_span_discarded_spans",O)}return o.push(p.on("spanStart",x=>{if(n||x===y||dt(x).timestamp||x instanceof ii&&x.isStandaloneSpan())return;Ms(y).includes(x)&&k(x.spanContext().spanId)})),o.push(p.on("spanEnd",x=>{n||R(x.spanContext().spanId)})),o.push(p.on("idleSpanEnableAutoFinish",x=>{x===y&&(a=!0,A(),r.size&&P())})),e.disableAutoFinish||A(),setTimeout(()=>{n||(y.setStatus({code:Ct,message:"deadline_exceeded"}),i=nd,y.end())},c),y}function id(t){const e=nn(t);return Ur(Et(),e),K&&H.log("[Tracing] Started span is an idle span"),e}const yi=0,Ro=1,Lo=2;function ai(t){return new kn(e=>{e(t)})}function Da(t){return new kn((e,r)=>{r(t)})}class kn{constructor(e){this._state=yi,this._handlers=[],this._runExecutor(e)}then(e,r){return new kn((n,s)=>{this._handlers.push([!1,i=>{if(!e)n(i);else try{n(e(i))}catch(a){s(a)}},i=>{if(!r)s(i);else try{n(r(i))}catch(a){s(a)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new kn((r,n)=>{let s,i;return this.then(a=>{i=!1,s=a,e&&e()},a=>{i=!0,s=a,e&&e()}).then(()=>{if(i){n(s);return}r(s)})})}_executeHandlers(){if(this._state===yi)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===Ro&&r[1](this._value),this._state===Lo&&r[2](this._value),r[0]=!0)})}_runExecutor(e){const r=(i,a)=>{if(this._state===yi){if(Zr(a)){a.then(n,s);return}this._state=i,this._value=a,this._executeHandlers()}},n=i=>{r(Ro,i)},s=i=>{r(Lo,i)};try{e(n,s)}catch(i){s(i)}}}function ad(t,e,r,n=0){try{const s=zi(e,r,t,n);return Zr(s)?s:ai(s)}catch(s){return Da(s)}}function zi(t,e,r,n){const s=r[n];if(!t||!s)return t;const i=s({...t},e);return K&&i===null&&H.log(`Event processor "${s.id||"?"}" dropped event`),Zr(i)?i.then(a=>zi(a,e,r,n+1)):zi(i,e,r,n+1)}let ve,Go,Oo,ke;function od(t){const e=lt._sentryDebugIds,r=lt._debugIds;if(!e&&!r)return{};const n=e?Object.keys(e):[],s=r?Object.keys(r):[];if(ke&&n.length===Go&&s.length===Oo)return ke;Go=n.length,Oo=s.length,ke={},ve||(ve={});const i=(a,o)=>{for(const u of a){const c=o[u],l=ve==null?void 0:ve[u];if(l&&ke&&c)ke[l[0]]=c,ve&&(ve[u]=[l[0],c]);else if(c){const h=t(u);for(let f=h.length-1;f>=0;f--){const p=h[f],g=p==null?void 0:p.filename;if(g&&ke&&ve){ke[g]=c,ve[u]=[g,c];break}}}}};return e&&i(n,e),r&&i(s,r),ke}function ud(t,e){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:i}=e;ld(t,e),n&&dd(t,n),pd(t,r),hd(t,s),fd(t,i)}function Fo(t,e){const{extra:r,tags:n,attributes:s,user:i,contexts:a,level:o,sdkProcessingMetadata:u,breadcrumbs:c,fingerprint:l,eventProcessors:h,attachments:f,propagationContext:p,transactionName:g,span:v}=e;mn(t,"extra",r),mn(t,"tags",n),mn(t,"attributes",s),mn(t,"user",i),mn(t,"contexts",a),t.sdkProcessingMetadata=Hn(t.sdkProcessingMetadata,u,2),o&&(t.level=o),g&&(t.transactionName=g),v&&(t.span=v),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),h.length&&(t.eventProcessors=[...t.eventProcessors,...h]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...p}}function mn(t,e,r){t[e]=Hn(t[e],r,1)}function cd(t,e){const r=Wf().getScopeData();return t&&Fo(r,t.getScopeData()),e&&Fo(r,e.getScopeData()),r}function ld(t,e){const{extra:r,tags:n,user:s,contexts:i,level:a,transactionName:o}=e;Object.keys(r).length&&(t.extra={...r,...t.extra}),Object.keys(n).length&&(t.tags={...n,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),a&&(t.level=a),o&&t.type!=="transaction"&&(t.transaction=o)}function hd(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function fd(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function dd(t,e){t.contexts={trace:_0(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:$e(e),...t.sdkProcessingMetadata};const r=Ft(e),n=dt(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}function pd(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function md(t,e,r,n,s,i){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=t,u={...e,event_id:e.event_id||r.event_id||te(),timestamp:e.timestamp||yr()},c=r.integrations||t.integrations.map(y=>y.name);gd(u,t),vd(u,c),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&yd(u,t.stackParser);const l=bd(n,r.captureContext);r.mechanism&&$r(u,r.mechanism);const h=s?s.getEventProcessors():[],f=cd(i,l),p=[...r.attachments||[],...f.attachments];p.length&&(r.attachments=p),ud(u,f);const g=[...h,...f.eventProcessors];return ad(g,u,r).then(y=>(y&&_d(y),typeof a=="number"&&a>0?Ed(y,a,o):y))}function gd(t,e){var o,u;const{environment:r,release:n,dist:s,maxValueLength:i}=e;t.environment=t.environment||r||Pa,!t.release&&n&&(t.release=n),!t.dist&&s&&(t.dist=s);const a=t.request;a!=null&&a.url&&i&&(a.url=Oi(a.url,i)),i&&((u=(o=t.exception)==null?void 0:o.values)==null||u.forEach(c=>{c.value&&(c.value=Oi(c.value,i))}))}function yd(t,e){var n,s;const r=od(e);(s=(n=t.exception)==null?void 0:n.values)==null||s.forEach(i=>{var a,o;(o=(a=i.stacktrace)==null?void 0:a.frames)==null||o.forEach(u=>{u.filename&&(u.debug_id=r[u.filename])})})}function _d(t){var n,s;const e={};if((s=(n=t.exception)==null?void 0:n.values)==null||s.forEach(i=>{var a,o;(o=(a=i.stacktrace)==null?void 0:a.frames)==null||o.forEach(u=>{u.debug_id&&(u.abs_path?e[u.abs_path]=u.debug_id:u.filename&&(e[u.filename]=u.debug_id),delete u.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([i,a])=>{r.push({type:"sourcemap",code_file:i,debug_id:a})})}function vd(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Ed(t,e,r){var s,i;if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(a=>({...a,...a.data&&{data:be(a.data,e,r)}}))},...t.user&&{user:be(t.user,e,r)},...t.contexts&&{contexts:be(t.contexts,e,r)},...t.extra&&{extra:be(t.extra,e,r)}};return(s=t.contexts)!=null&&s.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=be(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(a=>({...a,...a.data&&{data:be(a.data,e,r)}}))),(i=t.contexts)!=null&&i.flags&&n.contexts&&(n.contexts.flags=be(t.contexts.flags,3,r)),n}function bd(t,e){if(!e)return t;const r=t?t.clone():new Pe;return r.update(e),r}function Sd(t,e){return Et().captureException(t,void 0)}function Xc(t,e){return Et().captureEvent(t,e)}function wd(t,e){Te().setContext(t,e)}function xd(){const t=_t();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function Bo(t){const e=Te(),r=Et(),{userAgent:n}=lt.navigator||{},s=Gf({user:r.getUser()||e.getUser(),...n&&{userAgent:n},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&qr(i,{status:"exited"}),Jc(),e.setSession(s),s}function Jc(){const t=Te(),r=Et().getSession()||t.getSession();r&&Of(r),Kc(),t.setSession()}function Kc(){const t=Te(),e=_t(),r=t.getSession();r&&e&&e.captureSession(r)}function jo(t=!1){if(t){Jc();return}Kc()}const Md="7";function Ad(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Pd(t){return`${Ad(t)}${t.projectId}/envelope/`}function Cd(t,e){const r={sentry_version:Md};return t.publicKey&&(r.sentry_key=t.publicKey),e&&(r.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(r).toString()}function Td(t,e,r){return e||`${Pd(t)}?${Cd(t,r)}`}const $o=[];function Dd(t){const e={};return t.forEach(r=>{const{name:n}=r,s=e[n];s&&!s.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.values(e)}function Nd(t){const e=t.defaultIntegrations||[],r=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let n;if(Array.isArray(r))n=[...e,...r];else if(typeof r=="function"){const s=r(e);n=Array.isArray(s)?s:[s]}else n=e;return Dd(n)}function Id(t,e){const r={};return e.forEach(n=>{n&&Yc(t,n,r)}),r}function qo(t,e){for(const r of e)r!=null&&r.afterAllSetup&&r.afterAllSetup(t)}function Yc(t,e,r){if(r[e.name]){K&&H.log(`Integration skipped because it was already installed: ${e.name}`);return}if(r[e.name]=e,!$o.includes(e.name)&&typeof e.setupOnce=="function"&&(e.setupOnce(),$o.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>n(s,i,t))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),s=Object.assign((i,a)=>n(i,a,t),{id:e.name});t.addEventProcessor(s)}K&&H.log(`Integration installed: ${e.name}`)}function kd(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function Rd(t,e,r,n){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),r&&n&&(s.dsn=rn(n)),_r(s,[kd(t)])}function Qc(t,e){const r=e??Ld(t)??[];if(r.length===0)return;const n=t.getOptions(),s=Rd(r,n._metadata,n.tunnel,t.getDsn());Zc().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function Ld(t){return Zc().get(t)}function Zc(){return Kr("clientToLogBufferMap",()=>new WeakMap)}function Gd(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function Od(t,e,r,n){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),r&&n&&(s.dsn=rn(n)),_r(s,[Gd(t)])}function tl(t,e){const r=e??Fd(t)??[];if(r.length===0)return;const n=t.getOptions(),s=Od(r,n._metadata,n.tunnel,t.getDsn());el().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(s)}function Fd(t){return el().get(t)}function el(){return Kr("clientToMetricBufferMap",()=>new WeakMap)}const Na=Symbol.for("SentryBufferFullError");function Ia(t=100){const e=new Set;function r(){return e.size<t}function n(a){e.delete(a)}function s(a){if(!r())return Da(Na);const o=a();return e.add(o),o.then(()=>n(o),()=>n(o)),o}function i(a){if(!e.size)return ai(!0);const o=Promise.allSettled(Array.from(e)).then(()=>!0);if(!a)return o;const u=[o,new Promise(c=>setTimeout(()=>c(!1),a))];return Promise.race(u)}return{get $(){return Array.from(e)},add:s,drain:i}}const Bd=60*1e3;function jd(t,e=Un()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?Bd:n-e}function $d(t,e){return t[e]||t.all||0}function qd(t,e,r=Un()){return $d(t,e)>r}function Ud(t,{statusCode:e,headers:r},n=Un()){const s={...t},i=r==null?void 0:r["x-sentry-rate-limits"],a=r==null?void 0:r["retry-after"];if(i)for(const o of i.trim().split(",")){const[u,c,,,l]=o.split(":",5),h=parseInt(u,10),f=(isNaN(h)?60:h)*1e3;if(!c)s.all=n+f;else for(const p of c.split(";"))p==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(s[p]=n+f):s[p]=n+f}else a?s.all=n+jd(a,n):e===429&&(s.all=n+60*1e3);return s}const rl=64;function Hd(t,e,r=Ia(t.bufferSize||rl)){let n={};const s=a=>r.drain(a);function i(a){const o=[];if(Ui(a,(h,f)=>{const p=Co(f);qd(n,p)?t.recordDroppedEvent("ratelimit_backoff",p):o.push(h)}),o.length===0)return Promise.resolve({});const u=_r(a[0],o),c=h=>{if(k0(u,["client_report"])){K&&H.warn(`Dropping client report. Will not send outcomes (reason: ${h}).`);return}Ui(u,(f,p)=>{t.recordDroppedEvent(h,Co(p))})},l=()=>e({body:R0(u)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&K&&H.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),n=Ud(n,h),h),h=>{throw c("network_error"),K&&H.error("Encountered error running transport request:",h),h});return r.add(l).then(h=>h,h=>{if(h===Na)return K&&H.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw h})}return{send:i,flush:s}}function zd(t,e,r){const n=[{type:"client_report"},{timestamp:yr(),discarded_events:t}];return _r(e?{dsn:e}:{},[n])}function nl(t){const e=[];t.message&&e.push(t.message);try{const r=t.exception.values[t.exception.values.length-1];r!=null&&r.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`))}catch{}return e}function Wd(t){var u;const{trace_id:e,parent_span_id:r,span_id:n,status:s,origin:i,data:a,op:o}=((u=t.contexts)==null?void 0:u.trace)??{};return{data:a??{},description:t.transaction,op:o,parent_span_id:r,span_id:n??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:a==null?void 0:a[wa],exclusive_time:a==null?void 0:a[en],measurements:t.measurements,is_segment:!0}}function Vd(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[wa]:t.profile_id},...t.exclusive_time&&{[en]:t.exclusive_time}}}},measurements:t.measurements}}const Uo="Not capturing exception because it's already been captured.",Ho="Discarded session because of missing or non-string release",sl=Symbol.for("SentryInternalError"),il=Symbol.for("SentryDoNotSendEventError"),Xd=5e3;function Cs(t){return{message:t,[sl]:!0}}function _i(t){return{message:t,[il]:!0}}function zo(t){return!!t&&typeof t=="object"&&sl in t}function Wo(t){return!!t&&typeof t=="object"&&il in t}function Vo(t,e,r,n,s){let i=0,a,o=!1;t.on(r,()=>{i=0,clearTimeout(a),o=!1}),t.on(e,u=>{i+=n(u),i>=8e5?s(t):o||(o=!0,a=setTimeout(()=>{s(t)},Xd))}),t.on("flush",()=>{s(t)})}class Jd{constructor(e){var n,s,i;if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Ia(((n=e.transportOptions)==null?void 0:n.bufferSize)??rl),e.dsn?this._dsn=d0(e.dsn):K&&H.warn("No DSN provided, client will not send events."),this._dsn){const a=Td(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:a})}this._options.enableLogs=this._options.enableLogs??((s=this._options._experiments)==null?void 0:s.enableLogs),this._options.enableLogs&&Vo(this,"afterCaptureLog","flushLogs",Zd,Qc),(this._options.enableMetrics??((i=this._options._experiments)==null?void 0:i.enableMetrics)??!0)&&Vo(this,"afterCaptureMetric","flushMetrics",Qd,tl)}captureException(e,r,n){const s=te();if(vo(e))return K&&H.log(Uo),s;const i={event_id:s,...r};return this._process(()=>this.eventFromException(e,i).then(a=>this._captureEvent(a,i,n)).then(a=>a),"error"),i.event_id}captureMessage(e,r,n,s){const i={event_id:te(),...n},a=_a(e)?e:String(e),o=jr(e),u=o?this.eventFromMessage(a,r,i):this.eventFromException(e,i);return this._process(()=>u.then(c=>this._captureEvent(c,i,s)),o?"unknown":"error"),i.event_id}captureEvent(e,r,n){const s=te();if(r!=null&&r.originalException&&vo(r.originalException))return K&&H.log(Uo),s;const i={event_id:s,...r},a=e.sdkProcessingMetadata||{},o=a.capturedSpanScope,u=a.capturedSpanIsolationScope,c=Xo(e.type);return this._process(()=>this._captureEvent(e,i,o||n,u),c),i.event_id}captureSession(e){this.sendSession(e),qr(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const r=this._transport;if(!r)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(e),s=await r.flush(e);return n&&s}async close(e){const r=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),r}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];Yc(this,e,this._integrations),r||qo(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let n=q0(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of r.attachments||[])n=I0(n,O0(s));this.sendEnvelope(n).then(s=>this.emit("afterSendEvent",e,s))}sendSession(e){const{release:r,environment:n=Pa}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!r){K&&H.warn(Ho);return}i.release=i.release||r,i.environment=i.environment||n,e.attrs=i}else{if(!e.release&&!r){K&&H.warn(Ho);return}e.release=e.release||r,e.environment=e.environment||n}this.emit("beforeSendSession",e);const s=$0(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,r,n=1){if(this._options.sendClientReports){const s=`${e}:${r}`;K&&H.log(`Recording outcome: "${s}"${n>1?` (${n} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+n}}on(e,r){const n=this._hooks[e]=this._hooks[e]||new Set,s=(...i)=>r(...i);return n.add(s),()=>{n.delete(s)}}emit(e,...r){const n=this._hooks[e];n&&n.forEach(s=>s(...r))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(r){return K&&H.error("Error while sending envelope:",r),{}}return K&&H.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Id(this,e),qo(this,e)}_updateSessionFromEvent(e,r){var u,c;let n=r.level==="fatal",s=!1;const i=(u=r.exception)==null?void 0:u.values;if(i){s=!0,n=!1;for(const l of i)if(((c=l.mechanism)==null?void 0:c.handled)===!1){n=!0;break}}const a=e.status==="ok";(a&&e.errors===0||a&&n)&&(qr(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let r=0;for(;!e||r<e;){if(await new Promise(n=>setTimeout(n,1)),!this._numProcessing)return!0;r++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,n,s){const i=this.getOptions(),a=Object.keys(this._integrations);return!r.integrations&&(a!=null&&a.length)&&(r.integrations=a),this.emit("preprocessEvent",e,r),e.type||s.setLastEventId(e.event_id||r.event_id),md(i,e,r,n,this,s).then(o=>{if(o===null)return o;this.emit("postprocessEvent",o,r),o.contexts={trace:Vf(n),...o.contexts};const u=jc(this,n);return o.sdkProcessingMetadata={dynamicSamplingContext:u,...o.sdkProcessingMetadata},o})}_captureEvent(e,r={},n=Et(),s=Te()){return K&&Wi(e)&&H.log(`Captured error event \`${nl(e)[0]||"<unknown>"}\``),this._processEvent(e,r,n,s).then(i=>i.event_id,i=>{K&&(Wo(i)?H.log(i.message):zo(i)?H.warn(i.message):H.warn(i))})}_processEvent(e,r,n,s){const i=this.getOptions(),{sampleRate:a}=i,o=al(e),u=Wi(e),l=`before send for type \`${e.type||"error"}\``,h=typeof a>"u"?void 0:In(a);if(u&&typeof h=="number"&&Ge()>h)return this.recordDroppedEvent("sample_rate","error"),Da(_i(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));const f=Xo(e.type);return this._prepareEvent(e,r,n,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),_i("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return p;const v=Yd(this,i,p,r);return Kd(v,l)}).then(p=>{var y;if(p===null){if(this.recordDroppedEvent("before_send",f),o){const A=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",A)}throw _i(`${l} returned \`null\`, will not send event.`)}const g=n.getSession()||s.getSession();if(u&&g&&this._updateSessionFromEvent(g,p),o){const S=((y=p.sdkProcessingMetadata)==null?void 0:y.spanCountBeforeProcessing)||0,A=p.spans?p.spans.length:0,P=S-A;P>0&&this.recordDroppedEvent("before_send","span",P)}const v=p.transaction_info;if(o&&v&&p.transaction!==e.transaction){const S="custom";p.transaction_info={...v,source:S}}return this.sendEvent(p,r),p}).then(null,p=>{throw Wo(p)||zo(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Cs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e,r){this._numProcessing++,this._promiseBuffer.add(e).then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n===Na&&this.recordDroppedEvent("queue_overflow",r),n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([r,n])=>{const[s,i]=r.split(":");return{reason:s,category:i,quantity:n}})}_flushOutcomes(){K&&H.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){K&&H.log("No outcomes to send");return}if(!this._dsn){K&&H.log("No dsn provided, will not send outcomes");return}K&&H.log("Sending outcomes:",e);const r=zd(e,this._options.tunnel&&rn(this._dsn));this.sendEnvelope(r)}}function Xo(t){return t==="replay_event"?"replay":t||"error"}function Kd(t,e){const r=`${e} must return \`null\` or a valid event.`;if(Zr(t))return t.then(n=>{if(!Dn(n)&&n!==null)throw Cs(r);return n},n=>{throw Cs(`${e} rejected with ${n}`)});if(!Dn(t)&&t!==null)throw Cs(r);return t}function Yd(t,e,r,n){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:a,ignoreSpans:o}=e;let u=r;if(Wi(u)&&s)return s(u,n);if(al(u)){if(a||o){const c=Wd(u);if(o!=null&&o.length&&$s(c,o))return null;if(a){const l=a(c);l?u=Hn(r,Vd(l)):$i()}if(u.spans){const l=[],h=u.spans;for(const p of h){if(o!=null&&o.length&&$s(p,o)){M0(h,p);continue}if(a){const g=a(p);g?l.push(g):($i(),l.push(p))}else l.push(p)}const f=u.spans.length-l.length;f&&t.recordDroppedEvent("before_send","span",f),u.spans=l}}if(i){if(u.spans){const c=u.spans.length;u.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return i(u,n)}}return u}function Wi(t){return t.type===void 0}function al(t){return t.type==="transaction"}function Qd(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+ol(t.attributes)}function Zd(t){let e=0;return t.message&&(e+=t.message.length*2),e+ol(t.attributes)}function ol(t){if(!t)return 0;let e=0;return Object.values(t).forEach(r=>{Array.isArray(r)?e+=r.length*Jo(r[0]):jr(r)?e+=Jo(r):e+=100}),e}function Jo(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function tp(t){return ri(t)&&"__sentry_fetch_url_host__"in t&&typeof t.__sentry_fetch_url_host__=="string"}function Ko(t){return tp(t)?`${t.message} (${t.__sentry_fetch_url_host__})`:t.message}function ep(t,e){e.debug===!0&&(K?H.enable():Yr(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Et().update(e.initialScope);const n=new t(e);return rp(n),n.init(),n}function rp(t){Et().setClient(t)}const np="thismessage:/";function ul(t){return"isRelative"in t}function cl(t,e){const r=t.indexOf("://")<=0&&t.indexOf("//")!==0,n=r?np:void 0;try{if("canParse"in URL&&!URL.canParse(t,n))return;const s=new URL(t,n);return r?{isRelative:r,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function sp(t){if(ul(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function hr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}function ip(t){return t.split(/[?#]/,1)[0]}function Fe(t,e=!0){if(t.startsWith("data:")){const r=t.match(/^data:([^;,]+)/),n=r?r[1]:"text/plain",s=t.includes(";base64,"),i=t.indexOf(",");let a="";if(e&&i!==-1){const o=t.slice(i+1);a=o.length>10?`${o.slice(0,10)}... [truncated]`:o}return`data:${n}${s?",base64":""}${a?`,${a}`:""}`}return t}function ap(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function ll(t,e,r=[e],n="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:r.map(i=>({name:`${n}:@sentry/${i}`,version:ur})),version:ur}),t._metadata=s}function hl(t={}){const e=t.client||_t();if(!xd()||!e)return{};const r=gr(),n=tn(r);if(n.getTraceData)return n.getTraceData(t);const s=t.scope||Et(),i=t.span||Kt(),a=i?v0(i):op(s),o=i?$e(i):jc(e,s),u=n0(o);if(!Nc.test(a))return H.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const l={"sentry-trace":a,baggage:u};return t.propagateTraceparent&&(l.traceparent=i?E0(i):up(s)),l}function op(t){const{traceId:e,sampled:r,propagationSpanId:n}=t.getPropagationContext();return Ic(e,n,r)}function up(t){const{traceId:e,sampled:r,propagationSpanId:n}=t.getPropagationContext();return kc(e,n,r)}const cp=100;function dr(t,e){const r=_t(),n=Te();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=cp}=r.getOptions();if(i<=0)return;const o={timestamp:yr(),...t},u=s?Yr(()=>s(o,e)):o;u!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",u,e),n.addBreadcrumb(u,i))}let Yo;const lp="FunctionToString",Qo=new WeakMap,hp=(()=>({name:lp,setupOnce(){Yo=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=ba(this),r=Qo.has(_t())&&e!==void 0?e:this;return Yo.apply(r,t)}}catch{}},setup(t){Qo.set(t,!0)}})),fp=hp,dp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],pp="EventFilters",mp=(t={})=>{let e;return{name:pp,setup(r){const n=r.getOptions();e=Zo(t,n)},processEvent(r,n,s){if(!e){const i=s.getOptions();e=Zo(t,i)}return yp(r,e)?null:r}}},gp=((t={})=>({...mp(t),name:"InboundFilters"}));function Zo(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:dp],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function yp(t,e){if(t.type){if(t.type==="transaction"&&vp(t,e.ignoreTransactions))return K&&H.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ar(t)}`),!0}else{if(_p(t,e.ignoreErrors))return K&&H.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ar(t)}`),!0;if(wp(t))return K&&H.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ar(t)}`),!0;if(Ep(t,e.denyUrls))return K&&H.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ar(t)}.
Url: ${qs(t)}`),!0;if(!bp(t,e.allowUrls))return K&&H.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ar(t)}.
Url: ${qs(t)}`),!0}return!1}function _p(t,e){return e!=null&&e.length?nl(t).some(r=>Oe(r,e)):!1}function vp(t,e){if(!(e!=null&&e.length))return!1;const r=t.transaction;return r?Oe(r,e):!1}function Ep(t,e){if(!(e!=null&&e.length))return!1;const r=qs(t);return r?Oe(r,e):!1}function bp(t,e){if(!(e!=null&&e.length))return!0;const r=qs(t);return r?Oe(r,e):!0}function Sp(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function qs(t){var e,r;try{const n=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(i=>{var a,o,u;return((a=i.mechanism)==null?void 0:a.parent_id)===void 0&&((u=(o=i.stacktrace)==null?void 0:o.frames)==null?void 0:u.length)}),s=(r=n==null?void 0:n.stacktrace)==null?void 0:r.frames;return s?Sp(s):null}catch{return K&&H.error(`Cannot extract url for event ${ar(t)}`),null}}function wp(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)!=null&&r.length?!t.message&&!t.exception.values.some(n=>n.stacktrace||n.type&&n.type!=="Error"||n.value):!1}function xp(t,e,r,n,s,i){var o;if(!((o=s.exception)!=null&&o.values)||!i||!Me(i.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Vi(t,e,n,i.originalException,r,s.exception.values,a,0))}function Vi(t,e,r,n,s,i,a,o){if(i.length>=r+1)return i;let u=[...i];if(Me(n[s],Error)){tu(a,o);const c=t(e,n[s]),l=u.length;eu(c,s,l,o),u=Vi(t,e,r,n[s],s,[c,...u],c,l)}return Array.isArray(n.errors)&&n.errors.forEach((c,l)=>{if(Me(c,Error)){tu(a,o);const h=t(e,c),f=u.length;eu(h,`errors[${l}]`,f,o),u=Vi(t,e,r,c,s,[h,...u],h,f)}}),u}function tu(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function eu(t,e,r,n){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}function Mp(t){const e="console";Ve(e,t),Xe(e,Ap)}function Ap(){"console"in lt&&df.forEach(function(t){t in lt.console&&Xt(lt.console,t,function(e){return Fs[t]=e,function(...r){Zt("console",{args:r,level:t});const s=Fs[t];s==null||s.apply(lt.console,r)}})})}function Pp(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Cp="Dedupe",Tp=(()=>{let t;return{name:Cp,processEvent(e){if(e.type)return e;try{if(Np(e,t))return K&&H.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),Dp=Tp;function Np(t,e){return e?!!(Ip(t,e)||kp(t,e)):!1}function Ip(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!dl(t,e)||!fl(t,e))}function kp(t,e){const r=ru(e),n=ru(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!dl(t,e)||!fl(t,e))}function fl(t,e){let r=fo(t),n=fo(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let s=0;s<n.length;s++){const i=n[s],a=r[s];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function dl(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function ru(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)==null?void 0:r[0]}const Rp="ConversationId",Lp=(()=>({name:Rp,setup(t){t.on("spanStart",e=>{const r=Et().getScopeData(),n=Te().getScopeData(),s=r.conversationId||n.conversationId;s&&e.setAttribute(Jf,s)})}})),Gp=Lp;function Op(t,e,r,n,s){if(!t.fetchData)return;const{method:i,url:a}=t.fetchData,o=ue()&&e(a);if(t.endTimestamp&&o){const p=t.fetchData.__span;if(!p)return;const g=n[p];g&&(jp(g,t),Fp(g,t,s),delete n[p]);return}const{spanOrigin:u="auto.http.browser",propagateTraceparent:c=!1}=typeof s=="object"?s:{spanOrigin:s},l=!!Kt(),h=o&&l?nn(qp(a,i,u)):new qe;if(t.fetchData.__span=h.spanContext().spanId,n[h.spanContext().spanId]=h,r(t.fetchData.url)){const p=t.args[0],g={...t.args[1]||{}},v=Bp(p,g,ue()&&l?h:void 0,c);v&&(t.args[1]=g,g.headers=v)}const f=_t();if(f){const p={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};f.emit("beforeOutgoingRequestSpan",h,p)}return h}function Fp(t,e,r){var s;const n=typeof r=="object"&&r!==null?r.onRequestSpanEnd:void 0;n==null||n(t,{headers:(s=e.response)==null?void 0:s.headers,error:e.error})}function Bp(t,e,r,n){const s=hl({span:r,propagateTraceparent:n}),i=s["sentry-trace"],a=s.baggage,o=s.traceparent;if(!i)return;const u=e.headers||(va(t)?t.headers:void 0);if(u)if($p(u)){const c=new Headers(u);if(c.get("sentry-trace")||c.set("sentry-trace",i),n&&o&&!c.get("traceparent")&&c.set("traceparent",o),a){const l=c.get("baggage");l?fs(l)||c.set("baggage",`${l},${a}`):c.set("baggage",a)}return c}else if(Array.isArray(u)){const c=[...u];u.find(h=>h[0]==="sentry-trace")||c.push(["sentry-trace",i]),n&&o&&!u.find(h=>h[0]==="traceparent")&&c.push(["traceparent",o]);const l=u.find(h=>h[0]==="baggage"&&fs(h[1]));return a&&!l&&c.push(["baggage",a]),c}else{const c="sentry-trace"in u?u["sentry-trace"]:void 0,l="traceparent"in u?u.traceparent:void 0,h="baggage"in u?u.baggage:void 0,f=h?Array.isArray(h)?[...h]:[h]:[],p=h&&(Array.isArray(h)?h.find(v=>fs(v)):fs(h));a&&!p&&f.push(a);const g={...u,"sentry-trace":c??i,baggage:f.length>0?f.join(","):void 0};return n&&o&&!l&&(g.traceparent=o),g}else return{...s}}function jp(t,e){var r,n;if(e.response){Ac(t,e.response.status);const s=(n=(r=e.response)==null?void 0:r.headers)==null?void 0:n.get("content-length");if(s){const i=parseInt(s);i>0&&t.setAttribute("http.response_content_length",i)}}else e.error&&t.setStatus({code:Ct,message:"internal_error"});t.end()}function fs(t){return t.split(",").some(e=>e.trim().startsWith(Ma))}function $p(t){return typeof Headers<"u"&&Me(t,Headers)}function qp(t,e,r){if(t.startsWith("data:")){const i=Fe(t);return{name:`${e} ${i}`,attributes:nu(t,void 0,e,r)}}const n=cl(t),s=n?sp(n):t;return{name:`${e} ${s}`,attributes:nu(t,n,e,r)}}function nu(t,e,r,n){const s={url:Fe(t),type:"fetch","http.method":r,[Tt]:n,[Ce]:"http.client"};return e&&(ul(e)||(s["http.url"]=Fe(e.href),s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function pl(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Rn=lt;function Up(){return"history"in Rn&&!!Rn.history}function Hp(){if(!("fetch"in Rn))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Xi(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function zp(){var r;if(typeof EdgeRuntime=="string")return!0;if(!Hp())return!1;if(Xi(Rn.fetch))return!0;let t=!1;const e=Rn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),(r=n.contentWindow)!=null&&r.fetch&&(t=Xi(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){K&&H.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function ml(t,e){const r="fetch";Ve(r,t),Xe(r,()=>gl(void 0,e))}function Wp(t){const e="fetch-body-resolved";Ve(e,t),Xe(e,()=>gl(Xp))}function gl(t,e=!1){e&&!zp()||Xt(lt,"fetch",function(r){return function(...n){const s=new Error,{method:i,url:a}=Jp(n),o={args:n,fetchData:{method:i,url:a},startTimestamp:Dt()*1e3,virtualError:s,headers:Kp(n)};return t||Zt("fetch",{...o}),r.apply(lt,n).then(async u=>(t?t(u):Zt("fetch",{...o,endTimestamp:Dt()*1e3,response:u}),u),u=>{Zt("fetch",{...o,endTimestamp:Dt()*1e3,error:u}),ri(u)&&u.stack===void 0&&(u.stack=s.stack,zt(u,"framesToPop",1));const c=_t(),l=(c==null?void 0:c.getOptions().enhanceFetchErrorMessages)??"always";if(l!==!1&&u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const p=new URL(o.fetchData.url).host;l==="always"?u.message=`${u.message} (${p})`:zt(u,"__sentry_fetch_url_host__",p)}catch{}throw u})}})}async function Vp(t,e){if(t!=null&&t.body){const r=t.body,n=r.getReader(),s=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let a;try{a=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:o}=await n.read();clearTimeout(a),o&&(e(),i=!1)}catch{i=!1}finally{clearTimeout(a)}}clearTimeout(s),n.releaseLock(),r.cancel().then(null,()=>{})}}function Xp(t){let e;try{e=t.clone()}catch{return}Vp(e,()=>{Zt("fetch-body-resolved",{endTimestamp:Dt()*1e3,response:t})})}function Ts(t,e){return!!t&&typeof t=="object"&&!!t[e]}function su(t){return typeof t=="string"?t:t?Ts(t,"url")?t.url:t.toString?t.toString():"":""}function Jp(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:su(r),method:Ts(n,"method")?String(n.method).toUpperCase():va(r)&&Ts(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:su(e),method:Ts(e,"method")?String(e.method).toUpperCase():"GET"}}function Kp(t){const[e,r]=t;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(va(e))return new Headers(e.headers)}catch{}}function Yp(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Qp(){return"npm"}function Zp(){return!Yp()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function t2(){return typeof window<"u"&&(!Zp()||e2())}function e2(){const t=lt.process;return(t==null?void 0:t.type)==="renderer"}const ft=lt;let Ji=0;function yl(){return Ji>0}function r2(){Ji++,setTimeout(()=>{Ji--})}function zr(t,e={}){function r(s){return typeof s=="function"}if(!r(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(ba(t))return t}catch{return t}const n=function(...s){try{const i=s.map(a=>zr(a,e));return t.apply(this,i)}catch(i){throw r2(),si(a=>{a.addEventProcessor(o=>(e.mechanism&&(Fi(o,void 0),$r(o,e.mechanism)),o.extra={...o.extra,arguments:s},o)),Sd(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}catch{}bc(n,t),zt(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}function ka(){const t=$n(),{referrer:e}=ft.document||{},{userAgent:r}=ft.navigator||{},n={...e&&{Referer:e},...r&&{"User-Agent":r}};return{url:t,headers:n}}function Ra(t,e){const r=La(t,e),n={type:o2(e),value:u2(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function n2(t,e,r,n){const s=_t(),i=s==null?void 0:s.getOptions().normalizeDepth,a=d2(e),o={__serialized__:$c(e,i)};if(a)return{exception:{values:[Ra(t,a)]},extra:o};const u={exception:{values:[{type:ni(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:h2(e,{isUnhandledRejection:n})}]},extra:o};if(r){const c=La(t,r);c.length&&(u.exception.values[0].stacktrace={frames:c})}return u}function vi(t,e){return{exception:{values:[Ra(t,e)]}}}function La(t,e){const r=e.stacktrace||e.stack||"",n=i2(e),s=a2(e);try{return t(r,n,s)}catch{}return[]}const s2=/Minified React error #\d+;/i;function i2(t){return t&&s2.test(t.message)?1:0}function a2(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function _l(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function o2(t){const e=t==null?void 0:t.name;return!e&&_l(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function u2(t){const e=t==null?void 0:t.message;return _l(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?Ko(e.error):Ko(t):"No error message"}function c2(t,e,r,n){const s=(r==null?void 0:r.syntheticException)||void 0,i=Ga(t,e,s,n);return $r(i),i.level="error",r!=null&&r.event_id&&(i.event_id=r.event_id),ai(i)}function l2(t,e,r="info",n,s){const i=(n==null?void 0:n.syntheticException)||void 0,a=Ki(t,e,i,s);return a.level=r,n!=null&&n.event_id&&(a.event_id=n.event_id),ai(a)}function Ga(t,e,r,n,s){let i;if(_c(e)&&e.error)return vi(t,e.error);if(mo(e)||xf(e)){const a=e;if("stack"in e)i=vi(t,e);else{const o=a.name||(mo(a)?"DOMError":"DOMException"),u=a.message?`${o}: ${a.message}`:o;i=Ki(t,u,r,n),Fi(i,u)}return"code"in a&&(i.tags={...i.tags,"DOMException.code":`${a.code}`}),i}return ri(e)?vi(t,e):Dn(e)||ni(e)?(i=n2(t,e,r,s),$r(i,{synthetic:!0}),i):(i=Ki(t,e,r,n),Fi(i,`${e}`),$r(i,{synthetic:!0}),i)}function Ki(t,e,r,n){const s={};if(n&&r){const i=La(t,r);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),$r(s,{synthetic:!0})}if(_a(e)){const{__sentry_template_string__:i,__sentry_template_values__:a}=e;return s.logentry={message:i,params:a},s}return s.message=e,s}function h2(t,{isUnhandledRejection:e}){const r=Df(t),n=e?"promise rejection":"exception";return _c(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:ni(t)?`Event \`${f2(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}function f2(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function d2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];if(r instanceof Error)return r}}class p2 extends Jd{constructor(e){var l;const r=m2(e),n=ft.SENTRY_SDK_SOURCE||Qp();ll(r,"browser",["browser"],n),(l=r._metadata)!=null&&l.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:s,sendClientReports:i,enableLogs:a,_experiments:o,enableMetrics:u}=this._options,c=u??(o==null?void 0:o.enableMetrics)??!0;ft.document&&(i||a||c)&&ft.document.addEventListener("visibilitychange",()=>{ft.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),a&&Qc(this),c&&tl(this))}),s&&this.on("beforeSendSession",ap)}eventFromException(e,r){return c2(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return l2(this._options.stackParser,e,r,n,this._options.attachStacktrace)}_prepareEvent(e,r,n,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n,s)}}function m2(t){return{release:"01fd22b0778ca73764aabb2ad5547b9b44cbbab1",sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Vn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,st=lt,g2=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Xn=(t,e,r,n)=>{let s,i;return a=>{e.value>=0&&(a||n)&&(i=e.value-(s??0),(i||s===void 0)&&(s=e.value,e.delta=i,e.rating=g2(e.value,r),t(e)))}},Jn=(t=!0)=>{var r,n;const e=(n=(r=st.performance)==null?void 0:r.getEntriesByType)==null?void 0:n.call(r,"navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},sn=()=>{const t=Jn();return(t==null?void 0:t.activationStart)??0};function Be(t,e,r){st.document&&st.addEventListener(t,e,r)}function Us(t,e,r){st.document&&st.removeEventListener(t,e,r)}let Or=-1;const vl=new Set,y2=()=>{var t,e;return((t=st.document)==null?void 0:t.visibilityState)==="hidden"&&!((e=st.document)!=null&&e.prerendering)?0:1/0},Ds=t=>{if(_2(t)&&Or>-1){if(t.type==="visibilitychange"||t.type==="pagehide")for(const e of vl)e();isFinite(Or)||(Or=t.type==="visibilitychange"?t.timeStamp:0,Us("prerenderingchange",Ds,!0))}},Kn=()=>{var t;if(st.document&&Or<0){const e=sn();Or=(st.document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0])==null?void 0:t.startTime)??y2(),Be("visibilitychange",Ds,!0),Be("pagehide",Ds,!0),Be("prerenderingchange",Ds,!0)}return{get firstHiddenTime(){return Or},onHidden(e){vl.add(e)}}};function _2(t){var e;return t.type==="pagehide"||((e=st.document)==null?void 0:e.visibilityState)==="hidden"}const v2=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Yn=(t,e=-1)=>{var i,a;const r=Jn();let n="navigate";return r&&((i=st.document)!=null&&i.prerendering||sn()>0?n="prerender":(a=st.document)!=null&&a.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:v2(),navigationType:n}},Ei=new WeakMap;function Oa(t,e){try{return Ei.get(t)||Ei.set(t,new e),Ei.get(t)}catch{return new e}}class Hs{constructor(){Hs.prototype.__init.call(this),Hs.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var s;if(e.hadRecentInput)return;const r=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,e)}}const an=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return n.observe({type:t,buffered:!0,...r}),n}}catch{}},Fa=t=>{let e=!1;return()=>{e||(t(),e=!0)}},oi=t=>{var e;(e=st.document)!=null&&e.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},E2=[1800,3e3],b2=(t,e={})=>{oi(()=>{const r=Kn(),n=Yn("FCP");let s;const a=an("paint",o=>{for(const u of o)u.name==="first-contentful-paint"&&(a.disconnect(),u.startTime<r.firstHiddenTime&&(n.value=Math.max(u.startTime-sn(),0),n.entries.push(u),s(!0)))});a&&(s=Xn(t,n,E2,e.reportAllChanges))})},S2=[.1,.25],w2=(t,e={})=>{b2(Fa(()=>{var u;const r=Yn("CLS",0);let n;const s=Kn(),i=Oa(e,Hs),a=c=>{for(const l of c)i._processEntry(l);i._sessionValue>r.value&&(r.value=i._sessionValue,r.entries=i._sessionEntries,n())},o=an("layout-shift",a);o&&(n=Xn(t,r,S2,e.reportAllChanges),s.onHidden(()=>{a(o.takeRecords()),n(!0)}),(u=st==null?void 0:st.setTimeout)==null||u.call(st,n))}))};let El=0,bi=1/0,ds=0;const x2=t=>{t.forEach(e=>{e.interactionId&&(bi=Math.min(bi,e.interactionId),ds=Math.max(ds,e.interactionId),El=ds?(ds-bi)/7+1:0)})};let Yi;const bl=()=>Yi?El:performance.interactionCount||0,M2=()=>{"interactionCount"in performance||Yi||(Yi=an("event",x2,{type:"event",buffered:!0,durationThreshold:0}))},Si=10;let Sl=0;const A2=()=>bl()-Sl;class zs{constructor(){zs.prototype.__init.call(this),zs.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Sl=bl(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(A2()/50));return this._longestInteractionList[e]}_processEntry(e){var s,i;if((s=this._onBeforeProcessingEntry)==null||s.call(this,e),!(e.interactionId||e.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<Si||e.duration>r._latency){if(n?e.duration>n._latency?(n.entries=[e],n._latency=e.duration):e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(n.id,n),this._longestInteractionList.push(n)),this._longestInteractionList.sort((a,o)=>o._latency-a._latency),this._longestInteractionList.length>Si){const a=this._longestInteractionList.splice(Si);for(const o of a)this._longestInteractionMap.delete(o.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,n)}}}const wl=t=>{var r;const e=st.requestIdleCallback||st.setTimeout;((r=st.document)==null?void 0:r.visibilityState)==="hidden"?t():(t=Fa(t),Be("visibilitychange",t,{once:!0,capture:!0}),Be("pagehide",t,{once:!0,capture:!0}),e(()=>{t(),Us("visibilitychange",t,{capture:!0}),Us("pagehide",t,{capture:!0})}))},P2=[200,500],C2=40,T2=(t,e={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const r=Kn();oi(()=>{M2();const n=Yn("INP");let s;const i=Oa(e,zs),a=u=>{wl(()=>{for(const l of u)i._processEntry(l);const c=i._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,s())})},o=an("event",a,{durationThreshold:e.durationThreshold??C2});s=Xn(t,n,P2,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{a(o.takeRecords()),s(!0)}))})};class D2{_processEntry(e){var r;(r=this._onBeforeProcessingEntry)==null||r.call(this,e)}}const N2=[2500,4e3],I2=(t,e={})=>{oi(()=>{const r=Kn(),n=Yn("LCP");let s;const i=Oa(e,D2),a=u=>{e.reportAllChanges||(u=u.slice(-1));for(const c of u)i._processEntry(c),c.startTime<r.firstHiddenTime&&(n.value=Math.max(c.startTime-sn(),0),n.entries=[c],s())},o=an("largest-contentful-paint",a);if(o){s=Xn(t,n,N2,e.reportAllChanges);const u=Fa(()=>{a(o.takeRecords()),o.disconnect(),s(!0)}),c=l=>{l.isTrusted&&(wl(u),Us(l.type,c,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])Be(l,c,{capture:!0})}})},k2=[800,1800],Qi=t=>{var e,r;(e=st.document)!=null&&e.prerendering?oi(()=>Qi(t)):((r=st.document)==null?void 0:r.readyState)!=="complete"?addEventListener("load",()=>Qi(t),!0):setTimeout(t)},R2=(t,e={})=>{const r=Yn("TTFB"),n=Xn(t,r,k2,e.reportAllChanges);Qi(()=>{const s=Jn();s&&(r.value=Math.max(s.responseStart-sn(),0),r.entries=[s],n(!0))})},xn={},Ws={};let xl,Ml,Al,Pl;function Cl(t,e=!1){return ui("cls",t,O2,xl,e)}function Tl(t,e=!1){return ui("lcp",t,F2,Ml,e)}function L2(t){return ui("ttfb",t,B2,Al)}function G2(t){return ui("inp",t,j2,Pl)}function Wr(t,e){return Dl(t,e),Ws[t]||($2(t),Ws[t]=!0),Nl(t,e)}function Qn(t,e){const r=xn[t];if(r!=null&&r.length)for(const n of r)try{n(e)}catch(s){Vn&&H.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${xe(n)}
Error:`,s)}}function O2(){return w2(t=>{Qn("cls",{metric:t}),xl=t},{reportAllChanges:!0})}function F2(){return I2(t=>{Qn("lcp",{metric:t}),Ml=t},{reportAllChanges:!0})}function B2(){return R2(t=>{Qn("ttfb",{metric:t}),Al=t})}function j2(){return T2(t=>{Qn("inp",{metric:t}),Pl=t})}function ui(t,e,r,n,s=!1){Dl(t,e);let i;return Ws[t]||(i=r(),Ws[t]=!0),n&&e({metric:n}),Nl(t,e,s?i:void 0)}function $2(t){const e={};t==="event"&&(e.durationThreshold=0),an(t,r=>{Qn(t,{entries:r})},e)}function Dl(t,e){xn[t]=xn[t]||[],xn[t].push(e)}function Nl(t,e,r){return()=>{r&&r();const n=xn[t];if(!n)return;const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}function q2(t){return"duration"in t}const U2=t=>{const e=r=>{var n;(r.type==="pagehide"||((n=st.document)==null?void 0:n.visibilityState)==="hidden")&&t(r)};Be("visibilitychange",e,{capture:!0,once:!0}),Be("pagehide",e,{capture:!0,once:!0})};function wi(t){return typeof t=="number"&&isFinite(t)}function Ue(t,e,r,{...n}){const s=dt(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),Ca(t,()=>{const i=nn({startTime:e,...n});return i&&i.end(r),i})}function Ba(t){var y;const e=_t();if(!e)return;const{name:r,transaction:n,attributes:s,startTime:i}=t,{release:a,environment:o,sendDefaultPii:u}=e.getOptions(),c=e.getIntegrationByName("Replay"),l=c==null?void 0:c.getReplayId(),h=Et(),f=h.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let g;try{g=h.getScopeData().contexts.profile.profile_id}catch{}const v={release:a,environment:o,user:p||void 0,profile_id:g||void 0,replay_id:l||void 0,transaction:n,"user_agent.original":(y=st.navigator)==null?void 0:y.userAgent,"client.address":u?"{{auto}}":void 0,...s};return nn({name:r,attributes:v,startTime:i,experimental:{standalone:!0}})}function Zn(){return st.addEventListener&&st.performance}function Mt(t){return t/1e3}function H2(t){let e="unknown",r="unknown",n="";for(const s of t){if(s==="/"){[e,r]=t.split("/");break}if(!isNaN(Number(s))){e=n==="h"?"http":n,r=t.split(n)[1];break}n+=s}return n===t&&(e=n),{name:e,version:r}}function Il(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function kl(t,e){let r,n=!1;function s(o){!n&&r&&e(o,r),n=!0}U2(()=>{s("pagehide")});const i=t.on("beforeStartNavigationSpan",(o,u)=>{u!=null&&u.isRedirect||(s("navigation"),i(),a())}),a=t.on("afterStartPageLoadSpan",o=>{r=o.spanContext().spanId,a()})}function z2(t){let e=0,r;if(!Il("layout-shift"))return;const n=Cl(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,r=i)},!0);kl(t,(s,i)=>{W2(e,r,i,s),n()})}function W2(t,e,r,n){var c;Vn&&H.log(`Sending CLS span (${t})`);const s=e?Mt((Jt()||0)+e.startTime):Dt(),i=Et().getScopeData().transactionName,a=e?re((c=e.sources[0])==null?void 0:c.node):"Layout shift",o={[Tt]:"auto.http.browser.cls",[Ce]:"ui.webvital.cls",[en]:0,"sentry.pageload.span_id":r,"sentry.report_event":n};e!=null&&e.sources&&e.sources.forEach((l,h)=>{o[`cls.source.${h+1}`]=re(l.node)});const u=Ba({name:a,transaction:i,attributes:o,startTime:s});u&&(u.addEvent("cls",{[zn]:"",[Wn]:t}),u.end(s))}function V2(t){let e=0,r;if(!Il("largest-contentful-paint"))return;const n=Tl(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,r=i)},!0);kl(t,(s,i)=>{X2(e,r,i,s),n()})}function X2(t,e,r,n){Vn&&H.log(`Sending LCP span (${t})`);const s=Mt((Jt()||0)+((e==null?void 0:e.startTime)||0)),i=Et().getScopeData().transactionName,a=e?re(e.element):"Largest contentful paint",o={[Tt]:"auto.http.browser.lcp",[Ce]:"ui.webvital.lcp",[en]:0,"sentry.pageload.span_id":r,"sentry.report_event":n};e&&(e.element&&(o["lcp.element"]=re(e.element)),e.id&&(o["lcp.id"]=e.id),e.url&&(o["lcp.url"]=e.url),e.loadTime!=null&&(o["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(o["lcp.renderTime"]=e.renderTime),e.size!=null&&(o["lcp.size"]=e.size));const u=Ba({name:a,transaction:i,attributes:o,startTime:s});u&&(u.addEvent("lcp",{[zn]:"millisecond",[Wn]:t}),u.end(s))}function Yt(t){return t&&((Jt()||performance.timeOrigin)+t)/1e3}function Rl(t){var r;const e={};if(t.nextHopProtocol!=null){const{name:n,version:s}=H2(t.nextHopProtocol);e["network.protocol.version"]=s,e["network.protocol.name"]=n}return Jt()||(r=Zn())!=null&&r.timeOrigin?J2({...e,"http.request.redirect_start":Yt(t.redirectStart),"http.request.redirect_end":Yt(t.redirectEnd),"http.request.worker_start":Yt(t.workerStart),"http.request.fetch_start":Yt(t.fetchStart),"http.request.domain_lookup_start":Yt(t.domainLookupStart),"http.request.domain_lookup_end":Yt(t.domainLookupEnd),"http.request.connect_start":Yt(t.connectStart),"http.request.secure_connection_start":Yt(t.secureConnectionStart),"http.request.connection_end":Yt(t.connectEnd),"http.request.request_start":Yt(t.requestStart),"http.request.response_start":Yt(t.responseStart),"http.request.response_end":Yt(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0}):e}function J2(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!=null))}const K2=2147483647;let iu=0,oe={},$t,Nr;function Y2({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:r}){const n=Zn();if(n&&Jt()){n.mark&&st.performance.mark("sentry-tracing-init");const s=e?V2(r):rm(),i=nm(),a=t?z2(r):em();return()=>{s==null||s(),i(),a==null||a()}}return()=>{}}function Q2(){Wr("longtask",({entries:t})=>{const e=Kt();if(!e)return;const{op:r,start_timestamp:n}=dt(e);for(const s of t){const i=Mt(Jt()+s.startTime),a=Mt(s.duration);r==="navigation"&&n&&i<n||Ue(e,i,i+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Tt]:"auto.ui.browser.metrics"}})}})}function Z2(){new PerformanceObserver(e=>{const r=Kt();if(r)for(const n of e.getEntries()){if(!n.scripts[0])continue;const s=Mt(Jt()+n.startTime),{start_timestamp:i,op:a}=dt(r);if(a==="navigation"&&i&&s<i)continue;const o=Mt(n.duration),u={[Tt]:"auto.ui.browser.metrics"},c=n.scripts[0],{invoker:l,invokerType:h,sourceURL:f,sourceFunctionName:p,sourceCharPosition:g}=c;u["browser.script.invoker"]=l,u["browser.script.invoker_type"]=h,f&&(u["code.filepath"]=f),p&&(u["code.function"]=p),g!==-1&&(u["browser.script.source_char_position"]=g),Ue(r,s,s+o,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:u})}}).observe({type:"long-animation-frame",buffered:!0})}function tm(){Wr("event",({entries:t})=>{const e=Kt();if(e){for(const r of t)if(r.name==="click"){const n=Mt(Jt()+r.startTime),s=Mt(r.duration),i={name:re(r.target),op:`ui.interaction.${r.name}`,startTime:n,attributes:{[Tt]:"auto.ui.browser.metrics"}},a=Ec(r.target);a&&(i.attributes["ui.component_name"]=a),Ue(e,n,n+s,i)}}})}function em(){return Cl(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(oe.cls={value:t.value,unit:""},Nr=e)},!0)}function rm(){return Tl(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(oe.lcp={value:t.value,unit:"millisecond"},$t=e)},!0)}function nm(){return L2(({metric:t})=>{t.entries[t.entries.length-1]&&(oe.ttfb={value:t.value,unit:"millisecond"})})}function sm(t,e){const r=Zn(),n=Jt();if(!(r!=null&&r.getEntries)||!n)return;const s=Mt(n),i=r.getEntries(),{op:a,start_timestamp:o}=dt(t);i.slice(iu).forEach(u=>{const c=Mt(u.startTime),l=Mt(Math.max(0,u.duration));if(!(a==="navigation"&&o&&s+c<o))switch(u.entryType){case"navigation":{um(t,u,s);break}case"mark":case"paint":case"measure":{am(t,u,c,l,s,e.ignorePerformanceApiSpans);const h=Kn(),f=u.startTime<h.firstHiddenTime;u.name==="first-paint"&&f&&(oe.fp={value:u.startTime,unit:"millisecond"}),u.name==="first-contentful-paint"&&f&&(oe.fcp={value:u.startTime,unit:"millisecond"});break}case"resource":{hm(t,u,u.name,c,l,s,e.ignoreResourceSpans);break}}}),iu=Math.max(i.length-1,0),fm(t),a==="pageload"&&(mm(oe),e.recordClsOnPageloadSpan||delete oe.cls,e.recordLcpOnPageloadSpan||delete oe.lcp,Object.entries(oe).forEach(([u,c])=>{W0(u,c.value,c.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",sn()),dm(t,e)),$t=void 0,Nr=void 0,oe={}}function im(t){if((t==null?void 0:t.entryType)==="measure")try{return t.detail.devtools.track==="Components "}catch{return}}function am(t,e,r,n,s,i){if(im(e)||["mark","measure"].includes(e.entryType)&&Oe(e.name,i))return;const a=Jn(!1),o=Mt(a?a.requestStart:0),u=s+Math.max(r,o),c=s+r,l=c+n,h={[Tt]:"auto.resource.browser.metrics"};u!==c&&(h["sentry.browser.measure_happened_before_request"]=!0,h["sentry.browser.measure_start_time"]=u),om(h,e),u<=l&&Ue(t,u,l,{name:e.name,op:e.entryType,attributes:h})}function om(t,e){try{const r=e.detail;if(!r)return;if(typeof r=="object"){for(const[n,s]of Object.entries(r))if(s&&jr(s))t[`sentry.browser.measure.detail.${n}`]=s;else if(s!==void 0)try{t[`sentry.browser.measure.detail.${n}`]=JSON.stringify(s)}catch{}return}if(jr(r)){t["sentry.browser.measure.detail"]=r;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function um(t,e,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(n=>{ps(t,e,n,r)}),ps(t,e,"secureConnection",r,"TLS/SSL"),ps(t,e,"fetch",r,"cache"),ps(t,e,"domainLookup",r,"DNS"),lm(t,e,r)}function ps(t,e,r,n,s=r){const i=cm(r),a=e[i],o=e[`${r}Start`];!o||!a||Ue(t,n+Mt(o),n+Mt(a),{op:`browser.${s}`,name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics",...r==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function cm(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function lm(t,e,r){const n=r+Mt(e.requestStart),s=r+Mt(e.responseEnd),i=r+Mt(e.responseStart);e.responseEnd&&(Ue(t,n,s,{op:"browser.request",name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics"}}),Ue(t,i,s,{op:"browser.response",name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics"}}))}function hm(t,e,r,n,s,i,a){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(a!=null&&a.includes(o))return;const u={[Tt]:"auto.resource.browser.metrics"},c=hr(r);c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=r.includes(st.location.origin),pm(e,u,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const l={...u,...Rl(e)},h=i+n,f=h+s;Ue(t,h,f,{name:r.replace(st.location.origin,""),op:o,attributes:l})}function fm(t){const e=st.navigator;if(!e)return;const r=e.connection;r&&(r.effectiveType&&t.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&t.setAttribute("connectionType",r.type),wi(r.rtt)&&(oe["connection.rtt"]={value:r.rtt,unit:"millisecond"})),wi(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),wi(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function dm(t,e){$t&&e.recordLcpOnPageloadSpan&&($t.element&&t.setAttribute("lcp.element",re($t.element)),$t.id&&t.setAttribute("lcp.id",$t.id),$t.url&&t.setAttribute("lcp.url",$t.url.trim().slice(0,200)),$t.loadTime!=null&&t.setAttribute("lcp.loadTime",$t.loadTime),$t.renderTime!=null&&t.setAttribute("lcp.renderTime",$t.renderTime),t.setAttribute("lcp.size",$t.size)),Nr!=null&&Nr.sources&&e.recordClsOnPageloadSpan&&Nr.sources.forEach((r,n)=>t.setAttribute(`cls.source.${n+1}`,re(r.node)))}function pm(t,e,r){r.forEach(([n,s])=>{const i=t[n];i!=null&&(typeof i=="number"&&i<K2||typeof i=="string")&&(e[s]=i)})}function mm(t){const e=Jn(!1);if(!e)return;const{responseStart:r,requestStart:n}=e;n<=r&&(t["ttfb.requestTime"]={value:r-n,unit:"millisecond"})}function gm(){return Zn()&&Jt()?Wr("element",ym):()=>{}}const ym=({entries:t})=>{const e=Kt(),r=e?Ft(e):void 0,n=r?dt(r).description:Et().getScopeData().transactionName;t.forEach(s=>{var p,g;const i=s;if(!i.identifier)return;const a=i.name,o=i.renderTime,u=i.loadTime,[c,l]=u?[Mt(u),"load-time"]:o?[Mt(o),"render-time"]:[Dt(),"entry-emission"],h=a==="image-paint"?Mt(Math.max(0,(o??0)-(u??0))):0,f={[Tt]:"auto.ui.browser.elementtiming",[Ce]:"ui.elementtiming",[pe]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":n,"element.id":i.id,"element.type":((g=(p=i.element)==null?void 0:p.tagName)==null?void 0:g.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":o,"element.load_time":u,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":a};Q0({name:`element[${i.identifier}]`,attributes:f,startTime:c,onlyIfParent:!0},v=>{v.end(c+h)})})},_m=1e3;let au,Zi,ta;function vm(t){Ve("dom",t),Xe("dom",Em)}function Em(){if(!st.document)return;const t=Zt.bind(null,"dom"),e=ou(t,!0);st.document.addEventListener("click",e,!1),st.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{var i,a;const s=(i=st[r])==null?void 0:i.prototype;(a=s==null?void 0:s.hasOwnProperty)!=null&&a.call(s,"addEventListener")&&(Xt(s,"addEventListener",function(o){return function(u,c,l){if(u==="click"||u=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=h[u]=h[u]||{refCount:0};if(!f.handler){const p=ou(t);f.handler=p,o.call(this,u,p,l)}f.refCount++}catch{}return o.call(this,u,c,l)}}),Xt(s,"removeEventListener",function(o){return function(u,c,l){if(u==="click"||u=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},f=h[u];f&&(f.refCount--,f.refCount<=0&&(o.call(this,u,f.handler,l),f.handler=void 0,delete h[u]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,u,c,l)}}))})}function bm(t){if(t.type!==Zi)return!1;try{if(!t.target||t.target._sentryId!==ta)return!1}catch{}return!0}function Sm(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function ou(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const n=wm(r);if(Sm(r.type,n))return;zt(r,"_sentryCaptured",!0),n&&!n._sentryId&&zt(n,"_sentryId",te());const s=r.type==="keypress"?"input":r.type;bm(r)||(t({event:r,name:s,global:e}),Zi=r.type,ta=n?n._sentryId:void 0),clearTimeout(au),au=st.setTimeout(()=>{ta=void 0,Zi=void 0},_m)}}function wm(t){try{return t.target}catch{return null}}let ms;function ja(t){const e="history";Ve(e,t),Xe(e,xm)}function xm(){if(st.addEventListener("popstate",()=>{const e=st.location.href,r=ms;if(ms=e,r===e)return;Zt("history",{from:r,to:e})}),!Up())return;function t(e){return function(...r){const n=r.length>2?r[2]:void 0;if(n){const s=ms,i=Mm(String(n));if(ms=i,s===i)return e.apply(this,r);Zt("history",{from:s,to:i})}return e.apply(this,r)}}Xt(st.history,"pushState",t),Xt(st.history,"replaceState",t)}function Mm(t){try{return new URL(t,st.location.origin).toString()}catch{return t}}const Ns={};function Am(t){const e=Ns[t];if(e)return e;let r=st[t];if(Xi(r))return Ns[t]=r.bind(st);const n=st.document;if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i!=null&&i[t]&&(r=i[t]),n.head.removeChild(s)}catch(s){Vn&&H.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return r&&(Ns[t]=r.bind(st))}function Pm(t){Ns[t]=void 0}const Ir="__sentry_xhr_v3__";function Ll(t){Ve("xhr",t),Xe("xhr",Cm)}function Cm(){if(!st.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,n){const s=new Error,i=Dt()*1e3,a=Se(n[0])?n[0].toUpperCase():void 0,o=Tm(n[1]);if(!a||!o)return e.apply(r,n);r[Ir]={method:a,url:o,request_headers:{}},a==="POST"&&o.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const u=()=>{const c=r[Ir];if(c&&r.readyState===4){try{c.status_code=r.status}catch{}const l={endTimestamp:Dt()*1e3,startTimestamp:i,xhr:r,virtualError:s};Zt("xhr",l)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(c,l,h){return u(),c.apply(l,h)}}):r.addEventListener("readystatechange",u),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(c,l,h){const[f,p]=h,g=l[Ir];return g&&Se(f)&&Se(p)&&(g.request_headers[f.toLowerCase()]=p),c.apply(l,h)}}),e.apply(r,n)}}),t.send=new Proxy(t.send,{apply(e,r,n){const s=r[Ir];if(!s)return e.apply(r,n);n[0]!==void 0&&(s.body=n[0]);const i={startTimestamp:Dt()*1e3,xhr:r};return Zt("xhr",i),e.apply(r,n)}})}function Tm(t){if(Se(t))return t;try{return t.toString()}catch{}}function Dm(t){let e;try{e=t.getAllResponseHeaders()}catch(r){return Vn&&H.error(r,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce((r,n)=>{const[s,i]=n.split(": ");return i&&(r[s.toLowerCase()]=i),r},{}):{}}const xi=[],Is=new Map,Tr=new Map,Nm=60;function Im(){if(Zn()&&Jt()){const e=km();return()=>{e()}}return()=>{}}const ea={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function km(){return G2(Rm)}const Rm=({metric:t})=>{if(t.value==null)return;const e=Mt(t.value);if(e>Nm)return;const r=t.entries.find(g=>g.duration===t.value&&ea[g.name]);if(!r)return;const{interactionId:n}=r,s=ea[r.name],i=Mt(Jt()+r.startTime),a=Kt(),o=a?Ft(a):void 0,u=n!=null?Is.get(n):void 0,c=(u==null?void 0:u.span)||o,l=c?dt(c).description:Et().getScopeData().transactionName,h=(u==null?void 0:u.elementName)||re(r.target),f={[Tt]:"auto.http.browser.inp",[Ce]:`ui.interaction.${s}`,[en]:r.duration},p=Ba({name:h,transaction:l,attributes:f,startTime:i});p&&(p.addEvent("inp",{[zn]:"millisecond",[Wn]:t.value}),p.end(i+e))};function Lm(){const t=Object.keys(ea);t2()&&t.forEach(s=>{st.addEventListener(s,e,{capture:!0,passive:!0})});function e(s){const i=s.target;if(!i)return;const a=re(i),o=Math.round(s.timeStamp);if(Tr.set(o,a),Tr.size>50){const u=Tr.keys().next().value;u!==void 0&&Tr.delete(u)}}function r(s){const i=Math.round(s.startTime);let a=Tr.get(i);if(!a)for(let o=-5;o<=5;o++){const u=Tr.get(i+o);if(u){a=u;break}}return a||"<unknown>"}const n=({entries:s})=>{const i=Kt(),a=i&&Ft(i);s.forEach(o=>{if(!q2(o))return;const u=o.interactionId;if(u==null||Is.has(u))return;const c=o.target?re(o.target):r(o);if(xi.length>10){const l=xi.shift();Is.delete(l)}xi.push(u),Is.set(u,{span:a,elementName:c})})};Wr("event",n),Wr("first-input",n)}const Gm=40;function Om(t,e=Am("fetch")){let r=0,n=0;async function s(i){const a=i.body.length;r+=a,n++;const o={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};try{const u=await e(t.url,o);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw Pm("fetch"),u}finally{r-=a,n--}}return Hd(t,s,Ia(t.bufferSize||Gm))}const ne=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Fm=30,Bm=50;function ra(t,e,r,n){const s={filename:t,function:e==="<anonymous>"?fr:e,in_app:!0};return r!==void 0&&(s.lineno=r),n!==void 0&&(s.colno=n),s}const jm=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,$m=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qm=/\((\S*)(?::(\d+))(?::(\d+))\)/,Um=/at (.+?) ?\(data:(.+?),/,Hm=t=>{const e=t.match(Um);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const r=jm.exec(t);if(r){const[,s,i,a]=r;return ra(s,fr,+i,+a)}const n=$m.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=qm.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[i,a]=Gl(n[1]||fr,n[2]);return ra(a,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},zm=[Fm,Hm],Wm=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Vm=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xm=t=>{const e=Wm.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=Vm.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],s=e[1]||fr;return[s,n]=Gl(s,n),ra(n,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Jm=[Bm,Xm],Km=[zm,Jm],Ym=dc(...Km),Gl=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:fr,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},gs=1024,Qm="Breadcrumbs",Zm=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:Qm,setup(r){e.console&&Mp(ng(r)),e.dom&&vm(rg(r,e.dom)),e.xhr&&Ll(sg(r)),e.fetch&&ml(ig(r)),e.history&&ja(ag(r)),e.sentry&&r.on("beforeSendEvent",eg(r))}}}),tg=Zm;function eg(t){return function(r){_t()===t&&dr({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:ar(r)},{event:r})}}function rg(t,e){return function(n){if(_t()!==t)return;let s,i,a=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>gs&&(ne&&H.warn(`\`dom.maxStringLength\` cannot exceed ${gs}, but a value of ${o} was configured. Sentry will use ${gs} instead.`),o=gs),typeof a=="string"&&(a=[a]);try{const c=n.event,l=og(c)?c.target:c;s=re(l,{keyAttrs:a,maxStringLength:o}),i=Ec(l)}catch{s="<unknown>"}if(s.length===0)return;const u={category:`ui.${n.name}`,message:s};i&&(u.data={"ui.component_name":i}),dr(u,{event:n.event,name:n.name,global:n.global})}}function ng(t){return function(r){if(_t()!==t)return;const n={category:"console",data:{arguments:r.args,logger:"console"},level:Pp(r.level),message:_o(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)n.message=`Assertion failed: ${_o(r.args.slice(1)," ")||"console.assert"}`,n.data.arguments=r.args.slice(1);else return;dr(n,{input:r.args,level:r.level})}}function sg(t){return function(r){if(_t()!==t)return;const{startTimestamp:n,endTimestamp:s}=r,i=r.xhr[Ir];if(!n||!s||!i)return;const{method:a,url:o,status_code:u,body:c}=i,l={method:a,url:o,status_code:u},h={xhr:r.xhr,input:c,startTimestamp:n,endTimestamp:s},f={category:"xhr",data:l,type:"http",level:pl(u)};t.emit("beforeOutgoingRequestBreadcrumb",f,h),dr(f,h)}}function ig(t){return function(r){if(_t()!==t)return;const{startTimestamp:n,endTimestamp:s}=r;if(s&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const i=r.fetchData,a={data:r.error,input:r.args,startTimestamp:n,endTimestamp:s},o={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",o,a),dr(o,a)}else{const i=r.response,a={...r.fetchData,status_code:i==null?void 0:i.status};r.fetchData.request_body_size,r.fetchData.response_body_size,i==null||i.status;const o={input:r.args,response:i,startTimestamp:n,endTimestamp:s},u={category:"fetch",data:a,type:"http",level:pl(a.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",u,o),dr(u,o)}}}function ag(t){return function(r){if(_t()!==t)return;let n=r.from,s=r.to;const i=hr(ft.location.href);let a=n?hr(n):void 0;const o=hr(s);a!=null&&a.path||(a=i),i.protocol===o.protocol&&i.host===o.host&&(s=o.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),dr({category:"navigation",data:{from:n,to:s}})}}function og(t){return!!t&&!!t.target}const ug=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],cg="BrowserApiErrors",lg=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:cg,setupOnce(){e.setTimeout&&Xt(ft,"setTimeout",uu),e.setInterval&&Xt(ft,"setInterval",uu),e.requestAnimationFrame&&Xt(ft,"requestAnimationFrame",fg),e.XMLHttpRequest&&"XMLHttpRequest"in ft&&Xt(XMLHttpRequest.prototype,"send",dg);const r=e.eventTarget;r&&(Array.isArray(r)?r:ug).forEach(s=>pg(s,e))}}}),hg=lg;function uu(t){return function(...e){const r=e[0];return e[0]=zr(r,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${xe(t)}`}}),t.apply(this,e)}}function fg(t){return function(e){return t.apply(this,[zr(e,{mechanism:{data:{handler:xe(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function dg(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in r&&typeof r[s]=="function"&&Xt(r,s,function(i){const a={mechanism:{data:{handler:xe(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},o=ba(i);return o&&(a.mechanism.data.handler=xe(o)),zr(i,a)})}),t.apply(this,e)}}function pg(t,e){var s,i;const n=(s=ft[t])==null?void 0:s.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(Xt(n,"addEventListener",function(a){return function(o,u,c){try{mg(u)&&(u.handleEvent=zr(u.handleEvent,{mechanism:{data:{handler:xe(u),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&gg(this,o,u),a.apply(this,[o,zr(u,{mechanism:{data:{handler:xe(u),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),c])}}),Xt(n,"removeEventListener",function(a){return function(o,u,c){try{const l=u.__sentry_wrapped__;l&&a.call(this,o,l,c)}catch{}return a.call(this,o,u,c)}}))}function mg(t){return typeof t.handleEvent=="function"}function gg(t,e,r){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,r)}const yg=()=>({name:"BrowserSession",setupOnce(){if(typeof ft.document>"u"){ne&&H.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Bo({ignoreDuration:!0}),jo(),ja(({from:t,to:e})=>{t!==void 0&&t!==e&&(Bo({ignoreDuration:!0}),jo())})}}),_g="GlobalHandlers",vg=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:_g,setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&(bg(r),cu("onerror")),e.onunhandledrejection&&(Sg(r),cu("onunhandledrejection"))}}}),Eg=vg;function bg(t){mc(e=>{const{stackParser:r,attachStacktrace:n}=Ol();if(_t()!==t||yl())return;const{msg:s,url:i,line:a,column:o,error:u}=e,c=Mg(Ga(r,u||s,void 0,n,!1),i,a,o);c.level="error",Xc(c,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Sg(t){gc(e=>{const{stackParser:r,attachStacktrace:n}=Ol();if(_t()!==t||yl())return;const s=wg(e),i=jr(s)?xg(s):Ga(r,s,void 0,n,!0);i.level="error",Xc(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function wg(t){if(jr(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function xg(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Mg(t,e,r,n){const s=t.exception=t.exception||{},i=s.values=s.values||[],a=i[0]=i[0]||{},o=a.stacktrace=a.stacktrace||{},u=o.frames=o.frames||[],c=n,l=r,h=Ag(e)??$n();return u.length===0&&u.push({colno:c,filename:h,function:fr,in_app:!0,lineno:l}),t}function cu(t){ne&&H.log(`Global Handler attached: ${t}`)}function Ol(){const t=_t();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function Ag(t){if(!(!Se(t)||t.length===0))return t.startsWith("data:")?`<${Fe(t,!1)}>`:t}const Pg=()=>({name:"HttpContext",preprocessEvent(t){var n;if(!ft.navigator&&!ft.location&&!ft.document)return;const e=ka(),r={...e.headers,...(n=t.request)==null?void 0:n.headers};t.request={...e,...t.request,headers:r}}}),Cg="cause",Tg=5,Dg="LinkedErrors",Ng=((t={})=>{const e=t.limit||Tg,r=t.key||Cg;return{name:Dg,preprocessEvent(n,s,i){const a=i.getOptions();xp(Ra,a.stackParser,r,e,n,s)}}}),Ig=Ng;function kg(){return Rg()?(ne&&Yr(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Rg(){var i;if(typeof ft.window>"u")return!1;const t=ft;if(t.nw)return!1;const e=t.chrome||t.browser;if(!((i=e==null?void 0:e.runtime)!=null&&i.id))return!1;const r=$n(),n=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ft===ft.top&&n.some(a=>r.startsWith(`${a}://`)))}function Lg(t){return[gp(),fp(),Gp(),hg(),tg(),Eg(),Ig(),Dp(),Pg(),yg()]}function Gg(t={}){const e=!t.skipBrowserExtensionCheck&&kg();let r=t.defaultIntegrations==null?Lg():t.defaultIntegrations;const n={...t,enabled:e?!1:t.enabled,stackParser:Ef(t.stackParser||Ym),integrations:Nd({integrations:t.integrations,defaultIntegrations:r}),transport:t.transport||Om};return ep(p2,n)}function Og(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function Fl(t){try{return new URL(t,ft.location.origin).href}catch{return}}function Fg(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Bl(t){try{return new Headers(t)}catch{return}}const lu=new WeakMap,Mi=new Map,jl={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Bg(t,e){const{traceFetch:r,traceXHR:n,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:a,tracePropagationTargets:o,onRequestSpanStart:u,onRequestSpanEnd:c}={...jl,...e},l=typeof i=="function"?i:g=>!0,h=g=>jg(g,o),f={},p=t.getOptions().propagateTraceparent;r&&(t.addEventProcessor(g=>(g.type==="transaction"&&g.spans&&g.spans.forEach(v=>{if(v.op==="http.client"){const y=Mi.get(v.span_id);y&&(v.timestamp=y/1e3,Mi.delete(v.span_id))}}),g)),s&&Wp(g=>{if(g.response){const v=lu.get(g.response);v&&g.endTimestamp&&Mi.set(v,g.endTimestamp)}}),ml(g=>{const v=Op(g,l,h,f,{propagateTraceparent:p,onRequestSpanEnd:c});if(g.response&&g.fetchData.__span&&lu.set(g.response,g.fetchData.__span),v){const y=Fl(g.fetchData.url),S=y?hr(y).host:void 0;v.setAttributes({"http.url":y?Fe(y):void 0,"server.address":S}),a&&hu(v),u==null||u(v,{headers:g.headers})}})),n&&Ll(g=>{var y;const v=$g(g,l,h,f,p,c);v&&(a&&hu(v),u==null||u(v,{headers:Bl((y=g.xhr.__sentry_xhr_v3__)==null?void 0:y.request_headers)}))})}function hu(t){const{url:e}=dt(t).data;if(!e||typeof e!="string")return;const r=Wr("resource",({entries:n})=>{n.forEach(s=>{Fg(s)&&s.name.endsWith(e)&&(t.setAttributes(Rl(s)),setTimeout(r))})})}function jg(t,e){const r=$n();if(r){let n,s;try{n=new URL(t,r),s=new URL(r).origin}catch{return!1}const i=n.origin===s;return e?Oe(n.toString(),e)||i&&Oe(n.pathname,e):i}else{const n=!!t.match(/^\/(?!\/)/);return e?Oe(t,e):n}}function $g(t,e,r,n,s,i){const a=t.xhr,o=a==null?void 0:a[Ir];if(!a||a.__sentry_own_request__||!o)return;const{url:u,method:c}=o,l=ue()&&e(u);if(t.endTimestamp&&l){const S=a.__sentry_xhr_span_id__;if(!S)return;const A=n[S];A&&o.status_code!==void 0&&(Ac(A,o.status_code),A.end(),i==null||i(A,{headers:Bl(Dm(a)),error:t.error}),delete n[S]);return}const h=Fl(u),f=hr(h||u),p=Fe(ip(u)),g=!!Kt(),v=l&&g?nn({name:`${c} ${p}`,attributes:{url:Fe(u),type:"xhr","http.method":c,"http.url":h?Fe(h):void 0,"server.address":f==null?void 0:f.host,[Tt]:"auto.http.browser",[Ce]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new qe;a.__sentry_xhr_span_id__=v.spanContext().spanId,n[a.__sentry_xhr_span_id__]=v,r(u)&&qg(a,ue()&&g?v:void 0,s);const y=_t();return y&&y.emit("beforeOutgoingRequestSpan",v,t),v}function qg(t,e,r){const{"sentry-trace":n,baggage:s,traceparent:i}=hl({span:e,propagateTraceparent:r});n&&Ug(t,n,s,i)}function Ug(t,e,r,n){var i;const s=(i=t.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(s!=null&&s["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),n&&!(s!=null&&s.traceparent)&&t.setRequestHeader("traceparent",n),r){const a=s==null?void 0:s.baggage;(!a||!Og(a))&&t.setRequestHeader("baggage",r)}}catch{}}function Hg(){ft.document?ft.document.addEventListener("visibilitychange",()=>{const t=Kt();if(!t)return;const e=Ft(t);if(ft.document.hidden&&e){const r="cancelled",{op:n,status:s}=dt(e);ne&&H.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${n}`),s||e.setStatus({code:Ct,message:r}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):ne&&H.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const zg=3600,$l="sentry_previous_trace",Wg="sentry.previous_trace";function Vg(t,{linkPreviousTrace:e,consistentTraceSampling:r}){const n=e==="session-storage";let s=n?Kg():void 0;t.on("spanStart",a=>{if(Ft(a)!==a)return;const o=Et().getPropagationContext();s=Xg(s,a,o),n&&Jg(s)});let i=!0;r&&t.on("beforeSampling",a=>{if(!s)return;const o=Et(),u=o.getPropagationContext();if(i&&u.parentSpanId){i=!1;return}o.setPropagationContext({...u,dsc:{...u.dsc,sample_rate:String(s.sampleRate),sampled:String(na(s.spanContext))},sampleRand:s.sampleRand}),a.parentSampled=na(s.spanContext),a.parentSampleRate=s.sampleRate,a.spanAttributes={...a.spanAttributes,[Mc]:s.sampleRate}})}function Xg(t,e,r){const n=dt(e);function s(){var o,u;try{return Number((o=r.dsc)==null?void 0:o.sample_rate)??Number((u=n.data)==null?void 0:u[Sa])}catch{return 0}}const i={spanContext:e.spanContext(),startTimestamp:n.start_timestamp,sampleRate:s(),sampleRand:r.sampleRand};if(!t)return i;const a=t.spanContext;return a.traceId===n.trace_id?t:(Date.now()/1e3-t.startTimestamp<=zg&&(ne&&H.log(`Adding previous_trace \`${JSON.stringify(a)}\` link to span \`${JSON.stringify({op:n.op,...e.spanContext()})}\``),e.addLink({context:a,attributes:{[Xf]:"previous_trace"}}),e.setAttribute(Wg,`${a.traceId}-${a.spanId}-${na(a)?1:0}`)),i)}function Jg(t){try{ft.sessionStorage.setItem($l,JSON.stringify(t))}catch(e){ne&&H.warn("Could not store previous trace in sessionStorage",e)}}function Kg(){var t;try{const e=(t=ft.sessionStorage)==null?void 0:t.getItem($l);return JSON.parse(e)}catch{return}}function na(t){return t.traceFlags===1}const Yg="BrowserTracing",Qg={...Ps,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...jl},Zg=((t={})=>{const e={name:void 0,source:void 0},r=ft.document,{enableInp:n,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:a,_experiments:{enableInteractions:o,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:c},beforeStartSpan:l,idleTimeout:h,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:g,traceFetch:v,traceXHR:y,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:A,enableHTTPTimings:P,ignoreResourceSpans:k,ignorePerformanceApiSpans:R,instrumentPageLoad:C,instrumentNavigation:x,detectRedirects:G,linkPreviousTrace:E,consistentTraceSampling:w,enableReportPageLoaded:T,onRequestSpanStart:I,onRequestSpanEnd:O}={...Qg,...t};let q,J,Z;function W(N,B,U=!0){const L=B.op==="pageload",et=B.name,Q=l?l(B):B,Y=Q.attributes||{};if(et!==Q.name&&(Y[pe]="custom",Q.attributes=Y),!U){const ot=yr();nn({...Q,startTime:ot}).end(ot);return}e.name=Q.name,e.source=Y[pe];const V=Vc(Q,{idleTimeout:h,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:L,beforeSpanEnd:ot=>{q==null||q(),sm(ot,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!c,ignoreResourceSpans:k,ignorePerformanceApiSpans:R}),du(N,void 0);const tt=Et(),ct=tt.getPropagationContext();tt.setPropagationContext({...ct,traceId:V.spanContext().traceId,sampled:Je(V),dsc:$e(ot)}),L&&(Z=void 0)},trimIdleSpanEndTimestamp:!T});L&&T&&(Z=V),du(N,V);function ht(){r&&["interactive","complete"].includes(r.readyState)&&N.emit("idleSpanEnableAutoFinish",V)}L&&!T&&r&&(r.addEventListener("readystatechange",()=>{ht()}),ht())}return{name:Yg,setup(N){if(x0(),q=Y2({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:c||!1,client:N}),n&&Im(),s&&gm(),a&&lt.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Z2():i&&Q2(),o&&tm(),G&&r){const U=()=>{J=Dt()};addEventListener("click",U,{capture:!0}),addEventListener("keydown",U,{capture:!0,passive:!0})}function B(){const U=Ln(N);U&&!dt(U).timestamp&&(ne&&H.log(`[Tracing] Finishing current active span with op: ${dt(U).op}`),U.setAttribute(Nn,"cancelled"),U.end())}N.on("startNavigationSpan",(U,L)=>{if(_t()!==N)return;if(L!=null&&L.isRedirect){ne&&H.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),W(N,{op:"navigation.redirect",...U},!1);return}J=void 0,B(),Te().setPropagationContext({traceId:Ae(),sampleRand:Math.random(),propagationSpanId:ue()?void 0:we()});const et=Et();et.setPropagationContext({traceId:Ae(),sampleRand:Math.random(),propagationSpanId:ue()?void 0:we()}),et.setSDKProcessingMetadata({normalizedRequest:void 0}),W(N,{op:"navigation",...U,parentSpan:null,forceTransaction:!0})}),N.on("startPageLoadSpan",(U,L={})=>{if(_t()!==N)return;B();const et=L.sentryTrace||fu("sentry-trace"),Q=L.baggage||fu("baggage"),Y=m0(et,Q),V=Et();V.setPropagationContext(Y),ue()||(V.getPropagationContext().propagationSpanId=we()),V.setSDKProcessingMetadata({normalizedRequest:ka()}),W(N,{op:"pageload",...U})}),N.on("endPageloadSpan",()=>{T&&Z&&(Z.setAttribute(Nn,"reportPageLoaded"),Z.end())})},afterAllSetup(N){let B=$n();if(E!=="off"&&Vg(N,{linkPreviousTrace:E,consistentTraceSampling:w}),ft.location){if(C){const U=Jt();t1(N,{name:ft.location.pathname,startTime:U?U/1e3:void 0,attributes:{[pe]:"url",[Tt]:"auto.pageload.browser"}})}x&&ja(({to:U,from:L})=>{if(L===void 0&&(B==null?void 0:B.indexOf(U))!==-1){B=void 0;return}B=void 0;const et=cl(U),Q=Ln(N),Y=Q&&G&&n1(Q,J);e1(N,{name:(et==null?void 0:et.pathname)||ft.location.pathname,attributes:{[pe]:"url",[Tt]:"auto.navigation.browser"}},{url:U,isRedirect:Y})})}g&&Hg(),o&&r1(N,h,f,p,e),n&&Lm(),Bg(N,{traceFetch:v,traceXHR:y,trackFetchStreamPerformance:S,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:A,enableHTTPTimings:P,onRequestSpanStart:I,onRequestSpanEnd:O})}}});function t1(t,e,r){t.emit("startPageLoadSpan",e,r),Et().setTransactionName(e.name);const n=Ln(t);return n&&t.emit("afterStartPageLoadSpan",n),n}function e1(t,e,r){const{url:n,isRedirect:s}=r||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:s}),t.emit("startNavigationSpan",e,{isRedirect:s});const i=Et();return i.setTransactionName(e.name),n&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...ka(),url:n}}),Ln(t)}function fu(t){const e=ft.document,r=e==null?void 0:e.querySelector(`meta[name=${t}]`);return(r==null?void 0:r.getAttribute("content"))||void 0}function r1(t,e,r,n,s){const i=ft.document;let a;const o=()=>{const u="ui.action.click",c=Ln(t);if(c){const l=dt(c).op;if(["navigation","pageload"].includes(l)){ne&&H.warn(`[Tracing] Did not create ${u} span because a pageload or navigation span is in progress.`);return}}if(a&&(a.setAttribute(Nn,"interactionInterrupted"),a.end(),a=void 0),!s.name){ne&&H.warn(`[Tracing] Did not create ${u} transaction because _latestRouteName is missing.`);return}a=Vc({name:s.name,op:u,attributes:{[pe]:s.source||"url"}},{idleTimeout:e,finalTimeout:r,childSpanTimeout:n})};i&&addEventListener("click",o,{capture:!0})}const ql="_sentry_idleSpan";function Ln(t){return t[ql]}function du(t,e){zt(t,ql,e)}const pu=1.5;function n1(t,e){const r=dt(t),n=yr(),s=r.start_timestamp;return!(n-s>pu||e&&n-e<=pu)}function s1(t){const e={...t};return ll(e,"react"),wd("react",{version:F.version}),Gg(e)}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ul=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},u)=>F.createElement("svg",{ref:u,...a1,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Ul("lucide",s),...o},[...a.map(([c,l])=>F.createElement(c,l)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,e)=>{const r=F.forwardRef(({className:n,...s},i)=>F.createElement(o1,{ref:i,iconNode:e,className:Ul(`lucide-${i1(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=gt("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=gt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=gt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=gt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=gt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=gt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=gt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=gt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=gt("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=gt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=gt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=gt("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=gt("LocateOff",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["path",{d:"M7.11 7.11C5.83 8.39 5 10.1 5 12c0 3.87 3.13 7 7 7 1.9 0 3.61-.83 4.89-2.11",key:"1oh7ia"}],["path",{d:"M18.71 13.96c.19-.63.29-1.29.29-1.96 0-3.87-3.13-7-7-7-.67 0-1.33.1-1.96.29",key:"3qdecy"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=gt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=gt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=gt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=gt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=gt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=gt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=gt("Pentagon",[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=gt("Spline",[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=gt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=gt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function I1({theme:t,onThemeChange:e}){const r=()=>{const s=["light","dark","system"],a=(s.indexOf(t)+1)%s.length,o=s[a];o&&e(o)},n=t==="dark"?P1:t==="light"?C1:A1;return b.jsxs("header",{className:"flex h-10 shrink-0 items-center justify-between border-b border-neutral-200 bg-white px-3 md:h-14 md:px-4 dark:border-neutral-800 dark:bg-neutral-900",children:[b.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[b.jsx("h1",{className:"text-lg font-semibold text-primary-600 md:text-xl dark:text-primary-400",children:"GeoFiddle"}),b.jsx("span",{className:"rounded bg-primary-100 px-1 py-0.5 text-[10px] font-medium text-primary-700 md:px-1.5 md:text-xs dark:bg-primary-900 dark:text-primary-300",children:"v2"})]}),b.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[b.jsx("button",{onClick:r,className:"rounded-md p-1.5 text-neutral-600 hover:bg-neutral-100 md:p-2 dark:text-neutral-400 dark:hover:bg-neutral-800","aria-label":`Current theme: ${t}. Click to change.`,children:b.jsx(n,{className:"h-4 w-4 md:h-5 md:w-5"})}),b.jsxs("a",{href:"https://github.com/ruipinge/geofiddle",target:"_blank",rel:"noopener noreferrer",className:"hidden items-center gap-1 rounded-md px-2 py-1.5 text-sm text-neutral-600 hover:bg-neutral-100 md:flex dark:text-neutral-400 dark:hover:bg-neutral-800","aria-label":"View source on GitHub",children:[b.jsx("span",{children:"GitHub"}),b.jsx(g1,{className:"h-4 w-4"})]})]})]})}function k1({left:t,right:e,leftWidthPercent:r,minLeftWidthPercent:n,maxLeftWidthPercent:s,onLeftWidthPercentChange:i}){const[a,o]=F.useState(!1),[u,c]=F.useState(0),l=F.useRef(null);F.useEffect(()=>{const p=l.current;if(!p)return;const g=()=>{c(p.getBoundingClientRect().width)};g();const v=new ResizeObserver(g);return v.observe(p),()=>{v.disconnect()}},[]);const h=F.useCallback(()=>{o(!0)},[]);F.useEffect(()=>{if(!a)return;const p=v=>{if(!l.current)return;const y=l.current.getBoundingClientRect(),A=(v.clientX-y.left)/y.width*100,P=Math.min(s,Math.max(n,A));i(P)},g=()=>{o(!1)};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)}},[a,n,s,i]);const f=u>0?r/100*u:0;return b.jsxs("main",{id:"main-content",ref:l,className:"flex flex-1 overflow-hidden",role:"main",children:[b.jsx("section",{style:{width:f},className:"shrink-0 overflow-hidden","aria-label":"Input and conversion panel",children:t}),b.jsx("div",{onMouseDown:h,role:"separator","aria-orientation":"vertical","aria-label":"Resize panels",tabIndex:0,onKeyDown:p=>{p.key==="ArrowLeft"?i(Math.max(n,r-2)):p.key==="ArrowRight"&&i(Math.min(s,r+2))},className:`w-1 shrink-0 cursor-col-resize bg-neutral-200 transition-colors hover:bg-primary-400 focus-visible:bg-primary-500 focus-visible:outline-none dark:bg-neutral-700 dark:hover:bg-primary-500 ${a?"bg-primary-500 dark:bg-primary-500":""}`}),b.jsx("section",{className:"flex-1 overflow-hidden","aria-label":"Map view",children:e})]})}function R1({children:t,onFileDrop:e,accept:r}){const[n,s]=F.useState(!1),i=F.useCallback(c=>{c.preventDefault(),c.stopPropagation(),s(!0)},[]),a=F.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.currentTarget===c.target&&s(!1)},[]),o=F.useCallback(c=>{c.preventDefault(),c.stopPropagation()},[]),u=F.useCallback(c=>{var f;c.preventDefault(),c.stopPropagation(),s(!1);const l=c.dataTransfer.files[0];if(!l)return;if(r&&r.length>0){const p=`.${((f=l.name.split(".").pop())==null?void 0:f.toLowerCase())??""}`;if(!r.includes(p)&&!r.includes("*")){console.warn(`File type ${p} not accepted`);return}}const h=new FileReader;h.onload=p=>{var v;const g=(v=p.target)==null?void 0:v.result;typeof g=="string"&&e(g,l.name)},h.onerror=()=>{console.error("Failed to read file")},h.readAsText(l)},[e,r]);return b.jsxs("div",{onDragEnter:i,onDragLeave:a,onDragOver:o,onDrop:u,className:"relative",children:[t,n&&b.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center rounded-md border-2 border-dashed border-primary-500 bg-primary-50/90 dark:bg-primary-950/90",children:[b.jsx(D1,{className:"mb-2 h-8 w-8 text-primary-500"}),b.jsx("p",{className:"text-sm font-medium text-primary-700 dark:text-primary-300",children:"Drop file to load"}),b.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400",children:"GeoJSON, WKT, CSV, KML, GPX"})]})]})}function L1({value:t,onChange:e,placeholder:r}){const n=F.useCallback(a=>{e(a.target.value)},[e]),s=F.useCallback(a=>{a.preventDefault();const o=a.dataTransfer.files[0];if(o){const u=new FileReader;u.onload=c=>{var h;const l=(h=c.target)==null?void 0:h.result;typeof l=="string"&&e(l)},u.readAsText(o)}},[e]),i=F.useCallback(a=>{a.preventDefault()},[]);return b.jsx("textarea",{value:t,onChange:n,onDrop:s,onDragOver:i,placeholder:r,"aria-label":"Geometry input",className:"h-48 w-full resize-none rounded-md border border-neutral-300 bg-white p-3 font-mono text-sm text-neutral-900 placeholder:text-neutral-400 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-neutral-100 dark:placeholder:text-neutral-500",spellCheck:!1})}const yu=[{value:"auto",label:"Auto-detect"},{value:"geojson",label:"GeoJSON"},{value:"wkt",label:"WKT"},{value:"ewkt",label:"EWKT"},{value:"csv",label:"CSV"},{value:"kml",label:"KML"},{value:"gpx",label:"GPX"},{value:"polyline5",label:"Polyline (5)"},{value:"polyline6",label:"Polyline (6)"}];function G1({value:t,onChange:e,detectedValue:r,label:n}){var i;const s=t==="auto"&&r?`Auto (${r.toUpperCase()})`:((i=yu.find(a=>a.value===t))==null?void 0:i.label)??t;return b.jsxs("div",{className:"flex-1",children:[b.jsx("label",{className:"label",children:n}),b.jsx("select",{value:t,onChange:a=>{e(a.target.value)},className:"input","aria-label":`${n}: ${s}`,children:yu.map(a=>b.jsx("option",{value:a.value,children:a.label},a.value))})]})}const _u=[{value:"auto",label:"Auto-detect"},{value:"EPSG:4326",label:"WGS84 (EPSG:4326)"},{value:"EPSG:3857",label:"Web Mercator (EPSG:3857)"},{value:"EPSG:27700",label:"British National Grid (EPSG:27700)"}];function O1({value:t,onChange:e,detectedValue:r,label:n}){var i;const s=t==="auto"&&r?`Auto (${r})`:((i=_u.find(a=>a.value===t))==null?void 0:i.label)??t;return b.jsxs("div",{className:"flex-1",children:[b.jsx("label",{className:"label",children:n}),b.jsx("select",{value:t,onChange:a=>{e(a.target.value)},className:"input","aria-label":`${n}: ${s}`,children:_u.map(a=>b.jsx("option",{value:a.value,children:a.label},a.value))})]})}const vu=t=>{let e;const r=new Set,n=(c,l)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=l??(typeof h!="object"||h===null)?h:Object.assign({},e,h),r.forEach(p=>p(e,f))}},s=()=>e,o={setState:n,getState:s,getInitialState:()=>u,subscribe:c=>(r.add(c),()=>r.delete(c))},u=e=t(n,s,o);return o},F1=(t=>t?vu(t):vu),B1=t=>t;function j1(t,e=B1){const r=cs.useSyncExternalStore(t.subscribe,cs.useCallback(()=>e(t.getState()),[t,e]),cs.useCallback(()=>e(t.getInitialState()),[t,e]));return cs.useDebugValue(r),r}const Eu=t=>{const e=F1(t),r=n=>j1(e,n);return Object.assign(r,e),r},ts=(t=>t?Eu(t):Eu),bu={rawText:"",inputFormat:"auto",inputProjection:"auto",detectedFormat:null,detectedProjection:null,features:[],parseError:null,coordinateError:null,isParsing:!1,selectedFeatureId:null,hoveredFeatureId:null},le=ts(t=>({...bu,setRawText:e=>{t({rawText:e})},setInputFormat:e=>{t({inputFormat:e})},setInputProjection:e=>{t({inputProjection:e})},setFeatures:e=>{t({features:e,parseError:null})},setParseError:e=>{t({parseError:e,features:[]})},setCoordinateError:e=>{t({coordinateError:e})},setIsParsing:e=>{t({isParsing:e})},setSelectedFeatureId:e=>{t({selectedFeatureId:e})},setHoveredFeatureId:e=>{t({hoveredFeatureId:e})},setDetectedFormat:e=>{t({detectedFormat:e})},setDetectedProjection:e=>{t({detectedProjection:e})},reset:()=>{t(bu)}}));function $1(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var pr=1,mr=2,Fr=3,q1=4,sa=5,Su=6378137,U1=6356752314e-3,wu=.0066943799901413165,Mn=484813681109536e-20,D=Math.PI/2,H1=.16666666666666666,z1=.04722222222222222,W1=.022156084656084655,$=1e-10,xt=.017453292519943295,Ht=57.29577951308232,pt=Math.PI/4,Gn=Math.PI*2,At=3.14159265359,Wt={};Wt.greenwich=0;Wt.lisbon=-9.131906111111;Wt.paris=2.337229166667;Wt.bogota=-74.080916666667;Wt.madrid=-3.687938888889;Wt.rome=12.452333333333;Wt.bern=7.439583333333;Wt.jakarta=106.807719444444;Wt.ferro=-17.666666666667;Wt.brussels=4.367975;Wt.stockholm=18.058277777778;Wt.athens=23.7163375;Wt.oslo=10.722916666667;const V1={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var xu=/[\s_\-\/\(\)]/g;function He(t,e){if(t[e])return t[e];for(var r=Object.keys(t),n=e.toLowerCase().replace(xu,""),s=-1,i,a;++s<r.length;)if(i=r[s],a=i.toLowerCase().replace(xu,""),a===n)return t[i]}function ia(t){var e={},r=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,u){var c=u.split("=");return c.push(!0),o[c[0].toLowerCase()]=c[1],o},{}),n,s,i,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*xt},lat_1:function(o){e.lat1=o*xt},lat_2:function(o){e.lat2=o*xt},lat_ts:function(o){e.lat_ts=o*xt},lon_0:function(o){e.long0=o*xt},lon_1:function(o){e.long1=o*xt},lon_2:function(o){e.long2=o*xt},alpha:function(o){e.alpha=parseFloat(o)*xt},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*xt},lonc:function(o){e.longc=o*xt},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(u){return parseFloat(u)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var u=He(V1,o);u&&(e.to_meter=u.to_meter)},from_greenwich:function(o){e.from_greenwich=o*xt},pm:function(o){var u=He(Wt,o);e.from_greenwich=(u||parseFloat(o))*xt},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var u="ewnsud";o.length===3&&u.indexOf(o.substr(0,1))!==-1&&u.indexOf(o.substr(1,1))!==-1&&u.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(n in r)s=r[n],n in a?(i=a[n],typeof i=="function"?i(s):e[i]=s):e[n]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class Xl{static getId(e){const r=e.find(n=>Array.isArray(n)&&n[0]==="ID");return r&&r.length>=3?{authority:r[1],code:parseInt(r[2],10)}:null}static convertUnit(e,r="unit"){if(!e||e.length<3)return{type:r,name:"unknown",conversion_factor:null};const n=e[1],s=parseFloat(e[2])||null,i=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=i?{authority:i[1],code:parseInt(i[2],10)}:null;return{type:r,name:n,conversion_factor:s,id:a}}static convertAxis(e){const r=e[1]||"Unknown";let n;const s=r.match(/^\((.)\)$/);if(s){const c=s[1].toUpperCase();if(c==="E")n="east";else if(c==="N")n="north";else if(c==="U")n="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else n=e[2]?e[2].toLowerCase():"unknown";const i=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),a=i?parseInt(i[1],10):null,o=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),u=this.convertUnit(o);return{name:r,direction:n,unit:u,order:a}}static extractAxes(e){return e.filter(r=>Array.isArray(r)&&r[0]==="AXIS").map(r=>this.convertAxis(r)).sort((r,n)=>(r.order||0)-(n.order||0))}static convert(e,r={}){switch(e[0]){case"PROJCRS":r.type="ProjectedCRS",r.name=e[1],r.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,r.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const n=e.find(f=>Array.isArray(f)&&f[0]==="CS");n&&(r.coordinate_system={type:n[1],axis:this.extractAxes(e)});const s=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(s){const f=this.convertUnit(s);r.coordinate_system.unit=f}r.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":r.type="GeographicCRS",r.name=e[1];const i=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(i){const f=this.convert(i);i[0]==="ENSEMBLE"?r.datum_ensemble=f:r.datum=f;const p=e.find(g=>Array.isArray(g)&&g[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(f.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}r.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},r.id=this.getId(e);break;case"DATUM":r.type="GeodeticReferenceFrame",r.name=e[1],r.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":r.type="DatumEnsemble",r.name=e[1],r.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const a=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");a&&(r.accuracy=parseFloat(a[1]));const o=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");o&&(r.ellipsoid=this.convert(o)),r.id=this.getId(e);break;case"ELLIPSOID":r.type="Ellipsoid",r.name=e[1],r.semi_major_axis=parseFloat(e[2]),r.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),r);break;case"CONVERSION":r.type="Conversion",r.name=e[1],r.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,r.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":r.type="Method",r.name=e[1],r.id=this.getId(e);break;case"PARAMETER":r.type="Parameter",r.name=e[1],r.value=parseFloat(e[2]),r.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),r.id=this.getId(e);break;case"BOUNDCRS":r.type="BoundCRS";const u=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(u){const f=u.find(p=>Array.isArray(p));r.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(p=>Array.isArray(p));r.target_crs=f?this.convert(f):null}const l=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");l?r.transformation=this.convert(l):r.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(r.type="Transformation",r.name=e[1],r.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,r.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),r.parameters.length===7){const f=r.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}r.id=this.getId(e);break;case"AXIS":r.coordinate_system||(r.coordinate_system={type:"unspecified",axis:[]}),r.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");r.coordinate_system&&r.coordinate_system.axis&&r.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&r.semi_major_axis&&(r.semi_major_axis={value:r.semi_major_axis,unit:h});break;default:r.keyword=e[0];break}return r}}class X1 extends Xl{static convert(e,r={}){return super.convert(e,r),r.coordinate_system&&r.coordinate_system.subtype==="Cartesian"&&delete r.coordinate_system,r.usage&&delete r.usage,r}}class J1 extends Xl{static convert(e,r={}){super.convert(e,r);const n=e.find(i=>Array.isArray(i)&&i[0]==="CS");n&&(r.coordinate_system={subtype:n[1],axis:this.extractAxes(e)});const s=e.find(i=>Array.isArray(i)&&i[0]==="USAGE");if(s){const i=s.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),a=s.find(u=>Array.isArray(u)&&u[0]==="AREA"),o=s.find(u=>Array.isArray(u)&&u[0]==="BBOX");r.usage={},i&&(r.usage.scope=i[1]),a&&(r.usage.area=a[1]),o&&(r.usage.bbox=o.slice(1))}return r}}function K1(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Y1(t){return(K1(t)==="2019"?J1:X1).convert(t)}function Q1(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var On=1,Jl=2,Kl=3,Vs=4,Yl=5,$a=-1,Z1=/\s/,ty=/[A-Za-z]/,ey=/[A-Za-z84_]/,ci=/[,\]]/,Ql=/[\d\.E\-\+]/;function De(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=On}De.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Vs)for(;Z1.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case On:return this.neutral(t);case Jl:return this.keyword(t);case Vs:return this.quoted(t);case Yl:return this.afterquote(t);case Kl:return this.number(t);case $a:return}};De.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Vs;return}if(ci.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};De.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=On;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=On,this.currentObject=this.stack.pop(),this.currentObject||(this.state=$a);return}};De.prototype.number=function(t){if(Ql.test(t)){this.word+=t;return}if(ci.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};De.prototype.quoted=function(t){if(t==='"'){this.state=Yl;return}this.word+=t};De.prototype.keyword=function(t){if(ey.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=On;return}if(ci.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};De.prototype.neutral=function(t){if(ty.test(t)){this.word=t,this.state=Jl;return}if(t==='"'){this.word="",this.state=Vs;return}if(Ql.test(t)){this.word=t,this.state=Kl;return}if(ci.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};De.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===$a)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ry(t){var e=new De(t);return e.output()}function Ai(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,s=r.reduce(function(i,a){return kr(a,i),i},n);e&&(t[e]=s)}function kr(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},kr(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&kr(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&kr(t[3],e[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Ai(e,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Ai(e,r,t),e[r].type=r;return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return kr(t,e[r]);return Ai(e,r,t)}}var ny=.017453292519943295;function ae(t){return t*ny}function Zl(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=ae(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=ae(t.lat0>0?90:-90),delete t.lat1)}function Mu(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Au(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Pu(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Au(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Au(t.ellipsoid.semi_minor_axis))))}function Xs(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(Xs(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(r=>r.value)),e):(Object.keys(t).forEach(r=>{const n=t[r];if(n!==null)switch(r){case"name":if(e.srsCode)break;e.name=n,e.srsCode=n;break;case"type":n==="GeographicCRS"?e.projName="longlat":n==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(e.ellps=n.ellipsoid.name,Pu(n,e)),n.prime_meridian&&(e.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=n.name,Pu(n,e);break;case"prime_meridian":e.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis){if(e.axis=n.axis.map(s=>{const i=s.direction;if(i==="east")return"e";if(i==="north")return"n";if(i==="west")return"w";if(i==="south")return"s";throw new Error(`Unknown axis direction: ${i}`)}).join("")+"u",n.unit){const{units:s,to_meter:i}=Mu(n.unit);e.units=s,e.to_meter=i}else if(n.axis[0]&&n.axis[0].unit){const{units:s,to_meter:i}=Mu(n.axis[0].unit);e.units=s,e.to_meter=i}}break;case"id":n.authority&&n.code&&(e.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(e.projName=n.method.name),n.parameters&&n.parameters.forEach(s=>{const i=s.name.toLowerCase().replace(/\s+/g,"_"),a=s.value;s.unit&&s.unit.conversion_factor?e[i]=a*s.unit.conversion_factor:s.unit==="degree"?e[i]=a*Math.PI/180:e[i]=a});break;case"unit":n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),n.conversion_factor&&(e.to_meter=n.conversion_factor);break;case"base_crs":Xs(n,e),e.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Zl(e),e)}var sy=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function iy(t,e){var r=e[0],n=e[1];!(r in t)&&n in t&&(t[r]=t[n],e.length===3&&(t[r]=e[2](t[r])))}function th(t){for(var e=Object.keys(t),r=0,n=e.length;r<n;++r){var s=e[r];sy.indexOf(s)!==-1&&ay(t[s]),typeof t[s]=="object"&&th(t[s])}}function ay(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var r="",n=0,s=t.AXIS.length;n<s;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?r+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?r+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?r+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(t.axis=r)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=ae(t.rectified_grid_angle));function o(l){var h=t.to_meter||1;return l*h}var u=function(l){return iy(t,l)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ae],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ae],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",ae],["lat0","latitude_of_origin",ae],["lat0","standard_parallel_1",ae],["lat1","standard_parallel_1",ae],["lat2","standard_parallel_2",ae],["azimuth","Azimuth"],["alpha","azimuth",ae],["srsCode","name"]];c.forEach(u),Zl(t)}function Js(t){if(typeof t=="object")return Xs(t);const e=Q1(t);var r=ry(t);if(e==="WKT2"){const i=Y1(r);return Xs(i)}var n=r[0],s={};return kr(r,s),th(s),s[n]}function It(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?It[t]=ia(arguments[1]):It[t]=Js(arguments[1]):r&&typeof r=="object"&&!("projName"in r)?It[t]=Js(arguments[1]):(It[t]=r,r||delete It[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){return Array.isArray(n)?It.apply(e,n):It(n)});if(typeof t=="string"){if(t in It)return It[t]}else"EPSG"in t?It["EPSG:"+t.EPSG]=t:"ESRI"in t?It["ESRI:"+t.ESRI]=t:"IAU2000"in t?It["IAU2000:"+t.IAU2000]=t:console.log(t);return}}$1(It);function oy(t){return typeof t=="string"}function uy(t){return t in It}function cy(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var ly=["3857","900913","3785","102113"];function hy(t){var e=He(t,"authority");if(e){var r=He(e,"epsg");return r&&ly.indexOf(r)>-1}}function fy(t){var e=He(t,"extension");if(e)return He(e,"proj4")}function dy(t){return t[0]==="+"}function py(t){if(oy(t)){if(uy(t))return It[t];if(cy(t)){var e=Js(t);if(hy(e))return It["EPSG:3857"];var r=fy(e);return r?ia(r):e}if(dy(t))return ia(t)}else return"projName"in t?t:Js(t)}function Cu(t,e){t=t||{};var r,n;if(!e)return t;for(n in e)r=e[n],r!==void 0&&(t[n]=r);return t}function me(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function es(t){return t<0?-1:1}function z(t,e){return e||Math.abs(t)<=At?t:t-es(t)*Gn}function ce(t,e,r){var n=t*r,s=.5*t;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(D-e))/n}function Fn(t,e){for(var r=.5*t,n,s,i=D-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(i),s=D-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-i,i+=s,Math.abs(s)<=1e-10)return i;return-9999}function my(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function gy(t){var e=t.x,r=t.y;if(r*Ht>90&&r*Ht<-90&&e*Ht>180&&e*Ht<-180)return null;var n,s;if(Math.abs(Math.abs(r)-D)<=$)return null;if(this.sphere)n=this.x0+this.a*this.k0*z(e-this.long0,this.over),s=this.y0+this.a*this.k0*Math.log(Math.tan(pt+.5*r));else{var i=Math.sin(r),a=ce(this.e,r,i);n=this.x0+this.a*this.k0*z(e-this.long0,this.over),s=this.y0-this.a*this.k0*Math.log(a)}return t.x=n,t.y=s,t}function yy(t){var e=t.x-this.x0,r=t.y-this.y0,n,s;if(this.sphere)s=D-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var i=Math.exp(-r/(this.a*this.k0));if(s=Fn(this.e,i),s===-9999)return null}return n=z(this.long0+e/(this.a*this.k0),this.over),t.x=n,t.y=s,t}var _y=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const vy={init:my,forward:gy,inverse:yy,names:_y};function Ey(){}function Tu(t){return t}var eh=["longlat","identity"];const by={init:Ey,forward:Tu,inverse:Tu,names:eh};var Sy=[vy,by],sr={},Rr=[];function rh(t,e){var r=Rr.length;return t.names?(Rr[r]=t,t.names.forEach(function(n){sr[n.toLowerCase()]=r}),this):(console.log(e),!0)}function nh(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function wy(t){if(!t)return!1;var e=t.toLowerCase();if(typeof sr[e]<"u"&&Rr[sr[e]]||(e=nh(e),e in sr&&Rr[sr[e]]))return Rr[sr[e]]}function xy(){Sy.forEach(rh)}const My={start:xy,add:rh,get:wy};var sh={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Ay=sh.WGS84;function Py(t,e,r,n){var s=t*t,i=e*e,a=(s-i)/s,o=0;n?(t*=1-a*(H1+a*(z1+a*W1)),s=t*t,a=0):o=Math.sqrt(a);var u=(s-i)/i;return{es:a,e:o,ep2:u}}function Cy(t,e,r,n,s){if(!t){var i=He(sh,n);i||(i=Ay),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<$)&&(s=!0,e=t),{a:t,b:e,rf:r,sphere:s}}var ks={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Ty in ks){var Pi=ks[Ty];Pi.datumName&&(ks[Pi.datumName]=Pi)}function Dy(t,e,r,n,s,i,a){var o={};return t===void 0||t==="none"?o.datum_type=sa:o.datum_type=q1,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=pr),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=mr,o.datum_params[3]*=Mn,o.datum_params[4]*=Mn,o.datum_params[5]*=Mn,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Fr,o.grids=a),o.a=r,o.b=n,o.es=s,o.ep2=i,o}var qa={};function Ny(t,e,r){return e instanceof ArrayBuffer?Iy(t,e,r):{ready:ky(t,e)}}function Iy(t,e,r){var n=!0;r!==void 0&&r.includeErrorFields===!1&&(n=!1);var s=new DataView(e),i=Gy(s),a=Oy(s,i),o=Fy(s,a,i,n),u={header:a,subgrids:o};return qa[t]=u,u}async function ky(t,e){for(var r=[],n=await e.getImageCount(),s=n-1;s>=0;s--){var i=await e.getImage(s),a=await i.readRasters(),o=a,u=[i.getWidth(),i.getHeight()],c=i.getBoundingBox().map(Du),l=[i.fileDirectory.ModelPixelScale[0],i.fileDirectory.ModelPixelScale[1]].map(Du),h=c[0]+(u[0]-1)*l[0],f=c[3]-(u[1]-1)*l[1],p=o[0],g=o[1],v=[];for(let A=u[1]-1;A>=0;A--)for(let P=u[0]-1;P>=0;P--){var y=A*u[0]+P;v.push([-Le(g[y]),Le(p[y])])}r.push({del:l,lim:u,ll:[-h,f],cvs:v})}var S={header:{nSubgrids:n},subgrids:r};return qa[t]=S,S}function Ry(t){if(t===void 0)return null;var e=t.split(",");return e.map(Ly)}function Ly(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:qa[t]||null,isNull:!1}}function Du(t){return t*Math.PI/180}function Le(t){return t/3600*Math.PI/180}function Gy(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Oy(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:aa(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function aa(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function Fy(t,e,r,n){for(var s=176,i=[],a=0;a<e.nSubgrids;a++){var o=jy(t,s,r),u=$y(t,s,o,r,n),c=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[Le(o.lowerLongitude),Le(o.lowerLatitude)],del:[Le(o.longitudeInterval),Le(o.latitudeInterval)],lim:[c,l],count:o.gridNodeCount,cvs:By(u)});var h=16;n===!1&&(h=8),s+=176+o.gridNodeCount*h}return i}function By(t){return t.map(function(e){return[Le(e.longitudeShift),Le(e.latitudeShift)]})}function jy(t,e,r){return{name:aa(t,e+8,e+16).trim(),parent:aa(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function $y(t,e,r,n,s){var i=e+176,a=16;s===!1&&(a=8);for(var o=[],u=0;u<r.gridNodeCount;u++){var c={latitudeShift:t.getFloat32(i+u*a,n),longitudeShift:t.getFloat32(i+u*a+4,n)};s!==!1&&(c.latitudeAccuracy=t.getFloat32(i+u*a+8,n),c.longitudeAccuracy=t.getFloat32(i+u*a+12,n)),o.push(c)}return o}function ee(t,e){if(!(this instanceof ee))return new ee(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var r=py(t);if(typeof r!="object"){e("Could not parse to valid json: "+t);return}var n=ee.projections.get(r.projName);if(!n){e("Could not get projection name from: "+t);return}if(r.datumCode&&r.datumCode!=="none"){var s=He(ks,r.datumCode);s&&(r.datum_params=r.datum_params||(s.towgs84?s.towgs84.split(","):null),r.ellps=s.ellipse,r.datumName=s.datumName?s.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i=Cy(r.a,r.b,r.rf,r.ellps,r.sphere),a=Py(i.a,i.b,i.rf,r.R_A),o=Ry(r.nadgrids),u=r.datum||Dy(r.datumCode,r.datum_params,i.a,i.b,a.es,a.ep2,o);Cu(this,r),Cu(this,n),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}ee.projections=My;ee.projections.start();function qy(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===pr?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===mr?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function ih(t,e,r){var n=t.x,s=t.y,i=t.z?t.z:0,a,o,u,c;if(s<-D&&s>-1.001*D)s=-D;else if(s>D&&s<1.001*D)s=D;else{if(s<-D)return{x:-1/0,y:-1/0,z:t.z};if(s>D)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),o=Math.sin(s),c=Math.cos(s),u=o*o,a=r/Math.sqrt(1-e*u),{x:(a+i)*c*Math.cos(n),y:(a+i)*c*Math.sin(n),z:(a*(1-e)+i)*o}}function ah(t,e,r,n){var s=1e-12,i=s*s,a=30,o,u,c,l,h,f,p,g,v,y,S,A,P,k=t.x,R=t.y,C=t.z?t.z:0,x,G,E;if(o=Math.sqrt(k*k+R*R),u=Math.sqrt(k*k+R*R+C*C),o/r<s){if(x=0,u/r<s)return G=D,E=-n,{x:t.x,y:t.y,z:t.z}}else x=Math.atan2(R,k);c=C/u,l=o/u,h=1/Math.sqrt(1-e*(2-e)*l*l),g=l*(1-e)*h,v=c*h,P=0;do P++,p=r/Math.sqrt(1-e*v*v),E=o*g+C*v-p*(1-e*v*v),f=e*p/(p+E),h=1/Math.sqrt(1-f*(2-f)*l*l),y=l*(1-f)*h,S=c*h,A=S*g-y*v,g=y,v=S;while(A*A>i&&P<a);return G=Math.atan(S/Math.abs(y)),{x,y:G,z:E}}function Uy(t,e,r){if(e===pr)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===mr){var n=r[0],s=r[1],i=r[2],a=r[3],o=r[4],u=r[5],c=r[6];return{x:c*(t.x-u*t.y+o*t.z)+n,y:c*(u*t.x+t.y-a*t.z)+s,z:c*(-o*t.x+a*t.y+t.z)+i}}}function Hy(t,e,r){if(e===pr)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===mr){var n=r[0],s=r[1],i=r[2],a=r[3],o=r[4],u=r[5],c=r[6],l=(t.x-n)/c,h=(t.y-s)/c,f=(t.z-i)/c;return{x:l+u*h-o*f,y:-u*l+h+a*f,z:o*l-a*h+f}}}function ys(t){return t===pr||t===mr}function zy(t,e,r){if(qy(t,e)||t.datum_type===sa||e.datum_type===sa)return r;var n=t.a,s=t.es;if(t.datum_type===Fr){var i=Nu(t,!1,r);if(i!==0)return;n=Su,s=wu}var a=e.a,o=e.b,u=e.es;if(e.datum_type===Fr&&(a=Su,o=U1,u=wu),s===u&&n===a&&!ys(t.datum_type)&&!ys(e.datum_type))return r;if(r=ih(r,s,n),ys(t.datum_type)&&(r=Uy(r,t.datum_type,t.datum_params)),ys(e.datum_type)&&(r=Hy(r,e.datum_type,e.datum_params)),r=ah(r,u,a,o),e.datum_type===Fr){var c=Nu(e,!0,r);if(c!==0)return}return r}function Nu(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},s={x:Number.NaN,y:Number.NaN},i=[];t:for(var a=0;a<t.grids.length;a++){var o=t.grids[a];if(i.push(o.name),o.isNull){s=n;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var u=o.grid.subgrids,c=0,l=u.length;c<l;c++){var h=u[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-f,g=h.ll[1]-f,v=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(g>n.y||p>n.x||y<n.y||v<n.x)&&(s=Wy(n,e,h),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Ht+" "+n.y*Ht+" tried: '"+i+"'"),-1):(r.x=-s.x,r.y=s.y,0)}function Wy(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var s={x:t.x,y:t.y};s.x-=r.ll[0],s.y-=r.ll[1],s.x=z(s.x-Math.PI)+Math.PI;var i=Iu(s,r);if(e){if(isNaN(i.x))return n;i.x=s.x-i.x,i.y=s.y-i.y;var a=9,o=1e-12,u,c;do{if(c=Iu(i,r),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:s.x-(c.x+i.x),y:s.y-(c.y+i.y)},i.x+=u.x,i.y+=u.y}while(a--&&Math.abs(u.x)>o&&Math.abs(u.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=z(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function Iu(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(r.x),y:Math.floor(r.y)},s={x:r.x-1*n.x,y:r.y-1*n.y},i={x:Number.NaN,y:Number.NaN},a;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return i;a=n.y*e.lim[0]+n.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var u={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var c={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var l={x:e.cvs[a][0],y:e.cvs[a][1]},h=s.x*s.y,f=s.x*(1-s.y),p=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return i.x=p*o.x+f*u.x+g*l.x+h*c.x,i.y=p*o.y+f*u.y+g*l.y+h*c.y,i}function ku(t,e,r){var n=r.x,s=r.y,i=r.z||0,a,o,u,c={};for(u=0;u<3;u++)if(!(e&&u===2&&r.z===void 0))switch(u===0?(a=n,"ew".indexOf(t.axis[u])!==-1?o="x":o="y"):u===1?(a=s,"ns".indexOf(t.axis[u])!==-1?o="y":o="x"):(a=i,o="z"),t.axis[u]){case"e":c[o]=a;break;case"w":c[o]=-a;break;case"n":c[o]=a;break;case"s":c[o]=-a;break;case"u":r[o]!==void 0&&(c.z=a);break;case"d":r[o]!==void 0&&(c.z=-a);break;default:return null}return c}function oh(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Vy(t){Ru(t.x),Ru(t.y)}function Ru(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Xy(t,e){return(t.datum.datum_type===pr||t.datum.datum_type===mr||t.datum.datum_type===Fr)&&e.datumCode!=="WGS84"||(e.datum.datum_type===pr||e.datum.datum_type===mr||e.datum.datum_type===Fr)&&t.datumCode!=="WGS84"}function Ks(t,e,r,n){var s;Array.isArray(r)?r=oh(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var i=r.z!==void 0;if(Vy(r),t.datum&&e.datum&&Xy(t,e)&&(s=new ee("WGS84"),r=Ks(t,s,r,n),t=s),n&&t.axis!=="enu"&&(r=ku(t,!1,r)),t.projName==="longlat")r={x:r.x*xt,y:r.y*xt,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=zy(t.datum,e.datum,r),!!r)return r=r,e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*Ht,y:r.y*Ht,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&e.axis!=="enu"?ku(e,!0,r):(r&&!i&&delete r.z,r)}var Lu=ee("WGS84");function Ci(t,e,r,n){var s,i,a;return Array.isArray(r)?(s=Ks(t,e,r,n)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(r.slice(3)):[s.x,s.y,r[2]].concat(r.slice(3)):[s.x,s.y].concat(r.slice(2)):[s.x,s.y]):(i=Ks(t,e,r,n),a=Object.keys(r),a.length===2||a.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;i[o]=r[o]}),i)}function _s(t){return t instanceof ee?t:typeof t=="object"&&"oProj"in t?t.oProj:ee(t)}function Jy(t,e,r){var n,s,i=!1,a;return typeof e>"u"?(s=_s(t),n=Lu,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,s=_s(t),n=Lu,i=!0),n||(n=_s(t)),s||(s=_s(e)),r?Ci(n,s,r):(a={forward:function(o,u){return Ci(n,s,o,u)},inverse:function(o,u){return Ci(s,n,o,u)}},i&&(a.oProj=s),a)}var Gu=6,uh="AJSAJS",ch="AFAFAF",Lr=65,qt=73,Qt=79,En=86,bn=90;const Ky={forward:lh,inverse:Yy,toPoint:hh};function lh(t,e){return e=e||5,t_(Qy({lat:t[1],lon:t[0]}),e)}function Yy(t){var e=Ua(dh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function hh(t){var e=Ua(dh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ti(t){return t*(Math.PI/180)}function Ou(t){return 180*(t/Math.PI)}function Qy(t){var e=t.lat,r=t.lon,n=6378137,s=.00669438,i=.9996,a,o,u,c,l,h,f,p=Ti(e),g=Ti(r),v,y;y=Math.floor((r+180)/6)+1,r===180&&(y=60),e>=56&&e<64&&r>=3&&r<12&&(y=32),e>=72&&e<84&&(r>=0&&r<9?y=31:r>=9&&r<21?y=33:r>=21&&r<33?y=35:r>=33&&r<42&&(y=37)),a=(y-1)*6-180+3,v=Ti(a),o=s/(1-s),u=n/Math.sqrt(1-s*Math.sin(p)*Math.sin(p)),c=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),h=Math.cos(p)*(g-v),f=n*((1-s/4-3*s*s/64-5*s*s*s/256)*p-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*p)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*p)-35*s*s*s/3072*Math.sin(6*p));var S=i*u*(h+(1-c+l)*h*h*h/6+(5-18*c+c*c+72*l-58*o)*h*h*h*h*h/120)+5e5,A=i*(f+u*Math.tan(p)*(h*h/2+(5-c+9*l+4*l*l)*h*h*h*h/24+(61-58*c+c*c+600*l-330*o)*h*h*h*h*h*h/720));return e<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(S),zoneNumber:y,zoneLetter:Zy(e)}}function Ua(t){var e=t.northing,r=t.easting,n=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var i=.9996,a=6378137,o=.00669438,u,c=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),l,h,f,p,g,v,y,S,A,P=r-5e5,k=e;n<"N"&&(k-=1e7),y=(s-1)*6-180+3,u=o/(1-o),v=k/i,S=v/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),A=S+(3*c/2-27*c*c*c/32)*Math.sin(2*S)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*S)+151*c*c*c/96*Math.sin(6*S),l=a/Math.sqrt(1-o*Math.sin(A)*Math.sin(A)),h=Math.tan(A)*Math.tan(A),f=u*Math.cos(A)*Math.cos(A),p=a*(1-o)/Math.pow(1-o*Math.sin(A)*Math.sin(A),1.5),g=P/(l*i);var R=A-l*Math.tan(A)/p*(g*g/2-(5+3*h+10*f-4*f*f-9*u)*g*g*g*g/24+(61+90*h+298*f+45*h*h-252*u-3*f*f)*g*g*g*g*g*g/720);R=Ou(R);var C=(g-(1+2*h+f)*g*g*g/6+(5-2*f+28*h-3*f*f+8*u+24*h*h)*g*g*g*g*g/120)/Math.cos(A);C=y+Ou(C);var x;if(t.accuracy){var G=Ua({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:G.lat,right:G.lon,bottom:R,left:C}}else x={lat:R,lon:C};return x}function Zy(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function t_(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+e_(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+n.substr(n.length-5,e)}function e_(t,e,r){var n=fh(r),s=Math.floor(t/1e5),i=Math.floor(e/1e5)%20;return r_(s,i,n)}function fh(t){var e=t%Gu;return e===0&&(e=Gu),e}function r_(t,e,r){var n=r-1,s=uh.charCodeAt(n),i=ch.charCodeAt(n),a=s+t-1,o=i+e,u=!1;a>bn&&(a=a-bn+Lr-1,u=!0),(a===qt||s<qt&&a>qt||(a>qt||s<qt)&&u)&&a++,(a===Qt||s<Qt&&a>Qt||(a>Qt||s<Qt)&&u)&&(a++,a===qt&&a++),a>bn&&(a=a-bn+Lr-1),o>En?(o=o-En+Lr-1,u=!0):u=!1,(o===qt||i<qt&&o>qt||(o>qt||i<qt)&&u)&&o++,(o===Qt||i<Qt&&o>Qt||(o>Qt||i<Qt)&&u)&&(o++,o===qt&&o++),o>En&&(o=o-En+Lr-1);var c=String.fromCharCode(a)+String.fromCharCode(o);return c}function dh(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,n="",s,i=0;!/[A-Z]/.test(s=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;n+=s,i++}var a=parseInt(n,10);if(i===0||i+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(i++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;r=t.substring(i,i+=2);for(var u=fh(a),c=n_(r.charAt(0),u),l=s_(r.charAt(1),u);l<i_(o);)l+=2e6;var h=e-i;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,p=0,g=0,v,y,S,A,P;return f>0&&(v=1e5/Math.pow(10,f),y=t.substring(i,i+f),p=parseFloat(y)*v,S=t.substring(i+f),g=parseFloat(S)*v),A=p+c,P=g+l,{easting:A,northing:P,zoneLetter:o,zoneNumber:a,accuracy:v}}function n_(t,e){for(var r=uh.charCodeAt(e-1),n=1e5,s=!1;r!==t.charCodeAt(0);){if(r++,r===qt&&r++,r===Qt&&r++,r>bn){if(s)throw"Bad character: "+t;r=Lr,s=!0}n+=1e5}return n}function s_(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=ch.charCodeAt(e-1),n=0,s=!1;r!==t.charCodeAt(0);){if(r++,r===qt&&r++,r===Qt&&r++,r>En){if(s)throw"Bad character: "+t;r=Lr,s=!0}n+=1e5}return n}function i_(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Vr(t,e,r){if(!(this instanceof Vr))return new Vr(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var n=t.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Vr.fromMGRS=function(t){return new Vr(hh(t))};Vr.prototype.toMGRS=function(t){return lh([this.x,this.y],t)};var a_=1,o_=.25,Fu=.046875,Bu=.01953125,ju=.01068115234375,u_=.75,c_=.46875,l_=.013020833333333334,h_=.007120768229166667,f_=.3645833333333333,d_=.005696614583333333,p_=.3076171875;function Ha(t){var e=[];e[0]=a_-t*(o_+t*(Fu+t*(Bu+t*ju))),e[1]=t*(u_-t*(Fu+t*(Bu+t*ju)));var r=t*t;return e[2]=r*(c_-t*(l_+t*h_)),r*=t,e[3]=r*(f_-t*d_),e[4]=r*t*p_,e}function on(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var m_=20;function za(t,e,r){for(var n=1/(1-e),s=t,i=m_;i;--i){var a=Math.sin(s),o=1-e*a*a;if(o=(on(s,a,Math.cos(s),r)-t)*(o*Math.sqrt(o))*n,s-=o,Math.abs(o)<$)return s}return s}function g_(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Ha(this.es),this.ml0=on(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function y_(t){var e=t.x,r=t.y,n=z(e-this.long0,this.over),s,i,a,o=Math.sin(r),u=Math.cos(r);if(this.es){var l=u*n,h=Math.pow(l,2),f=this.ep2*Math.pow(u,2),p=Math.pow(f,2),g=Math.abs(u)>$?Math.tan(r):0,v=Math.pow(g,2),y=Math.pow(v,2);s=1-this.es*Math.pow(o,2),l=l/Math.sqrt(s);var S=on(r,o,u,this.en);i=this.a*(this.k0*l*(1+h/6*(1-v+f+h/20*(5-18*v+y+14*f-58*v*f+h/42*(61+179*y-y*v-479*v)))))+this.x0,a=this.a*(this.k0*(S-this.ml0+o*n*l/2*(1+h/12*(5-v+9*f+4*p+h/30*(61+y-58*v+270*f-330*v*f+h/56*(1385+543*y-y*v-3111*v))))))+this.y0}else{var c=u*Math.sin(n);if(Math.abs(Math.abs(c)-1)<$)return 93;if(i=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,a=u*Math.cos(n)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(a),c>=1){if(c-1>$)return 93;a=0}else a=Math.acos(a);r<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=i,t.y=a,t}function __(t){var e,r,n,s,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,r=za(e,this.es,this.en),Math.abs(r)<D){var h=Math.sin(r),f=Math.cos(r),p=Math.abs(f)>$?Math.tan(r):0,g=this.ep2*Math.pow(f,2),v=Math.pow(g,2),y=Math.pow(p,2),S=Math.pow(y,2);e=1-this.es*Math.pow(h,2);var A=i*Math.sqrt(e)/this.k0,P=Math.pow(A,2);e=e*p,n=r-e*P/(1-this.es)*.5*(1-P/12*(5+3*y-9*g*y+g-4*v-P/30*(61+90*y-252*g*y+45*S+46*g-P/56*(1385+3633*y+4095*S+1574*S*y)))),s=z(this.long0+A*(1-P/6*(1+2*y+g-P/20*(5+28*y+24*S+8*g*y+6*g-P/42*(61+662*y+1320*S+720*S*y))))/f,this.over)}else n=D*es(a),s=0;else{var o=Math.exp(i/this.k0),u=.5*(o-1/o),c=this.lat0+a/this.k0,l=Math.cos(c);e=Math.sqrt((1-Math.pow(l,2))/(1+Math.pow(u,2))),n=Math.asin(e),a<0&&(n=-n),u===0&&l===0?s=0:s=z(Math.atan2(u,l)+this.long0,this.over)}return t.x=s,t.y=n,t}var v_=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Rs={init:g_,forward:y_,inverse:__,names:v_};function ph(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ut(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function E_(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function b_(t){var e=Math.abs(t);return e=E_(e*(1+e/(Ut(1,e)+1))),t<0?-e:e}function Wa(t,e){for(var r=2*Math.cos(2*e),n=t.length-1,s=t[n],i=0,a;--n>=0;)a=-i+r*s+t[n],i=s,s=a;return e+a*Math.sin(2*e)}function S_(t,e){for(var r=2*Math.cos(e),n=t.length-1,s=t[n],i=0,a;--n>=0;)a=-i+r*s+t[n],i=s,s=a;return Math.sin(e)*a}function w_(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function mh(t,e,r){for(var n=Math.sin(e),s=Math.cos(e),i=ph(r),a=w_(r),o=2*s*a,u=-2*n*i,c=t.length-1,l=t[c],h=0,f=0,p=0,g,v;--c>=0;)g=f,v=h,f=l,h=p,l=-g+o*f-u*h+t[c],p=-v+u*f+o*h;return o=n*a,u=s*i,[o*l-u*p,o*p+u*l]}function x_(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Rs.init.apply(this),this.forward=Rs.forward,this.inverse=Rs.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var n=Wa(this.cbg,this.lat0);this.Zb=-this.Qn*(n+S_(this.gtu,2*n))}function M_(t){var e=z(t.x-this.long0,this.over),r=t.y;r=Wa(this.cbg,r);var n=Math.sin(r),s=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*s),e=Math.atan2(i*s,Ut(n,s*a)),e=b_(Math.tan(e));var o=mh(this.gtu,2*r,2*e);r=r+o[0],e=e+o[1];var u,c;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*r+this.Zb)+this.y0):(u=1/0,c=1/0),t.x=u,t.y=c,t}function A_(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var n,s;if(Math.abs(e)<=2.623395162778){var i=mh(this.utg,2*r,2*e);r=r+i[0],e=e+i[1],e=Math.atan(ph(e));var a=Math.sin(r),o=Math.cos(r),u=Math.sin(e),c=Math.cos(e);r=Math.atan2(a*c,Ut(u,c*o)),e=Math.atan2(u,c*o),n=z(e+this.long0,this.over),s=Wa(this.cgb,r)}else n=1/0,s=1/0;return t.x=n,t.y=s,t}var P_=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Ls={init:x_,forward:M_,inverse:A_,names:P_};function C_(t,e){if(t===void 0){if(t=Math.floor((z(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var T_="etmerc";function D_(){var t=C_(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*xt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ls.init.apply(this),this.forward=Ls.forward,this.inverse=Ls.inverse}var N_=["Universal Transverse Mercator System","utm"];const I_={init:D_,names:N_,dependsOn:T_};function Va(t,e){return Math.pow((1-t)/(1+t),e)}var k_=20;function R_(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pt)/(Math.pow(Math.tan(.5*this.lat0+pt),this.C)*Va(this.e*t,this.ratexp))}function L_(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+pt),this.C)*Va(this.e*Math.sin(r),this.ratexp))-D,t.x=this.C*e,t}function G_(t){for(var e=1e-14,r=t.x/this.C,n=t.y,s=Math.pow(Math.tan(.5*n+pt)/this.K,1/this.C),i=k_;i>0&&(n=2*Math.atan(s*Va(this.e*Math.sin(t.y),-.5*this.e))-D,!(Math.abs(n-t.y)<e));--i)t.y=n;return i?(t.x=r,t.y=n,t):null}const Xa={init:R_,forward:L_,inverse:G_};function O_(){Xa.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function F_(t){var e,r,n,s;return t.x=z(t.x-this.long0,this.over),Xa.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=s*r*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function B_(t){var e,r,n,s,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=Ut(t.x,t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),s=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else s=this.phic0,n=0;return t.x=n,t.y=s,Xa.inverse.apply(this,[t]),t.x=z(t.x+this.long0,this.over),t}var j_=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const $_={init:O_,forward:F_,inverse:B_,names:j_};function Ja(t,e,r){return e*=r,Math.tan(.5*(D+t))*Math.pow((1-e)/(1+e),.5*r)}function q_(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$&&(this.k0=.5*(1+es(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=$&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$&&Math.abs(Math.cos(this.lat_ts))>$&&(this.k0=.5*this.cons*me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ce(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=me(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Ja(this.lat0,this.sinlat0,this.e))-D,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function U_(t){var e=t.x,r=t.y,n=Math.sin(r),s=Math.cos(r),i,a,o,u,c,l,h=z(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=$&&Math.abs(r+this.lat0)<=$?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*n+this.coslat0*s*Math.cos(h)),t.x=this.a*i*s*Math.sin(h)+this.x0,t.y=this.a*i*(this.coslat0*n-this.sinlat0*s*Math.cos(h))+this.y0,t):(a=2*Math.atan(Ja(r,n,this.e))-D,u=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=$?(c=ce(this.e,r*this.con,this.con*n),l=2*this.a*this.k0*c/this.cons,t.x=this.x0+l*Math.sin(e-this.long0),t.y=this.y0-this.con*l*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<$?(i=2*this.a*this.k0/(1+u*Math.cos(h)),t.y=i*o):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*u*Math.cos(h))),t.y=i*(this.cosX0*o-this.sinX0*u*Math.cos(h))+this.y0),t.x=i*u*Math.sin(h)+this.x0,t))}function H_(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,s,i,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=$?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<$?this.lat0>0?e=z(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=z(this.long0+Math.atan2(t.x,t.y),this.over):e=z(this.long0+Math.atan2(t.x*Math.sin(o),a*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o)),this.over),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=$){if(a<=$)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*Fn(this.e,n),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else s=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=$?i=this.X0:(i=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/a),e=z(this.long0+Math.atan2(t.x*Math.sin(s),a*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)),this.over)),r=-1*Fn(this.e,Math.tan(.5*(D+i)));return t.x=e,t.y=r,t}var z_=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const W_={init:q_,forward:U_,inverse:H_,names:z_,ssfn_:Ja};function V_(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=this.rf,s=1/n,i=2*s-Math.pow(s,2),a=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*u+this.alpha*a/2*c}function X_(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(i))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t}function J_(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,s=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+a/this.alpha,u=0,c=i,l=-1e3,h=0;Math.abs(c-l)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),l=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=o,t.y=c,t}var K_=["somerc"];const Y_={init:V_,forward:X_,inverse:J_,names:K_};var Dr=1e-7;function Q_(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1||e.indexOf(nh(r))!==-1}function Z_(){var t,e,r,n,s,i,a,o,u,c,l=0,h,f=0,p=0,g=0,v=0,y=0,S=0;this.no_off=Q_(this),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var P=!1;if("rectified_grid_angle"in this&&(P=!0),A&&(S=this.alpha),P&&(l=this.rectified_grid_angle),A||P)f=this.longc;else if(p=this.long1,v=this.lat1,g=this.long2,y=this.lat2,Math.abs(v-y)<=Dr||(t=Math.abs(v))<=Dr||Math.abs(t-D)<=Dr||Math.abs(Math.abs(this.lat0)-D)<=Dr||Math.abs(Math.abs(y)-D)<=Dr)throw new Error;var k=1-this.es;e=Math.sqrt(k),Math.abs(this.lat0)>$?(o=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*o*o,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*e/t,n=this.B*e/(r*Math.sqrt(t)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(ce(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=s=1),A||P?(A?(h=Math.asin(Math.sin(S)/n),P||(l=S)):(h=l,S=Math.asin(n*Math.sin(h))),this.lam0=f-Math.asin(.5*(s-1/s)*Math.tan(h))/this.B):(i=Math.pow(ce(this.e,v,Math.sin(v)),this.B),a=Math.pow(ce(this.e,y,Math.sin(y)),this.B),s=this.E/i,u=(a-i)/(a+i),c=this.E*this.E,c=(c-a*i)/(c+a*i),t=p-g,t<-Math.PI?g-=Gn:t>Math.PI&&(g+=Gn),this.lam0=z(.5*(p+g)-Math.atan(c*Math.tan(.5*this.B*(p-g))/u)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*z(p-this.lam0,this.over))/(s-1/s)),l=S=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(l),this.cosrot=Math.cos(l),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(pt-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(pt+s))}function tv(t){var e={},r,n,s,i,a,o,u,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-D)>$){if(a=this.E/Math.pow(ce(this.e,t.y,Math.sin(t.y)),this.B),o=1/a,r=.5*(a-o),n=.5*(a+o),i=Math.sin(this.B*t.x),s=(r*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(s)-1)<$)throw new Error;c=.5*this.ArB*Math.log((1-s)/(1+s)),o=Math.cos(this.B*t.x),Math.abs(o)<Dr?u=this.A*t.x:u=this.ArB*Math.atan2(r*this.cosgam+i*this.singam,o)}else c=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=c):(u-=this.u_0,e.x=c*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function ev(t){var e,r,n,s,i,a,o,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*r),s=.5*(n-1/n),i=.5*(n+1/n),a=Math.sin(this.BrA*e),o=(a*this.cosgam+s*this.singam)/i,Math.abs(Math.abs(o)-1)<$)u.x=0,u.y=o<0?-D:D;else{if(u.y=this.E/Math.sqrt((1+o)/(1-o)),u.y=Fn(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(s*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var rv=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const nv={init:Z_,forward:tv,inverse:ev,names:rv};function sv(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<$)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=me(this.e,e,r),s=ce(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),o=me(this.e,i,a),u=ce(this.e,this.lat2,i),c=Math.abs(Math.abs(this.lat0)-D)<$?0:ce(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>$?this.ns=Math.log(n/o)/Math.log(s/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function iv(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=$&&(r=es(r)*(D-2*$));var n=Math.abs(Math.abs(r)-D),s,i;if(n>$)s=ce(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(s,this.ns);else{if(n=r*this.ns,n<=0)return null;i=0}var a=this.ns*z(e-this.long0,this.over);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t}function av(t){var e,r,n,s,i,a=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),r=1):(e=-Math.sqrt(a*a+o*o),r=-1);var u=0;if(e!==0&&(u=Math.atan2(r*a,r*o)),e!==0||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),s=Fn(this.e,n),s===-9999)return null}else s=-D;return i=z(u/this.ns+this.long0,this.over),t.x=i,t.y=s,t}var ov=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const uv={init:sv,forward:iv,inverse:av,names:ov};function cv(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function lv(t){var e,r,n,s,i,a,o,u=t.x,c=t.y,l=z(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-l*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(s)),a=this.n*i,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=o*Math.cos(a)/1,t.x=o*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function hv(t){var e,r,n,s,i,a,o,u,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x),s=i/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),r=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(e)),t.x=this.long0-r/this.alfa,o=e,u=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(u=1),o=t.y,l+=1;while(u===0&&l<15);return l>=15?null:t}var fv=["Krovak","krovak"];const dv={init:cv,forward:lv,inverse:hv,names:fv};function Ot(t,e,r,n,s){return t*s-e*Math.sin(2*s)+r*Math.sin(4*s)-n*Math.sin(6*s)}function rs(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ns(t){return .375*t*(1+.25*t*(1+.46875*t))}function ss(t){return .05859375*t*t*(1+.75*t)}function is(t){return t*t*t*(35/3072)}function Ka(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function Ke(t){return Math.abs(t)<D?t:t-es(t)*Math.PI}function Ys(t,e,r,n,s){var i,a;i=t/e;for(var o=0;o<15;o++)if(a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-s*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*s*Math.cos(6*i)),i+=a,Math.abs(a)<=1e-10)return i;return NaN}function pv(){this.sphere||(this.e0=rs(this.es),this.e1=ns(this.es),this.e2=ss(this.es),this.e3=is(this.es),this.ml0=this.a*Ot(this.e0,this.e1,this.e2,this.e3,this.lat0))}function mv(t){var e,r,n=t.x,s=t.y;if(n=z(n-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var i=Math.sin(s),a=Math.cos(s),o=Ka(this.a,this.e,i),u=Math.tan(s)*Math.tan(s),c=n*Math.cos(s),l=c*c,h=this.es*a*a/(1-this.es),f=this.a*Ot(this.e0,this.e1,this.e2,this.e3,s);e=o*c*(1-l*u*(1/6-(8-u+8*h)*l/120)),r=f-this.ml0+o*i/a*l*(.5+(5-u+6*h)*l/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function gv(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,n,s;if(this.sphere){var i=r+this.lat0;n=Math.asin(Math.sin(i)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(i))}else{var a=this.ml0/this.a+r,o=Ys(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-D)<=$)return t.x=this.long0,t.y=D,r<0&&(t.y*=-1),t;var u=Ka(this.a,this.e,Math.sin(o)),c=u*u*u/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(o),2),h=e*this.a/u,f=h*h;n=o-u*Math.tan(o)/c*h*h*(.5-(1+3*l)*h*h/24),s=h*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(o)}return t.x=z(s+this.long0,this.over),t.y=Ke(n),t}var yv=["Cassini","Cassini_Soldner","cass"];const _v={init:pv,forward:mv,inverse:gv,names:yv};function je(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var oa=1,ua=2,ca=3,Gs=4;function vv(){var t=Math.abs(this.lat0);if(Math.abs(t-D)<$?this.mode=this.lat0<0?oa:ua:Math.abs(t)<$?this.mode=ca:this.mode=Gs,this.es>0){var e;switch(this.qp=je(this.e,1),this.mmf=.5/(1-this.es),this.apa=Cv(this.es),this.mode){case ua:this.dd=1;break;case oa:this.dd=1;break;case ca:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Gs:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=je(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Gs&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ev(t){var e,r,n,s,i,a,o,u,c,l,h=t.x,f=t.y;if(h=z(h-this.long0,this.over),this.sphere){if(i=Math.sin(f),l=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+l*n:1+this.sinph0*i+this.cosph0*l*n,r<=$)return null;r=Math.sqrt(2/r),e=r*l*Math.sin(h),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*l*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<$)return null;r=pt-f*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(h),r*=n}}else{switch(o=0,u=0,c=0,n=Math.cos(h),s=Math.sin(h),i=Math.sin(f),a=je(this.e,i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,u=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:c=1+this.sinb1*o+this.cosb1*u*n;break;case this.EQUIT:c=1+u*n;break;case this.N_POLE:c=D+f,a=this.qp-a;break;case this.S_POLE:c=f-D,a=this.qp+a;break}if(Math.abs(c)<$)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?r=this.ymf*c*(this.cosb1*o-this.sinb1*u*n):r=(c=Math.sqrt(2/(1+u*n)))*o*this.ymf,e=this.xmf*c*u*s;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*s,r=n*(this.mode===this.S_POLE?c:-c)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function bv(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,n,s,i,a,o,u,c;if(this.sphere){var l=0,h,f=0;if(h=Math.sqrt(e*e+r*r),s=h*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(s),l=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(h)<=$?0:Math.asin(r*f/h),e*=f,r=l*h;break;case this.OBLIQ:s=Math.abs(h)<=$?this.lat0:Math.asin(l*this.sinph0+r*f*this.cosph0/h),e*=f*this.cosph0,r=(l-Math.sin(s)*this.sinph0)*h;break;case this.N_POLE:r=-r,s=D-s;break;case this.S_POLE:s-=D;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,u=Math.sqrt(e*e+r*r),u<$)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*u/this.rq),i=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(c=i*this.sinb1+r*a*this.cosb1/u,o=this.qp*c,r=u*this.cosb1*i-r*this.sinb1*a):(c=r*a/u,o=this.qp*c,r=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),o=e*e+r*r,!o)return t.x=this.long0,t.y=this.lat0,t;c=1-o/this.qp,this.mode===this.S_POLE&&(c=-c)}n=Math.atan2(e,r),s=Tv(Math.asin(c),this.apa)}return t.x=z(this.long0+n,this.over),t.y=s,t}var Sv=.3333333333333333,wv=.17222222222222222,xv=.10257936507936508,Mv=.06388888888888888,Av=.0664021164021164,Pv=.016415012942191543;function Cv(t){var e,r=[];return r[0]=t*Sv,e=t*t,r[0]+=e*wv,r[1]=e*Mv,e*=t,r[0]+=e*xv,r[1]+=e*Av,r[2]=e*Pv,r}function Tv(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var Dv=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Nv={init:vv,forward:Ev,inverse:bv,names:Dv,S_POLE:oa,N_POLE:ua,EQUIT:ca,OBLIQ:Gs};function ze(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Iv(){Math.abs(this.lat1+this.lat2)<$||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=me(this.e3,this.sin_po,this.cos_po),this.qs1=je(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=me(this.e3,this.sin_po,this.cos_po),this.qs2=je(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=je(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>$?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function kv(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=je(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*z(e-this.long0,this.over),a=s*Math.sin(i)+this.x0,o=this.rh-s*Math.cos(i)+this.y0;return t.x=a,t.y=o,t}function Rv(t){var e,r,n,s,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),s=0,e!==0&&(s=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=z(s/this.ns0+this.long0,this.over),t.x=i,t.y=a,t}function Lv(t,e){var r,n,s,i,a,o=ze(.5*e);if(t<$)return o;for(var u=t*t,c=1;c<=25;c++)if(r=Math.sin(o),n=Math.cos(o),s=t*r,i=1-s*s,a=.5*i*i/n*(e/(1-u)-r/i+.5/t*Math.log((1-s)/(1+s))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var Gv=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Ov={init:Iv,forward:kv,inverse:Rv,names:Gv,phi1z:Lv};function Fv(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Bv(t){var e,r,n,s,i,a,o,u,c=t.x,l=t.y;return n=z(c-this.long0,this.over),e=Math.sin(l),r=Math.cos(l),s=Math.cos(n),a=this.sin_p14*e+this.cos_p14*r*s,i=1,a>0||Math.abs(a)<=$?(o=this.x0+this.a*i*r*Math.sin(n)/a,u=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*s)/a):(o=this.x0+this.infinity_dist*r*Math.sin(n),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*s)),t.x=o,t.y=u,t}function jv(t){var e,r,n,s,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),r=Math.sin(s),n=Math.cos(s),a=ze(n*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=z(this.long0+i,this.over)):(a=this.phic0,i=0),t.x=i,t.y=a,t}var $v=["gnom"];const qv={init:Fv,forward:Bv,inverse:jv,names:$v};function Uv(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*D:D;for(var n=Math.asin(.5*e),s,i,a,o,u=0;u<30;u++)if(i=Math.sin(n),a=Math.cos(n),o=t*i,s=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),n+=s,Math.abs(s)<=1e-10)return n;return NaN}function Hv(){this.sphere||(this.k0=me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function zv(t){var e=t.x,r=t.y,n,s,i=z(e-this.long0,this.over);if(this.sphere)n=this.x0+this.a*i*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var a=je(this.e,Math.sin(r));n=this.x0+this.a*this.k0*i,s=this.y0+this.a*a*.5/this.k0}return t.x=n,t.y=s,t}function Wv(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=Uv(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=r,t}var Vv=["cea"];const Xv={init:Hv,forward:zv,inverse:Wv,names:Vv};function Jv(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Kv(t){var e=t.x,r=t.y,n=z(e-this.long0,this.over),s=Ke(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*s,t}function Yv(t){var e=t.x,r=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=Ke(this.lat0+(r-this.y0)/this.a),t}var Qv=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Zv={init:Jv,forward:Kv,inverse:Yv,names:Qv};var $u=20;function t4(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rs(this.es),this.e1=ns(this.es),this.e2=ss(this.es),this.e3=is(this.es),this.ml0=this.a*Ot(this.e0,this.e1,this.e2,this.e3,this.lat0)}function e4(t){var e=t.x,r=t.y,n,s,i,a=z(e-this.long0,this.over);if(i=a*Math.sin(r),this.sphere)Math.abs(r)<=$?(n=this.a*a,s=-1*this.a*this.lat0):(n=this.a*Math.sin(i)/Math.tan(r),s=this.a*(Ke(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=$)n=this.a*a,s=-1*this.ml0;else{var o=Ka(this.a,this.e,Math.sin(r))/Math.tan(r);n=o*Math.sin(i),s=this.a*Ot(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+o*(1-Math.cos(i))}return t.x=n+this.x0,t.y=s+this.y0,t}function r4(t){var e,r,n,s,i,a,o,u,c;if(n=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=$)e=z(n/this.a+this.long0,this.over),r=0;else{a=this.lat0+s/this.a,o=n*n/this.a/this.a+a*a,u=a;var l;for(i=$u;i;--i)if(l=Math.tan(u),c=-1*(a*(u*l+1)-u-.5*(u*u+o)*l)/((u-a)/l-1),u+=c,Math.abs(c)<=$){r=u;break}e=z(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r),this.over)}else if(Math.abs(s+this.ml0)<=$)r=0,e=z(this.long0+n/this.a,this.over);else{a=(this.ml0+s)/this.a,o=n*n/this.a/this.a+a*a,u=a;var h,f,p,g,v;for(i=$u;i;--i)if(v=this.e*Math.sin(u),h=Math.sqrt(1-v*v)*Math.tan(u),f=this.a*Ot(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),g=f/this.a,c=(a*(h*g+1)-g-.5*h*(g*g+o))/(this.es*Math.sin(2*u)*(g*g+o-2*a*g)/(4*h)+(a-g)*(h*p-2/Math.sin(2*u))-p),u-=c,Math.abs(c)<=$){r=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=z(this.long0+Math.asin(n*h/this.a)/Math.sin(r),this.over)}return t.x=e,t.y=r,t}var n4=["Polyconic","American_Polyconic","poly"];const s4={init:t4,forward:e4,inverse:r4,names:n4};function i4(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function a4(t){var e,r=t.x,n=t.y,s=n-this.lat0,i=r-this.long0,a=s/Mn*1e-5,o=i,u=1,c=0;for(e=1;e<=10;e++)u=u*a,c=c+this.A[e]*u;var l=c,h=o,f=1,p=0,g,v,y=0,S=0;for(e=1;e<=6;e++)g=f*l-p*h,v=p*l+f*h,f=g,p=v,y=y+this.B_re[e]*f-this.B_im[e]*p,S=S+this.B_im[e]*f+this.B_re[e]*p;return t.x=S*this.a+this.x0,t.y=y*this.a+this.y0,t}function o4(t){var e,r=t.x,n=t.y,s=r-this.x0,i=n-this.y0,a=i/this.a,o=s/this.a,u=1,c=0,l,h,f=0,p=0;for(e=1;e<=6;e++)l=u*a-c*o,h=c*a+u*o,u=l,c=h,f=f+this.C_re[e]*u-this.C_im[e]*c,p=p+this.C_im[e]*u+this.C_re[e]*c;for(var g=0;g<this.iterations;g++){var v=f,y=p,S,A,P=a,k=o;for(e=2;e<=6;e++)S=v*f-y*p,A=y*f+v*p,v=S,y=A,P=P+(e-1)*(this.B_re[e]*v-this.B_im[e]*y),k=k+(e-1)*(this.B_im[e]*v+this.B_re[e]*y);v=1,y=0;var R=this.B_re[1],C=this.B_im[1];for(e=2;e<=6;e++)S=v*f-y*p,A=y*f+v*p,v=S,y=A,R=R+e*(this.B_re[e]*v-this.B_im[e]*y),C=C+e*(this.B_im[e]*v+this.B_re[e]*y);var x=R*R+C*C;f=(P*R+k*C)/x,p=(k*R-P*C)/x}var G=f,E=p,w=1,T=0;for(e=1;e<=9;e++)w=w*G,T=T+this.D[e]*w;var I=this.lat0+T*Mn*1e5,O=this.long0+E;return t.x=O,t.y=I,t}var u4=["New_Zealand_Map_Grid","nzmg"];const c4={init:i4,forward:a4,inverse:o4,names:u4};function l4(){}function h4(t){var e=t.x,r=t.y,n=z(e-this.long0,this.over),s=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=s,t.y=i,t}function f4(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a,this.over),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var d4=["Miller_Cylindrical","mill"];const p4={init:l4,forward:h4,inverse:f4,names:d4};var m4=20;function g4(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ha(this.es)}function y4(t){var e,r,n=t.x,s=t.y;if(n=z(n-this.long0,this.over),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var i=this.n*Math.sin(s),a=m4;a;--a){var o=(this.m*s+Math.sin(s)-i)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<$)break}e=this.a*this.C_x*n*(this.m+Math.cos(s)),r=this.a*this.C_y*s}else{var u=Math.sin(s),c=Math.cos(s);r=this.a*on(s,u,c,this.en),e=this.a*n*c/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t}function _4(t){var e,r,n,s;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=ze((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ze(Math.sin(e)/this.n)),n=z(n+this.long0,this.over),e=Ke(e)):(e=za(t.y/this.a,this.es,this.en),s=Math.abs(e),s<D?(s=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),n=z(r,this.over)):s-$<D&&(n=this.long0)),t.x=n,t.y=e,t}var v4=["Sinusoidal","sinu"];const E4={init:g4,forward:y4,inverse:_4,names:v4};function b4(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function S4(t){for(var e=t.x,r=t.y,n=z(e-this.long0,this.over),s=r,i=Math.PI*Math.sin(r);;){var a=-(s+Math.sin(s)-i)/(1+Math.cos(s));if(s+=a,Math.abs(a)<$)break}s/=2,Math.PI/2-Math.abs(r)<$&&(n=0);var o=.900316316158*this.a*n*Math.cos(s)+this.x0,u=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=o,t.y=u,t}function w4(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var s=Math.asin(r);return t.x=n,t.y=s,t}var x4=["Mollweide","moll"];const M4={init:b4,forward:S4,inverse:w4,names:x4};function A4(){Math.abs(this.lat1+this.lat2)<$||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rs(this.es),this.e1=ns(this.es),this.e2=ss(this.es),this.e3=is(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=me(this.e,this.sin_phi,this.cos_phi),this.ml1=Ot(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<$?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=me(this.e,this.sin_phi,this.cos_phi),this.ml2=Ot(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ot(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function P4(t){var e=t.x,r=t.y,n;if(this.sphere)n=this.a*(this.g-r);else{var s=Ot(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-s)}var i=this.ns*z(e-this.long0,this.over),a=this.x0+n*Math.sin(i),o=this.y0+this.rh-n*Math.cos(i);return t.x=a,t.y=o,t}function C4(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,n,s;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;if(r!==0&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=z(this.long0+i/this.ns,this.over),n=Ke(this.g-r/this.a),t.x=s,t.y=n,t;var a=this.g-r/this.a;return n=Ys(a,this.e0,this.e1,this.e2,this.e3),s=z(this.long0+i/this.ns,this.over),t.x=s,t.y=n,t}var T4=["Equidistant_Conic","eqdc"];const D4={init:A4,forward:P4,inverse:C4,names:T4};function N4(){this.R=this.a}function I4(t){var e=t.x,r=t.y,n=z(e-this.long0,this.over),s,i;Math.abs(r)<=$&&(s=this.x0+this.R*n,i=this.y0);var a=ze(2*Math.abs(r/Math.PI));(Math.abs(n)<=$||Math.abs(Math.abs(r)-D)<=$)&&(s=this.x0,r>=0?i=this.y0+Math.PI*this.R*Math.tan(.5*a):i=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/n-n/Math.PI),u=o*o,c=Math.sin(a),l=Math.cos(a),h=l/(c+l-1),f=h*h,p=h*(2/c-1),g=p*p,v=Math.PI*this.R*(o*(h-g)+Math.sqrt(u*(h-g)*(h-g)-(g+u)*(f-g)))/(g+u);n<0&&(v=-v),s=this.x0+v;var y=u+h;return v=Math.PI*this.R*(p*y-o*Math.sqrt((g+u)*(u+1)-y*y))/(g+u),r>=0?i=this.y0+v:i=this.y0-v,t.x=s,t.y=i,t}function k4(t){var e,r,n,s,i,a,o,u,c,l,h,f,p;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,n=t.x/h,s=t.y/h,i=n*n+s*s,a=-Math.abs(s)*(1+i),o=a-2*s*s+n*n,u=-2*a+1+2*s*s+i*i,p=s*s/u+(2*o*o*o/u/u/u-9*a*o/u/u)/27,c=(a-o*o/3/u)/u,l=2*Math.sqrt(-c/3),h=3*p/c/l,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?r=(-l*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI:r=-(-l*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI,Math.abs(n)<$?e=this.long0:e=z(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-s*s)+i*i))/2/n,this.over),t.x=e,t.y=r,t}var R4=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const L4={init:N4,forward:I4,inverse:k4,names:R4};function G4(t,e,r,n,s,i){const a=n-e,o=Math.atan((1-i)*Math.tan(t)),u=Math.atan((1-i)*Math.tan(r)),c=Math.sin(o),l=Math.cos(o),h=Math.sin(u),f=Math.cos(u);let p=a,g,v=100,y,S,A,P,k,R,C,x,G,E,w,T,I,O;do{if(y=Math.sin(p),S=Math.cos(p),A=Math.sqrt(f*y*(f*y)+(l*h-c*f*S)*(l*h-c*f*S)),A===0)return{azi1:0,s12:0};P=c*h+l*f*S,k=Math.atan2(A,P),R=l*f*y/A,C=1-R*R,x=C!==0?P-2*c*h/C:0,G=i/16*C*(4+i*(4-3*C)),g=p,p=a+(1-G)*i*R*(k+G*A*(x+G*P*(-1+2*x*x)))}while(Math.abs(p-g)>1e-12&&--v>0);return v===0?{azi1:NaN,s12:NaN}:(E=C*(s*s-s*(1-i)*(s*(1-i)))/(s*(1-i)*(s*(1-i))),w=1+E/16384*(4096+E*(-768+E*(320-175*E))),T=E/1024*(256+E*(-128+E*(74-47*E))),I=T*A*(x+T/4*(P*(-1+2*x*x)-T/6*x*(-3+4*A*A)*(-3+4*x*x))),O=s*(1-i)*w*(k-I),{azi1:Math.atan2(f*y,l*h-c*f*S),s12:O})}function O4(t,e,r,n,s,i){const a=Math.atan((1-i)*Math.tan(t)),o=Math.sin(a),u=Math.cos(a),c=Math.sin(r),l=Math.cos(r),h=Math.atan2(o,u*l),f=u*c,p=1-f*f,g=p*(s*s-s*(1-i)*(s*(1-i)))/(s*(1-i)*(s*(1-i))),v=1+g/16384*(4096+g*(-768+g*(320-175*g))),y=g/1024*(256+g*(-128+g*(74-47*g)));let S=n/(s*(1-i)*v),A,P=100,k,R,C,x;do k=Math.cos(2*h+S),R=Math.sin(S),C=Math.cos(S),x=y*R*(k+y/4*(C*(-1+2*k*k)-y/6*k*(-3+4*R*R)*(-3+4*k*k))),A=S,S=n/(s*(1-i)*v)+x;while(Math.abs(S-A)>1e-12&&--P>0);if(P===0)return{lat2:NaN,lon2:NaN};const G=o*R-u*C*l,E=Math.atan2(o*C+u*R*l,(1-i)*Math.sqrt(f*f+G*G)),w=Math.atan2(R*c,u*C-o*R*l),T=i/16*p*(4+i*(4-3*p)),I=w-(1-T)*i*f*(S+T*R*(k+T*C*(-1+2*k*k))),O=e+I;return{lat2:E,lon2:O}}function F4(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function B4(t){var e=t.x,r=t.y,n=Math.sin(t.y),s=Math.cos(t.y),i=z(e-this.long0,this.over),a,o,u,c,l,h,f,p,g,v,y;return this.sphere?Math.abs(this.sin_p12-1)<=$?(t.x=this.x0+this.a*(D-r)*Math.sin(i),t.y=this.y0-this.a*(D-r)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=$?(t.x=this.x0+this.a*(D+r)*Math.sin(i),t.y=this.y0+this.a*(D+r)*Math.cos(i),t):(g=this.sin_p12*n+this.cos_p12*s*Math.cos(i),f=Math.acos(g),p=f?f/Math.sin(f):1,t.x=this.x0+this.a*p*s*Math.sin(i),t.y=this.y0+this.a*p*(this.cos_p12*n-this.sin_p12*s*Math.cos(i)),t):(a=rs(this.es),o=ns(this.es),u=ss(this.es),c=is(this.es),Math.abs(this.sin_p12-1)<=$?(l=this.a*Ot(a,o,u,c,D),h=this.a*Ot(a,o,u,c,r),t.x=this.x0+(l-h)*Math.sin(i),t.y=this.y0-(l-h)*Math.cos(i),t):Math.abs(this.sin_p12+1)<=$?(l=this.a*Ot(a,o,u,c,D),h=this.a*Ot(a,o,u,c,r),t.x=this.x0+(l+h)*Math.sin(i),t.y=this.y0+(l+h)*Math.cos(i),t):Math.abs(e)<$&&Math.abs(r-this.lat0)<$?(t.x=t.y=0,t):(v=G4(this.lat0,this.long0,r,e,this.a,this.f),y=v.azi1,t.x=v.s12*Math.sin(y),t.y=v.s12*Math.cos(y),t))}function j4(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,s,i,a,o,u,c,l,h,f,p,g,v,y;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*D*this.a?void 0:(r=e/this.a,n=Math.sin(r),s=Math.cos(r),i=this.long0,Math.abs(e)<=$?a=this.lat0:(a=ze(s*this.sin_p12+t.y*n*this.cos_p12/e),o=Math.abs(this.lat0)-D,Math.abs(o)<=$?this.lat0>=0?i=z(this.long0+Math.atan2(t.x,-t.y),this.over):i=z(this.long0-Math.atan2(-t.x,t.y),this.over):i=z(this.long0+Math.atan2(t.x*n,e*this.cos_p12*s-t.y*this.sin_p12*n),this.over)),t.x=i,t.y=a,t)):(u=rs(this.es),c=ns(this.es),l=ss(this.es),h=is(this.es),Math.abs(this.sin_p12-1)<=$?(f=this.a*Ot(u,c,l,h,D),e=Math.sqrt(t.x*t.x+t.y*t.y),p=f-e,a=Ys(p/this.a,u,c,l,h),i=z(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=$?(f=this.a*Ot(u,c,l,h,D),e=Math.sqrt(t.x*t.x+t.y*t.y),p=e-f,a=Ys(p/this.a,u,c,l,h),i=z(this.long0+Math.atan2(t.x,t.y),this.over),t.x=i,t.y=a,t):(g=Math.atan2(t.x,t.y),v=Math.sqrt(t.x*t.x+t.y*t.y),y=O4(this.lat0,this.long0,g,v,this.a,this.f),t.x=y.lon2,t.y=y.lat2,t))}var $4=["Azimuthal_Equidistant","aeqd"];const q4={init:F4,forward:B4,inverse:j4,names:$4};function U4(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function H4(t){var e,r,n,s,i,a,o,u,c=t.x,l=t.y;return n=z(c-this.long0,this.over),e=Math.sin(l),r=Math.cos(l),s=Math.cos(n),a=this.sin_p14*e+this.cos_p14*r*s,i=1,(a>0||Math.abs(a)<=$)&&(o=this.a*i*r*Math.sin(n),u=this.y0+this.a*i*(this.cos_p14*e-this.sin_p14*r*s)),t.x=o,t.y=u,t}function z4(t){var e,r,n,s,i,a,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=ze(e/this.a),n=Math.sin(r),s=Math.cos(r),a=this.long0,Math.abs(e)<=$?(o=this.lat0,t.x=a,t.y=o,t):(o=ze(s*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-D,Math.abs(i)<=$?(this.lat0>=0?a=z(this.long0+Math.atan2(t.x,-t.y),this.over):a=z(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=a,t.y=o,t):(a=z(this.long0+Math.atan2(t.x*n,e*this.cos_p14*s-t.y*this.sin_p14*n),this.over),t.x=a,t.y=o,t))}var W4=["ortho"];const V4={init:U4,forward:H4,inverse:z4,names:W4};var wt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function X4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=D-pt/2?this.face=wt.TOP:this.lat0<=-(D-pt/2)?this.face=wt.BOTTOM:Math.abs(this.long0)<=pt?this.face=wt.FRONT:Math.abs(this.long0)<=D+pt?this.face=this.long0>0?wt.RIGHT:wt.LEFT:this.face=wt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function J4(t){var e={x:0,y:0},r,n,s,i,a,o,u={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,n=t.x,this.face===wt.TOP)i=D-r,n>=pt&&n<=D+pt?(u.value=mt.AREA_0,s=n-D):n>D+pt||n<=-(D+pt)?(u.value=mt.AREA_1,s=n>0?n-At:n+At):n>-(D+pt)&&n<=-pt?(u.value=mt.AREA_2,s=n+D):(u.value=mt.AREA_3,s=n);else if(this.face===wt.BOTTOM)i=D+r,n>=pt&&n<=D+pt?(u.value=mt.AREA_0,s=-n+D):n<pt&&n>=-pt?(u.value=mt.AREA_1,s=-n):n<-pt&&n>=-(D+pt)?(u.value=mt.AREA_2,s=-n-D):(u.value=mt.AREA_3,s=n>0?-n+At:-n-At);else{var c,l,h,f,p,g,v;this.face===wt.RIGHT?n=Br(n,+D):this.face===wt.BACK?n=Br(n,+At):this.face===wt.LEFT&&(n=Br(n,-D)),f=Math.sin(r),p=Math.cos(r),g=Math.sin(n),v=Math.cos(n),c=p*v,l=p*g,h=f,this.face===wt.FRONT?(i=Math.acos(c),s=vs(i,h,l,u)):this.face===wt.RIGHT?(i=Math.acos(l),s=vs(i,h,-c,u)):this.face===wt.BACK?(i=Math.acos(-c),s=vs(i,h,-l,u)):this.face===wt.LEFT?(i=Math.acos(-l),s=vs(i,h,c,u)):(i=s=0,u.value=mt.AREA_0)}return o=Math.atan(12/At*(s+Math.acos(Math.sin(s)*Math.cos(pt))-D)),a=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(s))))),u.value===mt.AREA_1?o+=D:u.value===mt.AREA_2?o+=At:u.value===mt.AREA_3&&(o+=1.5*At),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function K4(t){var e={lam:0,phi:0},r,n,s,i,a,o,u,c,l,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=mt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=mt.AREA_1,r-=D):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=mt.AREA_2,r=r<0?r+At:r-At):(h.value=mt.AREA_3,r+=D),l=At/12*Math.tan(r),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),o=Math.atan(a),s=Math.cos(r),i=Math.tan(n),u=1-s*s*i*i*(1-Math.cos(Math.atan(1/Math.cos(o)))),u<-1?u=-1:u>1&&(u=1),this.face===wt.TOP)c=Math.acos(u),e.phi=D-c,h.value===mt.AREA_0?e.lam=o+D:h.value===mt.AREA_1?e.lam=o<0?o+At:o-At:h.value===mt.AREA_2?e.lam=o-D:e.lam=o;else if(this.face===wt.BOTTOM)c=Math.acos(u),e.phi=c-D,h.value===mt.AREA_0?e.lam=-o+D:h.value===mt.AREA_1?e.lam=-o:h.value===mt.AREA_2?e.lam=-o-D:e.lam=o<0?-o-At:-o+At;else{var f,p,g;f=u,l=f*f,l>=1?g=0:g=Math.sqrt(1-l)*Math.sin(o),l+=g*g,l>=1?p=0:p=Math.sqrt(1-l),h.value===mt.AREA_1?(l=p,p=-g,g=l):h.value===mt.AREA_2?(p=-p,g=-g):h.value===mt.AREA_3&&(l=p,p=g,g=-l),this.face===wt.RIGHT?(l=f,f=-p,p=l):this.face===wt.BACK?(f=-f,p=-p):this.face===wt.LEFT&&(l=f,f=p,p=-l),e.phi=Math.acos(-g)-D,e.lam=Math.atan2(p,f),this.face===wt.RIGHT?e.lam=Br(e.lam,-D):this.face===wt.BACK?e.lam=Br(e.lam,-At):this.face===wt.LEFT&&(e.lam=Br(e.lam,+D))}if(this.es!==0){var v,y,S;v=e.phi<0?1:0,y=Math.tan(e.phi),S=this.b/Math.sqrt(y*y+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),v&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function vs(t,e,r,n){var s;return t<$?(n.value=mt.AREA_0,s=0):(s=Math.atan2(e,r),Math.abs(s)<=pt?n.value=mt.AREA_0:s>pt&&s<=D+pt?(n.value=mt.AREA_1,s-=D):s>D+pt||s<=-(D+pt)?(n.value=mt.AREA_2,s=s>=0?s-At:s+At):(n.value=mt.AREA_3,s+=D)),s}function Br(t,e){var r=t+e;return r<-At?r+=Gn:r>+At&&(r-=Gn),r}var Y4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Q4={init:X4,forward:J4,inverse:K4,names:Y4};var la=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Sn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],gh=.8487,yh=1.3523,_h=Ht/5,Z4=1/_h,Gr=18,Qs=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},tE=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function eE(t,e,r,n){for(var s=e;n;--n){var i=t(s);if(s-=i,Math.abs(i)<r)break}return s}function rE(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function nE(t){var e=z(t.x-this.long0,this.over),r=Math.abs(t.y),n=Math.floor(r*_h);n<0?n=0:n>=Gr&&(n=Gr-1),r=Ht*(r-Z4*n);var s={x:Qs(la[n],r)*e,y:Qs(Sn[n],r)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*gh+this.x0,s.y=s.y*this.a*yh+this.y0,s}function sE(t){var e={x:(t.x-this.x0)/(this.a*gh),y:Math.abs(t.y-this.y0)/(this.a*yh)};if(e.y>=1)e.x/=la[Gr][0],e.y=t.y<0?-D:D;else{var r=Math.floor(e.y*Gr);for(r<0?r=0:r>=Gr&&(r=Gr-1);;)if(Sn[r][0]>e.y)--r;else if(Sn[r+1][0]<=e.y)++r;else break;var n=Sn[r],s=5*(e.y-n[0])/(Sn[r+1][0]-n[0]);s=eE(function(i){return(Qs(n,i)-e.y)/tE(n,i)},s,$,100),e.x/=Qs(la[r],s),e.y=(5*r+s)*xt,t.y<0&&(e.y=-e.y)}return e.x=z(e.x+this.long0,this.over),e}var iE=["Robinson","robin"];const aE={init:rE,forward:nE,inverse:sE,names:iE};function oE(){this.name="geocent"}function uE(t){var e=ih(t,this.es,this.a);return e}function cE(t){var e=ah(t,this.es,this.a,this.b);return e}var lE=["Geocentric","geocentric","geocent","Geocent"];const hE={init:oE,forward:uE,inverse:cE,names:lE};var Lt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},gn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function fE(){if(Object.keys(gn).forEach((function(r){if(typeof this[r]>"u")this[r]=gn[r].def;else{if(gn[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);gn[r].num&&(this[r]=parseFloat(this[r]))}gn[r].degrees&&(this[r]=this[r]*xt)}).bind(this)),Math.abs(Math.abs(this.lat0)-D)<$?this.mode=this.lat0<0?Lt.S_POLE:Lt.N_POLE:Math.abs(this.lat0)<$?this.mode=Lt.EQUIT:(this.mode=Lt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function dE(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),s,i;switch(this.mode){case Lt.OBLIQ:i=this.sinph0*e+this.cosph0*r*n;break;case Lt.EQUIT:i=r*n;break;case Lt.S_POLE:i=-e;break;case Lt.N_POLE:i=e;break}switch(i=this.pn1/(this.p-i),s=i*r*Math.sin(t.x),this.mode){case Lt.OBLIQ:i*=this.cosph0*e-this.sinph0*r*n;break;case Lt.EQUIT:i*=e;break;case Lt.N_POLE:i*=-(r*n);break;case Lt.S_POLE:i*=r*n;break}var a,o;return a=i*this.cg+s*this.sg,o=1/(a*this.sw*this.h1+this.cw),s=(s*this.cg-i*this.sg)*this.cw*o,i=a*o,t.x=s*this.a,t.y=i*this.a,t}function pE(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,n,s;s=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*s,n=this.pn1*t.y*this.cw*s,t.x=r*this.cg+n*this.sg,t.y=n*this.cg-r*this.sg;var i=Ut(t.x,t.y);if(Math.abs(i)<$)e.x=0,e.y=t.y;else{var a,o;switch(o=1-i*i*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Lt.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*o*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(e.y))*i,t.x*=o*this.cosph0;break;case Lt.EQUIT:e.y=Math.asin(t.y*o/i),t.y=a*i,t.x*=o;break;case Lt.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case Lt.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var mE=["Tilted_Perspective","tpers"];const gE={init:fE,forward:dE,inverse:pE,names:mE};function yE(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function _E(t){var e=t.x,r=t.y,n,s,i,a;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var o=this.radius_p/Ut(this.radius_p*Math.cos(r),Math.sin(r));if(s=o*Math.cos(e)*Math.cos(r),i=o*Math.sin(e)*Math.cos(r),a=o*Math.sin(r),(this.radius_g-s)*s-i*i-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ut(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(i/n),t.y=this.radius_g_1*Math.atan(a/Ut(i,n)))}else this.shape==="sphere"&&(n=Math.cos(r),s=Math.cos(e)*n,i=Math.sin(e)*n,a=Math.sin(r),n=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/Ut(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(i/n),t.y=this.radius_g_1*Math.atan(a/Ut(i,n))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function vE(t){var e=-1,r=0,n=0,s,i,a,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Ut(1,n)):(r=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Ut(1,r));var u=n/this.radius_p;if(s=r*r+u*u+e*e,i=2*this.radius_g*e,a=i*i-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-i-Math.sqrt(a))/(2*s),e=this.radius_g+o*e,r*=o,n*=o,t.x=Math.atan2(r,e),t.y=Math.atan(n*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)):(r=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),s=r*r+n*n+e*e,i=2*this.radius_g*e,a=i*i-4*s*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-i-Math.sqrt(a))/(2*s),e=this.radius_g+o*e,r*=o,n*=o,t.x=Math.atan2(r,e),t.y=Math.atan(n*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var EE=["Geostationary Satellite View","Geostationary_Satellite","geos"];const bE={init:yE,forward:_E,inverse:vE,names:EE};var An=1.340264,Pn=-.081106,Cn=893e-6,Tn=.003796,Zs=Math.sqrt(3)/2;function SE(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function wE(t){var e=z(t.x-this.long0,this.over),r=t.y,n=Math.asin(Zs*Math.sin(r)),s=n*n,i=s*s*s;return t.x=e*Math.cos(n)/(Zs*(An+3*Pn*s+i*(7*Cn+9*Tn*s))),t.y=n*(An+Pn*s+i*(Cn+Tn*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function xE(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,r=12,n=t.y,s,i,a,o,u,c;for(c=0;c<r&&(s=n*n,i=s*s*s,a=n*(An+Pn*s+i*(Cn+Tn*s))-t.y,o=An+3*Pn*s+i*(7*Cn+9*Tn*s),n-=u=a/o,!(Math.abs(u)<e));++c);return s=n*n,i=s*s*s,t.x=Zs*t.x*(An+3*Pn*s+i*(7*Cn+9*Tn*s))/Math.cos(n),t.y=Math.asin(Math.sin(n)/Zs),t.x=z(t.x+this.long0,this.over),t}var ME=["eqearth","Equal Earth","Equal_Earth"];const AE={init:SE,forward:wE,inverse:xE,names:ME};var Bn=1e-10;function PE(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Bn)throw new Error;this.es?(this.en=Ha(this.es),this.m1=on(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=TE,this.forward=CE):(Math.abs(this.phi1)+Bn>=D?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=NE,this.forward=DE)}function CE(t){var e=z(t.x-(this.long0||0),this.over),r=t.y,n,s,i;return n=this.am1+this.m1-on(r,s=Math.sin(r),i=Math.cos(r),this.en),s=i*e/(n*Math.sqrt(1-this.es*s*s)),t.x=n*Math.sin(s),t.y=this.am1-n*Math.cos(s),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function TE(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,n,s;if(r=Ut(t.x,t.y=this.am1-t.y),s=za(this.am1+this.m1-r,this.es,this.en),(e=Math.abs(s))<D)e=Math.sin(s),n=r*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else if(Math.abs(e-D)<=Bn)n=0;else throw new Error;return t.x=z(n+(this.long0||0),this.over),t.y=Ke(s),t}function DE(t){var e=z(t.x-(this.long0||0),this.over),r=t.y,n,s;return s=this.cphi1+this.phi1-r,Math.abs(s)>Bn?(t.x=s*Math.sin(n=e*Math.cos(r)/s),t.y=this.cphi1-s*Math.cos(n)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function NE(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,r,n=Ut(t.x,t.y=this.cphi1-t.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>D)throw new Error;return Math.abs(Math.abs(r)-D)<=Bn?e=0:e=n*Math.atan2(t.x,t.y)/Math.cos(r),t.x=z(e+(this.long0||0),this.over),t.y=Ke(r),t}var IE=["bonne","Bonne (Werner lat_1=90)"];const kE={init:PE,names:IE},qu={OBLIQUE:{forward:FE,inverse:jE},TRANSVERSE:{forward:BE,inverse:$E}},ti={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function RE(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=eh.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=ee(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let r;const n=Object.keys(ti),s=o=>{if(typeof this[o]>"u")return;const u=parseFloat(this[o])*xt;if(isNaN(u))throw new Error("Invalid value for "+o+": "+this[o]);return u};for(let o=0;o<n.length;o++){const u=n[o],c=ti[u],l=Object.entries(c);if(l.some(([f])=>typeof this[f]<"u")){r=c;for(let f=0;f<l.length;f++){const[p,g]=l[f],v=s(p);if(typeof v>"u")throw new Error("Missing parameter: "+p+".");this[g]=v}break}}if(!r)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:i,phip:a}=OE(this,r);this.lamp=i,Math.abs(a)>$?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=qu.OBLIQUE):this.projectionType=qu.TRANSVERSE}function LE(t){return this.projectionType.forward(this,t)}function GE(t){return this.projectionType.inverse(this,t)}function OE(t,e){let r,n;if(e===ti.ROTATE){let s=t.oLongC,i=t.oLatC,a=t.oAlpha;if(Math.abs(Math.abs(i)-D)<=$)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");n=s+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(i)),r=Math.asin(Math.cos(i)*Math.sin(a))}else if(e===ti.NEW_POLE)n=t.oLongP,r=t.oLatP;else{let s=t.oLong1,i=t.oLat1,a=t.oLong2,o=t.oLat2,u=Math.abs(i);if(Math.abs(i)>D-$)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(o)>D-$)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(i-o)<$)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(u<$)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan2(Math.cos(i)*Math.sin(o)*Math.cos(s)-Math.sin(i)*Math.cos(o)*Math.cos(a),Math.sin(i)*Math.cos(o)*Math.sin(a)-Math.cos(i)*Math.sin(o)*Math.sin(s)),r=Math.atan(-1*Math.cos(n-s)/Math.tan(i))}return{lamp:n,phip:r}}function FE(t,e){let{x:r,y:n}=e;r+=t.long0;const s=Math.cos(r),i=Math.sin(n),a=Math.cos(n);e.x=z(Math.atan2(a*Math.sin(r),t.sphip*a*s+t.cphip*i)+t.lamp),e.y=Math.asin(t.sphip*i-t.cphip*a*s);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Ht,o.y*=Ht),o}function BE(t,e){let{x:r,y:n}=e;r+=t.long0;const s=Math.cos(n),i=Math.cos(r);e.x=z(Math.atan2(s*Math.sin(r),Math.sin(n))+t.lamp),e.y=Math.asin(-1*s*i);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=Ht,a.y*=Ht),a}function jE(t,e){t.isIdentity&&(e.x*=xt,e.y*=xt);const r=t.obliqueProjection.inverse(e);let{x:n,y:s}=r;if(n<Number.MAX_VALUE){n-=t.lamp;const i=Math.cos(n),a=Math.sin(s),o=Math.cos(s);e.x=Math.atan2(o*Math.sin(n),t.sphip*o*i-t.cphip*a),e.y=Math.asin(t.sphip*a+t.cphip*o*i)}return e.x=z(e.x+t.long0),e}function $E(t,e){t.isIdentity&&(e.x*=xt,e.y*=xt);const r=t.obliqueProjection.inverse(e);let{x:n,y:s}=r;if(n<Number.MAX_VALUE){const i=Math.cos(s);n-=t.lamp,e.x=Math.atan2(i*Math.sin(n),-1*Math.sin(s)),e.y=Math.asin(i*Math.cos(n))}return e.x=z(e.x+t.long0),e}var qE=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const UE={init:RE,forward:LE,inverse:GE,names:qE};function HE(t){t.Proj.projections.add(Rs),t.Proj.projections.add(Ls),t.Proj.projections.add(I_),t.Proj.projections.add($_),t.Proj.projections.add(W_),t.Proj.projections.add(Y_),t.Proj.projections.add(nv),t.Proj.projections.add(uv),t.Proj.projections.add(dv),t.Proj.projections.add(_v),t.Proj.projections.add(Nv),t.Proj.projections.add(Ov),t.Proj.projections.add(qv),t.Proj.projections.add(Xv),t.Proj.projections.add(Zv),t.Proj.projections.add(s4),t.Proj.projections.add(c4),t.Proj.projections.add(p4),t.Proj.projections.add(E4),t.Proj.projections.add(M4),t.Proj.projections.add(D4),t.Proj.projections.add(L4),t.Proj.projections.add(q4),t.Proj.projections.add(V4),t.Proj.projections.add(Q4),t.Proj.projections.add(aE),t.Proj.projections.add(hE),t.Proj.projections.add(gE),t.Proj.projections.add(bE),t.Proj.projections.add(AE),t.Proj.projections.add(kE),t.Proj.projections.add(UE)}const Ne=Object.assign(Jy,{defaultDatum:"WGS84",Proj:ee,WGS84:new ee("WGS84"),Point:Vr,toPoint:oh,defs:It,nadgrid:Ny,transform:Ks,mgrs:Ky,version:"__VERSION__"});HE(Ne);Ne.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");Ne.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs");Ne.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs");const vh={"EPSG:4326":"WGS84 (lon/lat)","EPSG:3857":"Web Mercator","EPSG:27700":"British National Grid"};function ir(t,e,r){if(e===r)return t;const n=t[0]??0,s=t[1]??0,i=t[2],a=Ne(e,r,[n,s]),o=a[0]??0,u=a[1]??0;return i!==void 0?[o,u,i]:[o,u]}function We(t,e,r){if(e===r)return t;switch(t.type){case"Point":return{type:"Point",coordinates:ir(t.coordinates,e,r)};case"MultiPoint":return{type:"MultiPoint",coordinates:t.coordinates.map(n=>ir(n,e,r))};case"LineString":return{type:"LineString",coordinates:t.coordinates.map(n=>ir(n,e,r))};case"MultiLineString":return{type:"MultiLineString",coordinates:t.coordinates.map(n=>n.map(s=>ir(s,e,r)))};case"Polygon":return{type:"Polygon",coordinates:t.coordinates.map(n=>n.map(s=>ir(s,e,r)))};case"MultiPolygon":return{type:"MultiPolygon",coordinates:t.coordinates.map(n=>n.map(s=>s.map(i=>ir(i,e,r))))};case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(n=>We(n,e,r))};default:return t}}function Eh(t){const e=t[0],r=t[1];return e===void 0||r===void 0?!1:e>=-180&&e<=180&&r>=-90&&r<=90}function bh(t){for(const e of t)if(!Eh(e))return{valid:!1,invalidCoord:e};return{valid:!0}}const Di={WGS84_MAX:180,BNG_MAX:13e5,WEB_MERCATOR_MAX:2003750834e-2};function as(t){if(t.length===0)return"EPSG:4326";let e=0;for(const r of t){const n=r[0],s=r[1];n!==void 0&&(e=Math.max(e,Math.abs(n))),s!==void 0&&(e=Math.max(e,Math.abs(s)))}return e<=Di.WGS84_MAX?"EPSG:4326":e<=Di.BNG_MAX?"EPSG:27700":e<=Di.WEB_MERCATOR_MAX?"EPSG:3857":"EPSG:4326"}const zE=Object.freeze(Object.defineProperty({__proto__:null,detectProjectionFromCoordinates:as,isValidWGS84Coordinate:Eh,proj4:Ne,projectionLabels:vh,transformCoordinate:ir,transformGeometry:We,validateWGS84Coordinates:bh},Symbol.toStringTag,{value:"Module"})),WE={geojson:"GeoJSON",wkt:"WKT",ewkt:"EWKT",csv:"CSV",kml:"KML",gpx:"GPX",polyline5:"Polyline5",polyline6:"Polyline6",shapefile:"Shapefile"};function VE({error:t}){const[e,r]=F.useState(!1),n=F.useCallback(()=>{r(a=>!a)},[]),s=F.useCallback(()=>{r(!0)},[]),i=F.useCallback(()=>{r(!1)},[]);return b.jsxs("span",{className:"relative inline-flex items-center",children:[b.jsx("button",{type:"button",onClick:n,onMouseEnter:s,onMouseLeave:i,className:"inline-flex items-center","aria-label":"Show error details",children:b.jsx(p1,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),e&&b.jsx("div",{className:"absolute left-0 top-full z-50 mt-1 max-w-xs whitespace-normal rounded-md border border-red-200 bg-red-50 p-2 text-xs text-red-700 shadow-lg dark:border-red-800 dark:bg-red-950 dark:text-red-300",children:t})]})}function XE(){const{inputFormat:t,inputProjection:e,detectedFormat:r,detectedProjection:n,parseError:s,coordinateError:i,isParsing:a,features:o,rawText:u}=le(),c=t==="auto",l=e==="auto",h=s||i,f=u.trim().length>0,p=o.length>0;if(a)return b.jsx("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:b.jsx(b1,{className:"h-3 w-3 animate-spin"})});if(!f)return null;const g=r?WE[r]:null,v=n?vh[n]:null,y=!h&&p,S=s||i;return b.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[y&&b.jsx(f1,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),S&&b.jsx(VE,{error:S}),c&&g&&b.jsx("span",{className:"rounded bg-neutral-100 px-1.5 py-0.5 text-xs font-medium text-neutral-600 dark:bg-neutral-700 dark:text-neutral-300",children:g}),l&&v&&b.jsx("span",{className:"rounded bg-neutral-100 px-1.5 py-0.5 text-xs font-medium text-neutral-600 dark:bg-neutral-700 dark:text-neutral-300",children:v})]})}const JE=[".json",".geojson",".wkt",".csv",".kml",".gpx",".txt"];function KE(){const{rawText:t,inputFormat:e,inputProjection:r,detectedFormat:n,detectedProjection:s,setRawText:i,setInputFormat:a,setInputProjection:o}=le(),u=F.useCallback((h,f)=>{i(h)},[i]),c=F.useCallback(()=>{i("")},[i]),l=F.useCallback(async()=>{await navigator.clipboard.writeText(window.location.href)},[]);return b.jsxs("div",{className:"border-b border-neutral-200 p-3 md:p-4 dark:border-neutral-700",children:[b.jsxs("div",{className:"mb-2 flex items-center gap-2 md:mb-3",children:[b.jsx("h2",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Input Geometry"}),b.jsx(XE,{}),b.jsxs("div",{className:"ml-auto flex gap-1",children:[t&&b.jsx("button",{onClick:l,className:"rounded p-1 text-neutral-400 transition-colors hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300",title:"Copy link to clipboard","aria-label":"Copy shareable link to clipboard",children:b.jsx(E1,{className:"h-4 w-4"})}),t&&b.jsx("button",{onClick:c,className:"rounded p-1 text-neutral-400 transition-colors hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300",title:"Clear input","aria-label":"Clear input",children:b.jsx(T1,{className:"h-4 w-4"})})]})]}),b.jsxs("div",{className:"mb-2 flex gap-2 md:mb-3",children:[b.jsx(G1,{value:e,onChange:a,detectedValue:n,label:"Format"}),b.jsx(O1,{value:r,onChange:o,detectedValue:s,label:"Projection"})]}),b.jsx(R1,{onFileDrop:u,accept:JE,children:b.jsx(L1,{value:t,onChange:i,placeholder:"Paste or drop GeoJSON, WKT, CSV, KML, GPX..."})})]})}const os=ts(t=>({outputFormat:"geojson",outputProjection:"EPSG:4326",setOutputFormat:e=>{t({outputFormat:e})},setOutputProjection:e=>{t({outputProjection:e})}})),Sh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection"];function YE(t){const e=[];if(!t||typeof t!="object")return e.push("GeoJSON must be an object"),e;const r=t;return r.type?typeof r.type!="string"?(e.push('"type" must be a string'),e):Sh.includes(r.type)?(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"].includes(r.type)&&("coordinates"in r||e.push(`${r.type} must have "coordinates" property`)),r.type==="Feature"&&("geometry"in r||e.push('Feature must have "geometry" property')),r.type==="FeatureCollection"&&(Array.isArray(r.features)||e.push('FeatureCollection must have "features" array')),r.type==="GeometryCollection"&&(Array.isArray(r.geometries)||e.push('GeometryCollection must have "geometries" array')),e):(e.push(`Invalid GeoJSON type: "${r.type}"`),e):(e.push('GeoJSON must have a "type" property'),e)}function wh(t){const e=[];let r=0,n=-1;for(let s=0;s<t.length;s++){const i=t[s];i==="{"?(r===0&&(n=s),r++):i==="}"&&(r--,r===0&&n!==-1&&(e.push(t.slice(n,s+1)),n=-1))}return e}function QE(t){let e;try{e=JSON.parse(t)}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Invalid JSON"}]}}const r=YE(e);return r.length>0?{features:[],errors:r.map(n=>({message:n}))}:{features:t3(e),errors:[]}}function ZE(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"geojson"};const r=wh(e);if(r.length===0)return{features:[],errors:[{message:"No valid JSON objects found"}]};const n=[],s=[];for(let i=0;i<r.length;i++){const a=r[i];if(!a)continue;const o=QE(a);if(o.errors.length>0){const u=r.length>1?`Object ${String(i+1)}: `:"";s.push(...o.errors.map(c=>({...c,message:u+c.message})))}else n.push(...o.features)}return n.length>0?{features:e3(n),errors:s,detectedFormat:"geojson"}:{features:[],errors:s.length>0?s:[{message:"No features found in GeoJSON"}]}}function t3(t){switch(t.type){case"FeatureCollection":return t.features;case"Feature":return[t];case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":return[{type:"Feature",geometry:t,properties:{}}];default:return[]}}function e3(t){return t.map((e,r)=>{var n;return{...e,id:((n=e.id)==null?void 0:n.toString())??`feature-${String(r)}`,properties:e.properties??{}}})}function r3(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function n3(t){const e=t.trim();if(!e.startsWith("{"))return!1;const r=wh(e);if(r.length===0)return!1;try{const n=r[0];if(!n)return!1;const s=JSON.parse(n);return typeof s.type=="string"&&Sh.includes(s.type)}catch{return!1}}const xh={name:"geojson",parse:ZE,format:r3,detect:n3};var yn={exports:{}},Uu;function s3(){if(Uu)return yn.exports;Uu=1,yn.exports=r,yn.exports.parse=r,yn.exports.stringify=n;var t=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,e=new RegExp("^"+t.source+"(\\s"+t.source+"){1,}");function r(s){var i=s.split(";"),a=i.pop(),o=(i.shift()||"").split("=").pop(),u=0;function c(C){var x=a.substring(u).match(C);return x?(u+=x[0].length,x[0]):null}function l(C){return C&&o.match(/\d+/)&&(C.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+o}}),C}function h(){c(/^\s*/)}function f(){h();for(var C=0,x=[],G=[x],E=x,w;w=c(/^(\()/)||c(/^(\))/)||c(/^(,)/)||c(e);){if(w==="(")G.push(E),E=[],G[G.length-1].push(E),C++;else if(w===")"){if(E.length===0||(E=G.pop(),!E))return null;if(C--,C===0)break}else if(w===",")E=[],G[G.length-1].push(E);else if(!w.split(/\s/g).some(isNaN))Array.prototype.push.apply(E,w.split(/\s/g).map(parseFloat));else return null;h()}return C!==0?null:x}function p(){for(var C=[],x,G;G=c(e)||c(/^(,)/);)G===","?(C.push(x),x=[]):G.split(/\s/g).some(isNaN)||(x||(x=[]),Array.prototype.push.apply(x,G.split(/\s/g).map(parseFloat))),h();if(x)C.push(x);else return null;return C.length?C:null}function g(){if(!c(/^(point(\sz)?)/i)||(h(),!c(/^(\()/)))return null;var C=p();return!C||(h(),!c(/^(\))/))?null:{type:"Point",coordinates:C[0]}}function v(){if(!c(/^(multipoint)/i))return null;h();var C=a.substring(a.indexOf("(")+1,a.length-1).replace(/\(/g,"").replace(/\)/g,"");a="MULTIPOINT ("+C+")";var x=f();return x?(h(),{type:"MultiPoint",coordinates:x}):null}function y(){if(!c(/^(multilinestring)/i))return null;h();var C=f();return C?(h(),{type:"MultiLineString",coordinates:C}):null}function S(){if(!c(/^(linestring(\sz)?)/i)||(h(),!c(/^(\()/)))return null;var C=p();return!C||!c(/^(\))/)?null:{type:"LineString",coordinates:C}}function A(){if(!c(/^(polygon(\sz)?)/i))return null;h();var C=f();return C?{type:"Polygon",coordinates:C}:null}function P(){if(!c(/^(multipolygon)/i))return null;h();var C=f();return C?{type:"MultiPolygon",coordinates:C}:null}function k(){var C=[],x;if(!c(/^(geometrycollection)/i)||(h(),!c(/^(\()/)))return null;for(;x=R();)C.push(x),h(),c(/^(,)/),h();return c(/^(\))/)?{type:"GeometryCollection",geometries:C}:null}function R(){return g()||S()||A()||v()||y()||P()||k()}return l(R())}function n(s){s.type==="Feature"&&(s=s.geometry);function i(l){return l.join(" ")}function a(l){return l.map(i).join(", ")}function o(l){return l.map(a).map(c).join(", ")}function u(l){return l.map(o).map(c).join(", ")}function c(l){return"("+l+")"}switch(s.type){case"Point":return"POINT ("+i(s.coordinates)+")";case"LineString":return"LINESTRING ("+a(s.coordinates)+")";case"Polygon":return"POLYGON ("+o(s.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+a(s.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+u(s.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+o(s.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+s.geometries.map(n).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return yn.exports}var Mh=s3();function Ah(t){var i;const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"wkt"};const r=e.split(/\n\s*\n/).filter(a=>a.trim()),n=[],s=[];for(let a=0;a<r.length;a++){const o=(i=r[a])==null?void 0:i.trim();if(o)try{const u=Mh.parse(o);u?n.push({type:"Feature",id:`feature-${String(a)}`,geometry:u,properties:{}}):s.push({message:`Failed to parse WKT at block ${String(a+1)}`})}catch(u){s.push({message:u instanceof Error?u.message:`Invalid WKT at block ${String(a+1)}`})}}return{features:n,errors:s,detectedFormat:"wkt"}}function i3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"ewkt"};let r,n=e;const s=/^SRID=(\d+);/i.exec(e);if(s){const a=parseInt(s[1]??"0",10);switch(n=e.slice(s[0].length),a){case 4326:r="EPSG:4326";break;case 3857:r="EPSG:3857";break;case 27700:r="EPSG:27700";break}}return{...Ah(n),detectedFormat:"ewkt",detectedProjection:r}}function Ph(t){return t.map(e=>Mh.stringify(e.geometry)).filter(Boolean).join(`

`)}function a3(t,e=4326){const r=Ph(t);return r?r.split(`

`).map(n=>`SRID=${String(e)};${n}`).join(`

`):""}function o3(t){const e=t.trim().toUpperCase();return["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GEOMETRYCOLLECTION"].some(n=>e.startsWith(n))}function u3(t){return/^SRID=\d+;/i.test(t.trim())}const Ch={name:"wkt",parse:Ah,format:Ph,detect:o3},Th={name:"ewkt",parse:i3,format:(t,e)=>{const r={"EPSG:4326":4326,"EPSG:3857":3857,"EPSG:27700":27700},n=e!=null&&e.projection?r[e.projection]??4326:4326;return a3(t,n)},detect:u3};function c3(t){return t.trim().replace(/(?:\r\n|\r|\n)/g," ").replace(/\s+/g," ")}function l3(t){const e=c3(t);if(!e)return[];const r=e.split(/[#&\\:/|;,\s]/),n=[];for(const s of r){if(!s)continue;const i=Number(s);if(Number.isNaN(i))throw new Error(`Invalid number: ${s}`);n.push(i)}return n}function h3(t){const e=t.trim();if(!e)return[];const r=e.split(/[#&\\:/|;,\t ]+/),n=[];for(const s of r){if(!s)continue;const i=Number(s);if(Number.isNaN(i))throw new Error(`Invalid number: ${s}`);n.push(i)}return n}function f3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"csv"};try{const r=e.split(/\r?\n/).filter(s=>s.trim()),n=[];for(let s=0;s<r.length;s++){const i=r[s];if(!i)continue;const a=h3(i);if(a.length===0)continue;if(a.length%2!==0)return{features:[],errors:[{message:`Line ${String(s+1)}: Odd number of coordinates - expected pairs of x,y (lon,lat)`}]};const o=[];for(let c=0;c<a.length;c+=2){const l=a[c]??0,h=a[c+1]??0;o.push([l,h])}const u=d3(o,s);n.push(u)}return n.length===0?{features:[],errors:[{message:"No coordinates found in input"}]}:{features:n,errors:[],detectedFormat:"csv"}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse CSV"}]}}}function d3(t,e){const r=`feature-${String(e)}`;if(t.length===1){const o=t[0];if(!o)throw new Error("Expected coordinate at index 0");return{type:"Feature",id:r,geometry:{type:"Point",coordinates:o},properties:{index:e}}}const n=t[0],s=t[t.length-1];return n&&s&&n[0]===s[0]&&n[1]===s[1]&&t.length>3?{type:"Feature",id:r,geometry:{type:"Polygon",coordinates:[t]},properties:{index:e}}:{type:"Feature",id:r,geometry:{type:"LineString",coordinates:t},properties:{index:e}}}function p3(t){const e=[];for(const r of t){const n=Dh(r.geometry);if(n.length>0){const s=n.map(([i,a])=>`${String(i)},${String(a)}`).join(",");e.push(s)}}return e.join(`
`)}function Dh(t){switch(t.type){case"Point":return[[t.coordinates[0]??0,t.coordinates[1]??0]];case"MultiPoint":case"LineString":return t.coordinates.map(e=>[e[0]??0,e[1]??0]);case"MultiLineString":case"Polygon":return t.coordinates.flat().map(e=>[e[0]??0,e[1]??0]);case"MultiPolygon":return t.coordinates.flat(2).map(e=>[e[0]??0,e[1]??0]);case"GeometryCollection":return t.geometries.flatMap(e=>Dh(e));default:return[]}}function m3(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("[")||e.toUpperCase().startsWith("POINT")||e.toUpperCase().startsWith("LINESTRING")||e.toUpperCase().startsWith("POLYGON")||e.toUpperCase().startsWith("SRID=")||e.startsWith("<"))return!1;try{const r=l3(e);return r.length>=2&&r.length%2===0}catch{return!1}}const Nh={name:"csv",parse:f3,format:p3,detect:m3};function Hu(t,e=5){const r=Math.pow(10,e),n=[];let s=0,i=0,a=0;for(;s<t.length;){let o=0,u=0,c;do c=t.charCodeAt(s++)-63,u|=(c&31)<<o,o+=5;while(c>=32);i+=(u&1)!==0?~(u>>1):u>>1,o=0,u=0;do c=t.charCodeAt(s++)-63,u|=(c&31)<<o,o+=5;while(c>=32);a+=(u&1)!==0?~(u>>1):u>>1,n.push([a/r,i/r])}return n}function g3(t,e=5){const r=Math.pow(10,e);let n="",s=0,i=0;for(const a of t){const o=a[0]??0,u=a[1]??0,c=Math.round(u*r),l=Math.round(o*r);n+=zu(c-s),n+=zu(l-i),s=c,i=l}return n}function zu(t){let e="",r=t<0?~(t<<1):t<<1;for(;r>=32;)e+=String.fromCharCode((32|r&31)+63),r>>=5;return e+=String.fromCharCode(r+63),e}function Ih(t){const e=`polyline${String(t)}`;function r(i){const a=i.trim();if(!a)return{features:[],errors:[],detectedFormat:e};try{const o=Hu(a,t);return o.length===0?{features:[],errors:[{message:"No coordinates decoded from polyline"}]}:{features:[{type:"Feature",id:"feature-0",geometry:{type:"LineString",coordinates:o},properties:{pointCount:o.length}}],errors:[],detectedFormat:e,detectedProjection:"EPSG:4326"}}catch(o){return{features:[],errors:[{message:o instanceof Error?o.message:"Failed to decode polyline"}]}}}function n(i){const a=[];for(const o of i){const u=kh(o.geometry);a.push(...u)}return a.length===0?"":g3(a,t)}function s(i){const a=i.trim();if(a.startsWith("{")||a.startsWith("[")||a.startsWith("<")||/[\s,;:]/.test(a)||!/^[?-~]+$/.test(a))return!1;try{const o=Hu(a,t);if(o.length<2)return!1;for(const[u,c]of o)if(c===void 0||u===void 0||c<-90||c>90||u<-180||u>180)return!1;return!0}catch{return!1}}return{name:e,parse:r,format:n,detect:s}}function kh(t){switch(t.type){case"Point":return[t.coordinates];case"MultiPoint":case"LineString":return t.coordinates;case"MultiLineString":case"Polygon":return t.coordinates.flat();case"MultiPolygon":return t.coordinates.flat(2);case"GeometryCollection":return t.geometries.flatMap(e=>kh(e));default:return[]}}const Rh=Ih(5),Lh=Ih(6);var Ni={exports:{}},_n={},Ee={},nr={},Wu;function li(){if(Wu)return nr;Wu=1;function t(i,a,o){if(o===void 0&&(o=Array.prototype),i&&typeof o.find=="function")return o.find.call(i,a);for(var u=0;u<i.length;u++)if(Object.prototype.hasOwnProperty.call(i,u)){var c=i[u];if(a.call(void 0,c,u,i))return c}}function e(i,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(i):i}function r(i,a){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o]);return i}var n=e({HTML:"text/html",isHTML:function(i){return i===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return nr.assign=r,nr.find=t,nr.freeze=e,nr.MIME_TYPE=n,nr.NAMESPACE=s,nr}var Vu;function Gh(){if(Vu)return Ee;Vu=1;var t=li(),e=t.find,r=t.NAMESPACE;function n(d){return d!==""}function s(d){return d?d.split(/[\t\n\f\r ]+/).filter(n):[]}function i(d,m){return d.hasOwnProperty(m)||(d[m]=!0),d}function a(d){if(!d)return[];var m=s(d);return Object.keys(m.reduce(i,{}))}function o(d){return function(m){return d&&d.indexOf(m)!==-1}}function u(d,m){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(m[_]=d[_])}function c(d,m){var _=d.prototype;if(!(_ instanceof m)){let M=function(){};M.prototype=m.prototype,M=new M,u(_,M),d.prototype=_=M}_.constructor!=d&&(typeof d!="function"&&console.error("unknown Class:"+d),_.constructor=d)}var l={},h=l.ELEMENT_NODE=1,f=l.ATTRIBUTE_NODE=2,p=l.TEXT_NODE=3,g=l.CDATA_SECTION_NODE=4,v=l.ENTITY_REFERENCE_NODE=5,y=l.ENTITY_NODE=6,S=l.PROCESSING_INSTRUCTION_NODE=7,A=l.COMMENT_NODE=8,P=l.DOCUMENT_NODE=9,k=l.DOCUMENT_TYPE_NODE=10,R=l.DOCUMENT_FRAGMENT_NODE=11,C=l.NOTATION_NODE=12,x={},G={};x.INDEX_SIZE_ERR=(G[1]="Index size error",1),x.DOMSTRING_SIZE_ERR=(G[2]="DOMString size error",2);var E=x.HIERARCHY_REQUEST_ERR=(G[3]="Hierarchy request error",3);x.WRONG_DOCUMENT_ERR=(G[4]="Wrong document",4),x.INVALID_CHARACTER_ERR=(G[5]="Invalid character",5),x.NO_DATA_ALLOWED_ERR=(G[6]="No data allowed",6),x.NO_MODIFICATION_ALLOWED_ERR=(G[7]="No modification allowed",7);var w=x.NOT_FOUND_ERR=(G[8]="Not found",8);x.NOT_SUPPORTED_ERR=(G[9]="Not supported",9);var T=x.INUSE_ATTRIBUTE_ERR=(G[10]="Attribute in use",10);x.INVALID_STATE_ERR=(G[11]="Invalid state",11),x.SYNTAX_ERR=(G[12]="Syntax error",12),x.INVALID_MODIFICATION_ERR=(G[13]="Invalid modification",13),x.NAMESPACE_ERR=(G[14]="Invalid namespace",14),x.INVALID_ACCESS_ERR=(G[15]="Invalid access",15);function I(d,m){if(m instanceof Error)var _=m;else _=this,Error.call(this,G[d]),this.message=G[d],Error.captureStackTrace&&Error.captureStackTrace(this,I);return _.code=d,m&&(this.message=this.message+": "+m),_}I.prototype=Error.prototype,u(x,I);function O(){}O.prototype={length:0,item:function(d){return d>=0&&d<this.length?this[d]:null},toString:function(d,m){for(var _=[],M=0;M<this.length;M++)ye(this[M],_,d,m);return _.join("")},filter:function(d){return Array.prototype.filter.call(this,d)},indexOf:function(d){return Array.prototype.indexOf.call(this,d)}};function q(d,m){this._node=d,this._refresh=m,J(this)}function J(d){var m=d._node._inc||d._node.ownerDocument._inc;if(d._inc!==m){var _=d._refresh(d._node);if(fn(d,"length",_.length),!d.$$length||_.length<d.$$length)for(var M=_.length;M in d;M++)Object.prototype.hasOwnProperty.call(d,M)&&delete d[M];u(_,d),d._inc=m}}q.prototype.item=function(d){return J(this),this[d]||null},c(q,O);function Z(){}function W(d,m){for(var _=d.length;_--;)if(d[_]===m)return _}function N(d,m,_,M){if(M?m[W(m,M)]=_:m[m.length++]=_,d){_.ownerElement=d;var j=d.ownerDocument;j&&(M&&ht(j,d,M),V(j,d,_))}}function B(d,m,_){var M=W(m,_);if(M>=0){for(var j=m.length-1;M<j;)m[M]=m[++M];if(m.length=j,d){var nt=d.ownerDocument;nt&&(ht(nt,d,_),_.ownerElement=null)}}else throw new I(w,new Error(d.tagName+"@"+_))}Z.prototype={length:0,item:O.prototype.item,getNamedItem:function(d){for(var m=this.length;m--;){var _=this[m];if(_.nodeName==d)return _}},setNamedItem:function(d){var m=d.ownerElement;if(m&&m!=this._ownerElement)throw new I(T);var _=this.getNamedItem(d.nodeName);return N(this._ownerElement,this,d,_),_},setNamedItemNS:function(d){var m=d.ownerElement,_;if(m&&m!=this._ownerElement)throw new I(T);return _=this.getNamedItemNS(d.namespaceURI,d.localName),N(this._ownerElement,this,d,_),_},removeNamedItem:function(d){var m=this.getNamedItem(d);return B(this._ownerElement,this,m),m},removeNamedItemNS:function(d,m){var _=this.getNamedItemNS(d,m);return B(this._ownerElement,this,_),_},getNamedItemNS:function(d,m){for(var _=this.length;_--;){var M=this[_];if(M.localName==m&&M.namespaceURI==d)return M}return null}};function U(){}U.prototype={hasFeature:function(d,m){return!0},createDocument:function(d,m,_){var M=new Y;if(M.implementation=this,M.childNodes=new O,M.doctype=_||null,_&&M.appendChild(_),m){var j=M.createElementNS(d,m);M.appendChild(j)}return M},createDocumentType:function(d,m,_){var M=new Sr;return M.name=d,M.nodeName=d,M.publicId=m||"",M.systemId=_||"",M}};function L(){}L.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(d,m){return Bt(this,d,m)},replaceChild:function(d,m){Bt(this,d,m,se),m&&this.removeChild(m)},removeChild:function(d){return tt(this,d)},appendChild:function(d){return this.insertBefore(d,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(d){return Qe(this.ownerDocument||this,this,d)},normalize:function(){for(var d=this.firstChild;d;){var m=d.nextSibling;m&&m.nodeType==p&&d.nodeType==p?(this.removeChild(m),d.appendData(m.data)):(d.normalize(),d=m)}},isSupported:function(d,m){return this.ownerDocument.implementation.hasFeature(d,m)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(d){for(var m=this;m;){var _=m._nsMap;if(_){for(var M in _)if(Object.prototype.hasOwnProperty.call(_,M)&&_[M]===d)return M}m=m.nodeType==f?m.ownerDocument:m.parentNode}return null},lookupNamespaceURI:function(d){for(var m=this;m;){var _=m._nsMap;if(_&&Object.prototype.hasOwnProperty.call(_,d))return _[d];m=m.nodeType==f?m.ownerDocument:m.parentNode}return null},isDefaultNamespace:function(d){var m=this.lookupPrefix(d);return m==null}};function et(d){return d=="<"&&"&lt;"||d==">"&&"&gt;"||d=="&"&&"&amp;"||d=='"'&&"&quot;"||"&#"+d.charCodeAt()+";"}u(l,L),u(l,L.prototype);function Q(d,m){if(m(d))return!0;if(d=d.firstChild)do if(Q(d,m))return!0;while(d=d.nextSibling)}function Y(){this.ownerDocument=this}function V(d,m,_){d&&d._inc++;var M=_.namespaceURI;M===r.XMLNS&&(m._nsMap[_.prefix?_.localName:""]=_.value)}function ht(d,m,_,M){d&&d._inc++;var j=_.namespaceURI;j===r.XMLNS&&delete m._nsMap[_.prefix?_.localName:""]}function ot(d,m,_){if(d&&d._inc){d._inc++;var M=m.childNodes;if(_)M[M.length++]=_;else{for(var j=m.firstChild,nt=0;j;)M[nt++]=j,j=j.nextSibling;M.length=nt,delete M[M.length]}}}function tt(d,m){var _=m.previousSibling,M=m.nextSibling;return _?_.nextSibling=M:d.firstChild=M,M?M.previousSibling=_:d.lastChild=_,m.parentNode=null,m.previousSibling=null,m.nextSibling=null,ot(d.ownerDocument,d),m}function ct(d){return d&&(d.nodeType===L.DOCUMENT_NODE||d.nodeType===L.DOCUMENT_FRAGMENT_NODE||d.nodeType===L.ELEMENT_NODE)}function X(d){return d&&(ut(d)||it(d)||rt(d)||d.nodeType===L.DOCUMENT_FRAGMENT_NODE||d.nodeType===L.COMMENT_NODE||d.nodeType===L.PROCESSING_INSTRUCTION_NODE)}function rt(d){return d&&d.nodeType===L.DOCUMENT_TYPE_NODE}function ut(d){return d&&d.nodeType===L.ELEMENT_NODE}function it(d){return d&&d.nodeType===L.TEXT_NODE}function vt(d,m){var _=d.childNodes||[];if(e(_,ut)||rt(m))return!1;var M=e(_,rt);return!(m&&M&&_.indexOf(M)>_.indexOf(m))}function Nt(d,m){var _=d.childNodes||[];function M(nt){return ut(nt)&&nt!==m}if(e(_,M))return!1;var j=e(_,rt);return!(m&&j&&_.indexOf(j)>_.indexOf(m))}function at(d,m,_){if(!ct(d))throw new I(E,"Unexpected parent node type "+d.nodeType);if(_&&_.parentNode!==d)throw new I(w,"child not in parent");if(!X(m)||rt(m)&&d.nodeType!==L.DOCUMENT_NODE)throw new I(E,"Unexpected node type "+m.nodeType+" for parent node type "+d.nodeType)}function he(d,m,_){var M=d.childNodes||[],j=m.childNodes||[];if(m.nodeType===L.DOCUMENT_FRAGMENT_NODE){var nt=j.filter(ut);if(nt.length>1||e(j,it))throw new I(E,"More than one element or text in fragment");if(nt.length===1&&!vt(d,_))throw new I(E,"Element in fragment can not be inserted before doctype")}if(ut(m)&&!vt(d,_))throw new I(E,"Only one element can be added and only after doctype");if(rt(m)){if(e(M,rt))throw new I(E,"Only one doctype is allowed");var St=e(M,ut);if(_&&M.indexOf(St)<M.indexOf(_))throw new I(E,"Doctype can only be inserted before an element");if(!_&&St)throw new I(E,"Doctype can not be appended since element is present")}}function se(d,m,_){var M=d.childNodes||[],j=m.childNodes||[];if(m.nodeType===L.DOCUMENT_FRAGMENT_NODE){var nt=j.filter(ut);if(nt.length>1||e(j,it))throw new I(E,"More than one element or text in fragment");if(nt.length===1&&!Nt(d,_))throw new I(E,"Element in fragment can not be inserted before doctype")}if(ut(m)&&!Nt(d,_))throw new I(E,"Only one element can be added and only after doctype");if(rt(m)){if(e(M,function(ie){return rt(ie)&&ie!==_}))throw new I(E,"Only one doctype is allowed");var St=e(M,ut);if(_&&M.indexOf(St)<M.indexOf(_))throw new I(E,"Doctype can only be inserted before an element")}}function Bt(d,m,_,M){at(d,m,_),d.nodeType===L.DOCUMENT_NODE&&(M||he)(d,m,_);var j=m.parentNode;if(j&&j.removeChild(m),m.nodeType===R){var nt=m.firstChild;if(nt==null)return m;var St=m.lastChild}else nt=St=m;var jt=_?_.previousSibling:d.lastChild;nt.previousSibling=jt,St.nextSibling=_,jt?jt.nextSibling=nt:d.firstChild=nt,_==null?d.lastChild=St:_.previousSibling=St;do{nt.parentNode=d;var ie=d.ownerDocument||d;kt(nt,ie)}while(nt!==St&&(nt=nt.nextSibling));return ot(d.ownerDocument||d,d),m.nodeType==R&&(m.firstChild=m.lastChild=null),m}function kt(d,m){if(d.ownerDocument!==m){if(d.ownerDocument=m,d.nodeType===h&&d.attributes)for(var _=0;_<d.attributes.length;_++){var M=d.attributes.item(_);M&&(M.ownerDocument=m)}for(var j=d.firstChild;j;)kt(j,m),j=j.nextSibling}}function yt(d,m){m.parentNode&&m.parentNode.removeChild(m),m.parentNode=d,m.previousSibling=d.lastChild,m.nextSibling=null,m.previousSibling?m.previousSibling.nextSibling=m:d.firstChild=m,d.lastChild=m,ot(d.ownerDocument,d,m);var _=d.ownerDocument||d;return kt(m,_),m}Y.prototype={nodeName:"#document",nodeType:P,doctype:null,documentElement:null,_inc:1,insertBefore:function(d,m){if(d.nodeType==R){for(var _=d.firstChild;_;){var M=_.nextSibling;this.insertBefore(_,m),_=M}return d}return Bt(this,d,m),kt(d,this),this.documentElement===null&&d.nodeType===h&&(this.documentElement=d),d},removeChild:function(d){return this.documentElement==d&&(this.documentElement=null),tt(this,d)},replaceChild:function(d,m){Bt(this,d,m,se),kt(d,this),m&&this.removeChild(m),ut(d)&&(this.documentElement=d)},importNode:function(d,m){return Ar(this,d,m)},getElementById:function(d){var m=null;return Q(this.documentElement,function(_){if(_.nodeType==h&&_.getAttribute("id")==d)return m=_,!0}),m},getElementsByClassName:function(d){var m=a(d);return new q(this,function(_){var M=[];return m.length>0&&Q(_.documentElement,function(j){if(j!==_&&j.nodeType===h){var nt=j.getAttribute("class");if(nt){var St=d===nt;if(!St){var jt=a(nt);St=m.every(o(jt))}St&&M.push(j)}}}),M})},createElement:function(d){var m=new bt;m.ownerDocument=this,m.nodeName=d,m.tagName=d,m.localName=d,m.childNodes=new O;var _=m.attributes=new Z;return _._ownerElement=m,m},createDocumentFragment:function(){var d=new Ye;return d.ownerDocument=this,d.childNodes=new O,d},createTextNode:function(d){var m=new vr;return m.ownerDocument=this,m.appendData(d),m},createComment:function(d){var m=new Er;return m.ownerDocument=this,m.appendData(d),m},createCDATASection:function(d){var m=new br;return m.ownerDocument=this,m.appendData(d),m},createProcessingInstruction:function(d,m){var _=new xr;return _.ownerDocument=this,_.tagName=_.nodeName=_.target=d,_.nodeValue=_.data=m,_},createAttribute:function(d){var m=new ge;return m.ownerDocument=this,m.name=d,m.nodeName=d,m.localName=d,m.specified=!0,m},createEntityReference:function(d){var m=new wr;return m.ownerDocument=this,m.nodeName=d,m},createElementNS:function(d,m){var _=new bt,M=m.split(":"),j=_.attributes=new Z;return _.childNodes=new O,_.ownerDocument=this,_.nodeName=m,_.tagName=m,_.namespaceURI=d,M.length==2?(_.prefix=M[0],_.localName=M[1]):_.localName=m,j._ownerElement=_,_},createAttributeNS:function(d,m){var _=new ge,M=m.split(":");return _.ownerDocument=this,_.nodeName=m,_.name=m,_.namespaceURI=d,_.specified=!0,M.length==2?(_.prefix=M[0],_.localName=M[1]):_.localName=m,_}},c(Y,L);function bt(){this._nsMap={}}bt.prototype={nodeType:h,hasAttribute:function(d){return this.getAttributeNode(d)!=null},getAttribute:function(d){var m=this.getAttributeNode(d);return m&&m.value||""},getAttributeNode:function(d){return this.attributes.getNamedItem(d)},setAttribute:function(d,m){var _=this.ownerDocument.createAttribute(d);_.value=_.nodeValue=""+m,this.setAttributeNode(_)},removeAttribute:function(d){var m=this.getAttributeNode(d);m&&this.removeAttributeNode(m)},appendChild:function(d){return d.nodeType===R?this.insertBefore(d,null):yt(this,d)},setAttributeNode:function(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function(d,m){var _=this.getAttributeNodeNS(d,m);_&&this.removeAttributeNode(_)},hasAttributeNS:function(d,m){return this.getAttributeNodeNS(d,m)!=null},getAttributeNS:function(d,m){var _=this.getAttributeNodeNS(d,m);return _&&_.value||""},setAttributeNS:function(d,m,_){var M=this.ownerDocument.createAttributeNS(d,m);M.value=M.nodeValue=""+_,this.setAttributeNode(M)},getAttributeNodeNS:function(d,m){return this.attributes.getNamedItemNS(d,m)},getElementsByTagName:function(d){return new q(this,function(m){var _=[];return Q(m,function(M){M!==m&&M.nodeType==h&&(d==="*"||M.tagName==d)&&_.push(M)}),_})},getElementsByTagNameNS:function(d,m){return new q(this,function(_){var M=[];return Q(_,function(j){j!==_&&j.nodeType===h&&(d==="*"||j.namespaceURI===d)&&(m==="*"||j.localName==m)&&M.push(j)}),M})}},Y.prototype.getElementsByTagName=bt.prototype.getElementsByTagName,Y.prototype.getElementsByTagNameNS=bt.prototype.getElementsByTagNameNS,c(bt,L);function ge(){}ge.prototype.nodeType=f,c(ge,L);function fe(){}fe.prototype={data:"",substringData:function(d,m){return this.data.substring(d,d+m)},appendData:function(d){d=this.data+d,this.nodeValue=this.data=d,this.length=d.length},insertData:function(d,m){this.replaceData(d,0,m)},appendChild:function(d){throw new Error(G[E])},deleteData:function(d,m){this.replaceData(d,m,"")},replaceData:function(d,m,_){var M=this.data.substring(0,d),j=this.data.substring(d+m);_=M+_+j,this.nodeValue=this.data=_,this.length=_.length}},c(fe,L);function vr(){}vr.prototype={nodeName:"#text",nodeType:p,splitText:function(d){var m=this.data,_=m.substring(d);m=m.substring(0,d),this.data=this.nodeValue=m,this.length=m.length;var M=this.ownerDocument.createTextNode(_);return this.parentNode&&this.parentNode.insertBefore(M,this.nextSibling),M}},c(vr,fe);function Er(){}Er.prototype={nodeName:"#comment",nodeType:A},c(Er,fe);function br(){}br.prototype={nodeName:"#cdata-section",nodeType:g},c(br,fe);function Sr(){}Sr.prototype.nodeType=k,c(Sr,L);function us(){}us.prototype.nodeType=C,c(us,L);function un(){}un.prototype.nodeType=y,c(un,L);function wr(){}wr.prototype.nodeType=v,c(wr,L);function Ye(){}Ye.prototype.nodeName="#document-fragment",Ye.prototype.nodeType=R,c(Ye,L);function xr(){}xr.prototype.nodeType=S,c(xr,L);function cn(){}cn.prototype.serializeToString=function(d,m,_){return ln.call(d,m,_)},L.prototype.toString=ln;function ln(d,m){var _=[],M=this.nodeType==9&&this.documentElement||this,j=M.prefix,nt=M.namespaceURI;if(nt&&j==null){var j=M.lookupPrefix(nt);if(j==null)var St=[{namespace:nt,prefix:null}]}return ye(this,_,d,m,St),_.join("")}function hn(d,m,_){var M=d.prefix||"",j=d.namespaceURI;if(!j||M==="xml"&&j===r.XML||j===r.XMLNS)return!1;for(var nt=_.length;nt--;){var St=_[nt];if(St.prefix===M)return St.namespace!==j}return!0}function Mr(d,m,_){d.push(" ",m,'="',_.replace(/[<>&"\t\n\r]/g,et),'"')}function ye(d,m,_,M,j){if(j||(j=[]),M)if(d=M(d),d){if(typeof d=="string"){m.push(d);return}}else return;switch(d.nodeType){case h:var nt=d.attributes,St=nt.length,Rt=d.firstChild,jt=d.tagName;_=r.isHTML(d.namespaceURI)||_;var ie=jt;if(!_&&!d.prefix&&d.namespaceURI){for(var Ie,_e=0;_e<nt.length;_e++)if(nt.item(_e).name==="xmlns"){Ie=nt.item(_e).value;break}if(!Ie)for(var Ze=j.length-1;Ze>=0;Ze--){var tr=j[Ze];if(tr.prefix===""&&tr.namespace===d.namespaceURI){Ie=tr.namespace;break}}if(Ie!==d.namespaceURI)for(var Ze=j.length-1;Ze>=0;Ze--){var tr=j[Ze];if(tr.namespace===d.namespaceURI){tr.prefix&&(ie=tr.prefix+":"+jt);break}}}m.push("<",ie);for(var er=0;er<St;er++){var de=nt.item(er);de.prefix=="xmlns"?j.push({prefix:de.localName,namespace:de.value}):de.nodeName=="xmlns"&&j.push({prefix:"",namespace:de.value})}for(var er=0;er<St;er++){var de=nt.item(er);if(hn(de,_,j)){var rr=de.prefix||"",dn=de.namespaceURI;Mr(m,rr?"xmlns:"+rr:"xmlns",dn),j.push({prefix:rr,namespace:dn})}ye(de,m,_,M,j)}if(jt===ie&&hn(d,_,j)){var rr=d.prefix||"",dn=d.namespaceURI;Mr(m,rr?"xmlns:"+rr:"xmlns",dn),j.push({prefix:rr,namespace:dn})}if(Rt||_&&!/^(?:meta|link|img|br|hr|input)$/i.test(jt)){if(m.push(">"),_&&/^script$/i.test(jt))for(;Rt;)Rt.data?m.push(Rt.data):ye(Rt,m,_,M,j.slice()),Rt=Rt.nextSibling;else for(;Rt;)ye(Rt,m,_,M,j.slice()),Rt=Rt.nextSibling;m.push("</",ie,">")}else m.push("/>");return;case P:case R:for(var Rt=d.firstChild;Rt;)ye(Rt,m,_,M,j.slice()),Rt=Rt.nextSibling;return;case f:return Mr(m,d.name,d.value);case p:return m.push(d.data.replace(/[<&>]/g,et));case g:return m.push("<![CDATA[",d.data,"]]>");case A:return m.push("<!--",d.data,"-->");case k:var io=d.publicId,Pr=d.systemId;if(m.push("<!DOCTYPE ",d.name),io)m.push(" PUBLIC ",io),Pr&&Pr!="."&&m.push(" ",Pr),m.push(">");else if(Pr&&Pr!=".")m.push(" SYSTEM ",Pr,">");else{var ao=d.internalSubset;ao&&m.push(" [",ao,"]"),m.push(">")}return;case S:return m.push("<?",d.target," ",d.data,"?>");case v:return m.push("&",d.nodeName,";");default:m.push("??",d.nodeName)}}function Ar(d,m,_){var M;switch(m.nodeType){case h:M=m.cloneNode(!1),M.ownerDocument=d;case R:break;case f:_=!0;break}if(M||(M=m.cloneNode(!1)),M.ownerDocument=d,M.parentNode=null,_)for(var j=m.firstChild;j;)M.appendChild(Ar(d,j,_)),j=j.nextSibling;return M}function Qe(d,m,_){var M=new m.constructor;for(var j in m)if(Object.prototype.hasOwnProperty.call(m,j)){var nt=m[j];typeof nt!="object"&&nt!=M[j]&&(M[j]=nt)}switch(m.childNodes&&(M.childNodes=new O),M.ownerDocument=d,M.nodeType){case h:var St=m.attributes,jt=M.attributes=new Z,ie=St.length;jt._ownerElement=M;for(var Ie=0;Ie<ie;Ie++)M.setAttributeNode(Qe(d,St.item(Ie),!0));break;case f:_=!0}if(_)for(var _e=m.firstChild;_e;)M.appendChild(Qe(d,_e,_)),_e=_e.nextSibling;return M}function fn(d,m,_){d[m]=_}try{if(Object.defineProperty){let d=function(m){switch(m.nodeType){case h:case R:var _=[];for(m=m.firstChild;m;)m.nodeType!==7&&m.nodeType!==8&&_.push(d(m)),m=m.nextSibling;return _.join("");default:return m.nodeValue}};Object.defineProperty(q.prototype,"length",{get:function(){return J(this),this.$$length}}),Object.defineProperty(L.prototype,"textContent",{get:function(){return d(this)},set:function(m){switch(this.nodeType){case h:case R:for(;this.firstChild;)this.removeChild(this.firstChild);(m||String(m))&&this.appendChild(this.ownerDocument.createTextNode(m));break;default:this.data=m,this.value=m,this.nodeValue=m}}}),fn=function(m,_,M){m["$$"+_]=M}}}catch{}return Ee.DocumentType=Sr,Ee.DOMException=I,Ee.DOMImplementation=U,Ee.Element=bt,Ee.Node=L,Ee.NodeList=O,Ee.XMLSerializer=cn,Ee}var vn={},Ii={},Xu;function y3(){return Xu||(Xu=1,(function(t){var e=li().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Ii)),Ii}var Es={},Ju;function _3(){if(Ju)return Es;Ju=1;var t=li().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+r.source+"*(?::"+e.source+r.source+"*)?$"),s=0,i=1,a=2,o=3,u=4,c=5,l=6,h=7;function f(E,w){this.message=E,this.locator=w,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function p(){}p.prototype={parse:function(E,w,T){var I=this.domBuilder;I.startDocument(),k(w,w={}),g(E,w,T,I,this.errorHandler),I.endDocument()}};function g(E,w,T,I,O){function q(yt){if(yt>65535){yt-=65536;var bt=55296+(yt>>10),ge=56320+(yt&1023);return String.fromCharCode(bt,ge)}else return String.fromCharCode(yt)}function J(yt){var bt=yt.slice(1,-1);return Object.hasOwnProperty.call(T,bt)?T[bt]:bt.charAt(0)==="#"?q(parseInt(bt.substr(1).replace("x","0x"))):(O.error("entity not found:"+yt),yt)}function Z(yt){if(yt>Y){var bt=E.substring(Y,yt).replace(/&#?\w+;/g,J);L&&W(Y),I.characters(bt,0,yt-Y),Y=yt}}function W(yt,bt){for(;yt>=B&&(bt=U.exec(E));)N=bt.index,B=N+bt[0].length,L.lineNumber++;L.columnNumber=yt-N+1}for(var N=0,B=0,U=/.*(?:\r\n?|\n)|.*$/g,L=I.locator,et=[{currentNSMap:w}],Q={},Y=0;;){try{var V=E.indexOf("<",Y);if(V<0){if(!E.substr(Y).match(/^\s*$/)){var ht=I.doc,ot=ht.createTextNode(E.substr(Y));ht.appendChild(ot),I.currentElement=ot}return}switch(V>Y&&Z(V),E.charAt(V+1)){case"/":var at=E.indexOf(">",V+3),tt=E.substring(V+2,at).replace(/[ \t\n\r]+$/g,""),ct=et.pop();at<0?(tt=E.substring(V+2).replace(/[\s<].*/,""),O.error("end tag name: "+tt+" is not complete:"+ct.tagName),at=V+1+tt.length):tt.match(/\s</)&&(tt=tt.replace(/[\s<].*/,""),O.error("end tag name: "+tt+" maybe not complete"),at=V+1+tt.length);var X=ct.localNSMap,rt=ct.tagName==tt,ut=rt||ct.tagName&&ct.tagName.toLowerCase()==tt.toLowerCase();if(ut){if(I.endElement(ct.uri,ct.localName,tt),X)for(var it in X)Object.prototype.hasOwnProperty.call(X,it)&&I.endPrefixMapping(it);rt||O.fatalError("end tag name: "+tt+" is not match the current start tagName:"+ct.tagName)}else et.push(ct);at++;break;case"?":L&&W(V),at=C(E,V,I);break;case"!":L&&W(V),at=R(E,V,I,O);break;default:L&&W(V);var vt=new x,Nt=et[et.length-1].currentNSMap,at=y(E,V,vt,Nt,J,O),he=vt.length;if(!vt.closed&&P(E,at,vt.tagName,Q)&&(vt.closed=!0,T.nbsp||O.warning("unclosed xml attribute")),L&&he){for(var se=v(L,{}),Bt=0;Bt<he;Bt++){var kt=vt[Bt];W(kt.offset),kt.locator=v(L,{})}I.locator=se,S(vt,I,Nt)&&et.push(vt),I.locator=L}else S(vt,I,Nt)&&et.push(vt);t.isHTML(vt.uri)&&!vt.closed?at=A(E,at,vt.tagName,J,I):at++}}catch(yt){if(yt instanceof f)throw yt;O.error("element parse error: "+yt),at=-1}at>Y?Y=at:Z(Math.max(V,Y)+1)}}function v(E,w){return w.lineNumber=E.lineNumber,w.columnNumber=E.columnNumber,w}function y(E,w,T,I,O,q){function J(L,et,Q){T.attributeNames.hasOwnProperty(L)&&q.fatalError("Attribute "+L+" redefined"),T.addValue(L,et.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,O),Q)}for(var Z,W,N=++w,B=s;;){var U=E.charAt(N);switch(U){case"=":if(B===i)Z=E.slice(w,N),B=o;else if(B===a)B=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(B===o||B===i)if(B===i&&(q.warning('attribute value must after "="'),Z=E.slice(w,N)),w=N+1,N=E.indexOf(U,w),N>0)W=E.slice(w,N),J(Z,W,w-1),B=c;else throw new Error("attribute value no end '"+U+"' match");else if(B==u)W=E.slice(w,N),J(Z,W,w),q.warning('attribute "'+Z+'" missed start quot('+U+")!!"),w=N+1,B=c;else throw new Error('attribute value must after "="');break;case"/":switch(B){case s:T.setTagName(E.slice(w,N));case c:case l:case h:B=h,T.closed=!0;case u:case i:break;case a:T.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return q.error("unexpected end of input"),B==s&&T.setTagName(E.slice(w,N)),N;case">":switch(B){case s:T.setTagName(E.slice(w,N));case c:case l:case h:break;case u:case i:W=E.slice(w,N),W.slice(-1)==="/"&&(T.closed=!0,W=W.slice(0,-1));case a:B===a&&(W=Z),B==u?(q.warning('attribute "'+W+'" missed quot(")!'),J(Z,W,w)):((!t.isHTML(I[""])||!W.match(/^(?:disabled|checked|selected)$/i))&&q.warning('attribute "'+W+'" missed value!! "'+W+'" instead!!'),J(W,W,w));break;case o:throw new Error("attribute value missed!!")}return N;case"":U=" ";default:if(U<=" ")switch(B){case s:T.setTagName(E.slice(w,N)),B=l;break;case i:Z=E.slice(w,N),B=a;break;case u:var W=E.slice(w,N);q.warning('attribute "'+W+'" missed quot(")!!'),J(Z,W,w);case c:B=l;break}else switch(B){case a:T.tagName,(!t.isHTML(I[""])||!Z.match(/^(?:disabled|checked|selected)$/i))&&q.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead2!!'),J(Z,Z,w),w=N,B=i;break;case c:q.warning('attribute space is required"'+Z+'"!!');case l:B=i,w=N;break;case o:B=u,w=N;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}N++}}function S(E,w,T){for(var I=E.tagName,O=null,U=E.length;U--;){var q=E[U],J=q.qName,Z=q.value,L=J.indexOf(":");if(L>0)var W=q.prefix=J.slice(0,L),N=J.slice(L+1),B=W==="xmlns"&&N;else N=J,W=null,B=J==="xmlns"&&"";q.localName=N,B!==!1&&(O==null&&(O={},k(T,T={})),T[B]=O[B]=Z,q.uri=t.XMLNS,w.startPrefixMapping(B,Z))}for(var U=E.length;U--;){q=E[U];var W=q.prefix;W&&(W==="xml"&&(q.uri=t.XML),W!=="xmlns"&&(q.uri=T[W||""]))}var L=I.indexOf(":");L>0?(W=E.prefix=I.slice(0,L),N=E.localName=I.slice(L+1)):(W=null,N=E.localName=I);var et=E.uri=T[W||""];if(w.startElement(et,N,I,E),E.closed){if(w.endElement(et,N,I),O)for(W in O)Object.prototype.hasOwnProperty.call(O,W)&&w.endPrefixMapping(W)}else return E.currentNSMap=T,E.localNSMap=O,!0}function A(E,w,T,I,O){if(/^(?:script|textarea)$/i.test(T)){var q=E.indexOf("</"+T+">",w),J=E.substring(w+1,q);if(/[&<]/.test(J))return/^script$/i.test(T)?(O.characters(J,0,J.length),q):(J=J.replace(/&#?\w+;/g,I),O.characters(J,0,J.length),q)}return w+1}function P(E,w,T,I){var O=I[T];return O==null&&(O=E.lastIndexOf("</"+T+">"),O<w&&(O=E.lastIndexOf("</"+T)),I[T]=O),O<w}function k(E,w){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(w[T]=E[T])}function R(E,w,T,I){var O=E.charAt(w+2);switch(O){case"-":if(E.charAt(w+3)==="-"){var q=E.indexOf("-->",w+4);return q>w?(T.comment(E,w+4,q-w-4),q+3):(I.error("Unclosed comment"),-1)}else return-1;default:if(E.substr(w+3,6)=="CDATA["){var q=E.indexOf("]]>",w+9);return T.startCDATA(),T.characters(E,w+9,q-w-9),T.endCDATA(),q+3}var J=G(E,w),Z=J.length;if(Z>1&&/!doctype/i.test(J[0][0])){var W=J[1][0],N=!1,B=!1;Z>3&&(/^public$/i.test(J[2][0])?(N=J[3][0],B=Z>4&&J[4][0]):/^system$/i.test(J[2][0])&&(B=J[3][0]));var U=J[Z-1];return T.startDTD(W,N,B),T.endDTD(),U.index+U[0].length}}return-1}function C(E,w,T){var I=E.indexOf("?>",w);if(I){var O=E.substring(w,I).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return O?(O[0].length,T.processingInstruction(O[1],O[2]),I+2):-1}return-1}function x(){this.attributeNames={}}x.prototype={setTagName:function(E){if(!n.test(E))throw new Error("invalid tagName:"+E);this.tagName=E},addValue:function(E,w,T){if(!n.test(E))throw new Error("invalid attribute:"+E);this.attributeNames[E]=this.length,this[this.length++]={qName:E,value:w,offset:T}},length:0,getLocalName:function(E){return this[E].localName},getLocator:function(E){return this[E].locator},getQName:function(E){return this[E].qName},getURI:function(E){return this[E].uri},getValue:function(E){return this[E].value}};function G(E,w){var T,I=[],O=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(O.lastIndex=w,O.exec(E);T=O.exec(E);)if(I.push(T),T[1])return I}return Es.XMLReader=p,Es.ParseError=f,Es}var Ku;function v3(){if(Ku)return vn;Ku=1;var t=li(),e=Gh(),r=y3(),n=_3(),s=e.DOMImplementation,i=t.NAMESPACE,a=n.ParseError,o=n.XMLReader;function u(y){return y.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c(y){this.options=y||{locator:{}}}c.prototype.parseFromString=function(y,S){var A=this.options,P=new o,k=A.domBuilder||new h,R=A.errorHandler,C=A.locator,x=A.xmlns||{},G=/\/x?html?$/.test(S),E=G?r.HTML_ENTITIES:r.XML_ENTITIES;C&&k.setDocumentLocator(C),P.errorHandler=l(R,k,C),P.domBuilder=A.domBuilder||k,G&&(x[""]=i.HTML),x.xml=x.xml||i.XML;var w=A.normalizeLineEndings||u;return y&&typeof y=="string"?P.parse(w(y),x,E):P.errorHandler.error("invalid doc source"),k.doc};function l(y,S,A){if(!y){if(S instanceof h)return S;y=S}var P={},k=y instanceof Function;A=A||{};function R(C){var x=y[C];!x&&k&&(x=y.length==2?function(G){y(C,G)}:y),P[C]=x&&function(G){x("[xmldom "+C+"]	"+G+p(A))}||function(){}}return R("warning"),R("error"),R("fatalError"),P}function h(){this.cdata=!1}function f(y,S){S.lineNumber=y.lineNumber,S.columnNumber=y.columnNumber}h.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(y,S,A,P){var k=this.doc,R=k.createElementNS(y,A||S),C=P.length;v(this,R),this.currentElement=R,this.locator&&f(this.locator,R);for(var x=0;x<C;x++){var y=P.getURI(x),G=P.getValue(x),A=P.getQName(x),E=k.createAttributeNS(y,A);this.locator&&f(P.getLocator(x),E),E.value=E.nodeValue=G,R.setAttributeNode(E)}},endElement:function(y,S,A){var P=this.currentElement;P.tagName,this.currentElement=P.parentNode},startPrefixMapping:function(y,S){},endPrefixMapping:function(y){},processingInstruction:function(y,S){var A=this.doc.createProcessingInstruction(y,S);this.locator&&f(this.locator,A),v(this,A)},ignorableWhitespace:function(y,S,A){},characters:function(y,S,A){if(y=g.apply(this,arguments),y){if(this.cdata)var P=this.doc.createCDATASection(y);else var P=this.doc.createTextNode(y);this.currentElement?this.currentElement.appendChild(P):/^\s*$/.test(y)&&this.doc.appendChild(P),this.locator&&f(this.locator,P)}},skippedEntity:function(y){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(y){(this.locator=y)&&(y.lineNumber=0)},comment:function(y,S,A){y=g.apply(this,arguments);var P=this.doc.createComment(y);this.locator&&f(this.locator,P),v(this,P)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(y,S,A){var P=this.doc.implementation;if(P&&P.createDocumentType){var k=P.createDocumentType(y,S,A);this.locator&&f(this.locator,k),v(this,k),this.doc.doctype=k}},warning:function(y){console.warn("[xmldom warning]	"+y,p(this.locator))},error:function(y){console.error("[xmldom error]	"+y,p(this.locator))},fatalError:function(y){throw new a(y,this.locator)}};function p(y){if(y)return`
@`+(y.systemId||"")+"#[line:"+y.lineNumber+",col:"+y.columnNumber+"]"}function g(y,S,A){return typeof y=="string"?y.substr(S,A):y.length>=S+A||S?new java.lang.String(y,S,A)+"":y}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(y){h.prototype[y]=function(){return null}});function v(y,S){y.currentElement?y.currentElement.appendChild(S):y.doc.appendChild(S)}return vn.__DOMHandler=h,vn.normalizeLineEndings=u,vn.DOMParser=c,vn}var Yu;function E3(){if(Yu)return _n;Yu=1;var t=Gh();return _n.DOMImplementation=t.DOMImplementation,_n.XMLSerializer=t.XMLSerializer,_n.DOMParser=v3().DOMParser,_n}var Qu;function b3(){return Qu||(Qu=1,(function(t,e){var r=(function(){var n=/\s*/g,s=/^\s*|\s*$/g,i=/\s+/;function a(E){if(!E||!E.length)return 0;for(var w=0,T=0;w<E.length;w++)T=(T<<5)-T+E.charCodeAt(w)|0;return T}function o(E,w){return E.getElementsByTagName(w)}function u(E,w){return E.getAttribute(w)}function c(E,w){return parseFloat(u(E,w))}function l(E,w){var T=o(E,w);return T.length?T[0]:null}function h(E){return E.normalize&&E.normalize(),E}function f(E){for(var w=0,T=[];w<E.length;w++)T[w]=parseFloat(E[w]);return T}function p(E){return E&&h(E),E&&E.textContent||""}function g(E,w){var T={},I,O;for(O=0;O<w.length;O++)I=l(E,w[O]),I&&(T[w[O]]=p(I));return T}function v(E,w){for(var T in w)E[T]=w[T]}function y(E){return f(E.replace(n,"").split(","))}function S(E){for(var w=E.replace(s,"").split(i),T=[],I=0;I<w.length;I++)T.push(y(w[I]));return T}function A(E){var w=[c(E,"lon"),c(E,"lat")],T=l(E,"ele"),I=l(E,"gpxtpx:hr")||l(E,"hr"),O=l(E,"time"),q;return T&&(q=parseFloat(p(T)),isNaN(q)||w.push(q)),{coordinates:w,time:O?p(O):null,heartRate:I?parseFloat(p(I)):null}}function P(){return{type:"FeatureCollection",features:[]}}var k;if(typeof XMLSerializer<"u")k=new XMLSerializer;else{var R=typeof process=="object"&&!process.browser,C=typeof Titanium=="object";if(R||C)k=new(E3()).XMLSerializer;else throw new Error("Unable to initialize serializer")}function x(E){return E.xml!==void 0?E.xml:k.serializeToString(E)}var G={kml:function(E){for(var w=P(),T={},I={},O={},q=["Polygon","LineString","Point","Track","gx:Track"],J=o(E,"Placemark"),Z=o(E,"Style"),W=o(E,"StyleMap"),N=0;N<Z.length;N++){var B=a(x(Z[N])).toString(16);T["#"+u(Z[N],"id")]=B,I[B]=Z[N]}for(var U=0;U<W.length;U++){T["#"+u(W[U],"id")]=a(x(W[U])).toString(16);for(var L=o(W[U],"Pair"),et={},Q=0;Q<L.length;Q++)et[p(l(L[Q],"key"))]=p(l(L[Q],"styleUrl"));O["#"+u(W[U],"id")]=et}for(var Y=0;Y<J.length;Y++)w.features=w.features.concat(ct(J[Y]));function V(X){var rt,ut;return X=X||"",X.substr(0,1)==="#"&&(X=X.substr(1)),(X.length===6||X.length===3)&&(rt=X),X.length===8&&(ut=parseInt(X.substr(0,2),16)/255,rt="#"+X.substr(6,2)+X.substr(4,2)+X.substr(2,2)),[rt,isNaN(ut)?void 0:ut]}function ht(X){return f(X.split(" "))}function ot(X){var rt=o(X,"coord"),ut=[],it=[];rt.length===0&&(rt=o(X,"gx:coord"));for(var vt=0;vt<rt.length;vt++)ut.push(ht(p(rt[vt])));for(var Nt=o(X,"when"),at=0;at<Nt.length;at++)it.push(p(Nt[at]));return{coords:ut,times:it}}function tt(X){var rt,ut,it,vt,Nt,at=[],he=[];if(l(X,"MultiGeometry"))return tt(l(X,"MultiGeometry"));if(l(X,"MultiTrack"))return tt(l(X,"MultiTrack"));if(l(X,"gx:MultiTrack"))return tt(l(X,"gx:MultiTrack"));for(it=0;it<q.length;it++)if(ut=o(X,q[it]),ut){for(vt=0;vt<ut.length;vt++)if(rt=ut[vt],q[it]==="Point")at.push({type:"Point",coordinates:y(p(l(rt,"coordinates")))});else if(q[it]==="LineString")at.push({type:"LineString",coordinates:S(p(l(rt,"coordinates")))});else if(q[it]==="Polygon"){var se=o(rt,"LinearRing"),Bt=[];for(Nt=0;Nt<se.length;Nt++)Bt.push(S(p(l(se[Nt],"coordinates"))));at.push({type:"Polygon",coordinates:Bt})}else if(q[it]==="Track"||q[it]==="gx:Track"){var kt=ot(rt);at.push({type:"LineString",coordinates:kt.coords}),kt.times.length&&he.push(kt.times)}}return{geoms:at,coordTimes:he}}function ct(X){var rt=tt(X),ut,it={},vt=p(l(X,"name")),Nt=p(l(X,"address")),at=p(l(X,"styleUrl")),he=p(l(X,"description")),se=l(X,"TimeSpan"),Bt=l(X,"TimeStamp"),kt=l(X,"ExtendedData"),yt=l(X,"LineStyle"),bt=l(X,"PolyStyle"),ge=l(X,"visibility");if(!rt.geoms.length)return[];if(vt&&(it.name=vt),Nt&&(it.address=Nt),at){at[0]!=="#"&&(at="#"+at),it.styleUrl=at,T[at]&&(it.styleHash=T[at]),O[at]&&(it.styleMapHash=O[at],it.styleHash=T[O[at].normal]);var fe=I[it.styleHash];if(fe){yt||(yt=l(fe,"LineStyle")),bt||(bt=l(fe,"PolyStyle"));var vr=l(fe,"IconStyle");if(vr){var Er=l(vr,"Icon");if(Er){var br=p(l(Er,"href"));br&&(it.icon=br)}}}}if(he&&(it.description=he),se){var Sr=p(l(se,"begin")),us=p(l(se,"end"));it.timespan={begin:Sr,end:us}}if(Bt&&(it.timestamp=p(l(Bt,"when"))),yt){var un=V(p(l(yt,"color"))),wr=un[0],Ye=un[1],xr=parseFloat(p(l(yt,"width")));wr&&(it.stroke=wr),isNaN(Ye)||(it["stroke-opacity"]=Ye),isNaN(xr)||(it["stroke-width"]=xr)}if(bt){var cn=V(p(l(bt,"color"))),ln=cn[0],hn=cn[1],Mr=p(l(bt,"fill")),ye=p(l(bt,"outline"));ln&&(it.fill=ln),isNaN(hn)||(it["fill-opacity"]=hn),Mr&&(it["fill-opacity"]=Mr==="1"?it["fill-opacity"]||1:0),ye&&(it["stroke-opacity"]=ye==="1"?it["stroke-opacity"]||1:0)}if(kt){var Ar=o(kt,"Data"),Qe=o(kt,"SimpleData");for(ut=0;ut<Ar.length;ut++)it[Ar[ut].getAttribute("name")]=p(l(Ar[ut],"value"));for(ut=0;ut<Qe.length;ut++)it[Qe[ut].getAttribute("name")]=p(Qe[ut])}ge&&(it.visibility=p(ge)),rt.coordTimes.length&&(it.coordTimes=rt.coordTimes.length===1?rt.coordTimes[0]:rt.coordTimes);var fn={type:"Feature",geometry:rt.geoms.length===1?rt.geoms[0]:{type:"GeometryCollection",geometries:rt.geoms},properties:it};return u(X,"id")&&(fn.id=u(X,"id")),[fn]}return w},gpx:function(E){var w,T=o(E,"trk"),I=o(E,"rte"),O=o(E,"wpt"),q=P(),J;for(w=0;w<T.length;w++)J=N(T[w]),J&&q.features.push(J);for(w=0;w<I.length;w++)J=B(I[w]),J&&q.features.push(J);for(w=0;w<O.length;w++)q.features.push(U(O[w]));function Z(Q,Y){for(var V=0;V<Y;V++)Q.push(null);return Q}function W(Q,Y){var V=o(Q,Y),ht=[],ot=[],tt=[],ct=V.length;if(ct<2)return{};for(var X=0;X<ct;X++){var rt=A(V[X]);ht.push(rt.coordinates),rt.time&&ot.push(rt.time),(rt.heartRate||tt.length)&&(tt.length||Z(tt,X),tt.push(rt.heartRate||null))}return{line:ht,times:ot,heartRates:tt}}function N(Q){for(var Y=o(Q,"trkseg"),V=[],ht=[],ot=[],tt,ct=0;ct<Y.length;ct++)if(tt=W(Y[ct],"trkpt"),tt&&(tt.line&&V.push(tt.line),tt.times&&tt.times.length&&ht.push(tt.times),ot.length||tt.heartRates&&tt.heartRates.length)){if(!ot.length)for(var X=0;X<ct;X++)ot.push(Z([],V[X].length));tt.heartRates&&tt.heartRates.length?ot.push(tt.heartRates):ot.push(Z([],tt.line.length||0))}if(V.length!==0){var rt=et(Q);return v(rt,L(l(Q,"extensions"))),ht.length&&(rt.coordTimes=V.length===1?ht[0]:ht),ot.length&&(rt.heartRates=V.length===1?ot[0]:ot),{type:"Feature",properties:rt,geometry:{type:V.length===1?"LineString":"MultiLineString",coordinates:V.length===1?V[0]:V}}}}function B(Q){var Y=W(Q,"rtept");if(Y.line){var V=et(Q);v(V,L(l(Q,"extensions")));var ht={type:"Feature",properties:V,geometry:{type:"LineString",coordinates:Y.line}};return ht}}function U(Q){var Y=et(Q);return v(Y,g(Q,["sym"])),{type:"Feature",properties:Y,geometry:{type:"Point",coordinates:A(Q).coordinates}}}function L(Q){var Y={};if(Q){var V=l(Q,"line");if(V){var ht=p(l(V,"color")),ot=parseFloat(p(l(V,"opacity"))),tt=parseFloat(p(l(V,"width")));ht&&(Y.stroke=ht),isNaN(ot)||(Y["stroke-opacity"]=ot),isNaN(tt)||(Y["stroke-width"]=tt*96/25.4)}}return Y}function et(Q){var Y=g(Q,["name","cmt","desc","type","time","keywords"]),V=o(Q,"link");V.length&&(Y.links=[]);for(var ht=0,ot;ht<V.length;ht++)ot={href:u(V[ht],"href")},v(ot,g(V[ht],["text","type"])),Y.links.push(ot);return Y}return q}};return G})();t.exports=r})(Ni)),Ni.exports}var Oh=b3();function S3(t){const e=[],r=t.split(/<\/kml>/i);for(const n of r){const s=n.trim();if(!s)continue;const i=s.match(/<\?xml[^?]*\?>/i),a=s.match(/<kml[^>]*>/i);if(a){const o=a.index??0;let u=s.slice(o)+"</kml>";i&&(i.index??0)<o&&(u=i[0]+`
`+u),e.push(u)}}return e}function w3(t,e){const n=new DOMParser().parseFromString(t,"text/xml"),s=n.querySelector("parsererror");if(s)return{features:[],errors:[{message:"Invalid XML: "+s.textContent}]};const i=Oh.kml(n);return i.features.length===0?{features:[],errors:[]}:{features:i.features.map((o,u)=>{var f;const c=o.properties??{},l=typeof c.name=="string"?c.name:void 0,h=typeof c.description=="string"?c.description:void 0;return{type:"Feature",id:((f=o.id)==null?void 0:f.toString())??`feature-${String(e+u)}`,geometry:o.geometry,properties:{...c,name:l,description:h}}}),errors:[]}}function x3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"kml"};try{const r=S3(e);r.length===0&&r.push(e);const n=[],s=[];for(let i=0;i<r.length;i++){const a=r[i];if(!a)continue;const o=w3(a,n.length);if(o.errors.length>0){const u=r.length>1?`Document ${String(i+1)}: `:"";s.push(...o.errors.map(c=>({message:u+c.message})))}else n.push(...o.features)}return n.length>0?{features:n,errors:s,detectedFormat:"kml",detectedProjection:"EPSG:4326"}:{features:[],errors:s.length>0?s:[{message:"No features found in KML"}]}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse KML"}]}}}function M3(t){return`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
${t.map((r,n)=>{const s=r.properties,i=s?s.name:void 0,a=typeof i=="string"?i:`Feature ${String(n+1)}`,o=r.geometry;let u="";if(o.type==="Point"){const[c,l,h]=o.coordinates;u=`<Point><coordinates>${String(c)},${String(l)}${h!==void 0?","+String(h):""}</coordinates></Point>`}else o.type==="LineString"?u=`<LineString><coordinates>${o.coordinates.map(l=>`${String(l[0])},${String(l[1])}${l[2]!==void 0?","+String(l[2]):""}`).join(" ")}</coordinates></LineString>`:o.type==="Polygon"&&(u=`<Polygon>${o.coordinates.map((l,h)=>{const f=l.map(g=>`${String(g[0])},${String(g[1])}${g[2]!==void 0?","+String(g[2]):""}`).join(" "),p=h===0?"outerBoundaryIs":"innerBoundaryIs";return`<${p}><LinearRing><coordinates>${f}</coordinates></LinearRing></${p}>`}).join("")}</Polygon>`);return`<Placemark><name>${A3(a)}</name>${u}</Placemark>`}).join(`
`)}
</Document>
</kml>`}function A3(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function P3(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<kml")?!1:/<kml/i.test(e)}const Fh={name:"kml",parse:x3,format:M3,detect:P3};function C3(t){const e=[],r=t.split(/<\/gpx>/i);for(const n of r){const s=n.trim();if(!s)continue;const i=s.match(/<\?xml[^?]*\?>/i),a=s.match(/<gpx[^>]*>/i);if(a){const o=a.index??0;let u=s.slice(o)+"</gpx>";i&&(i.index??0)<o&&(u=i[0]+`
`+u),e.push(u)}}return e}function T3(t,e){const n=new DOMParser().parseFromString(t,"text/xml"),s=n.querySelector("parsererror");if(s)return{features:[],errors:[{message:"Invalid XML: "+s.textContent}]};const i=Oh.gpx(n);return i.features.length===0?{features:[],errors:[]}:{features:i.features.map((o,u)=>{var f;const c=o.properties??{},l=typeof c.name=="string"?c.name:void 0,h=typeof c.desc=="string"?c.desc:void 0;return{type:"Feature",id:((f=o.id)==null?void 0:f.toString())??`feature-${String(e+u)}`,geometry:o.geometry,properties:{...c,name:l,description:h}}}),errors:[]}}function D3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"gpx"};try{const r=C3(e);r.length===0&&r.push(e);const n=[],s=[];for(let i=0;i<r.length;i++){const a=r[i];if(!a)continue;const o=T3(a,n.length);if(o.errors.length>0){const u=r.length>1?`Document ${String(i+1)}: `:"";s.push(...o.errors.map(c=>({message:u+c.message})))}else n.push(...o.features)}return n.length>0?{features:n,errors:s,detectedFormat:"gpx",detectedProjection:"EPSG:4326"}:{features:[],errors:s.length>0?s:[{message:"No features found in GPX"}]}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse GPX"}]}}}function N3(t){const e=[];for(const r of t){const n=r.properties,s=n?n.name:void 0,i=typeof s=="string"?s:"",a=r.geometry;if(a.type==="Point"){const[o,u,c]=a.coordinates;e.push(`<wpt lat="${String(u)}" lon="${String(o)}">${i?`<name>${ki(i)}</name>`:""}${c!==void 0?`<ele>${String(c)}</ele>`:""}</wpt>`)}else if(a.type==="LineString"){const o=a.coordinates.map(u=>{const[c,l,h]=u;return`<trkpt lat="${String(l)}" lon="${String(c)}">${h!==void 0?`<ele>${String(h)}</ele>`:""}</trkpt>`}).join(`
        `);e.push(`<trk>${i?`<name>${ki(i)}</name>`:""}<trkseg>
        ${o}
      </trkseg></trk>`)}else if(a.type==="MultiLineString"){const o=a.coordinates.map(u=>`<trkseg>
        ${u.map(l=>{const[h,f,p]=l;return`<trkpt lat="${String(f)}" lon="${String(h)}">${p!==void 0?`<ele>${String(p)}</ele>`:""}</trkpt>`}).join(`
        `)}
      </trkseg>`).join(`
      `);e.push(`<trk>${i?`<name>${ki(i)}</name>`:""}${o}</trk>`)}}return`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="GeoFiddle" xmlns="http://www.topografix.com/GPX/1/1">
  ${e.join(`
  `)}
</gpx>`}function ki(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function I3(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<gpx")?!1:/<gpx/i.test(e)}const Bh={name:"gpx",parse:D3,format:N3,detect:I3};var jh,Zu=()=>new DecompressionStream("deflate-raw");try{Zu(),jh=async t=>{let e=Zu(),r=e.writable.getWriter(),n=e.readable.getReader(),s,i=[],a=0,o=0,u;for(r.write(t),r.close();!(u=await n.read()).done;)s=u.value,i.push(s),a+=s.length;return!i[1]&&s||(s=new Uint8Array(a),i.map(c=>(s.set(c,o),o+=c.length))),s}}catch{}var k3=new TextDecoder,Ri=t=>{throw new Error("but-unzip~"+t)},tc=t=>k3.decode(t);function*R3(t,e=jh){let r=t.length-20,n=Math.max(r-65516,2);for(;(r=t.lastIndexOf(80,r-1))!==-1&&!(t[r+1]===75&&t[r+2]===5&&t[r+3]===6)&&r>n;);r===-1&&Ri(2);let s=(c,l)=>t.subarray(r+=c,r+=l),i=new DataView(t.buffer,t.byteOffset),a=c=>i.getUint16(c+r,!0),o=c=>i.getUint32(c+r,!0),u=a(10);for(u!==a(8)&&Ri(3),r=o(16);u--;){let c=a(10),l=a(30),h=a(32),f=o(20),p=o(42),g=tc(s(46,a(28))),v=tc(s(l,h)),y=r,S;r=p,S=s(30+a(26)+a(28),f),yield{filename:g,comment:v,read:()=>c&8?e(S):c?Ri(1):S},r=y}}const L3=/.+\.(shp|dbf|json|prj|cpg)$/i,G3=async t=>{const e={},r=[];for(const i of R3(t))L3.test(i.filename)&&r.push(Promise.resolve(i.read()).then(a=>e[i.filename]=a));await Promise.all(r);const n={},s=new TextDecoder;for(const[i,a]of Object.entries(e))i.slice(-3).toLowerCase()==="shp"||i.slice(-3).toLowerCase()==="dbf"?n[i]=new DataView(a.buffer,a.byteOffset,a.byteLength):n[i]=s.decode(a);return n},O3=globalThis.URL,F3=(t,e)=>{if(!e)return t;const r=new O3(t);return r.pathname=`${r.pathname}.${e}`,r.href};async function jn(t,e){const r=F3(t,e),n=e==="prj"||e==="cpg";try{const s=await fetch(r);if(s.status>399)throw new Error(s.statusText);if(n)return s.text();const i=await s.arrayBuffer();return new DataView(i)}catch(s){if(n||e==="dbf")return!1;throw s}}function B3(t){let e=0,r=1;const n=t.length;let s,i;const a=[t[0][0],t[0][1],t[0][0],t[0][1]];for(;r<n;)s=i||t[0],i=t[r],e+=(i[0]-s[0])*(i[1]+s[1]),r++,i[0]<a[0]&&(a[0]=i[0]),i[1]<a[1]&&(a[1]=i[1]),i[0]>a[2]&&(a[2]=i[0]),i[1]>a[3]&&(a[3]=i[1]);return{ring:t,clockWise:e>0,bbox:a,children:[]}}function ec(t,e){return!(t.bbox[0]>e.bbox[0]||t.bbox[1]>e.bbox[1]||t.bbox[2]<e.bbox[2]||t.bbox[3]<e.bbox[3])}function $h(t,e=!1){const r=[],n=[];for(const a of t){const o=B3(a);o.clockWise!==e?r.push(o):n.push(o)}const s=[];for(const a of n){let o;for(const u of r)ec(u,a)&&(o?ec(o,u)&&(o=u):o=u);o?o.children.push(a.ring):s.push(a)}if(e)return{outers:r,orphens:s};if(s.length&&!e){const a=$h(t,!0);if(a.orphens.length===0){const o=[];for(const u of a.outers)o.push([u.ring.toReversed()].concat(u.children.map(c=>c.toReversed())));return o}}const i=[];for(const a of r)i.push([a.ring].concat(a.children));return i}Pt.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}};Pt.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.getFloat64(16,!0)),e};Pt.prototype.parsePointArray=function(t,e,r){const n=[];let s=0;for(;s<r;)n.push(this.parseCoord(t,e)),e+=16,s++;return n};Pt.prototype.parseZPointArray=function(t,e,r,n){let s=0;for(;s<r;)n[s].push(t.getFloat64(e,!0)),s++,e+=8;return n};Pt.prototype.parseArrayGroup=function(t,e,r,n,s){const i=[];let a=0,o,u=0,c;for(;a<n;)a++,r+=4,o=u,a===n?u=s:u=t.getInt32(r,!0),c=u-o,c&&(i.push(this.parsePointArray(t,e,c)),e+=c<<4);return i};Pt.prototype.parseZArrayGroup=function(t,e,r,n){let s=0;for(;s<r;)n[s]=this.parseZPointArray(t,e,n[s].length,n[s]),e+=n[s].length<<3,s++;return n};Pt.prototype.parseMultiPoint=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const n=this.parseCoord(t,0),s=this.parseCoord(t,16);e.bbox=[n[0],n[1],s[0],s[1]];const i=36;return r===1?(e.type="Point",e.coordinates=this.parseCoord(t,i)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,i,r)),e};Pt.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let r;if(e.type==="Point")return e.coordinates.push(t.getFloat64(72,!0)),e;r=e.coordinates.length;const n=52+(r<<4);return e.coordinates=this.parseZPointArray(t,n,r,e.coordinates),e};Pt.prototype.parsePolyline=function(t){const e={},r=t.getInt32(32,!0);if(!r)return null;const n=this.parseCoord(t,0),s=this.parseCoord(t,16);e.bbox=[n[0],n[1],s[0],s[1]];const i=t.getInt32(36,!0);let a,o;return r===1?(e.type="LineString",a=44,e.coordinates=this.parsePointArray(t,a,i)):(e.type="MultiLineString",a=40+(r<<2),o=40,e.coordinates=this.parseArrayGroup(t,a,o,r,i)),e};Pt.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const r=e.coordinates.length;let n;return e.type==="LineString"?(n=60+(r<<4),e.coordinates=this.parseZPointArray(t,n,r,e.coordinates),e):(n=56+(e.coordinates.reduce(function(i,a){return i+a.length},0)<<4)+(r<<2),e.coordinates=this.parseZArrayGroup(t,n,r,e.coordinates),e)};Pt.prototype.polyFuncs=function(t){return t&&(t.type==="LineString"?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=$h(t.coordinates),t.coordinates.length===1?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)))};Pt.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))};Pt.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const rc={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function j3(t){return t?function(e,r){const n=[e.getFloat64(r,!0),e.getFloat64(r+8,!0)];return t.inverse(n)}:function(e,r){return[e.getFloat64(r,!0),e.getFloat64(r+8,!0)]}}function Pt(t,e){if(!(this instanceof Pt))return new Pt(t,e);this.buffer=t,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}Pt.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in rc))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[rc[e]],this.parseCoord=j3(t)};Pt.prototype.getShpCode=function(){return this.parseHeader().shpCode};Pt.prototype.parseHeader=function(){const t=this.buffer;return{length:t.getInt32(24)<<1,version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}};Pt.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength-8,r=[];let n;for(;t<=e&&(n=this.getRow(t),!!n);)t+=8,t+=n.len,n.type?r.push(this.parseFunc(n.data)):r.push(null);return r};Pt.prototype.getRow=function(t){const e=this.buffer.getInt32(t),r=this.buffer.getInt32(t+4)<<1;if(r===0)return{id:e,len:r,type:0};if(!(t+r+8>this.buffer.byteLength))return{id:e,len:r,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+t+12,r-4),type:this.buffer.getInt32(t+8,!0)}};function Ya(t,e){return new Pt(t,e).rows}var $3=/^(?:ANSI\s)?(\d+)$/m;function qh(t,e){if(!t)return n;try{new TextDecoder(t.trim())}catch{var r=$3.exec(t);return r&&!e?qh("windows-"+r[1],!0):(t=void 0,n)}return n;function n(s){var i=new TextDecoder(t||void 0),a=i.decode(s,{stream:!0})+i.decode();return a.replace(/\0/g,"").trim()}}function q3(t){var e={};return e.lastUpdated=new Date(t.getUint8(1)+1900,t.getUint8(2),t.getUint8(3)),e.records=t.getUint32(4,!0),e.headerLen=t.getUint16(8,!0),e.recLen=t.getUint16(10,!0),e}function U3(t,e,r){for(var n=[],s=32;s<e&&(n.push({name:r(new Uint8Array(t.buffer.slice(t.byteOffset+s,t.byteOffset+s+11))),dataType:String.fromCharCode(t.getUint8(s+11)),len:t.getUint8(s+16),decimal:t.getUint8(s+17)}),t.getUint8(s+32)!==13);)s+=32;return n}function H3(t,e,r,n,s){const i=new Uint8Array(t.buffer.slice(t.byteOffset+e,t.byteOffset+e+r));var a=s(i);switch(n){case"N":case"F":case"O":return parseFloat(a,10);case"D":return new Date(a.slice(0,4),parseInt(a.slice(4,6),10)-1,a.slice(6,8));case"L":return a.toLowerCase()==="y"||a.toLowerCase()==="t";default:return a}}function z3(t,e,r,n){for(var s={},i=0,a=r.length,o,u;i<a;)u=r[i],o=H3(t,e,u.len,u.dataType,n),e+=u.len,typeof o<"u"&&(s[u.name]=o),i++;return s}function Qa(t,e){for(var r=qh(e),n=q3(t),s=U3(t,n.headerLen-1,r),i=(s.length+1<<5)+2,a=n.recLen,o=n.records,u=[];o;)u.push(z3(t,i,s,r)),i+=a,o--;return u}const W3=globalThis.URL,V3=t=>{if(!t)throw new Error("forgot to pass buffer");if(Xr(t))return new Uint8Array(t);if(Xr(t.buffer))return t.BYTES_PER_ELEMENT===1?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")},X3=new TextDecoder,Uh=t=>{if(t){if(typeof t=="string")return t;if(Xr(t)||ArrayBuffer.isView(t)||Za(t))return X3.decode(t)}},Hh=t=>{if(!t)throw new Error("forgot to pass buffer");if(Za(t))return t;if(Xr(t))return new DataView(t);if(Xr(t.buffer))return new DataView(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")};function Xr(t){return t instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"}function Za(t){return t instanceof globalThis.DataView||Object.prototype.toString.call(t)==="[object DataView]"}const to=function([t,e]){const r={};r.type="FeatureCollection",r.features=[];let n=0;const s=t.length;for(e||(e=[]);n<s;)r.features.push({type:"Feature",geometry:t[n],properties:e[n]||{}}),n++;return r},zh=async function(t,e){let r;t=V3(t);const n=await G3(t),s=[];e=e||[];for(r in n)r.indexOf("__MACOSX")===-1&&(r.slice(-4).toLowerCase()===".shp"?(s.push(r.slice(0,-4)),n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n[r]):r.slice(-4).toLowerCase()===".prj"?n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=Ne(n[r]):r.slice(-5).toLowerCase()===".json"||e.indexOf(r.split(".").pop())>-1?s.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):(r.slice(-4).toLowerCase()===".dbf"||r.slice(-4).toLowerCase()===".cpg")&&(n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n[r]));if(!s.length)throw new Error("no layers founds");const i=s.map(function(a){let o,u;const c=a.lastIndexOf(".");return c>-1&&a.slice(c).indexOf("json")>-1?(o=JSON.parse(n[a]),o.fileName=a.slice(0,c)):e.indexOf(a.slice(c+1))>-1?(o=n[a],o.fileName=a):(n[a+".dbf"]&&(u=Qa(n[a+".dbf"],n[a+".cpg"])),o=to([Ya(n[a+".shp"],n[a+".prj"]),u]),o.fileName=a),o});return i.length===1?i[0]:i};async function J3(t,e){const r=await jn(t);return zh(r,e)}const K3=async t=>{const e=await Promise.all([jn(t,"shp"),jn(t,"prj")]);let r=!1;try{e[1]&&(r=Ne(e[1]))}catch{r=!1}return Ya(e[0],r)},Y3=async t=>{const[e,r]=await Promise.all([jn(t,"dbf"),jn(t,"cpg")]);if(e)return Qa(e,r)},nc=(t,e)=>{var n;return new W3(t,(n=globalThis==null?void 0:globalThis.document)==null?void 0:n.location).pathname.slice(-4).toLowerCase()===e},Q3=({shp:t,dbf:e,cpg:r,prj:n})=>{const s=[tb(t,n)];return e&&s.push(eb(e,r)),to(s)},Z3=async function(t,e){if(typeof t!="string"){if(Xr(t)||ArrayBuffer.isView(t)||Za(t))return zh(t);if(t.shp)return Q3(t);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(nc(t,".zip"))return J3(t,e);nc(t,".shp")&&(t=t.slice(0,-4));const r=await Promise.all([K3(t),Y3(t)]);return to(r)},tb=function(t,e){if(t=Hh(t),e=Uh(e),typeof e=="string")try{e=Ne(e)}catch{e=!1}return Ya(t,e)},eb=function(t,e){return t=Hh(t),e=Uh(e),Qa(t,e)};async function rb(t){var e;try{let r;if(typeof t=="string"){if(t.trim()==="")return{features:[],errors:[],detectedFormat:"shapefile"};const o=t.replace(/^data:.*?;base64,/,""),u=atob(o),c=new Uint8Array(u.length);for(let l=0;l<u.length;l++)c[l]=u.charCodeAt(l);r=c.buffer}else r=t;const n=await Z3(r),s=Array.isArray(n)?n:[n],i=[];let a=0;for(const o of s)for(const u of o.features)i.push({type:"Feature",id:((e=u.id)==null?void 0:e.toString())??`feature-${String(a)}`,geometry:u.geometry,properties:u.properties??{}}),a++;return i.length===0?{features:[],errors:[{message:"No features found in shapefile"}]}:{features:i,errors:[],detectedFormat:"shapefile",detectedProjection:"EPSG:4326"}}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Failed to parse shapefile"}]}}}function nb(t){return t.trim()?{features:[],errors:[{message:"Shapefile parsing requires async operation. Use parseShapefile() instead."}]}:{features:[],errors:[],detectedFormat:"shapefile"}}function sb(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function ib(t){const e=t.trim();return!!(e.startsWith("data:application/zip")||e.startsWith("data:application/octet-stream")||e.startsWith("data:application/x-zip")||e.startsWith("UEs")||e.startsWith("UEsD"))}const Wh={name:"shapefile",parse:nb,parseAsync:rb,format:sb,detect:ib},eo={geojson:xh,ewkt:Th,wkt:Ch,kml:Fh,gpx:Bh,shapefile:Wh,polyline6:Lh,polyline5:Rh,csv:Nh};function ha(t,e){const r=eo[e];return r?r.parse(t):{features:[],errors:[{message:`Unsupported format: ${e}`}]}}function or(t,e,r){const n=eo[e];if(!n)throw new Error(`Unsupported format: ${e}`);return n.format(t,r)}function Vh(t){const e=t.trim();if(!e)return null;for(const[r,n]of Object.entries(eo))if(n.detect(e))return r;return null}const ab=Object.freeze(Object.defineProperty({__proto__:null,csvParser:Nh,detectFormat:Vh,ewktParser:Th,format:or,geojsonParser:xh,gpxParser:Bh,kmlParser:Fh,parse:ha,polyline5Parser:Rh,polyline6Parser:Lh,shapefileParser:Wh,wktParser:Ch},Symbol.toStringTag,{value:"Module"}));function ob(t){const e=[],r=n=>{if(!n)return;if(n.type==="GeometryCollection"){for(const i of n.geometries)r(i);return}const s=i=>{if(Array.isArray(i))if(typeof i[0]=="number"&&typeof i[1]=="number")e.push(i);else for(const a of i)s(a)};s(n.coordinates)};for(const n of t)r(n.geometry);return e}function ub(){const{features:t,isParsing:e,inputProjection:r,detectedProjection:n}=le(),{outputFormat:s,outputProjection:i}=os(),a=F.useMemo(()=>{if(r!=="auto")return r;if(n)return n;if(t.length>0){const c=ob(t);return as(c)}return"EPSG:4326"},[r,n,t]),o=F.useMemo(()=>{if(t.length===0)return"";try{const c=a===i?t:t.map(l=>({...l,geometry:We(l.geometry,a,i)}));return or(c,s,{projection:i})}catch{return""}},[t,s,a,i]),u=F.useCallback(async()=>{o&&await navigator.clipboard.writeText(o)},[o]);return e?b.jsxs("div",{className:"mb-3 flex items-center gap-2 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:[b.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Parsing..."]}):b.jsxs("div",{className:"relative mb-3",children:[b.jsx("pre",{className:"max-h-48 min-h-[3rem] overflow-auto rounded-md border border-neutral-200 bg-neutral-100 p-3 pr-10 font-mono text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100",children:o||" "}),o&&b.jsx("button",{onClick:u,className:"absolute right-2 top-2 flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Copy to clipboard","aria-label":"Copy converted geometry to clipboard",children:b.jsx(Hl,{className:"h-4 w-4"})})]})}var Gt=63710088e-1,cb={centimeters:Gt*100,centimetres:Gt*100,degrees:360/(2*Math.PI),feet:Gt*3.28084,inches:Gt*39.37,kilometers:Gt/1e3,kilometres:Gt/1e3,meters:Gt,metres:Gt,miles:Gt/1609.344,millimeters:Gt*1e3,millimetres:Gt*1e3,nauticalmiles:Gt/1852,radians:1,yards:Gt*1.0936};function fa(t,e,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function lb(t,e,r={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return fa({type:"LineString",coordinates:t},e,r)}function da(t,e={}){const r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function hb(t,e="kilometers"){const r=cb[e];if(!r)throw new Error(e+" units is invalid");return t*r}function bs(t){return t%360*Math.PI/180}function sc(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function fb(t,e,r={}){var n=sc(t),s=sc(e),i=bs(s[1]-n[1]),a=bs(s[0]-n[0]),o=bs(n[1]),u=bs(s[1]),c=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(o)*Math.cos(u);return hb(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r.units)}function ro(t,e,r){if(t!==null)for(var n,s,i,a,o,u,c,l=0,h=0,f,p=t.type,g=p==="FeatureCollection",v=p==="Feature",y=g?t.features.length:1,S=0;S<y;S++){c=g?t.features[S].geometry:v?t.geometry:t,f=c?c.type==="GeometryCollection":!1,o=f?c.geometries.length:1;for(var A=0;A<o;A++){var P=0,k=0;if(a=f?c.geometries[A]:c,a!==null){u=a.coordinates;var R=a.type;switch(l=0,R){case null:break;case"Point":if(e(u,h,S,P,k)===!1)return!1;h++,P++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(e(u[n],h,S,P,k)===!1)return!1;h++,R==="MultiPoint"&&P++}R==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(s=0;s<u[n].length-l;s++){if(e(u[n][s],h,S,P,k)===!1)return!1;h++}R==="MultiLineString"&&P++,R==="Polygon"&&k++}R==="Polygon"&&P++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(k=0,s=0;s<u[n].length;s++){for(i=0;i<u[n][s].length-l;i++){if(e(u[n][s][i],h,S,P,k)===!1)return!1;h++}k++}P++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(ro(a.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xh(t,e){var r,n,s,i,a,o,u,c,l,h,f=0,p=t.type==="FeatureCollection",g=t.type==="Feature",v=p?t.features.length:1;for(r=0;r<v;r++){for(o=p?t.features[r].geometry:g?t.geometry:t,c=p?t.features[r].properties:g?t.properties:{},l=p?t.features[r].bbox:g?t.bbox:void 0,h=p?t.features[r].id:g?t.id:void 0,u=o?o.type==="GeometryCollection":!1,a=u?o.geometries.length:1,s=0;s<a;s++){if(i=u?o.geometries[s]:o,i===null){if(e(null,f,c,l,h)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(i,f,c,l,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(e(i.geometries[n],f,c,l,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function db(t,e,r){var n=r;return Xh(t,function(s,i,a,o,u){n=e(n,s,i,a,o,u)}),n}function pb(t,e){Xh(t,function(r,n,s,i,a){var o=r===null?null:r.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(fa(r,s,{bbox:i,id:a}),n,0)===!1?!1:void 0}var u;switch(o){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var c=0;c<r.coordinates.length;c++){var l=r.coordinates[c],h={type:u,coordinates:l};if(e(fa(h,s),n,c)===!1)return!1}})}function mb(t,e){pb(t,function(r,n,s){var i=0;if(r.geometry){var a=r.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var o,u=0,c=0,l=0;if(ro(r,function(h,f,p,g,v){if(o===void 0||n>u||g>c||v>l){o=h,u=n,c=g,l=v,i=0;return}var y=lb([o,h],r.properties);if(e(y,n,s,v,i)===!1)return!1;i++,o=h})===!1)return!1}}})}function gb(t,e,r){var n=r,s=!1;return mb(t,function(i,a,o,u,c){s===!1&&r===void 0?n=i:n=e(n,i,a,o,u,c),s=!0}),n}function yb(t){return db(t,(e,r)=>e+_b(r),0)}function _b(t){let e=0,r;switch(t.type){case"Polygon":return ic(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)e+=ic(t.coordinates[r]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ic(t){let e=0;if(t&&t.length>0){e+=Math.abs(ac(t[0]));for(let r=1;r<t.length;r++)e-=Math.abs(ac(t[r]))}return e}var vb=Gt*Gt/2,Li=Math.PI/180;function ac(t){const e=t.length-1;if(e<=2)return 0;let r=0,n=0;for(;n<e;){const s=t[n],i=t[n+1===e?0:n+1],a=t[n+2>=e?(n+2)%e:n+2],o=s[0]*Li,u=i[1]*Li,c=a[0]*Li;r+=(c-o)*Math.sin(u),n++}return r*vb}function Os(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const r=[1/0,1/0,-1/0,-1/0];return ro(t,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}function Eb(t,e={}){return gb(t,(r,n)=>{const s=n.geometry.coordinates;return r+fb(s[0],s[1],e)},0)}const bb={longitude:-.1276,latitude:51.5074,zoom:10},no=ts(t=>({viewState:bb,basemap:"osm",panToFeatureId:null,isEnvelopeHovered:!1,setViewState:e=>{t({viewState:e})},setBasemap:e=>{t({basemap:e})},panToFeature:e=>{t({panToFeatureId:e})},clearPanToFeature:()=>{t({panToFeatureId:null})},setEnvelopeHovered:e=>{t({isEnvelopeHovered:e})}}));function Sb(t){const e=[],r=n=>{if(!n)return;if(n.type==="GeometryCollection"){for(const i of n.geometries)r(i);return}const s=i=>{if(Array.isArray(i))if(typeof i[0]=="number"&&typeof i[1]=="number")e.push(i);else for(const a of i)s(a)};s(n.coordinates)};for(const n of t)r(n.geometry);return e}function Re(t,e){const r=e==="EPSG:4326"?6:2;return t.toFixed(r)}function wb(){const{features:t,inputProjection:e,detectedProjection:r}=le(),{outputProjection:n}=os(),{setEnvelopeHovered:s}=no(),i=F.useMemo(()=>{if(e!=="auto")return e;if(r)return r;if(t.length>0){const p=Sb(t);return as(p)}return"EPSG:4326"},[e,r,t]),a=F.useMemo(()=>{if(t.length===0)return null;try{const p=i==="EPSG:4326"?t:t.map(O=>({...O,geometry:We(O.geometry,i,"EPSG:4326")})),g=da(p),v=Os(g);if(!v.every(O=>isFinite(O)))return null;const[y,S,A,P]=v,k={type:"Polygon",coordinates:[[[y,S],[A,S],[A,P],[y,P],[y,S]]]},C=(n!=="EPSG:4326"?We(k,"EPSG:4326",n):k).coordinates[0];if(!C||C.length<4)return null;const x=C[0],G=C[2];if(!x||!G||x.length<2||G.length<2)return null;const E=x[0],w=x[1],T=G[0],I=G[1];return E===void 0||w===void 0||T===void 0||I===void 0?null:{sw:{x:E,y:w},ne:{x:T,y:I},wgs84Bbox:v}}catch{return null}},[t,i,n]),o=F.useCallback(async()=>{if(!a)return;const p=`SW: ${Re(a.sw.x,n)}, ${Re(a.sw.y,n)}
NE: ${Re(a.ne.x,n)}, ${Re(a.ne.y,n)}`;await navigator.clipboard.writeText(p)},[a,n]),u=F.useCallback(()=>{s(!0)},[s]),c=F.useCallback(()=>{s(!1)},[s]);if(!a)return null;const l=n==="EPSG:4326",h=l?"Lon":"E",f=l?"Lat":"N";return b.jsxs("div",{className:"mb-3 flex items-center justify-between rounded-md border border-neutral-200 bg-neutral-50 px-3 py-2 text-xs dark:border-neutral-700 dark:bg-neutral-800",onMouseEnter:u,onMouseLeave:c,children:[b.jsxs("div",{className:"flex flex-col gap-0.5 font-mono text-neutral-700 dark:text-neutral-300",children:[b.jsxs("div",{children:[b.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"SW: "}),h," ",Re(a.sw.x,n),", ",f," ",Re(a.sw.y,n)]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NE: "}),h," ",Re(a.ne.x,n),", ",f," ",Re(a.ne.y,n)]})]}),b.jsx("button",{onClick:o,className:"flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Copy to clipboard","aria-label":"Copy envelope coordinates to clipboard",children:b.jsx(Hl,{className:"h-4 w-4"})})]})}function xb(t){const e=[],r=n=>{if(!n)return;if(n.type==="GeometryCollection"){for(const i of n.geometries)r(i);return}const s=i=>{if(Array.isArray(i))if(typeof i[0]=="number"&&typeof i[1]=="number")e.push(i);else for(const a of i)s(a)};s(n.coordinates)};for(const n of t)r(n.geometry);return e}function Mb(t){switch(t){case"geojson":return"application/geo+json";case"wkt":case"ewkt":case"csv":return"text/plain";case"polyline5":case"polyline6":return"text/plain";default:return"text/plain"}}function Ab(t){switch(t){case"geojson":return"geojson";case"wkt":return"wkt";case"ewkt":return"ewkt";case"csv":return"csv";case"polyline5":case"polyline6":return"txt";default:return"txt"}}function Pb(){const{features:t,inputProjection:e,detectedProjection:r}=le(),{outputFormat:n,outputProjection:s}=os(),i=F.useMemo(()=>{if(e!=="auto")return e;if(r)return r;if(t.length>0){const c=xb(t);return as(c)}return"EPSG:4326"},[e,r,t]),a=F.useMemo(()=>{if(t.length===0)return"";try{const c=i===s?t:t.map(l=>({...l,geometry:We(l.geometry,i,s)}));return or(c,n,{projection:s})}catch{return""}},[t,n,i,s]),o=F.useCallback(()=>{if(!a)return;const c=Mb(n),l=Ab(n),h=new Blob([a],{type:c}),f=URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download=`geometry.${l}`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(f)},[a,n]),u=!a;return b.jsx("button",{onClick:o,disabled:u,className:"flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Download","aria-label":"Download converted geometry",children:b.jsx(m1,{className:"h-4 w-4"})})}const Cb=[{value:"geojson",label:"GeoJSON"},{value:"wkt",label:"WKT"},{value:"ewkt",label:"EWKT"},{value:"csv",label:"CSV"},{value:"polyline5",label:"Polyline (5)"},{value:"polyline6",label:"Polyline (6)"}],Tb=[{value:"EPSG:4326",label:"WGS84 (EPSG:4326)"},{value:"EPSG:3857",label:"Web Mercator (EPSG:3857)"},{value:"EPSG:27700",label:"British National Grid (EPSG:27700)"}];function Db(){const{outputFormat:t,outputProjection:e,setOutputFormat:r,setOutputProjection:n}=os(),{features:s}=le(),i=s.length>0;return b.jsxs("div",{className:"flex-1 p-3 md:p-4",children:[b.jsxs("div",{className:"mb-2 flex items-center justify-between md:mb-3",children:[b.jsx("h2",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Conversion"}),i&&b.jsx(Pb,{})]}),b.jsxs("div",{className:"mb-2 flex gap-2 md:mb-3",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("label",{className:"label",children:"Format"}),b.jsx("select",{value:t,onChange:a=>{r(a.target.value)},className:"input",children:Cb.map(a=>b.jsx("option",{value:a.value,children:a.label},a.value))})]}),b.jsxs("div",{className:"flex-1",children:[b.jsx("label",{className:"label",children:"Projection"}),b.jsx("select",{value:e,onChange:a=>{n(a.target.value)},className:"input",children:Tb.map(a=>b.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),b.jsx(ub,{}),i&&b.jsx(wb,{})]})}function Nb(t){if(!t||t.type!=="Polygon"&&t.type!=="MultiPolygon")return null;try{return yb({type:"Feature",geometry:t,properties:{}})}catch{return null}}function Ib(t){if(!t||t.type!=="LineString"&&t.type!=="MultiLineString")return null;try{return Eb({type:"Feature",geometry:t,properties:{}},{units:"meters"})}catch{return null}}function Jh(t){if(!t)return 0;switch(t.type){case"Point":return 1;case"MultiPoint":case"LineString":return t.coordinates.length;case"MultiLineString":case"Polygon":return t.coordinates.reduce((e,r)=>e+r.length,0);case"MultiPolygon":return t.coordinates.reduce((e,r)=>e+r.reduce((n,s)=>n+s.length,0),0);case"GeometryCollection":return t.geometries.reduce((e,r)=>e+Jh(r),0);default:return 0}}function kb(t){return t?t.replace(/([A-Z])/g," $1").trim():"Unknown"}function Rb(t){return t===null?"-":t>=1e6?`${(t/1e6).toFixed(2)} km`:t>=1e4?`${(t/1e4).toFixed(2)} ha`:`${t.toFixed(2)} m`}function Lb(t){return t===null?"-":t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(2)} m`}const Gb="geofiddle-geocode",Ob=1,Jr="geocode-results",Fb=10080*60*1e3;let Ss=null;function Kh(){return Ss||(Ss=new Promise((t,e)=>{const r=indexedDB.open(Gb,Ob);r.onerror=()=>{var n;e(new Error(((n=r.error)==null?void 0:n.message)??"Failed to open IndexedDB"))},r.onsuccess=()=>{t(r.result)},r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(Jr)||s.createObjectStore(Jr,{keyPath:"key"})}}),Ss)}function Bb(t,e){const r=Math.round(t*1e3)/1e3,n=Math.round(e*1e3)/1e3;return`${String(r)},${String(n)}`}async function jb(t){try{const e=await Kh();return await new Promise(r=>{const i=e.transaction(Jr,"readonly").objectStore(Jr).get(t);i.onsuccess=()=>{const a=i.result;a&&Date.now()-a.timestamp<Fb?r(a.location):r(null)},i.onerror=()=>{r(null)}})}catch{return null}}async function $b(t,e){try{const r=await Kh();await new Promise(n=>{const s=r.transaction(Jr,"readwrite"),i=s.objectStore(Jr),a={key:t,location:e,timestamp:Date.now()};i.put(a),s.oncomplete=()=>{n()},s.onerror=()=>{n()}})}catch{}}const qb="https://nominatim.openstreetmap.org/reverse",Ub=1e3;let oc=0;const Gi=new Map;function Hb(t){if(!t.address)return null;const{city:e,town:r,village:n,municipality:s,county:i,state:a,country:o}=t.address,u=e??r??n??s??i;return u&&o?`${u}, ${o}`:a&&o?`${a}, ${o}`:o||null}async function zb(t,e){const r=Bb(t,e),n=Gi.get(r);if(n)return n;const s=await jb(r);if(s)return s;const a=Date.now()-oc,o=Math.max(0,Ub-a),u=new Promise(c=>{setTimeout(()=>{oc=Date.now(),(async()=>{try{const h=new URL(qb);h.searchParams.set("lat",String(t)),h.searchParams.set("lon",String(e)),h.searchParams.set("format","json"),h.searchParams.set("zoom","10");const f=await fetch(h.toString(),{headers:{"User-Agent":"GeoFiddle/2.0 (https://geofiddle.com)"}});if(!f.ok)return null;const p=await f.json(),g=Hb(p);return g&&await $b(r,g),g}catch{return null}finally{Gi.delete(r)}})().then(c).catch(()=>{c(null)})},o)});return Gi.set(r,u),u}function Wb(t,e){const[r,n]=F.useState(null),[s,i]=F.useState(!1),a=F.useRef(!1);return F.useEffect(()=>{if(t===null||e===null){n(null),i(!1);return}if(t<-90||t>90||e<-180||e>180){n(null),i(!1);return}return a.current=!1,i(!0),zb(t,e).then(o=>{a.current||(n(o),i(!1))}).catch(()=>{a.current||(n(null),i(!1))}),()=>{a.current=!0}},[t,e]),{location:r,isLoading:s}}function Yh(t){if(!t||typeof t!="object")return null;const e=t;if(e.type==="GeometryCollection"&&Array.isArray(e.geometries)){for(const a of e.geometries){const o=Yh(a);if(o)return o}return null}if(!e.coordinates)return null;const r=[],n=a=>{if(Array.isArray(a))if(typeof a[0]=="number"&&typeof a[1]=="number")r.push([a[0],a[1]]);else for(const o of a)n(o)};if(n(e.coordinates),r.length===0)return null;let s=0,i=0;for(const[a,o]of r)s+=a,i+=o;return{lon:s/r.length,lat:i/r.length}}function Vb(t){switch(t){case"Point":return mu;case"MultiPoint":return d1;case"LineString":return gu;case"MultiLineString":return gu;case"Polygon":return Vl;case"MultiPolygon":return v1;case"GeometryCollection":return u1;default:return mu}}function Xb(t){return t==null?"":typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"?String(t):JSON.stringify(t)}function Jb({feature:t,calculations:e}){const{geometry:r,properties:n}=t,s=F.useMemo(()=>Yh(r),[r]),{location:i,isLoading:a}=Wb((s==null?void 0:s.lat)??null,(s==null?void 0:s.lon)??null),o=e.area!==null&&e.area>0,u=e.length!==null&&e.length>0,c=F.useMemo(()=>Object.entries(n).filter(([l])=>l!=="name").filter(([,l])=>l!=null),[n]);return b.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 border-t border-neutral-200 pt-2 text-xs dark:border-neutral-700",children:[b.jsxs("div",{className:"col-span-2 flex items-center gap-1.5 text-neutral-600 dark:text-neutral-400",children:[b.jsx(zl,{className:"h-3.5 w-3.5 shrink-0"}),a?b.jsx("span",{className:"animate-pulse text-neutral-400",children:"Loading location..."}):i?b.jsx("span",{className:"truncate",title:i,children:i}):b.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Location unavailable"})]}),b.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[b.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Points:"})," ",e.pointCount]}),o&&b.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[b.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Area:"})," ",e.formattedArea]}),u&&b.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[b.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:r.type.includes("Polygon")?"Perimeter:":"Length:"})," ",e.formattedLength]}),s&&b.jsxs("div",{className:"col-span-2 text-neutral-500 dark:text-neutral-400",children:[b.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Centroid:"})," ",s.lat.toFixed(6),", ",s.lon.toFixed(6)]}),c.length>0&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"col-span-2 mt-2 border-t border-neutral-200 pt-2 font-medium text-neutral-700 dark:border-neutral-700 dark:text-neutral-300",children:"Properties"}),c.map(([l,h])=>b.jsxs("div",{className:"col-span-2 text-neutral-500 dark:text-neutral-400",children:[b.jsxs("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:[l,":"]})," ",b.jsx("span",{className:"break-all",children:Xb(h)})]},l))]})]})}function Kb({feature:t,index:e,isSelected:r,onSelect:n,onHover:s}){const[i,a]=F.useState(!1),{geometry:o,properties:u}=t,c=()=>{s(!0)},l=()=>{s(!1)},h=F.useMemo(()=>{const A=Nb(o),P=Ib(o),k=Jh(o),R=kb(o.type);return{area:A,length:P,pointCount:k,typeLabel:R,formattedArea:Rb(A),formattedLength:Lb(P)}},[o]),f=u.name,p=typeof f=="string"&&f.trim()?f:`Feature ${String(e+1)}`,g=Vb(o.type),v=A=>{A.stopPropagation(),a(P=>!P)},y=A=>{A.key==="Enter"?(A.preventDefault(),n()):A.key===" "&&(A.preventDefault(),a(P=>!P))},S=F.useMemo(()=>{const A=[h.typeLabel];return h.pointCount>1&&A.push(`${String(h.pointCount)} pts`),h.area!==null&&h.area>0?A.push(h.formattedArea):h.length!==null&&h.length>0&&A.push(h.formattedLength),A.join("  ")},[h]);return b.jsxs("div",{onClick:n,onKeyDown:y,onMouseEnter:c,onMouseLeave:l,tabIndex:0,role:"button","aria-expanded":i,"aria-selected":r,className:`cursor-pointer border-b border-neutral-200 px-3 py-2 transition-colors hover:bg-neutral-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary-500 dark:border-neutral-700 dark:hover:bg-neutral-800 ${r?"bg-blue-50 hover:bg-blue-100 dark:bg-blue-950 dark:hover:bg-blue-900":"bg-white dark:bg-neutral-900"}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:v,className:"flex h-6 w-6 shrink-0 items-center justify-center rounded text-neutral-400 hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300","aria-label":i?"Collapse details":"Expand details",children:i?b.jsx(l1,{className:"h-4 w-4"}):b.jsx(h1,{className:"h-4 w-4"})}),b.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-primary-100 text-primary-600 dark:bg-primary-900 dark:text-primary-400":"bg-neutral-100 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400"}`,children:b.jsx(g,{className:"h-4 w-4"})}),b.jsxs("div",{className:"min-w-0 flex-1",children:[b.jsx("div",{className:"truncate text-sm font-medium text-neutral-900 dark:text-neutral-100",children:p}),b.jsx("div",{className:"truncate text-xs text-neutral-500 dark:text-neutral-400",children:S})]}),b.jsxs("div",{className:"shrink-0 text-xs font-medium text-neutral-400 dark:text-neutral-500",children:["#",e+1]})]}),i&&b.jsx(Jb,{feature:t,calculations:h})]})}function Yb({onPanToFeature:t}){const{features:e,selectedFeatureId:r,setSelectedFeatureId:n,setHoveredFeatureId:s}=le(),i=F.useCallback(o=>{r===o?n(null):(n(o),t==null||t(o))},[r,n,t]),a=F.useCallback(o=>{s(o)},[s]);return e.length===0?b.jsx("div",{className:"rounded-md border border-neutral-200 bg-neutral-50 p-4 text-center text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:"No geometries to display"}):b.jsxs("div",{className:"overflow-hidden rounded-md border border-neutral-200 dark:border-neutral-700",children:[b.jsx("div",{className:"max-h-80 overflow-auto",children:e.map((o,u)=>b.jsx(Kb,{feature:o,index:u,isSelected:r===o.id,onSelect:()=>{i(o.id)},onHover:c=>{a(c?o.id:null)}},o.id))}),b.jsxs("div",{className:"border-t border-neutral-200 bg-neutral-50 px-3 py-2 text-xs text-neutral-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:[e.length," ",e.length===1?"geometry":"geometries"]})]})}function Qh(){const t=no(e=>e.panToFeature);return b.jsxs("div",{className:"flex h-full flex-col overflow-y-auto bg-neutral-50 dark:bg-neutral-900",children:[b.jsx(KE,{}),b.jsxs("div",{className:"border-t border-neutral-200 p-3 md:p-4 dark:border-neutral-700",children:[b.jsx("h3",{className:"mb-2 text-sm font-medium text-neutral-700 md:mb-3 dark:text-neutral-300",children:"Geometries"}),b.jsx(Yb,{onPanToFeature:t})]}),b.jsx(Db,{})]})}const Qb=wn(()=>import("./maplibre-gl-aGn2FQTM.js").then(t=>t.m),__vite__mapDeps([0,1]),import.meta.url),Zb=F.forwardRef(function(e,r){return sf(e,r,Qb)}),tS=af,Vt=uf,pa=of,eS={id:"geometry-fill",type:"fill",source:"geometry-source",paint:{"fill-color":"#3b82f6","fill-opacity":.2},filter:["==","$type","Polygon"]},rS={id:"geometry-line",type:"line",source:"geometry-source",paint:{"line-color":"#2563eb","line-width":2},filter:["in","$type","LineString","Polygon"]},nS={id:"geometry-point",type:"circle",source:"geometry-source",paint:{"circle-radius":6,"circle-color":"#2563eb","circle-stroke-color":"#ffffff","circle-stroke-width":2},filter:["==","$type","Point"]},sS={id:"geometry-fill-hover",type:"fill",source:"geometry-source",paint:{"fill-color":"#8b5cf6","fill-opacity":.3}},iS={id:"geometry-line-hover",type:"line",source:"geometry-source",paint:{"line-color":"#7c3aed","line-width":3}},aS={id:"geometry-point-hover",type:"circle",source:"geometry-source",paint:{"circle-radius":8,"circle-color":"#8b5cf6","circle-stroke-color":"#ffffff","circle-stroke-width":2}},oS={id:"geometry-fill-selected",type:"fill",source:"geometry-source",paint:{"fill-color":"#f97316","fill-opacity":.4}},uS={id:"geometry-line-selected",type:"line",source:"geometry-source",paint:{"line-color":"#ea580c","line-width":4}},cS={id:"geometry-point-selected",type:"circle",source:"geometry-source",paint:{"circle-radius":10,"circle-color":"#f97316","circle-stroke-color":"#ffffff","circle-stroke-width":3}},lS={id:"envelope-fill",type:"fill",source:"envelope-source",paint:{"fill-color":"#10b981","fill-opacity":.1}},hS={id:"envelope-line",type:"line",source:"envelope-source",paint:{"line-color":"#059669","line-width":2,"line-dasharray":[4,2]}};function fS({features:t,selectedFeatureId:e,hoveredFeatureId:r,isEnvelopeHovered:n,envelope:s}){const i=F.useMemo(()=>{const g=e?["==","id",e]:null,v=r&&r!==e?["==","id",r]:null;let y;return e&&r&&r!==e?y=["all",["!=","id",e],["!=","id",r]]:e?y=["!=","id",e]:r&&(y=["!=","id",r]),{selectedFilter:g,hoverFilter:v,baseExcludeFilter:y}},[e,r]),a=F.useMemo(()=>{if(!n||!s)return null;const[g,v,y,S]=s;return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[g,v],[y,v],[y,S],[g,S],[g,v]]]},properties:{}}]}},[n,s]);if(t.length===0)return null;const o={type:"FeatureCollection",features:t.map(g=>({...g,properties:{...g.properties,id:g.id}}))},{selectedFilter:u,hoverFilter:c,baseExcludeFilter:l}=i,h=l?["all",["==","$type","Polygon"],l]:["==","$type","Polygon"],f=l?["all",["in","$type","LineString","Polygon"],l]:["in","$type","LineString","Polygon"],p=l?["all",["==","$type","Point"],l]:["==","$type","Point"];return b.jsxs(b.Fragment,{children:[b.jsxs(pa,{id:"geometry-source",type:"geojson",data:o,children:[b.jsx(Vt,{...eS,filter:h}),b.jsx(Vt,{...rS,filter:f}),b.jsx(Vt,{...nS,filter:p}),c&&b.jsxs(b.Fragment,{children:[b.jsx(Vt,{...sS,filter:["all",["==","$type","Polygon"],c]}),b.jsx(Vt,{...iS,filter:["all",["in","$type","LineString","Polygon"],c]}),b.jsx(Vt,{...aS,filter:["all",["==","$type","Point"],c]})]}),u&&b.jsxs(b.Fragment,{children:[b.jsx(Vt,{...oS,filter:["all",["==","$type","Polygon"],u]}),b.jsx(Vt,{...uS,filter:["all",["in","$type","LineString","Polygon"],u]}),b.jsx(Vt,{...cS,filter:["all",["==","$type","Point"],u]})]})]}),a&&b.jsxs(pa,{id:"envelope-source",type:"geojson",data:a,children:[b.jsx(Vt,{...lS}),b.jsx(Vt,{...hS})]})]})}function dS({viewState:t,onViewStateChange:e,basemap:r,features:n,selectedFeatureId:s,hoveredFeatureId:i,isEnvelopeHovered:a,envelope:o,isDrawing:u,drawingPreview:c,onMapClick:l,children:h}){const f=F.useRef(null),p=F.useCallback(y=>{e({longitude:y.viewState.longitude,latitude:y.viewState.latitude,zoom:y.viewState.zoom})},[e]),g=F.useCallback(y=>{l({lng:y.lngLat.lng,lat:y.lngLat.lat})},[l]),v=r==="satellite"?"https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_key":"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json";return b.jsxs(Zb,{ref:f,...t,onMove:p,onClick:g,mapStyle:v,style:{width:"100%",height:"100%"},cursor:u?"crosshair":void 0,children:[b.jsx(tS,{position:"top-right"}),h,c&&b.jsxs(pa,{id:"drawing-preview",type:"geojson",data:c,children:[b.jsx(Vt,{id:"drawing-preview-line",type:"line",paint:{"line-color":"#f97316","line-width":2,"line-dasharray":[2,2]},filter:["==","$type","LineString"]}),b.jsx(Vt,{id:"drawing-preview-points",type:"circle",paint:{"circle-radius":6,"circle-color":"#f97316","circle-stroke-color":"#ffffff","circle-stroke-width":2},filter:["==","$type","Point"]})]}),b.jsx(fS,{features:n,selectedFeatureId:s,hoveredFeatureId:i,isEnvelopeHovered:a,envelope:o})]})}const Zh=ts(t=>({mode:"none",currentPoints:[],setMode:e=>{t({mode:e,currentPoints:[]})},addPoint:e=>{t(r=>({currentPoints:[...r.currentPoints,e]}))},clearPoints:()=>{t({currentPoints:[]})},reset:()=>{t({mode:"none",currentPoints:[]})}}));function pS(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const a=u=>u===null?null:JSON.parse(u,void 0),o=(i=r.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const ma=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return ma(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return ma(n)(r)}}}},mS=(t,e)=>(r,n,s)=>{let i={storage:pS(()=>localStorage),partialize:y=>y,version:0,merge:(y,S)=>({...S,...y}),...e},a=!1,o=0;const u=new Set,c=new Set;let l=i.storage;if(!l)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...y)},n,s);const h=()=>{const y=i.partialize({...n()});return l.setItem(i.name,{state:y,version:i.version})},f=s.setState;s.setState=(y,S)=>(f(y,S),h());const p=t((...y)=>(r(...y),h()),n,s);s.getInitialState=()=>p;let g;const v=()=>{var y,S;if(!l)return;const A=++o;a=!1,u.forEach(k=>{var R;return k((R=n())!=null?R:p)});const P=((S=i.onRehydrateStorage)==null?void 0:S.call(i,(y=n())!=null?y:p))||void 0;return ma(l.getItem.bind(l))(i.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==i.version){if(i.migrate){const R=i.migrate(k.state,k.version);return R instanceof Promise?R.then(C=>[!0,C]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var R;if(A!==o)return;const[C,x]=k;if(g=i.merge(x,(R=n())!=null?R:p),r(g,!0),C)return h()}).then(()=>{A===o&&(P==null||P(g,void 0),g=n(),a=!0,c.forEach(k=>k(g)))}).catch(k=>{A===o&&(P==null||P(void 0,k))})};return s.persist={setOptions:y=>{i={...i,...y},y.storage&&(l=y.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:y=>(u.add(y),()=>{u.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||v(),g||p},gS=mS,yS=33.33,so=ts()(gS(t=>({theme:"system",leftPanelWidthPercent:yS,autoPanToGeometry:!0,mapProvider:"maplibre",setTheme:e=>{t({theme:e})},setLeftPanelWidthPercent:e=>{t({leftPanelWidthPercent:e})},setAutoPanToGeometry:e=>{t({autoPanToGeometry:e})},toggleAutoPanToGeometry:()=>{t(e=>({autoPanToGeometry:!e.autoPanToGeometry}))},setMapProvider:e=>{t({mapProvider:e})}}),{name:"geofiddle-preferences"}));function tf(t){const{geometry:e,rawText:r,inputFormat:n,inputProjection:s,detectedFormat:i,detectedProjection:a}=t,o=n!=="auto"?n:i??"geojson",u=s!=="auto"?s:a??"EPSG:4326",l={type:"Feature",geometry:u!=="EPSG:4326"?We(e,"EPSG:4326",u):e,properties:{}},h=r.trim();if(!h)return{newText:or([l],o,{projection:u}),effectiveFormat:o,effectiveProjection:u};const f=ha(h,o);if(f.features.length>0){const g=[...f.features,l];return{newText:or(g,o,{projection:u}),effectiveFormat:o,effectiveProjection:u}}const p=Vh(h);if(p&&p!==o){const g=ha(h,p);if(g.features.length>0){const v=[...g.features,l];return{newText:or(v,p,{projection:u}),effectiveFormat:p,effectiveProjection:u}}}return{newText:or([l],o,{projection:u}),effectiveFormat:o,effectiveProjection:u}}function _S({onFitBounds:t,hasFeatures:e=!1}){const{mode:r,setMode:n,currentPoints:s,reset:i}=Zh(),{rawText:a,inputFormat:o,inputProjection:u,detectedFormat:c,detectedProjection:l,setRawText:h}=le(),{autoPanToGeometry:f,toggleAutoPanToGeometry:p,mapProvider:g,setMapProvider:v}=so(),y=F.useCallback(()=>{v(g==="maplibre"?"google":"maplibre")},[g,v]),S=F.useCallback(C=>{r===C?i():n(C)},[r,n,i]),A=F.useCallback(()=>{if(s.length===0){i();return}let C=null;const x=s[0];if(r==="point"&&s.length>=1&&x?C={type:"Point",coordinates:x}:r==="line"&&s.length>=2?C={type:"LineString",coordinates:s}:r==="polygon"&&s.length>=3&&x&&(C={type:"Polygon",coordinates:[[...s,x]]}),C){const G=tf({geometry:C,rawText:a,inputFormat:o,inputProjection:u,detectedFormat:c,detectedProjection:l});h(G.newText)}i()},[r,s,a,o,u,c,l,h,i]),P=F.useCallback(()=>{i()},[i]),k=r!=="none",R=r==="point"&&s.length>=1||r==="line"&&s.length>=2||r==="polygon"&&s.length>=3;return b.jsxs("div",{className:"absolute left-2 top-2 flex flex-col gap-1",children:[b.jsxs("div",{className:"flex gap-1 rounded bg-white p-1 shadow-md",children:[b.jsx("button",{onClick:()=>{S("point")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${r==="point"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw point","aria-label":"Draw point","aria-pressed":r==="point",children:b.jsx(zl,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>{S("line")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${r==="line"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw line","aria-label":"Draw line","aria-pressed":r==="line",children:b.jsx(M1,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>{S("polygon")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${r==="polygon"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw polygon","aria-label":"Draw polygon","aria-pressed":r==="polygon",children:b.jsx(Vl,{className:"h-4 w-4"})}),b.jsx("div",{className:"mx-0.5 w-px self-stretch bg-neutral-200"}),b.jsx("button",{onClick:p,className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${f?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:f?"Auto-pan enabled (click to disable)":"Auto-pan disabled (click to enable)","aria-label":f?"Disable auto-pan to geometry":"Enable auto-pan to geometry","aria-pressed":f,children:f?b.jsx(S1,{className:"h-4 w-4"}):b.jsx(w1,{className:"h-4 w-4"})}),e&&t&&b.jsx("button",{onClick:t,className:"flex h-8 w-8 items-center justify-center rounded text-neutral-700 transition-colors hover:bg-neutral-100",title:"Fit map to geometry","aria-label":"Fit map to geometry",children:b.jsx(x1,{className:"h-4 w-4"})}),b.jsx("div",{className:"mx-0.5 w-px self-stretch bg-neutral-200"}),b.jsx("button",{onClick:y,className:"flex h-8 w-8 items-center justify-center rounded text-neutral-700 transition-colors hover:bg-neutral-100",title:g==="maplibre"?"Switch to Google Maps":"Switch to MapLibre","aria-label":g==="maplibre"?"Switch to Google Maps":"Switch to MapLibre",children:g==="maplibre"?b.jsx(Wl,{className:"h-4 w-4"}):b.jsx(_1,{className:"h-4 w-4"})})]}),k&&b.jsxs("div",{className:"rounded bg-white p-2 shadow-md",children:[b.jsxs("div",{className:"mb-2 text-xs text-neutral-600",children:[r==="point"&&"Click to place point",r==="line"&&`Click to add points (${String(s.length)} added)`,r==="polygon"&&`Click to add vertices (${String(s.length)} added)`]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsxs("button",{onClick:A,disabled:!R,className:"flex flex-1 items-center justify-center gap-1 rounded bg-primary-500 px-2 py-1 text-xs text-white hover:bg-primary-600 disabled:opacity-50",children:[b.jsx(c1,{className:"h-3 w-3"}),"Finish"]}),b.jsx("button",{onClick:P,className:"flex items-center justify-center rounded border border-neutral-300 px-2 py-1 text-xs text-neutral-700 hover:bg-neutral-100",children:b.jsx(N1,{className:"h-3 w-3"})})]})]})]})}const vS=F.lazy(()=>wn(()=>import("./index-VbYDf0vg.js"),__vite__mapDeps([2,1]),import.meta.url).then(t=>({default:t.GoogleMap})));function uc(t){const e=[],r=n=>{if(!n)return;if(n.type==="GeometryCollection"){for(const i of n.geometries)r(i);return}const s=i=>{if(Array.isArray(i))if(typeof i[0]=="number"&&typeof i[1]=="number")e.push(i);else for(const a of i)s(a)};s(n.coordinates)};for(const n of t)r(n.geometry);return e}function ES(){return b.jsx("div",{className:"flex h-full w-full items-center justify-center bg-neutral-100",children:b.jsx("div",{className:"text-neutral-600",children:"Loading map..."})})}function ef(){const{viewState:t,setViewState:e,basemap:r,panToFeatureId:n,clearPanToFeature:s,isEnvelopeHovered:i}=no(),{features:a,selectedFeatureId:o,hoveredFeatureId:u,rawText:c,inputFormat:l,inputProjection:h,detectedFormat:f,detectedProjection:p,setCoordinateError:g,setRawText:v}=le(),{mode:y,currentPoints:S,addPoint:A,reset:P}=Zh(),{autoPanToGeometry:k,mapProvider:R}=so(),C=F.useMemo(()=>{if(h!=="auto")return h;if(p)return p;if(a.length>0){const N=uc(a);return as(N)}return"EPSG:4326"},[h,p,a]),{transformedFeatures:x,coordinateError:G}=F.useMemo(()=>{if(a.length===0)return{transformedFeatures:[],coordinateError:null};const N=C==="EPSG:4326"?a:a.map(L=>({...L,geometry:We(L.geometry,C,"EPSG:4326")})),B=uc(N),U=bh(B);if(!U.valid&&U.invalidCoord){const[L,et]=U.invalidCoord;return{transformedFeatures:[],coordinateError:`Coordinates out of range for WGS84: (${String(L)}, ${String(et)}). Longitude must be -180 to 180, latitude must be -90 to 90. Try selecting a different input projection.`}}return{transformedFeatures:N,coordinateError:null}},[a,C]);F.useEffect(()=>{g(G)},[G,g]);const E=F.useCallback(()=>{if(x.length===0)return null;const N=da(x),B=Os(N);if(!B.every(X=>isFinite(X)))return null;const[U,L,et,Q]=B,Y=(U+et)/2,V=(L+Q)/2,ht=Q-L,ot=et-U,tt=Math.max(ht,ot);let ct=10;return tt>0&&(ct=Math.floor(Math.log2(360/tt))-1,ct=Math.max(1,Math.min(ct,18))),{longitude:Y,latitude:V,zoom:ct}},[x]),w=F.useCallback(()=>{const N=E();N&&e(N)},[E,e]);F.useEffect(()=>{k&&w()},[k,w]),F.useEffect(()=>{if(!n)return;const N=x.find(B=>B.id===n);if(!N){s();return}try{const B=Os(N);if(!B.every(X=>isFinite(X))){s();return}const[U,L,et,Q]=B,Y=(U+et)/2,V=(L+Q)/2,ht=Q-L,ot=et-U,tt=Math.max(ht,ot);let ct=14;tt>0&&(ct=Math.floor(Math.log2(360/tt))-1,ct=Math.max(1,Math.min(ct,18))),e({longitude:Y,latitude:V,zoom:ct})}finally{s()}},[n,x,e,s]);const T=F.useCallback(N=>{if(y==="none")return;const{lng:B,lat:U}=N,L=[B,U];if(y==="point"){const et=tf({geometry:{type:"Point",coordinates:L},rawText:c,inputFormat:l,inputProjection:h,detectedFormat:f,detectedProjection:p});v(et.newText),P()}else A(L)},[y,c,l,h,f,p,v,A,P]),I=F.useMemo(()=>{if(y==="none"||S.length===0)return null;const N=[];if(S.forEach((B,U)=>{N.push({type:"Feature",geometry:{type:"Point",coordinates:B},properties:{index:U}})}),S.length>=2){const B=S[0],U=y==="polygon"&&S.length>=3&&B?[...S,B]:S;N.push({type:"Feature",geometry:{type:"LineString",coordinates:U},properties:{}})}return{type:"FeatureCollection",features:N}},[y,S]),O=x.length>0,q=y!=="none",J=F.useMemo(()=>{if(x.length===0)return null;try{const N=da(x),B=Os(N);return B.every(U=>isFinite(U))?B:null}catch{return null}},[x]),Z={viewState:t,onViewStateChange:e,basemap:r,features:x,selectedFeatureId:o,hoveredFeatureId:u,isEnvelopeHovered:i,envelope:J,isDrawing:q,drawingPreview:I,onMapClick:T},W=b.jsx(_S,{onFitBounds:w,hasFeatures:O});return R==="google"?b.jsx(F.Suspense,{fallback:b.jsx(ES,{}),children:b.jsx(vS,{...Z,children:W})}):b.jsx(dS,{...Z,children:W})}function bS(){const[t,e]=F.useState("input");return b.jsxs("main",{id:"main-content",className:"flex flex-1 flex-col overflow-hidden",role:"main",children:[b.jsx("div",{className:"flex-1 overflow-hidden",children:t==="input"?b.jsx("div",{className:"h-full overflow-y-auto",children:b.jsx(Qh,{})}):b.jsx(ef,{})}),b.jsxs("nav",{className:"flex shrink-0 border-t border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-900",role:"tablist","aria-label":"Main navigation",children:[b.jsxs("button",{role:"tab","aria-selected":t==="input","aria-controls":"input-panel",onClick:()=>{e("input")},className:`flex flex-1 items-center justify-center gap-1.5 py-2 text-xs font-medium transition-colors ${t==="input"?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[b.jsx(y1,{className:"h-4 w-4"}),b.jsx("span",{children:"Input"})]}),b.jsxs("button",{role:"tab","aria-selected":t==="map","aria-controls":"map-panel",onClick:()=>{e("map")},className:`flex flex-1 items-center justify-center gap-1.5 py-2 text-xs font-medium transition-colors ${t==="map"?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[b.jsx(Wl,{className:"h-4 w-4"}),b.jsx("span",{children:"Map"})]})]})]})}const cc=768;function SS(){const[t,e]=F.useState(()=>typeof window>"u"?!1:window.innerWidth<cc);return F.useEffect(()=>{const r=window.matchMedia(`(max-width: ${String(cc-1)}px)`),n=s=>{e(s.matches)};return e(r.matches),r.addEventListener("change",n),()=>{r.removeEventListener("change",n)}},[]),t}const wS=20,xS=66.67;function MS(){const{theme:t,setTheme:e,leftPanelWidthPercent:r,setLeftPanelWidthPercent:n}=so(),s=SS();return F.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),t==="system"){const a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(a)}else i.classList.add(t)},[t]),F.useEffect(()=>{if(t!=="system")return;const i=window.matchMedia("(prefers-color-scheme: dark)"),a=o=>{const u=window.document.documentElement;u.classList.remove("light","dark"),u.classList.add(o.matches?"dark":"light")};return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[t]),b.jsxs("div",{className:"flex h-full flex-col",children:[b.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),b.jsx(I1,{theme:t,onThemeChange:e}),s?b.jsx(bS,{}):b.jsx(k1,{left:b.jsx(Qh,{}),right:b.jsx(ef,{}),leftWidthPercent:r,minLeftWidthPercent:wS,maxLeftWidthPercent:xS,onLeftWidthPercentChange:n})]})}function AS(t){const e=[],r=n=>{if(!n)return;if(n.type==="GeometryCollection"){for(const i of n.geometries)r(i);return}const s=i=>{if(Array.isArray(i))if(typeof i[0]=="number"&&typeof i[1]=="number")e.push(i);else for(const a of i)s(a)};"coordinates"in n&&s(n.coordinates)};for(const n of t)r(n.geometry);return e}const PS=100*1024,CS=150;function TS(){const{rawText:t,inputFormat:e,inputProjection:r,setFeatures:n,setParseError:s,setDetectedFormat:i,setDetectedProjection:a,setIsParsing:o}=le(),u=F.useRef(null),c=F.useRef(0),l=F.useRef();F.useEffect(()=>()=>{u.current&&(u.current.terminate(),u.current=null),l.current&&clearTimeout(l.current)},[]);const h=F.useCallback(()=>(u.current||(u.current=new Worker(new URL(""+new URL("parser.worker-DFuNZJ12.js",import.meta.url).href,import.meta.url),{type:"module"})),u.current),[]),f=F.useCallback(g=>{const v=h(),y=++c.current;o(!0),v.onmessage=A=>{const P=A.data;P.id===c.current&&(o(!1),P.parseError?s(P.parseError):n(P.features),i(P.detectedFormat),a(P.detectedProjection))},v.onerror=A=>{o(!1),s(`Worker error: ${A.message}`)};const S={id:y,rawText:g,inputFormat:e,inputProjection:r};v.postMessage(S)},[h,e,r,n,s,i,a,o]),p=F.useCallback(async g=>{const{parse:v}=await wn(async()=>{const{parse:C}=await Promise.resolve().then(()=>ab);return{parse:C}},void 0,import.meta.url),{detectFormat:y,detectProjection:S}=await wn(async()=>{const{detectFormat:C,detectProjection:x}=await import("./format-detection-Ich9T_gi.js");return{detectFormat:C,detectProjection:x}},__vite__mapDeps([3,1]),import.meta.url),{detectProjectionFromCoordinates:A}=await wn(async()=>{const{detectProjectionFromCoordinates:C}=await Promise.resolve().then(()=>zE);return{detectProjectionFromCoordinates:C}},void 0,import.meta.url);if(!g.trim()){n([]),i(null),a(null);return}const P=e==="auto"?y(g):e,k=e==="auto"?P:null;if(!P){s("Could not auto-detect format. Please select a format manually.");return}let R=r==="auto"?S(g,P):null;try{const C=v(g,P);if(C.errors.length>0)s(C.errors.map(x=>x.message).join(`
`));else if(n(C.features),r==="auto"&&!R&&!C.detectedProjection&&C.features.length>0){const x=AS(C.features);x.length>0&&(R=A(x))}i(k),a(R??C.detectedProjection??null)}catch(C){s(C instanceof Error?C.message:"Parsing failed")}},[e,r,n,s,i,a]);F.useEffect(()=>{if(l.current&&clearTimeout(l.current),!t.trim()){n([]),i(null),a(null),o(!1);return}return l.current=setTimeout(()=>{t.length>PS?f(t):p(t)},CS),()=>{l.current&&clearTimeout(l.current)}},[t,e,r,f,p,n,i,a,o])}function DS(){const{rawText:t,inputFormat:e,inputProjection:r,setRawText:n,setInputFormat:s,setInputProjection:i}=le(),{setOutputFormat:a,setOutputProjection:o}=os(),u=F.useRef(!0),c=F.useRef(!1);F.useEffect(()=>{const l=window.location.hash.slice(1);if(!l){u.current=!1;return}try{const h=lc(l);h.format&&(s(h.format),a(h.format==="auto"?"geojson":h.format)),h.projection&&(i(h.projection),o(h.projection==="auto"?"EPSG:4326":h.projection)),h.geometry&&(c.current=!0,n(h.geometry))}catch(h){console.warn("Failed to parse URL hash:",h)}u.current=!1},[n,s,i,a,o]),F.useEffect(()=>{if(u.current)return;if(c.current){c.current=!1;return}const l=kS({format:e,projection:r,geometry:t}),h=l?`#${l}`:window.location.pathname;window.history.replaceState(null,"",h)},[t,e,r]),F.useEffect(()=>{const l=()=>{const h=window.location.hash.slice(1);if(h)try{const f=lc(h);c.current=!0,f.format&&s(f.format),f.projection&&i(f.projection),f.geometry&&n(f.geometry)}catch(f){console.warn("Failed to parse URL hash:",f)}};return window.addEventListener("hashchange",l),()=>{window.removeEventListener("hashchange",l)}},[n,s,i])}const NS={auto:"auto","EPSG:4326":"wgs84","EPSG:27700":"bng","EPSG:3857":"web-mercator"},IS={auto:"auto",wgs84:"EPSG:4326",bng:"EPSG:27700","web-mercator":"EPSG:3857","EPSG:4326":"EPSG:4326","EPSG:27700":"EPSG:27700","EPSG:3857":"EPSG:3857"};function lc(t){const e=t.split("/"),r={};if(e[0]&&(r.format=decodeURIComponent(e[0])),e[1]){const n=decodeURIComponent(e[1]);r.projection=IS[n]??"auto"}return e[2]&&(r.geometry=decodeURIComponent(e[2])),r}function kS(t){var i;if(!((i=t.geometry)!=null&&i.trim()))return"";const e=encodeURIComponent(t.format??"auto"),r=t.projection??"auto",n=encodeURIComponent(NS[r]),s=encodeURIComponent(t.geometry);return`${e}/${n}/${s}`}function RS(){return DS(),TS(),b.jsx(MS,{})}function LS(t){const e=window.dataLayer??[];window.dataLayer=e,window.gtag=function(...s){e.push(s)},window.gtag("js",new Date),window.gtag("config",t);const r=document.createElement("script");r.async=!0,r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(r)}async function GS(){try{const t=await fetch("./PRIVATE.json");if(!t.ok)return;const e=await t.json();e.sentryDsn&&s1({dsn:e.sentryDsn,release:"01fd22b0778ca73764aabb2ad5547b9b44cbbab1",environment:"production",enabled:!0,integrations:[Zg()],tracesSampleRate:.1}),e.googleAnalyticsId&&LS(e.googleAnalyticsId)}catch{}}async function OS(){await GS();const t=document.getElementById("root");if(!t)throw new Error("Failed to find root element");ff.createRoot(t).render(b.jsx(F.StrictMode,{children:b.jsx(RS,{})}))}OS();export{Vh as d,b as j};
//# sourceMappingURL=index-Bp_ZEN-W.js.map

//# debugId=26241be6-9a88-598a-80c0-88de14dd736c
