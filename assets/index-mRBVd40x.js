const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./maplibre-gl-DEIozrAN.js","./maplibre-BL57sJLt.js","./index-Dq__27AD.js","./format-detection-CVSjjMAY.js"])))=>i.map(i=>d[i]);
import{b as hf,c as ff,a as B,R as ci,d as df,_ as wr,M as pf,e as mf,S as gf,L as yf}from"./maplibre-BL57sJLt.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var fs={exports:{}},pr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho;function _f(){if(ho)return pr;ho=1;var t=hf(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,u,c){var l,h={},f=null,d=null;c!==void 0&&(f=""+c),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(d=u.ref);for(l in u)r.call(u,l)&&!s.hasOwnProperty(l)&&(h[l]=u[l]);if(o&&o.defaultProps)for(l in u=o.defaultProps,u)h[l]===void 0&&(h[l]=u[l]);return{$$typeof:e,type:o,key:f,ref:d,props:h,_owner:i.current}}return pr.Fragment=n,pr.jsx=a,pr.jsxs=a,pr}var fo;function vf(){return fo||(fo=1,fs.exports=_f()),fs.exports}var S=vf(),li={},po;function Ef(){if(po)return li;po=1;var t=ff();return li.createRoot=t.createRoot,li.hydrateRoot=t.hydrateRoot,li}var bf=Ef();const tt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ht=globalThis,cn="10.37.0";function yn(){return ns(ht),ht}function ns(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||cn,e[cn]=e[cn]||{}}function Yn(t,e,n=ht){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[cn]=r[cn]||{};return i[t]||(i[t]=e())}const Sf=["debug","info","warn","error","log","assert","trace"],wf="Sentry Logger ",ji={};function Qn(t){if(!("console"in ht))return t();const e=ht.console,n={},r=Object.keys(ji);r.forEach(i=>{const s=ji[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function xf(){ba().enabled=!0}function Mf(){ba().enabled=!1}function Ec(){return ba().enabled}function Af(...t){Ea("log",...t)}function Pf(...t){Ea("warn",...t)}function Tf(...t){Ea("error",...t)}function Ea(t,...e){tt&&Ec()&&Qn(()=>{ht.console[t](`${wf}[${t}]:`,...e)})}function ba(){return tt?Yn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const H={enable:xf,disable:Mf,isEnabled:Ec,log:Af,warn:Pf,error:Tf},bc=50,dn="?",mo=/\(error: (.*)\)/,go=/captureMessage|captureException/;function Sc(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],a=n.split(`
`);for(let o=r;o<a.length;o++){let u=a[o];u.length>1024&&(u=u.slice(0,1024));const c=mo.test(u)?u.replace(mo,"$1"):u;if(!c.match(/\S*Error: /)){for(const l of e){const h=l(c);if(h){s.push(h);break}}if(s.length>=bc+i)break}}return Df(s.slice(i))}}function Cf(t){return Array.isArray(t)?Sc(...t):t}function Df(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(hi(e).function||"")&&e.pop(),e.reverse(),go.test(hi(e).function||"")&&(e.pop(),go.test(hi(e).function||"")&&e.pop()),e.slice(0,bc).map(n=>({...n,filename:n.filename||hi(e).filename,function:n.function||dn}))}function hi(t){return t[t.length-1]||{}}const ds="<anonymous>";function xe(t){try{return!t||typeof t!="function"?ds:t.name||ds}catch{return ds}}function yo(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function wc(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const xi={},_o={};function Ve(t,e){xi[t]=xi[t]||[],xi[t].push(e)}function Xe(t,e){if(!_o[t]){_o[t]=!0;try{e()}catch(n){tt&&H.error(`Error while instrumenting ${t}`,n)}}}function Zt(t,e){const n=t&&xi[t];if(n)for(const r of n)try{r(e)}catch(i){tt&&H.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${xe(r)}
Error:`,i)}}let ps=null;function xc(t){const e="error";Ve(e,t),Xe(e,Nf)}function Nf(){ps=ht.onerror,ht.onerror=function(t,e,n,r,i){return Zt("error",{column:r,error:i,line:n,msg:t,url:e}),ps?ps.apply(this,arguments):!1},ht.onerror.__SENTRY_INSTRUMENTED__=!0}let ms=null;function Mc(t){const e="unhandledrejection";Ve(e,t),Xe(e,If)}function If(){ms=ht.onunhandledrejection,ht.onunhandledrejection=function(t){return Zt("unhandledrejection",t),ms?ms.apply(this,arguments):!0},ht.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ac=Object.prototype.toString;function rs(t){switch(Ac.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Me(t,Error)}}function Zn(t,e){return Ac.call(t)===`[object ${e}]`}function Pc(t){return Zn(t,"ErrorEvent")}function vo(t){return Zn(t,"DOMError")}function kf(t){return Zn(t,"DOMException")}function Se(t){return Zn(t,"String")}function Sa(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function $n(t){return t===null||Sa(t)||typeof t!="object"&&typeof t!="function"}function Dr(t){return Zn(t,"Object")}function is(t){return typeof Event<"u"&&Me(t,Event)}function Rf(t){return typeof Element<"u"&&Me(t,Element)}function Lf(t){return Zn(t,"RegExp")}function tr(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function Gf(t){return Dr(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Me(t,e){try{return t instanceof e}catch{return!1}}function Tc(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}function wa(t){return typeof Request<"u"&&Me(t,Request)}const xa=ht,Of=80;function ne(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,a=0;const o=" > ",u=o.length;let c;const l=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||Of;for(;n&&s++<r&&(c=Ff(n,l),!(c==="html"||s>1&&a+i.length*u+c.length>=h));)i.push(c),a+=c.length,n=n.parentNode;return i.reverse().join(o)}catch{return"<unknown>"}}function Ff(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(xa.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e!=null&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(i!=null&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&Se(a)){const o=a.split(/\s+/);for(const u of o)r.push(`.${u}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const o=n.getAttribute(a);o&&r.push(`[${a}="${o}"]`)}return r.join("")}function $r(){try{return xa.document.location.href}catch{return""}}function Cc(t){if(!xa.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function Xt(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const i=n(r);typeof i=="function"&&Dc(i,r);try{t[e]=i}catch{tt&&H.log(`Failed to replace method "${e}" in object`,t)}}function zt(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{tt&&H.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Dc(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,zt(t,"__sentry_original__",e)}catch{}}function Ma(t){return t.__sentry_original__}function Nc(t){if(rs(t))return{message:t.message,name:t.name,stack:t.stack,...bo(t)};if(is(t)){const e={type:t.type,target:Eo(t.target),currentTarget:Eo(t.currentTarget),...bo(t)};return typeof CustomEvent<"u"&&Me(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Eo(t){try{return Rf(t)?ne(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function bo(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function jf(t){const e=Object.keys(Nc(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}let Cn;function qr(t){if(Cn!==void 0)return Cn?Cn(t):t();const e=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=ht;return e in n&&typeof n[e]=="function"?(Cn=n[e],Cn(t)):(Cn=null,t())}function Ge(){return qr(()=>Math.random())}function Ur(){return qr(()=>Date.now())}function $s(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function So(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{Tc(i)?n.push(wc(i)):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Mi(t,e,n=!1){return Se(t)?Lf(e)?e.test(t):Se(e)?n?t===e:t.includes(e):!1:!1}function Oe(t,e=[],n=!1){return e.some(r=>Mi(t,r,n))}function Bf(){const t=ht;return t.crypto||t.msCrypto}let gs;function $f(){return Ge()*16}function te(t=Bf()){try{if(t!=null&&t.randomUUID)return qr(()=>t.randomUUID()).replace(/-/g,"")}catch{}return gs||(gs="10000000100040008000"+1e11),gs.replace(/[018]/g,e=>(e^($f()&15)>>e/4).toString(16))}function Ic(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function on(t){const{message:e,event_id:n}=t;if(e)return e;const r=Ic(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function qs(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function qn(t,e){const n=Ic(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i==null?void 0:i.data,...e.data};n.mechanism.data=s}}function wo(t){if(qf(t))return!0;try{zt(t,"__sentry_captured__",!0)}catch{}return!1}function qf(t){try{return t.__sentry_captured__}catch{}}const kc=1e3;function _n(){return Ur()/kc}function Uf(){const{performance:t}=ht;if(!(t!=null&&t.now)||!t.timeOrigin)return _n;const e=t.timeOrigin;return()=>(e+qr(()=>t.now()))/kc}let xo;function Dt(){return(xo??(xo=Uf()))()}let ys=null;function Hf(){var a;const{performance:t}=ht;if(!(t!=null&&t.now))return;const e=3e5,n=qr(()=>t.now()),r=Ur(),i=t.timeOrigin;if(typeof i=="number"&&Math.abs(i+n-r)<e)return i;const s=(a=t.timing)==null?void 0:a.navigationStart;return typeof s=="number"&&Math.abs(s+n-r)<e?s:r-n}function Jt(){return ys===null&&(ys=Hf()),ys}function zf(t){const e=Dt(),n={sid:te(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Vf(n)};return t&&Un(n,t),n}function Un(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Dt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:te()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Wf(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Un(t,n)}function Vf(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Hr(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Hr(r[i],e[i],n-1));return r}function Ae(){return te()}function we(){return te().substring(16)}const Us="_sentrySpan";function Hn(t,e){e?zt(t,Us,e):delete t[Us]}function Bi(t){return t[Us]}const Xf=100;class Pe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ae(),sampleRand:Ge()}}clone(){const e=new Pe;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,Hn(e,Bi(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Un(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof Pe?n.getScopeData():Dr(n)?e:void 0,{tags:i,attributes:s,extra:a,user:o,contexts:u,level:c,fingerprint:l=[],propagationContext:h,conversationId:f}=r||{};return this._tags={...this._tags,...i},this._attributes={...this._attributes,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...u},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),l.length&&(this._fingerprint=l),h&&(this._propagationContext=h),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,Hn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ae(),sampleRand:Ge()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var s;const r=typeof n=="number"?n:Xf;if(r<=0)return this;const i={timestamp:_n(),...e,message:e.message?$s(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Bi(this),conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Hr(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||te();if(!this._client)return tt&&H.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=(r==null?void 0:r.event_id)||te();if(!this._client)return tt&&H.warn("No client configured on scope - will not capture message!"),i;const s=(r==null?void 0:r.syntheticException)??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||te();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(tt&&H.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Jf(){return Yn("defaultCurrentScope",()=>new Pe)}function Kf(){return Yn("defaultIsolationScope",()=>new Pe)}class Yf{constructor(e,n){let r;e?r=e:r=new Pe;let i;n?i=n:i=new Pe,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return tr(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function zn(){const t=yn(),e=ns(t);return e.stack=e.stack||new Yf(Jf(),Kf())}function Qf(t){return zn().withScope(t)}function Zf(t,e){const n=zn();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Mo(t){return zn().withScope(()=>t(zn().getIsolationScope()))}function t0(){return{withIsolationScope:Mo,withScope:Qf,withSetScope:Zf,withSetIsolationScope:(t,e)=>Mo(e),getCurrentScope:()=>zn().getScope(),getIsolationScope:()=>zn().getIsolationScope()}}function er(t){const e=ns(t);return e.acs?e.acs:t0()}function Et(){const t=yn();return er(t).getCurrentScope()}function Ce(){const t=yn();return er(t).getIsolationScope()}function e0(){return Yn("globalScope",()=>new Pe)}function ss(...t){const e=yn(),n=er(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function _t(){return Et().getClient()}function n0(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=e,s={trace_id:n,span_id:i||we()};return r&&(s.parent_span_id=r),s}const pe="sentry.source",Aa="sentry.sample_rate",Rc="sentry.previous_trace_sample_rate",Te="sentry.op",Ct="sentry.origin",Nr="sentry.idle_span_finish_reason",zr="sentry.measurement_unit",Wr="sentry.measurement_value",Ao="sentry.custom_span_name",Pa="sentry.profile_id",nr="sentry.exclusive_time",r0="sentry.link.type",i0="gen_ai.conversation.id",s0=0,Ta=1,Tt=2;function a0(t){if(t<400&&t>=100)return{code:Ta};if(t>=400&&t<500)switch(t){case 401:return{code:Tt,message:"unauthenticated"};case 403:return{code:Tt,message:"permission_denied"};case 404:return{code:Tt,message:"not_found"};case 409:return{code:Tt,message:"already_exists"};case 413:return{code:Tt,message:"failed_precondition"};case 429:return{code:Tt,message:"resource_exhausted"};case 499:return{code:Tt,message:"cancelled"};default:return{code:Tt,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Tt,message:"unimplemented"};case 503:return{code:Tt,message:"unavailable"};case 504:return{code:Tt,message:"deadline_exceeded"};default:return{code:Tt,message:"internal_error"}}return{code:Tt,message:"internal_error"}}function Lc(t,e){t.setAttribute("http.response.status_code",e);const n=a0(e);n.message!=="unknown_error"&&t.setStatus(n)}const Gc="_sentryScope",Oc="_sentryIsolationScope";function o0(t){try{const e=ht.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function u0(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function c0(t,e,n){t&&(zt(t,Oc,o0(n)),zt(t,Gc,e))}function $i(t){const e=t;return{scope:e[Gc],isolationScope:u0(e[Oc])}}const Ca="sentry-",l0=/^sentry-/,h0=8192;function Fc(t){const e=d0(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(l0)){const a=i.slice(Ca.length);r[a]=s}return r},{});if(Object.keys(n).length>0)return n}function f0(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,i])=>(i&&(n[`${Ca}${r}`]=i),n),{});return p0(e)}function d0(t){if(!(!t||!Se(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Po(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):Po(t)}function Po(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const r=e.slice(0,n),i=e.slice(n+1);return[r,i].map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function p0(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,a=i===0?s:`${e},${s}`;return a.length>h0?(tt&&H.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):a},"")}const m0=/^o(\d+)\./,g0=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function y0(t){return t==="http"||t==="https"}function rr(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:a,protocol:o,publicKey:u}=t;return`${o}://${u}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function _0(t){const e=g0.exec(t);if(!e){Qn(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",a="",o=""]=e.slice(1);let u="",c=o;const l=c.split("/");if(l.length>1&&(u=l.slice(0,-1).join("/"),c=l.pop()),c){const h=c.match(/^\d+/);h&&(c=h[0])}return jc({host:s,pass:i,path:u,projectId:c,port:a,protocol:n,publicKey:r})}function jc(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function v0(t){if(!tt)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(H.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?y0(r)?e&&isNaN(parseInt(e,10))?(H.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(H.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(H.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function E0(t){const e=t.match(m0);return e==null?void 0:e[1]}function b0(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=E0(n)),r}function S0(t){const e=typeof t=="string"?_0(t):jc(t);if(!(!e||!v0(e)))return e}function Ir(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Bc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function w0(t){if(!t)return;const e=t.match(Bc);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function x0(t,e){const n=w0(t),r=Fc(e);if(!(n!=null&&n.traceId))return{traceId:Ae(),sampleRand:Ge()};const i=M0(n,r);r&&(r.sample_rand=i.toString());const{traceId:s,parentSpanId:a,parentSampled:o}=n;return{traceId:s,parentSpanId:a,sampled:o,dsc:r||{},sampleRand:i}}function $c(t=Ae(),e=we(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function qc(t=Ae(),e=we(),n){return`00-${t}-${e}-${n?"01":"00"}`}function M0(t,e){const n=Ir(e==null?void 0:e.sample_rand);if(n!==void 0)return n;const r=Ir(e==null?void 0:e.sample_rate);return r&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?Ge()*r:r+Ge()*(1-r):Ge()}const Uc=0,Da=1;let To=!1;function A0(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:a,origin:o,links:u}=dt(t);return{parent_span_id:s,span_id:e,trace_id:n,data:r,op:i,status:a,origin:o,links:u}}function P0(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:dt(t).parent_span_id,s=$i(t).scope,a=r?(s==null?void 0:s.getPropagationContext().propagationSpanId)||we():e;return{parent_span_id:i,span_id:a,trace_id:n}}function T0(t){const{traceId:e,spanId:n}=t.spanContext(),r=Je(t);return $c(e,n,r)}function C0(t){const{traceId:e,spanId:n}=t.spanContext(),r=Je(t);return qc(e,n,r)}function Hc(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...i},attributes:s})=>({span_id:e,trace_id:n,sampled:r===Da,attributes:s,...i}))}function ln(t){return typeof t=="number"?Co(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Co(t.getTime()):Dt()}function Co(t){return t>9999999999?t/1e3:t}function dt(t){var r;if(N0(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(D0(t)){const{attributes:i,startTime:s,name:a,endTime:o,status:u,links:c}=t,l="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(r=t.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:e,trace_id:n,data:i,description:a,parent_span_id:l,start_timestamp:ln(s),timestamp:ln(o)||void 0,status:zc(u),op:i[Te],origin:i[Ct],links:Hc(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function D0(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function N0(t){return typeof t.getSpanJSON=="function"}function Je(t){const{traceFlags:e}=t.spanContext();return e===Da}function zc(t){if(!(!t||t.code===s0))return t.code===Ta?"ok":t.message||"internal_error"}const hn="_sentryChildSpans",Hs="_sentryRootSpan";function Wc(t,e){const n=t[Hs]||t;zt(e,Hs,n),t[hn]?t[hn].add(e):zt(t,hn,new Set([e]))}function I0(t,e){t[hn]&&t[hn].delete(e)}function Ai(t){const e=new Set;function n(r){if(!e.has(r)&&Je(r)){e.add(r);const i=r[hn]?Array.from(r[hn]):[];for(const s of i)n(s)}}return n(t),Array.from(e)}function Ft(t){return t[Hs]||t}function Kt(){const t=yn(),e=er(t);return e.getActiveSpan?e.getActiveSpan():Bi(Et())}function zs(){To||(Qn(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),To=!0)}let Do=!1;function k0(){if(Do)return;function t(){const e=Kt(),n=e&&Ft(e);if(n){const r="internal_error";tt&&H.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:Tt,message:r})}}t.tag="sentry_tracingErrorCallback",Do=!0,xc(t),Mc(t)}function ue(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=_t())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function No(t){H.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function qi(t,e){if(!(e!=null&&e.length)||!t.description)return!1;for(const n of e){if(L0(n)){if(Mi(t.description,n))return tt&&No(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Mi(t.description,n.name):!0,i=n.op?t.op&&Mi(t.op,n.op):!0;if(r&&i)return tt&&No(t),!0}return!1}function R0(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const i of t)i.parent_span_id===r&&(i.parent_span_id=n)}function L0(t){return typeof t=="string"||t instanceof RegExp}const Na="production",Vc="_frozenDsc";function Pi(t,e){zt(t,Vc,e)}function Xc(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||Na,release:n.release,public_key:r,trace_id:t,org_id:b0(e)};return e.emit("createDsc",i),i}function Jc(t,e){const n=e.getPropagationContext();return n.dsc||Xc(n.traceId,t)}function $e(t){var g;const e=_t();if(!e)return{};const n=Ft(t),r=dt(n),i=r.data,s=n.spanContext().traceState,a=(s==null?void 0:s.get("sentry.sample_rate"))??i[Aa]??i[Rc];function o(b){return(typeof a=="number"||typeof a=="string")&&(b.sample_rate=`${a}`),b}const u=n[Vc];if(u)return o(u);const c=s==null?void 0:s.get("sentry.dsc"),l=c&&Fc(c);if(l)return o(l);const h=Xc(t.spanContext().traceId,e),f=i[pe],d=r.description;return f!=="url"&&d&&(h.transaction=d),ue()&&(h.sampled=String(Je(n)),h.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((g=$i(n).scope)==null?void 0:g.getPropagationContext().sampleRand.toString())),o(h),e.emit("createDsc",h,n),h}class qe{constructor(e={}){this._traceId=e.traceId||Ae(),this._spanId=e.spanId||we()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Uc}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function be(t,e=100,n=1/0){try{return Ws("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Kc(t,e=3,n=100*1024){const r=be(t,e);return j0(r)>n?Kc(t,e-1,n):r}function Ws(t,e,n=1/0,r=1/0,i=B0()){const[s,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=G0(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(u===0)return o.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const d=c.toJSON();return Ws("",d,u-1,r,i)}catch{}const l=Array.isArray(e)?[]:{};let h=0;const f=Nc(e);for(const d in f){if(!Object.prototype.hasOwnProperty.call(f,d))continue;if(h>=r){l[d]="[MaxProperties ~]";break}const g=f[d];l[d]=Ws(d,g,u-1,r,i),h++}return a(e),l}function G0(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(Tc(e))return wc(e);if(Gf(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${xe(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=O0(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function O0(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function F0(t){return~-encodeURI(t).split(/%..|./).length}function j0(t){return F0(JSON.stringify(t))}function B0(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function vn(t,e=[]){return[t,e]}function $0(t,e){const[n,r]=t;return[n,[...r,e]]}function Vs(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function q0(t,e){return Vs(t,(n,r)=>e.includes(r))}function Xs(t){const e=ns(ht);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function U0(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[Xs(r),s]:r.push(typeof s=="string"?Xs(s):s)}for(const s of n){const[a,o]=s;if(i(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)i(o);else{let u;try{u=JSON.stringify(o)}catch{u=JSON.stringify(be(o))}i(u)}}return typeof r=="string"?r:H0(r)}function H0(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function z0(t){return[{type:"span"},t]}function W0(t){const e=typeof t.data=="string"?Xs(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const V0={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Io(t){return V0[t]}function Yc(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function X0(t,e,n,r){var s;const i=(s=t.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:rr(r)},...i&&{trace:i}}}function J0(t,e){var r,i,s,a;if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...((r=t.sdk)==null?void 0:r.integrations)||[],...e.integrations||[]],packages:[...((i=t.sdk)==null?void 0:i.packages)||[],...e.packages||[]],settings:(s=t.sdk)!=null&&s.settings||e.settings?{...(a=t.sdk)==null?void 0:a.settings,...e.settings}:void 0},t}function K0(t,e,n,r){const i=Yc(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:rr(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return vn(s,[a])}function Y0(t,e,n,r){const i=Yc(n),s=t.type&&t.type!=="replay_event"?t.type:"event";J0(t,n==null?void 0:n.sdk);const a=X0(t,i,r,e);return delete t.sdkProcessingMetadata,vn(a,[[{type:s},t]])}function Q0(t,e){function n(d){return!!d.trace_id&&!!d.public_key}const r=$e(t[0]),i=e==null?void 0:e.getDsn(),s=e==null?void 0:e.getOptions().tunnel,a={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&i&&{dsn:rr(i)}},{beforeSendSpan:o,ignoreSpans:u}=(e==null?void 0:e.getOptions())||{},c=u!=null&&u.length?t.filter(d=>!qi(dt(d),u)):t,l=t.length-c.length;l&&(e==null||e.recordDroppedEvent("before_send","span",l));const h=o?d=>{const g=dt(d),b=o(g);return b||(zs(),g)}:dt,f=[];for(const d of c){const g=h(d);g&&f.push(z0(g))}return vn(a,f)}function Z0(t){if(!tt)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=dt(t),{spanId:i}=t.spanContext(),s=Je(t),a=Ft(t),o=a===t,u=`[Tracing] Starting ${s?"sampled":"unsampled"} ${o?"root ":""}span`,c=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!o){const{op:l,description:h}=dt(a);c.push(`root ID: ${a.spanContext().spanId}`),l&&c.push(`root op: ${l}`),h&&c.push(`root description: ${h}`)}H.log(`${u}
  ${c.join(`
  `)}`)}function td(t){if(!tt)return;const{description:e="< unknown name >",op:n="< unknown op >"}=dt(t),{spanId:r}=t.spanContext(),s=Ft(t)===t,a=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${e}" with ID ${r}`;H.log(a)}function ed(t,e,n,r=Kt()){const i=r&&Ft(r);i&&(tt&&H.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),i.addEvent(t,{[Wr]:e,[zr]:n}))}function ko(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[zr],s=r[Wr];typeof i=="string"&&typeof s=="number"&&(e[n.name]={value:s,unit:i})}),e}const Ro=1e3;class as{constructor(e={}){this._traceId=e.traceId||Ae(),this._spanId=e.spanId||we(),this._startTime=e.startTimestamp||Dt(),this._links=e.links,this._attributes={},this.setAttributes({[Ct]:"manual",[Te]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?Da:Uc}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=ln(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(pe,"custom"),this}end(e){this._endTime||(this._endTime=ln(e),td(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Te],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:zc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ct],profile_id:this._attributes[Pa],exclusive_time:this._attributes[nr],measurements:ko(this._events),is_segment:this._isStandaloneSpan&&Ft(this)===this||void 0,segment_id:this._isStandaloneSpan?Ft(this).spanContext().spanId:void 0,links:Hc(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){tt&&H.log("[Tracing] Adding an event to span:",e);const i=Lo(n)?n:r||Dt(),s=Lo(n)?{}:n||{},a={name:e,time:ln(i),attributes:s};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=_t();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ft(this)))return;if(this._isStandaloneSpan){this._sampled?rd(Q0([this],e)):(tt&&H.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&($i(this).scope||Et()).captureEvent(r)}_convertSpanToTransaction(){var l;if(!Go(dt(this)))return;this._name||(tt&&H.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=$i(this),r=(l=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:l.normalizedRequest;if(this._sampled!==!0)return;const s=Ai(this).filter(h=>h!==this&&!nd(h)).map(h=>dt(h)).filter(Go),a=this._attributes[pe];delete this._attributes[Ao],s.forEach(h=>{delete h.data[Ao]});const o={contexts:{trace:A0(this)},spans:s.length>Ro?s.sort((h,f)=>h.start_timestamp-f.start_timestamp).slice(0,Ro):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:$e(this)},request:r,...a&&{transaction_info:{source:a}}},u=ko(this._events);return u&&Object.keys(u).length&&(tt&&H.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),o.measurements=u),o}}function Lo(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Go(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function nd(t){return t instanceof as&&t.isStandaloneSpan()}function rd(t){const e=_t();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function id(t,e,n=()=>{},r=()=>{}){let i;try{i=t()}catch(s){throw e(s),n(),s}return sd(i,e,n,r)}function sd(t,e,n,r){return tr(t)?t.then(i=>(n(),r(i),i),i=>{throw e(i),n(),i}):(n(),r(t),t)}function ad(t,e,n){if(!ue(t))return[!1];let r,i;typeof t.tracesSampler=="function"?(i=t.tracesSampler({...e,inheritOrSampleWith:o=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):o}),r=!0):e.parentSampled!==void 0?i=e.parentSampled:typeof t.tracesSampleRate<"u"&&(i=t.tracesSampleRate,r=!0);const s=Ir(i);if(s===void 0)return tt&&H.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!s)return tt&&H.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,r];const a=n<s;return a||tt&&H.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[a,s,r]}const Qc="__SENTRY_SUPPRESS_TRACING__";function od(t,e){const n=ka();if(n.startSpan)return n.startSpan(t,e);const r=tl(t),{forceTransaction:i,parentSpan:s,scope:a}=t,o=a==null?void 0:a.clone();return ss(o,()=>cd(s)(()=>{const c=Et(),l=el(c,s),f=t.onlyIfParent&&!l?new qe:Zc({parentSpan:l,spanArguments:r,forceTransaction:i,scope:c});return Hn(c,f),id(()=>e(f),()=>{const{status:d}=dt(f);f.isRecording()&&(!d||d==="ok")&&f.setStatus({code:Tt,message:"internal_error"})},()=>{f.end()})}))}function ir(t){const e=ka();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=tl(t),{forceTransaction:r,parentSpan:i}=t;return(t.scope?a=>ss(t.scope,a):i!==void 0?a=>Ia(i,a):a=>a())(()=>{const a=Et(),o=el(a,i);return t.onlyIfParent&&!o?new qe:Zc({parentSpan:o,spanArguments:n,forceTransaction:r,scope:a})})}function Ia(t,e){const n=ka();return n.withActiveSpan?n.withActiveSpan(t,e):ss(r=>(Hn(r,t||void 0),e(r)))}function Zc({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!ue()){const a=new qe;if(n||!t){const o={sampled:"false",sample_rate:"0",transaction:e.name,...$e(a)};Pi(a,o)}return a}const i=Ce();let s;if(t&&!n)s=ud(t,r,e),Wc(t,s);else if(t){const a=$e(t),{traceId:o,spanId:u}=t.spanContext(),c=Je(t);s=Oo({traceId:o,parentSpanId:u,...e},r,c),Pi(s,a)}else{const{traceId:a,dsc:o,parentSpanId:u,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};s=Oo({traceId:a,parentSpanId:u,...e},r,c),o&&Pi(s,o)}return Z0(s),c0(s,r,i),s}function tl(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=ln(t.startTime),delete r.startTime,r}return n}function ka(){const t=yn();return er(t)}function Oo(t,e,n){var g;const r=_t(),i=(r==null?void 0:r.getOptions())||{},{name:s=""}=t,a={spanAttributes:{...t.attributes},spanName:s,parentSampled:n};r==null||r.emit("beforeSampling",a,{decision:!1});const o=a.parentSampled??n,u=a.spanAttributes,c=e.getPropagationContext(),[l,h,f]=e.getScopeData().sdkProcessingMetadata[Qc]?[!1]:ad(i,{name:s,parentSampled:o,attributes:u,parentSampleRate:Ir((g=c.dsc)==null?void 0:g.sample_rate)},c.sampleRand),d=new as({...t,attributes:{[pe]:"custom",[Aa]:h!==void 0&&f?h:void 0,...u},sampled:l});return!l&&r&&(tt&&H.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",d),d}function ud(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),s=e.getScopeData().sdkProcessingMetadata[Qc]?!1:Je(t),a=s?new as({...n,parentSpanId:r,traceId:i,sampled:s}):new qe({traceId:i});Wc(t,a);const o=_t();return o&&(o.emit("spanStart",a),n.endTimestamp&&o.emit("spanEnd",a)),a}function el(t,e){if(e)return e;if(e===null)return;const n=Bi(t);if(!n)return;const r=_t();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ft(n):n}function cd(t){return t!==void 0?e=>Ia(t,e):e=>e()}const Ti={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ld="heartbeatFailed",hd="idleTimeout",fd="finalTimeout",dd="externalFinish";function nl(t,e={}){const n=new Map;let r=!1,i,s=dd,a=!e.disableAutoFinish;const o=[],{idleTimeout:u=Ti.idleTimeout,finalTimeout:c=Ti.finalTimeout,childSpanTimeout:l=Ti.childSpanTimeout,beforeSpanEnd:h,trimIdleSpanEndTimestamp:f=!0}=e,d=_t();if(!d||!ue()){const x=new qe,F={sample_rate:"0",sampled:"false",...$e(x)};return Pi(x,F),x}const g=Et(),b=Kt(),y=pd(t);y.end=new Proxy(y.end,{apply(x,F,v){if(h&&h(y),F instanceof qe)return;const[_,...T]=v,I=_||Dt(),k=ln(I),R=Ai(y).filter(j=>j!==y),W=dt(y);if(!R.length||!f)return P(k),Reflect.apply(x,F,[k,...T]);const Y=d.getOptions().ignoreSpans,V=R==null?void 0:R.reduce((j,O)=>{const Q=dt(O);return!Q.timestamp||Y&&qi(Q,Y)?j:j?Math.max(j,Q.timestamp):Q.timestamp},void 0),G=W.start_timestamp,$=Math.min(G?G+c/1e3:1/0,Math.max(G||-1/0,Math.min(k,V||1/0)));return P($),Reflect.apply(x,F,[$,...T])}});function A(){i&&(clearTimeout(i),i=void 0)}function w(x){A(),i=setTimeout(()=>{!r&&n.size===0&&a&&(s=hd,y.end(x))},u)}function M(x){i=setTimeout(()=>{!r&&a&&(s=ld,y.end(x))},l)}function D(x){A(),n.set(x,!0);const F=Dt();M(F+l/1e3)}function N(x){if(n.has(x)&&n.delete(x),n.size===0){const F=Dt();w(F+u/1e3)}}function P(x){r=!0,n.clear(),o.forEach(R=>R()),Hn(g,b);const F=dt(y),{start_timestamp:v}=F;if(!v)return;F.data[Nr]||y.setAttribute(Nr,s);const T=F.status;(!T||T==="unknown")&&y.setStatus({code:Ta}),H.log(`[Tracing] Idle span "${F.op}" finished`);const I=Ai(y).filter(R=>R!==y);let k=0;I.forEach(R=>{R.isRecording()&&(R.setStatus({code:Tt,message:"cancelled"}),R.end(x),tt&&H.log("[Tracing] Cancelling span since span ended early",JSON.stringify(R,void 0,2)));const W=dt(R),{timestamp:Y=0,start_timestamp:V=0}=W,G=V<=x,$=(c+u)/1e3,j=Y-V<=$;if(tt){const O=JSON.stringify(R,void 0,2);G?j||H.log("[Tracing] Discarding span since it finished after idle span final timeout",O):H.log("[Tracing] Discarding span since it happened after idle span was finished",O)}(!j||!G)&&(I0(y,R),k++)}),k>0&&y.setAttribute("sentry.idle_span_discarded_spans",k)}return o.push(d.on("spanStart",x=>{if(r||x===y||dt(x).timestamp||x instanceof as&&x.isStandaloneSpan())return;Ai(y).includes(x)&&D(x.spanContext().spanId)})),o.push(d.on("spanEnd",x=>{r||N(x.spanContext().spanId)})),o.push(d.on("idleSpanEnableAutoFinish",x=>{x===y&&(a=!0,w(),n.size&&M())})),e.disableAutoFinish||w(),setTimeout(()=>{r||(y.setStatus({code:Tt,message:"deadline_exceeded"}),s=fd,y.end())},c),y}function pd(t){const e=ir(t);return Hn(Et(),e),tt&&H.log("[Tracing] Started span is an idle span"),e}const _s=0,Fo=1,jo=2;function os(t){return new kr(e=>{e(t)})}function Ra(t){return new kr((e,n)=>{n(t)})}class kr{constructor(e){this._state=_s,this._handlers=[],this._runExecutor(e)}then(e,n){return new kr((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(a){i(a)}},s=>{if(!n)i(s);else try{r(n(s))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new kr((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}_executeHandlers(){if(this._state===_s)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Fo&&n[1](this._value),this._state===jo&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(s,a)=>{if(this._state===_s){if(tr(a)){a.then(r,i);return}this._state=s,this._value=a,this._executeHandlers()}},r=s=>{n(Fo,s)},i=s=>{n(jo,s)};try{e(r,i)}catch(s){i(s)}}}function md(t,e,n,r=0){try{const i=Js(e,n,t,r);return tr(i)?i:os(i)}catch(i){return Ra(i)}}function Js(t,e,n,r){const i=n[r];if(!t||!i)return t;const s=i({...t},e);return tt&&s===null&&H.log(`Event processor "${i.id||"?"}" dropped event`),tr(s)?s.then(a=>Js(a,e,n,r+1)):Js(s,e,n,r+1)}let ve,Bo,$o,ke;function gd(t){const e=ht._sentryDebugIds,n=ht._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],i=n?Object.keys(n):[];if(ke&&r.length===Bo&&i.length===$o)return ke;Bo=r.length,$o=i.length,ke={},ve||(ve={});const s=(a,o)=>{for(const u of a){const c=o[u],l=ve==null?void 0:ve[u];if(l&&ke&&c)ke[l[0]]=c,ve&&(ve[u]=[l[0],c]);else if(c){const h=t(u);for(let f=h.length-1;f>=0;f--){const d=h[f],g=d==null?void 0:d.filename;if(g&&ke&&ve){ke[g]=c,ve[u]=[g,c];break}}}}};return e&&s(r,e),n&&s(i,n),ke}function yd(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;vd(t,e),r&&Sd(t,r),wd(t,n),Ed(t,i),bd(t,s)}function qo(t,e){const{extra:n,tags:r,attributes:i,user:s,contexts:a,level:o,sdkProcessingMetadata:u,breadcrumbs:c,fingerprint:l,eventProcessors:h,attachments:f,propagationContext:d,transactionName:g,span:b}=e;mr(t,"extra",n),mr(t,"tags",r),mr(t,"attributes",i),mr(t,"user",s),mr(t,"contexts",a),t.sdkProcessingMetadata=Hr(t.sdkProcessingMetadata,u,2),o&&(t.level=o),g&&(t.transactionName=g),b&&(t.span=b),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),h.length&&(t.eventProcessors=[...t.eventProcessors,...h]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...d}}function mr(t,e,n){t[e]=Hr(t[e],n,1)}function _d(t,e){const n=e0().getScopeData();return t&&qo(n,t.getScopeData()),e&&qo(n,e.getScopeData()),n}function vd(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:o}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(i).length&&(t.user={...i,...t.user}),Object.keys(s).length&&(t.contexts={...s,...t.contexts}),a&&(t.level=a),o&&t.type!=="transaction"&&(t.transaction=o)}function Ed(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function bd(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Sd(t,e){t.contexts={trace:P0(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:$e(e),...t.sdkProcessingMetadata};const n=Ft(e),r=dt(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function wd(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function xd(t,e,n,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=t,u={...e,event_id:e.event_id||n.event_id||te(),timestamp:e.timestamp||_n()},c=n.integrations||t.integrations.map(y=>y.name);Md(u,t),Td(u,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&Ad(u,t.stackParser);const l=Dd(r,n.captureContext);n.mechanism&&qn(u,n.mechanism);const h=i?i.getEventProcessors():[],f=_d(s,l),d=[...n.attachments||[],...f.attachments];d.length&&(n.attachments=d),yd(u,f);const g=[...h,...f.eventProcessors];return md(g,u,n).then(y=>(y&&Pd(y),typeof a=="number"&&a>0?Cd(y,a,o):y))}function Md(t,e){var o,u;const{environment:n,release:r,dist:i,maxValueLength:s}=e;t.environment=t.environment||n||Na,!t.release&&r&&(t.release=r),!t.dist&&i&&(t.dist=i);const a=t.request;a!=null&&a.url&&s&&(a.url=$s(a.url,s)),s&&((u=(o=t.exception)==null?void 0:o.values)==null||u.forEach(c=>{c.value&&(c.value=$s(c.value,s))}))}function Ad(t,e){var r,i;const n=gd(e);(i=(r=t.exception)==null?void 0:r.values)==null||i.forEach(s=>{var a,o;(o=(a=s.stacktrace)==null?void 0:a.frames)==null||o.forEach(u=>{u.filename&&(u.debug_id=n[u.filename])})})}function Pd(t){var r,i;const e={};if((i=(r=t.exception)==null?void 0:r.values)==null||i.forEach(s=>{var a,o;(o=(a=s.stacktrace)==null?void 0:a.frames)==null||o.forEach(u=>{u.debug_id&&(u.abs_path?e[u.abs_path]=u.debug_id:u.filename&&(e[u.filename]=u.debug_id),delete u.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([s,a])=>{n.push({type:"sourcemap",code_file:s,debug_id:a})})}function Td(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Cd(t,e,n){var i,s;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(a=>({...a,...a.data&&{data:be(a.data,e,n)}}))},...t.user&&{user:be(t.user,e,n)},...t.contexts&&{contexts:be(t.contexts,e,n)},...t.extra&&{extra:be(t.extra,e,n)}};return(i=t.contexts)!=null&&i.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=be(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(a=>({...a,...a.data&&{data:be(a.data,e,n)}}))),(s=t.contexts)!=null&&s.flags&&r.contexts&&(r.contexts.flags=be(t.contexts.flags,3,n)),r}function Dd(t,e){if(!e)return t;const n=t?t.clone():new Pe;return n.update(e),n}function Nd(t,e){return Et().captureException(t,void 0)}function rl(t,e){return Et().captureEvent(t,e)}function Id(t,e){Ce().setContext(t,e)}function kd(){const t=_t();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function Uo(t){const e=Ce(),n=Et(),{userAgent:r}=ht.navigator||{},i=zf({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return(s==null?void 0:s.status)==="ok"&&Un(s,{status:"exited"}),il(),e.setSession(i),i}function il(){const t=Ce(),n=Et().getSession()||t.getSession();n&&Wf(n),sl(),t.setSession()}function sl(){const t=Ce(),e=_t(),n=t.getSession();n&&e&&e.captureSession(n)}function Ho(t=!1){if(t){il();return}sl()}const Rd="7";function Ld(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Gd(t){return`${Ld(t)}${t.projectId}/envelope/`}function Od(t,e){const n={sentry_version:Rd};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function Fd(t,e,n){return e||`${Gd(t)}?${Od(t,n)}`}const zo=[];function jd(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function Bd(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const i=n(e);r=Array.isArray(i)?i:[i]}else r=e;return jd(r)}function $d(t,e){const n={};return e.forEach(r=>{r&&al(t,r,n)}),n}function Wo(t,e){for(const n of e)n!=null&&n.afterAllSetup&&n.afterAllSetup(t)}function al(t,e,n){if(n[e.name]){tt&&H.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,!zo.includes(e.name)&&typeof e.setupOnce=="function"&&(e.setupOnce(),zo.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,a)=>r(s,a,t),{id:e.name});t.addEventProcessor(i)}tt&&H.log(`Integration installed: ${e.name}`)}function qd(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function Ud(t,e,n,r){const i={};return e!=null&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=rr(r)),vn(i,[qd(t)])}function ol(t,e){const n=e??Hd(t)??[];if(n.length===0)return;const r=t.getOptions(),i=Ud(n,r._metadata,r.tunnel,t.getDsn());ul().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function Hd(t){return ul().get(t)}function ul(){return Yn("clientToLogBufferMap",()=>new WeakMap)}function zd(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function Wd(t,e,n,r){const i={};return e!=null&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=rr(r)),vn(i,[zd(t)])}function cl(t,e){const n=e??Vd(t)??[];if(n.length===0)return;const r=t.getOptions(),i=Wd(n,r._metadata,r.tunnel,t.getDsn());ll().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function Vd(t){return ll().get(t)}function ll(){return Yn("clientToMetricBufferMap",()=>new WeakMap)}const La=Symbol.for("SentryBufferFullError");function Ga(t=100){const e=new Set;function n(){return e.size<t}function r(a){e.delete(a)}function i(a){if(!n())return Ra(La);const o=a();return e.add(o),o.then(()=>r(o),()=>r(o)),o}function s(a){if(!e.size)return os(!0);const o=Promise.allSettled(Array.from(e)).then(()=>!0);if(!a)return o;const u=[o,new Promise(c=>setTimeout(()=>c(!1),a))];return Promise.race(u)}return{get $(){return Array.from(e)},add:i,drain:s}}const Xd=60*1e3;function Jd(t,e=Ur()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?Xd:r-e}function Kd(t,e){return t[e]||t.all||0}function Yd(t,e,n=Ur()){return Kd(t,e)>n}function Qd(t,{statusCode:e,headers:n},r=Ur()){const i={...t},s=n==null?void 0:n["x-sentry-rate-limits"],a=n==null?void 0:n["retry-after"];if(s)for(const o of s.trim().split(",")){const[u,c,,,l]=o.split(":",5),h=parseInt(u,10),f=(isNaN(h)?60:h)*1e3;if(!c)i.all=r+f;else for(const d of c.split(";"))d==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(i[d]=r+f):i[d]=r+f}else a?i.all=r+Jd(a,r):e===429&&(i.all=r+60*1e3);return i}const hl=64;function Zd(t,e,n=Ga(t.bufferSize||hl)){let r={};const i=a=>n.drain(a);function s(a){const o=[];if(Vs(a,(h,f)=>{const d=Io(f);Yd(r,d)?t.recordDroppedEvent("ratelimit_backoff",d):o.push(h)}),o.length===0)return Promise.resolve({});const u=vn(a[0],o),c=h=>{if(q0(u,["client_report"])){tt&&H.warn(`Dropping client report. Will not send outcomes (reason: ${h}).`);return}Vs(u,(f,d)=>{t.recordDroppedEvent(h,Io(d))})},l=()=>e({body:U0(u)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&tt&&H.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),r=Qd(r,h),h),h=>{throw c("network_error"),tt&&H.error("Encountered error running transport request:",h),h});return n.add(l).then(h=>h,h=>{if(h===La)return tt&&H.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw h})}return{send:s,flush:i}}function tp(t,e,n){const r=[{type:"client_report"},{timestamp:_n(),discarded_events:t}];return vn(e?{dsn:e}:{},[r])}function fl(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n!=null&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function ep(t){var u;const{trace_id:e,parent_span_id:n,span_id:r,status:i,origin:s,data:a,op:o}=((u=t.contexts)==null?void 0:u.trace)??{};return{data:a??{},description:t.transaction,op:o,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:a==null?void 0:a[Pa],exclusive_time:a==null?void 0:a[nr],measurements:t.measurements,is_segment:!0}}function np(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Pa]:t.profile_id},...t.exclusive_time&&{[nr]:t.exclusive_time}}}},measurements:t.measurements}}const Vo="Not capturing exception because it's already been captured.",Xo="Discarded session because of missing or non-string release",dl=Symbol.for("SentryInternalError"),pl=Symbol.for("SentryDoNotSendEventError"),rp=5e3;function Ci(t){return{message:t,[dl]:!0}}function vs(t){return{message:t,[pl]:!0}}function Jo(t){return!!t&&typeof t=="object"&&dl in t}function Ko(t){return!!t&&typeof t=="object"&&pl in t}function Yo(t,e,n,r,i){let s=0,a,o=!1;t.on(n,()=>{s=0,clearTimeout(a),o=!1}),t.on(e,u=>{s+=r(u),s>=8e5?i(t):o||(o=!0,a=setTimeout(()=>{i(t)},rp))}),t.on("flush",()=>{i(t)})}class ip{constructor(e){var r,i,s;if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Ga(((r=e.transportOptions)==null?void 0:r.bufferSize)??hl),e.dsn?this._dsn=S0(e.dsn):tt&&H.warn("No DSN provided, client will not send events."),this._dsn){const a=Fd(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:a})}this._options.enableLogs=this._options.enableLogs??((i=this._options._experiments)==null?void 0:i.enableLogs),this._options.enableLogs&&Yo(this,"afterCaptureLog","flushLogs",up,ol),(this._options.enableMetrics??((s=this._options._experiments)==null?void 0:s.enableMetrics)??!0)&&Yo(this,"afterCaptureMetric","flushMetrics",op,cl)}captureException(e,n,r){const i=te();if(wo(e))return tt&&H.log(Vo),i;const s={event_id:i,...n};return this._process(()=>this.eventFromException(e,s).then(a=>this._captureEvent(a,s,r)).then(a=>a),"error"),s.event_id}captureMessage(e,n,r,i){const s={event_id:te(),...r},a=Sa(e)?e:String(e),o=$n(e),u=o?this.eventFromMessage(a,n,s):this.eventFromException(e,s);return this._process(()=>u.then(c=>this._captureEvent(c,s,i)),o?"unknown":"error"),s.event_id}captureEvent(e,n,r){const i=te();if(n!=null&&n.originalException&&wo(n.originalException))return tt&&H.log(Vo),i;const s={event_id:i,...n},a=e.sdkProcessingMetadata||{},o=a.capturedSpanScope,u=a.capturedSpanIsolationScope,c=Qo(e.type);return this._process(()=>this._captureEvent(e,s,o||r,u),c),s.event_id}captureSession(e){this.sendSession(e),Un(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(e),i=await n.flush(e);return r&&i}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];al(this,e,this._integrations),n||Wo(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Y0(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=$0(r,W0(i));this.sendEnvelope(r).then(i=>this.emit("afterSendEvent",e,i))}sendSession(e){const{release:n,environment:r=Na}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!n){tt&&H.warn(Xo);return}s.release=s.release||n,s.environment=s.environment||r,e.attrs=s}else{if(!e.release&&!n){tt&&H.warn(Xo);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const i=K0(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const i=`${e}:${n}`;tt&&H.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||new Set,i=(...s)=>n(...s);return r.add(i),()=>{r.delete(i)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return tt&&H.error("Error while sending envelope:",n),{}}return tt&&H.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=$d(this,e),Wo(this,e)}_updateSessionFromEvent(e,n){var u,c;let r=n.level==="fatal",i=!1;const s=(u=n.exception)==null?void 0:u.values;if(s){i=!0,r=!1;for(const l of s)if(((c=l.mechanism)==null?void 0:c.handled)===!1){r=!0;break}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(Un(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i){const s=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&(a!=null&&a.length)&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),xd(s,e,n,r,this,i).then(o=>{if(o===null)return o;this.emit("postprocessEvent",o,n),o.contexts={trace:n0(r),...o.contexts};const u=Jc(this,r);return o.sdkProcessingMetadata={dynamicSamplingContext:u,...o.sdkProcessingMetadata},o})}_captureEvent(e,n={},r=Et(),i=Ce()){return tt&&Ks(e)&&H.log(`Captured error event \`${fl(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,i).then(s=>s.event_id,s=>{tt&&(Ko(s)?H.log(s.message):Jo(s)?H.warn(s.message):H.warn(s))})}_processEvent(e,n,r,i){const s=this.getOptions(),{sampleRate:a}=s,o=ml(e),u=Ks(e),l=`before send for type \`${e.type||"error"}\``,h=typeof a>"u"?void 0:Ir(a);if(u&&typeof h=="number"&&Ge()>h)return this.recordDroppedEvent("sample_rate","error"),Ra(vs(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));const f=Qo(e.type);return this._prepareEvent(e,n,r,i).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",f),vs("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return d;const b=ap(this,s,d,n);return sp(b,l)}).then(d=>{var y;if(d===null){if(this.recordDroppedEvent("before_send",f),o){const w=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",w)}throw vs(`${l} returned \`null\`, will not send event.`)}const g=r.getSession()||i.getSession();if(u&&g&&this._updateSessionFromEvent(g,d),o){const A=((y=d.sdkProcessingMetadata)==null?void 0:y.spanCountBeforeProcessing)||0,w=d.spans?d.spans.length:0,M=A-w;M>0&&this.recordDroppedEvent("before_send","span",M)}const b=d.transaction_info;if(o&&b&&d.transaction!==e.transaction){const A="custom";d.transaction_info={...b,source:A}}return this.sendEvent(d,n),d}).then(null,d=>{throw Ko(d)||Jo(d)?d:(this.captureException(d,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:d}),Ci(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(e,n){this._numProcessing++,this._promiseBuffer.add(e).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===La&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){tt&&H.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){tt&&H.log("No outcomes to send");return}if(!this._dsn){tt&&H.log("No dsn provided, will not send outcomes");return}tt&&H.log("Sending outcomes:",e);const n=tp(e,this._options.tunnel&&rr(this._dsn));this.sendEnvelope(n)}}function Qo(t){return t==="replay_event"?"replay":t||"error"}function sp(t,e){const n=`${e} must return \`null\` or a valid event.`;if(tr(t))return t.then(r=>{if(!Dr(r)&&r!==null)throw Ci(n);return r},r=>{throw Ci(`${e} rejected with ${r}`)});if(!Dr(t)&&t!==null)throw Ci(n);return t}function ap(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:a,ignoreSpans:o}=e;let u=n;if(Ks(u)&&i)return i(u,r);if(ml(u)){if(a||o){const c=ep(u);if(o!=null&&o.length&&qi(c,o))return null;if(a){const l=a(c);l?u=Hr(n,np(l)):zs()}if(u.spans){const l=[],h=u.spans;for(const d of h){if(o!=null&&o.length&&qi(d,o)){R0(h,d);continue}if(a){const g=a(d);g?l.push(g):(zs(),l.push(d))}else l.push(d)}const f=u.spans.length-l.length;f&&t.recordDroppedEvent("before_send","span",f),u.spans=l}}if(s){if(u.spans){const c=u.spans.length;u.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return s(u,r)}}return u}function Ks(t){return t.type===void 0}function ml(t){return t.type==="transaction"}function op(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+gl(t.attributes)}function up(t){let e=0;return t.message&&(e+=t.message.length*2),e+gl(t.attributes)}function gl(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*Zo(n[0]):$n(n)?e+=Zo(n):e+=100}),e}function Zo(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function cp(t){return rs(t)&&"__sentry_fetch_url_host__"in t&&typeof t.__sentry_fetch_url_host__=="string"}function tu(t){return cp(t)?`${t.message} (${t.__sentry_fetch_url_host__})`:t.message}function lp(t,e){e.debug===!0&&(tt?H.enable():Qn(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Et().update(e.initialScope);const r=new t(e);return hp(r),r.init(),r}function hp(t){Et().setClient(t)}const fp="thismessage:/";function yl(t){return"isRelative"in t}function _l(t,e){const n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=n?fp:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const i=new URL(t,r);return n?{isRelative:n,pathname:i.pathname,search:i.search,hash:i.hash}:i}catch{}}function dp(t){if(yl(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function fn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function pp(t){return t.split(/[?#]/,1)[0]}function Fe(t,e=!0){if(t.startsWith("data:")){const n=t.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",i=t.includes(";base64,"),s=t.indexOf(",");let a="";if(e&&s!==-1){const o=t.slice(s+1);a=o.length>10?`${o.slice(0,10)}... [truncated]`:o}return`data:${r}${i?",base64":""}${a?`,${a}`:""}`}return t}function mp(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function vl(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:cn})),version:cn}),t._metadata=i}function El(t={}){const e=t.client||_t();if(!kd()||!e)return{};const n=yn(),r=er(n);if(r.getTraceData)return r.getTraceData(t);const i=t.scope||Et(),s=t.span||Kt(),a=s?T0(s):gp(i),o=s?$e(s):Jc(e,i),u=f0(o);if(!Bc.test(a))return H.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const l={"sentry-trace":a,baggage:u};return t.propagateTraceparent&&(l.traceparent=s?C0(s):yp(i)),l}function gp(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return $c(e,r,n)}function yp(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return qc(e,r,n)}const _p=100;function pn(t,e){const n=_t(),r=Ce();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=_p}=n.getOptions();if(s<=0)return;const o={timestamp:_n(),...t},u=i?Qn(()=>i(o,e)):o;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),r.addBreadcrumb(u,s))}let eu;const vp="FunctionToString",nu=new WeakMap,Ep=(()=>({name:vp,setupOnce(){eu=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Ma(this),n=nu.has(_t())&&e!==void 0?e:this;return eu.apply(n,t)}}catch{}},setup(t){nu.set(t,!0)}})),bp=Ep,Sp=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],wp="EventFilters",xp=(t={})=>{let e;return{name:wp,setup(n){const r=n.getOptions();e=ru(t,r)},processEvent(n,r,i){if(!e){const s=i.getOptions();e=ru(t,s)}return Ap(n,e)?null:n}}},Mp=((t={})=>({...xp(t),name:"InboundFilters"}));function ru(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Sp],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Ap(t,e){if(t.type){if(t.type==="transaction"&&Tp(t,e.ignoreTransactions))return tt&&H.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${on(t)}`),!0}else{if(Pp(t,e.ignoreErrors))return tt&&H.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${on(t)}`),!0;if(Ip(t))return tt&&H.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${on(t)}`),!0;if(Cp(t,e.denyUrls))return tt&&H.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${on(t)}.
Url: ${Ui(t)}`),!0;if(!Dp(t,e.allowUrls))return tt&&H.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${on(t)}.
Url: ${Ui(t)}`),!0}return!1}function Pp(t,e){return e!=null&&e.length?fl(t).some(n=>Oe(n,e)):!1}function Tp(t,e){if(!(e!=null&&e.length))return!1;const n=t.transaction;return n?Oe(n,e):!1}function Cp(t,e){if(!(e!=null&&e.length))return!1;const n=Ui(t);return n?Oe(n,e):!1}function Dp(t,e){if(!(e!=null&&e.length))return!0;const n=Ui(t);return n?Oe(n,e):!0}function Np(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ui(t){var e,n;try{const r=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(s=>{var a,o,u;return((a=s.mechanism)==null?void 0:a.parent_id)===void 0&&((u=(o=s.stacktrace)==null?void 0:o.frames)==null?void 0:u.length)}),i=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return i?Np(i):null}catch{return tt&&H.error(`Cannot extract url for event ${on(t)}`),null}}function Ip(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)!=null&&n.length?!t.message&&!t.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function kp(t,e,n,r,i,s){var o;if(!((o=i.exception)!=null&&o.values)||!s||!Me(s.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=Ys(t,e,r,s.originalException,n,i.exception.values,a,0))}function Ys(t,e,n,r,i,s,a,o){if(s.length>=n+1)return s;let u=[...s];if(Me(r[i],Error)){iu(a,o);const c=t(e,r[i]),l=u.length;su(c,i,l,o),u=Ys(t,e,n,r[i],i,[c,...u],c,l)}return Array.isArray(r.errors)&&r.errors.forEach((c,l)=>{if(Me(c,Error)){iu(a,o);const h=t(e,c),f=u.length;su(h,`errors[${l}]`,f,o),u=Ys(t,e,n,c,i,[h,...u],h,f)}}),u}function iu(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function su(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Rp(t){const e="console";Ve(e,t),Xe(e,Lp)}function Lp(){"console"in ht&&Sf.forEach(function(t){t in ht.console&&Xt(ht.console,t,function(e){return ji[t]=e,function(...n){Zt("console",{args:n,level:t});const i=ji[t];i==null||i.apply(ht.console,n)}})})}function Gp(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Op="Dedupe",Fp=(()=>{let t;return{name:Op,processEvent(e){if(e.type)return e;try{if(Bp(e,t))return tt&&H.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),jp=Fp;function Bp(t,e){return e?!!($p(t,e)||qp(t,e)):!1}function $p(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Sl(t,e)||!bl(t,e))}function qp(t,e){const n=au(e),r=au(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Sl(t,e)||!bl(t,e))}function bl(t,e){let n=yo(t),r=yo(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function Sl(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function au(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}const Up="ConversationId",Hp=(()=>({name:Up,setup(t){t.on("spanStart",e=>{const n=Et().getScopeData(),r=Ce().getScopeData(),i=n.conversationId||r.conversationId;i&&e.setAttribute(i0,i)})}})),zp=Hp;function Wp(t,e,n,r,i){if(!t.fetchData)return;const{method:s,url:a}=t.fetchData,o=ue()&&e(a);if(t.endTimestamp&&o){const d=t.fetchData.__span;if(!d)return;const g=r[d];g&&(Jp(g,t),Vp(g,t,i),delete r[d]);return}const{spanOrigin:u="auto.http.browser",propagateTraceparent:c=!1}=typeof i=="object"?i:{spanOrigin:i},l=!!Kt(),h=o&&l?ir(Yp(a,s,u)):new qe;if(t.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h,n(t.fetchData.url)){const d=t.args[0],g={...t.args[1]||{}},b=Xp(d,g,ue()&&l?h:void 0,c);b&&(t.args[1]=g,g.headers=b)}const f=_t();if(f){const d={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};f.emit("beforeOutgoingRequestSpan",h,d)}return h}function Vp(t,e,n){var i;const r=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;r==null||r(t,{headers:(i=e.response)==null?void 0:i.headers,error:e.error})}function Xp(t,e,n,r){const i=El({span:n,propagateTraceparent:r}),s=i["sentry-trace"],a=i.baggage,o=i.traceparent;if(!s)return;const u=e.headers||(wa(t)?t.headers:void 0);if(u)if(Kp(u)){const c=new Headers(u);if(c.get("sentry-trace")||c.set("sentry-trace",s),r&&o&&!c.get("traceparent")&&c.set("traceparent",o),a){const l=c.get("baggage");l?fi(l)||c.set("baggage",`${l},${a}`):c.set("baggage",a)}return c}else if(Array.isArray(u)){const c=[...u];u.find(h=>h[0]==="sentry-trace")||c.push(["sentry-trace",s]),r&&o&&!u.find(h=>h[0]==="traceparent")&&c.push(["traceparent",o]);const l=u.find(h=>h[0]==="baggage"&&fi(h[1]));return a&&!l&&c.push(["baggage",a]),c}else{const c="sentry-trace"in u?u["sentry-trace"]:void 0,l="traceparent"in u?u.traceparent:void 0,h="baggage"in u?u.baggage:void 0,f=h?Array.isArray(h)?[...h]:[h]:[],d=h&&(Array.isArray(h)?h.find(b=>fi(b)):fi(h));a&&!d&&f.push(a);const g={...u,"sentry-trace":c??s,baggage:f.length>0?f.join(","):void 0};return r&&o&&!l&&(g.traceparent=o),g}else return{...i}}function Jp(t,e){var n,r;if(e.response){Lc(t,e.response.status);const i=(r=(n=e.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(i){const s=parseInt(i);s>0&&t.setAttribute("http.response_content_length",s)}}else e.error&&t.setStatus({code:Tt,message:"internal_error"});t.end()}function fi(t){return t.split(",").some(e=>e.trim().startsWith(Ca))}function Kp(t){return typeof Headers<"u"&&Me(t,Headers)}function Yp(t,e,n){if(t.startsWith("data:")){const s=Fe(t);return{name:`${e} ${s}`,attributes:ou(t,void 0,e,n)}}const r=_l(t),i=r?dp(r):t;return{name:`${e} ${i}`,attributes:ou(t,r,e,n)}}function ou(t,e,n,r){const i={url:Fe(t),type:"fetch","http.method":n,[Ct]:r,[Te]:"http.client"};return e&&(yl(e)||(i["http.url"]=Fe(e.href),i["server.address"]=e.host),e.search&&(i["http.query"]=e.search),e.hash&&(i["http.fragment"]=e.hash)),i}function wl(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Rr=ht;function Qp(){return"history"in Rr&&!!Rr.history}function Zp(){if(!("fetch"in Rr))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Qs(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function t2(){var n;if(typeof EdgeRuntime=="string")return!0;if(!Zp())return!1;if(Qs(Rr.fetch))return!0;let t=!1;const e=Rr.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(t=Qs(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){tt&&H.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function xl(t,e){const n="fetch";Ve(n,t),Xe(n,()=>Ml(void 0,e))}function e2(t){const e="fetch-body-resolved";Ve(e,t),Xe(e,()=>Ml(r2))}function Ml(t,e=!1){e&&!t2()||Xt(ht,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:a}=i2(r),o={args:r,fetchData:{method:s,url:a},startTimestamp:Dt()*1e3,virtualError:i,headers:s2(r)};return t||Zt("fetch",{...o}),n.apply(ht,r).then(async u=>(t?t(u):Zt("fetch",{...o,endTimestamp:Dt()*1e3,response:u}),u),u=>{Zt("fetch",{...o,endTimestamp:Dt()*1e3,error:u}),rs(u)&&u.stack===void 0&&(u.stack=i.stack,zt(u,"framesToPop",1));const c=_t(),l=(c==null?void 0:c.getOptions().enhanceFetchErrorMessages)??"always";if(l!==!1&&u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(o.fetchData.url).host;l==="always"?u.message=`${u.message} (${d})`:zt(u,"__sentry_fetch_url_host__",d)}catch{}throw u})}})}async function n2(t,e){if(t!=null&&t.body){const n=t.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let s=!0;for(;s;){let a;try{a=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:o}=await r.read();clearTimeout(a),o&&(e(),s=!1)}catch{s=!1}finally{clearTimeout(a)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}function r2(t){let e;try{e=t.clone()}catch{return}n2(e,()=>{Zt("fetch-body-resolved",{endTimestamp:Dt()*1e3,response:t})})}function Di(t,e){return!!t&&typeof t=="object"&&!!t[e]}function uu(t){return typeof t=="string"?t:t?Di(t,"url")?t.url:t.toString?t.toString():"":""}function i2(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:uu(n),method:Di(r,"method")?String(r.method).toUpperCase():wa(n)&&Di(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:uu(e),method:Di(e,"method")?String(e.method).toUpperCase():"GET"}}function s2(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(wa(e))return new Headers(e.headers)}catch{}}function a2(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function o2(){return"npm"}function u2(){return!a2()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function c2(){return typeof window<"u"&&(!u2()||l2())}function l2(){const t=ht.process;return(t==null?void 0:t.type)==="renderer"}const ft=ht;let Zs=0;function Al(){return Zs>0}function h2(){Zs++,setTimeout(()=>{Zs--})}function Wn(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Ma(t))return t}catch{return t}const r=function(...i){try{const s=i.map(a=>Wn(a,e));return t.apply(this,s)}catch(s){throw h2(),ss(a=>{a.addEventProcessor(o=>(e.mechanism&&(qs(o,void 0),qn(o,e.mechanism)),o.extra={...o.extra,arguments:i},o)),Nd(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}Dc(r,t),zt(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function Oa(){const t=$r(),{referrer:e}=ft.document||{},{userAgent:n}=ft.navigator||{},r={...e&&{Referer:e},...n&&{"User-Agent":n}};return{url:t,headers:r}}function Fa(t,e){const n=ja(t,e),r={type:g2(e),value:y2(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function f2(t,e,n,r){const i=_t(),s=i==null?void 0:i.getOptions().normalizeDepth,a=S2(e),o={__serialized__:Kc(e,s)};if(a)return{exception:{values:[Fa(t,a)]},extra:o};const u={exception:{values:[{type:is(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:E2(e,{isUnhandledRejection:r})}]},extra:o};if(n){const c=ja(t,n);c.length&&(u.exception.values[0].stacktrace={frames:c})}return u}function Es(t,e){return{exception:{values:[Fa(t,e)]}}}function ja(t,e){const n=e.stacktrace||e.stack||"",r=p2(e),i=m2(e);try{return t(n,r,i)}catch{}return[]}const d2=/Minified React error #\d+;/i;function p2(t){return t&&d2.test(t.message)?1:0}function m2(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Pl(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function g2(t){const e=t==null?void 0:t.name;return!e&&Pl(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function y2(t){const e=t==null?void 0:t.message;return Pl(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?tu(e.error):tu(t):"No error message"}function _2(t,e,n,r){const i=(n==null?void 0:n.syntheticException)||void 0,s=Ba(t,e,i,r);return qn(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),os(s)}function v2(t,e,n="info",r,i){const s=(r==null?void 0:r.syntheticException)||void 0,a=ta(t,e,s,i);return a.level=n,r!=null&&r.event_id&&(a.event_id=r.event_id),os(a)}function Ba(t,e,n,r,i){let s;if(Pc(e)&&e.error)return Es(t,e.error);if(vo(e)||kf(e)){const a=e;if("stack"in e)s=Es(t,e);else{const o=a.name||(vo(a)?"DOMError":"DOMException"),u=a.message?`${o}: ${a.message}`:o;s=ta(t,u,n,r),qs(s,u)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return rs(e)?Es(t,e):Dr(e)||is(e)?(s=f2(t,e,n,i),qn(s,{synthetic:!0}),s):(s=ta(t,e,n,r),qs(s,`${e}`),qn(s,{synthetic:!0}),s)}function ta(t,e,n,r){const i={};if(r&&n){const s=ja(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),qn(i,{synthetic:!0})}if(Sa(e)){const{__sentry_template_string__:s,__sentry_template_values__:a}=e;return i.logentry={message:s,params:a},i}return i.message=e,i}function E2(t,{isUnhandledRejection:e}){const n=jf(t),r=e?"promise rejection":"exception";return Pc(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:is(t)?`Event \`${b2(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function b2(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function S2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}class w2 extends ip{constructor(e){var l;const n=x2(e),r=ft.SENTRY_SDK_SOURCE||o2();vl(n,"browser",["browser"],r),(l=n._metadata)!=null&&l.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:i,sendClientReports:s,enableLogs:a,_experiments:o,enableMetrics:u}=this._options,c=u??(o==null?void 0:o.enableMetrics)??!0;ft.document&&(s||a||c)&&ft.document.addEventListener("visibilitychange",()=>{ft.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),a&&ol(this),c&&cl(this))}),i&&this.on("beforeSendSession",mp)}eventFromException(e,n){return _2(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return v2(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,i)}}function x2(t){var e;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(e=ft.SENTRY_RELEASE)==null?void 0:e.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Vr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,it=ht,M2=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Xr=(t,e,n,r)=>{let i,s;return a=>{e.value>=0&&(a||r)&&(s=e.value-(i??0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=M2(e.value,n),t(e)))}},Jr=(t=!0)=>{var n,r;const e=(r=(n=it.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},sr=()=>{const t=Jr();return(t==null?void 0:t.activationStart)??0};function je(t,e,n){it.document&&it.addEventListener(t,e,n)}function Hi(t,e,n){it.document&&it.removeEventListener(t,e,n)}let Fn=-1;const Tl=new Set,A2=()=>{var t,e;return((t=it.document)==null?void 0:t.visibilityState)==="hidden"&&!((e=it.document)!=null&&e.prerendering)?0:1/0},Ni=t=>{if(P2(t)&&Fn>-1){if(t.type==="visibilitychange"||t.type==="pagehide")for(const e of Tl)e();isFinite(Fn)||(Fn=t.type==="visibilitychange"?t.timeStamp:0,Hi("prerenderingchange",Ni,!0))}},Kr=()=>{var t;if(it.document&&Fn<0){const e=sr();Fn=(it.document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>e)[0])==null?void 0:t.startTime)??A2(),je("visibilitychange",Ni,!0),je("pagehide",Ni,!0),je("prerenderingchange",Ni,!0)}return{get firstHiddenTime(){return Fn},onHidden(e){Tl.add(e)}}};function P2(t){var e;return t.type==="pagehide"||((e=it.document)==null?void 0:e.visibilityState)==="hidden"}const T2=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Yr=(t,e=-1)=>{var s,a;const n=Jr();let r="navigate";return n&&((s=it.document)!=null&&s.prerendering||sr()>0?r="prerender":(a=it.document)!=null&&a.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:T2(),navigationType:r}},bs=new WeakMap;function $a(t,e){try{return bs.get(t)||bs.set(t,new e),bs.get(t)}catch{return new e}}class zi{constructor(){zi.prototype.__init.call(this),zi.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var i;if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),(i=this._onAfterProcessingUnexpectedShift)==null||i.call(this,e)}}const ar=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},qa=t=>{let e=!1;return()=>{e||(t(),e=!0)}},us=t=>{var e;(e=it.document)!=null&&e.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},C2=[1800,3e3],D2=(t,e={})=>{us(()=>{const n=Kr(),r=Yr("FCP");let i;const a=ar("paint",o=>{for(const u of o)u.name==="first-contentful-paint"&&(a.disconnect(),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-sr(),0),r.entries.push(u),i(!0)))});a&&(i=Xr(t,r,C2,e.reportAllChanges))})},N2=[.1,.25],I2=(t,e={})=>{D2(qa(()=>{var u;const n=Yr("CLS",0);let r;const i=Kr(),s=$a(e,zi),a=c=>{for(const l of c)s._processEntry(l);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},o=ar("layout-shift",a);o&&(r=Xr(t,n,N2,e.reportAllChanges),i.onHidden(()=>{a(o.takeRecords()),r(!0)}),(u=it==null?void 0:it.setTimeout)==null||u.call(it,r))}))};let Cl=0,Ss=1/0,di=0;const k2=t=>{t.forEach(e=>{e.interactionId&&(Ss=Math.min(Ss,e.interactionId),di=Math.max(di,e.interactionId),Cl=di?(di-Ss)/7+1:0)})};let ea;const Dl=()=>ea?Cl:performance.interactionCount||0,R2=()=>{"interactionCount"in performance||ea||(ea=ar("event",k2,{type:"event",buffered:!0,durationThreshold:0}))},ws=10;let Nl=0;const L2=()=>Dl()-Nl;class Wi{constructor(){Wi.prototype.__init.call(this),Wi.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Nl=Dl(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(L2()/50));return this._longestInteractionList[e]}_processEntry(e){var i,s;if((i=this._onBeforeProcessingEntry)==null||i.call(this,e),!(e.interactionId||e.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<ws||e.duration>n._latency){if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((a,o)=>o._latency-a._latency),this._longestInteractionList.length>ws){const a=this._longestInteractionList.splice(ws);for(const o of a)this._longestInteractionMap.delete(o.id)}(s=this._onAfterProcessingINPCandidate)==null||s.call(this,r)}}}const Il=t=>{var n;const e=it.requestIdleCallback||it.setTimeout;((n=it.document)==null?void 0:n.visibilityState)==="hidden"?t():(t=qa(t),je("visibilitychange",t,{once:!0,capture:!0}),je("pagehide",t,{once:!0,capture:!0}),e(()=>{t(),Hi("visibilitychange",t,{capture:!0}),Hi("pagehide",t,{capture:!0})}))},G2=[200,500],O2=40,F2=(t,e={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Kr();us(()=>{R2();const r=Yr("INP");let i;const s=$a(e,Wi),a=u=>{Il(()=>{for(const l of u)s._processEntry(l);const c=s._estimateP98LongestInteraction();c&&c._latency!==r.value&&(r.value=c._latency,r.entries=c.entries,i())})},o=ar("event",a,{durationThreshold:e.durationThreshold??O2});i=Xr(t,r,G2,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{a(o.takeRecords()),i(!0)}))})};class j2{_processEntry(e){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,e)}}const B2=[2500,4e3],$2=(t,e={})=>{us(()=>{const n=Kr(),r=Yr("LCP");let i;const s=$a(e,j2),a=u=>{e.reportAllChanges||(u=u.slice(-1));for(const c of u)s._processEntry(c),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-sr(),0),r.entries=[c],i())},o=ar("largest-contentful-paint",a);if(o){i=Xr(t,r,B2,e.reportAllChanges);const u=qa(()=>{a(o.takeRecords()),o.disconnect(),i(!0)}),c=l=>{l.isTrusted&&(Il(u),Hi(l.type,c,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])je(l,c,{capture:!0})}})},q2=[800,1800],na=t=>{var e,n;(e=it.document)!=null&&e.prerendering?us(()=>na(t)):((n=it.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>na(t),!0):setTimeout(t)},U2=(t,e={})=>{const n=Yr("TTFB"),r=Xr(t,n,q2,e.reportAllChanges);na(()=>{const i=Jr();i&&(n.value=Math.max(i.responseStart-sr(),0),n.entries=[i],r(!0))})},xr={},Vi={};let kl,Rl,Ll,Gl;function Ol(t,e=!1){return cs("cls",t,W2,kl,e)}function Fl(t,e=!1){return cs("lcp",t,V2,Rl,e)}function H2(t){return cs("ttfb",t,X2,Ll)}function z2(t){return cs("inp",t,J2,Gl)}function Vn(t,e){return jl(t,e),Vi[t]||(K2(t),Vi[t]=!0),Bl(t,e)}function Qr(t,e){const n=xr[t];if(n!=null&&n.length)for(const r of n)try{r(e)}catch(i){Vr&&H.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${xe(r)}
Error:`,i)}}function W2(){return I2(t=>{Qr("cls",{metric:t}),kl=t},{reportAllChanges:!0})}function V2(){return $2(t=>{Qr("lcp",{metric:t}),Rl=t},{reportAllChanges:!0})}function X2(){return U2(t=>{Qr("ttfb",{metric:t}),Ll=t})}function J2(){return F2(t=>{Qr("inp",{metric:t}),Gl=t})}function cs(t,e,n,r,i=!1){jl(t,e);let s;return Vi[t]||(s=n(),Vi[t]=!0),r&&e({metric:r}),Bl(t,e,i?s:void 0)}function K2(t){const e={};t==="event"&&(e.durationThreshold=0),ar(t,n=>{Qr(t,{entries:n})},e)}function jl(t,e){xr[t]=xr[t]||[],xr[t].push(e)}function Bl(t,e,n){return()=>{n&&n();const r=xr[t];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function Y2(t){return"duration"in t}const Q2=t=>{const e=n=>{var r;(n.type==="pagehide"||((r=it.document)==null?void 0:r.visibilityState)==="hidden")&&t(n)};je("visibilitychange",e,{capture:!0,once:!0}),je("pagehide",e,{capture:!0,once:!0})};function xs(t){return typeof t=="number"&&isFinite(t)}function Ue(t,e,n,{...r}){const i=dt(t).start_timestamp;return i&&i>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),Ia(t,()=>{const s=ir({startTime:e,...r});return s&&s.end(n),s})}function Ua(t){var y;const e=_t();if(!e)return;const{name:n,transaction:r,attributes:i,startTime:s}=t,{release:a,environment:o,sendDefaultPii:u}=e.getOptions(),c=e.getIntegrationByName("Replay"),l=c==null?void 0:c.getReplayId(),h=Et(),f=h.getUser(),d=f!==void 0?f.email||f.id||f.ip_address:void 0;let g;try{g=h.getScopeData().contexts.profile.profile_id}catch{}const b={release:a,environment:o,user:d||void 0,profile_id:g||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":(y=it.navigator)==null?void 0:y.userAgent,"client.address":u?"{{auto}}":void 0,...i};return ir({name:n,attributes:b,startTime:s,experimental:{standalone:!0}})}function Zr(){return it.addEventListener&&it.performance}function Mt(t){return t/1e3}function Z2(t){let e="unknown",n="unknown",r="";for(const i of t){if(i==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}function $l(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function ql(t,e){let n,r=!1;function i(o){!r&&n&&e(o,n),r=!0}Q2(()=>{i("pagehide")});const s=t.on("beforeStartNavigationSpan",(o,u)=>{u!=null&&u.isRedirect||(i("navigation"),s(),a())}),a=t.on("afterStartPageLoadSpan",o=>{n=o.spanContext().spanId,a()})}function tm(t){let e=0,n;if(!$l("layout-shift"))return;const r=Ol(({metric:i})=>{const s=i.entries[i.entries.length-1];s&&(e=i.value,n=s)},!0);ql(t,(i,s)=>{em(e,n,s,i),r()})}function em(t,e,n,r){var c;Vr&&H.log(`Sending CLS span (${t})`);const i=e?Mt((Jt()||0)+e.startTime):Dt(),s=Et().getScopeData().transactionName,a=e?ne((c=e.sources[0])==null?void 0:c.node):"Layout shift",o={[Ct]:"auto.http.browser.cls",[Te]:"ui.webvital.cls",[nr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e!=null&&e.sources&&e.sources.forEach((l,h)=>{o[`cls.source.${h+1}`]=ne(l.node)});const u=Ua({name:a,transaction:s,attributes:o,startTime:i});u&&(u.addEvent("cls",{[zr]:"",[Wr]:t}),u.end(i))}function nm(t){let e=0,n;if(!$l("largest-contentful-paint"))return;const r=Fl(({metric:i})=>{const s=i.entries[i.entries.length-1];s&&(e=i.value,n=s)},!0);ql(t,(i,s)=>{rm(e,n,s,i),r()})}function rm(t,e,n,r){Vr&&H.log(`Sending LCP span (${t})`);const i=Mt((Jt()||0)+((e==null?void 0:e.startTime)||0)),s=Et().getScopeData().transactionName,a=e?ne(e.element):"Largest contentful paint",o={[Ct]:"auto.http.browser.lcp",[Te]:"ui.webvital.lcp",[nr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e&&(e.element&&(o["lcp.element"]=ne(e.element)),e.id&&(o["lcp.id"]=e.id),e.url&&(o["lcp.url"]=e.url),e.loadTime!=null&&(o["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(o["lcp.renderTime"]=e.renderTime),e.size!=null&&(o["lcp.size"]=e.size));const u=Ua({name:a,transaction:s,attributes:o,startTime:i});u&&(u.addEvent("lcp",{[zr]:"millisecond",[Wr]:t}),u.end(i))}function Yt(t){return t&&((Jt()||performance.timeOrigin)+t)/1e3}function Ul(t){var n;const e={};if(t.nextHopProtocol!=null){const{name:r,version:i}=Z2(t.nextHopProtocol);e["network.protocol.version"]=i,e["network.protocol.name"]=r}return Jt()||(n=Zr())!=null&&n.timeOrigin?im({...e,"http.request.redirect_start":Yt(t.redirectStart),"http.request.redirect_end":Yt(t.redirectEnd),"http.request.worker_start":Yt(t.workerStart),"http.request.fetch_start":Yt(t.fetchStart),"http.request.domain_lookup_start":Yt(t.domainLookupStart),"http.request.domain_lookup_end":Yt(t.domainLookupEnd),"http.request.connect_start":Yt(t.connectStart),"http.request.secure_connection_start":Yt(t.secureConnectionStart),"http.request.connection_end":Yt(t.connectEnd),"http.request.request_start":Yt(t.requestStart),"http.request.response_start":Yt(t.responseStart),"http.request.response_end":Yt(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0}):e}function im(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!=null))}const sm=2147483647;let cu=0,oe={},$t,In;function am({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=Zr();if(r&&Jt()){r.mark&&it.performance.mark("sentry-tracing-init");const i=e?nm(n):hm(),s=fm(),a=t?tm(n):lm();return()=>{i==null||i(),s(),a==null||a()}}return()=>{}}function om(){Vn("longtask",({entries:t})=>{const e=Kt();if(!e)return;const{op:n,start_timestamp:r}=dt(e);for(const i of t){const s=Mt(Jt()+i.startTime),a=Mt(i.duration);n==="navigation"&&r&&s<r||Ue(e,s,s+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ct]:"auto.ui.browser.metrics"}})}})}function um(){new PerformanceObserver(e=>{const n=Kt();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const i=Mt(Jt()+r.startTime),{start_timestamp:s,op:a}=dt(n);if(a==="navigation"&&s&&i<s)continue;const o=Mt(r.duration),u={[Ct]:"auto.ui.browser.metrics"},c=r.scripts[0],{invoker:l,invokerType:h,sourceURL:f,sourceFunctionName:d,sourceCharPosition:g}=c;u["browser.script.invoker"]=l,u["browser.script.invoker_type"]=h,f&&(u["code.filepath"]=f),d&&(u["code.function"]=d),g!==-1&&(u["browser.script.source_char_position"]=g),Ue(n,i,i+o,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:u})}}).observe({type:"long-animation-frame",buffered:!0})}function cm(){Vn("event",({entries:t})=>{const e=Kt();if(e){for(const n of t)if(n.name==="click"){const r=Mt(Jt()+n.startTime),i=Mt(n.duration),s={name:ne(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[Ct]:"auto.ui.browser.metrics"}},a=Cc(n.target);a&&(s.attributes["ui.component_name"]=a),Ue(e,r,r+i,s)}}})}function lm(){return Ol(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(oe.cls={value:t.value,unit:""},In=e)},!0)}function hm(){return Fl(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(oe.lcp={value:t.value,unit:"millisecond"},$t=e)},!0)}function fm(){return H2(({metric:t})=>{t.entries[t.entries.length-1]&&(oe.ttfb={value:t.value,unit:"millisecond"})})}function dm(t,e){const n=Zr(),r=Jt();if(!(n!=null&&n.getEntries)||!r)return;const i=Mt(r),s=n.getEntries(),{op:a,start_timestamp:o}=dt(t);s.slice(cu).forEach(u=>{const c=Mt(u.startTime),l=Mt(Math.max(0,u.duration));if(!(a==="navigation"&&o&&i+c<o))switch(u.entryType){case"navigation":{ym(t,u,i);break}case"mark":case"paint":case"measure":{mm(t,u,c,l,i,e.ignorePerformanceApiSpans);const h=Kr(),f=u.startTime<h.firstHiddenTime;u.name==="first-paint"&&f&&(oe.fp={value:u.startTime,unit:"millisecond"}),u.name==="first-contentful-paint"&&f&&(oe.fcp={value:u.startTime,unit:"millisecond"});break}case"resource":{Em(t,u,u.name,c,l,i,e.ignoreResourceSpans);break}}}),cu=Math.max(s.length-1,0),bm(t),a==="pageload"&&(xm(oe),e.recordClsOnPageloadSpan||delete oe.cls,e.recordLcpOnPageloadSpan||delete oe.lcp,Object.entries(oe).forEach(([u,c])=>{ed(u,c.value,c.unit)}),t.setAttribute("performance.timeOrigin",i),t.setAttribute("performance.activationStart",sr()),Sm(t,e)),$t=void 0,In=void 0,oe={}}function pm(t){if((t==null?void 0:t.entryType)==="measure")try{return t.detail.devtools.track==="Components "}catch{return}}function mm(t,e,n,r,i,s){if(pm(e)||["mark","measure"].includes(e.entryType)&&Oe(e.name,s))return;const a=Jr(!1),o=Mt(a?a.requestStart:0),u=i+Math.max(n,o),c=i+n,l=c+r,h={[Ct]:"auto.resource.browser.metrics"};u!==c&&(h["sentry.browser.measure_happened_before_request"]=!0,h["sentry.browser.measure_start_time"]=u),gm(h,e),u<=l&&Ue(t,u,l,{name:e.name,op:e.entryType,attributes:h})}function gm(t,e){try{const n=e.detail;if(!n)return;if(typeof n=="object"){for(const[r,i]of Object.entries(n))if(i&&$n(i))t[`sentry.browser.measure.detail.${r}`]=i;else if(i!==void 0)try{t[`sentry.browser.measure.detail.${r}`]=JSON.stringify(i)}catch{}return}if($n(n)){t["sentry.browser.measure.detail"]=n;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function ym(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{pi(t,e,r,n)}),pi(t,e,"secureConnection",n,"TLS/SSL"),pi(t,e,"fetch",n,"cache"),pi(t,e,"domainLookup",n,"DNS"),vm(t,e,n)}function pi(t,e,n,r,i=n){const s=_m(n),a=e[s],o=e[`${n}Start`];!o||!a||Ue(t,r+Mt(o),r+Mt(a),{op:`browser.${i}`,name:e.name,attributes:{[Ct]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function _m(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function vm(t,e,n){const r=n+Mt(e.requestStart),i=n+Mt(e.responseEnd),s=n+Mt(e.responseStart);e.responseEnd&&(Ue(t,r,i,{op:"browser.request",name:e.name,attributes:{[Ct]:"auto.ui.browser.metrics"}}),Ue(t,s,i,{op:"browser.response",name:e.name,attributes:{[Ct]:"auto.ui.browser.metrics"}}))}function Em(t,e,n,r,i,s,a){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(a!=null&&a.includes(o))return;const u={[Ct]:"auto.resource.browser.metrics"},c=fn(n);c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=n.includes(it.location.origin),wm(e,u,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const l={...u,...Ul(e)},h=s+r,f=h+i;Ue(t,h,f,{name:n.replace(it.location.origin,""),op:o,attributes:l})}function bm(t){const e=it.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),xs(n.rtt)&&(oe["connection.rtt"]={value:n.rtt,unit:"millisecond"})),xs(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),xs(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function Sm(t,e){$t&&e.recordLcpOnPageloadSpan&&($t.element&&t.setAttribute("lcp.element",ne($t.element)),$t.id&&t.setAttribute("lcp.id",$t.id),$t.url&&t.setAttribute("lcp.url",$t.url.trim().slice(0,200)),$t.loadTime!=null&&t.setAttribute("lcp.loadTime",$t.loadTime),$t.renderTime!=null&&t.setAttribute("lcp.renderTime",$t.renderTime),t.setAttribute("lcp.size",$t.size)),In!=null&&In.sources&&e.recordClsOnPageloadSpan&&In.sources.forEach((n,r)=>t.setAttribute(`cls.source.${r+1}`,ne(n.node)))}function wm(t,e,n){n.forEach(([r,i])=>{const s=t[r];s!=null&&(typeof s=="number"&&s<sm||typeof s=="string")&&(e[i]=s)})}function xm(t){const e=Jr(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Mm(){return Zr()&&Jt()?Vn("element",Am):()=>{}}const Am=({entries:t})=>{const e=Kt(),n=e?Ft(e):void 0,r=n?dt(n).description:Et().getScopeData().transactionName;t.forEach(i=>{var d,g;const s=i;if(!s.identifier)return;const a=s.name,o=s.renderTime,u=s.loadTime,[c,l]=u?[Mt(u),"load-time"]:o?[Mt(o),"render-time"]:[Dt(),"entry-emission"],h=a==="image-paint"?Mt(Math.max(0,(o??0)-(u??0))):0,f={[Ct]:"auto.ui.browser.elementtiming",[Te]:"ui.elementtiming",[pe]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":r,"element.id":s.id,"element.type":((g=(d=s.element)==null?void 0:d.tagName)==null?void 0:g.toLowerCase())||"unknown","element.size":s.naturalWidth&&s.naturalHeight?`${s.naturalWidth}x${s.naturalHeight}`:void 0,"element.render_time":o,"element.load_time":u,"element.url":s.url||void 0,"element.identifier":s.identifier,"element.paint_type":a};od({name:`element[${s.identifier}]`,attributes:f,startTime:c,onlyIfParent:!0},b=>{b.end(c+h)})})},Pm=1e3;let lu,ra,ia;function Tm(t){Ve("dom",t),Xe("dom",Cm)}function Cm(){if(!it.document)return;const t=Zt.bind(null,"dom"),e=hu(t,!0);it.document.addEventListener("click",e,!1),it.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{var s,a;const i=(s=it[n])==null?void 0:s.prototype;(a=i==null?void 0:i.hasOwnProperty)!=null&&a.call(i,"addEventListener")&&(Xt(i,"addEventListener",function(o){return function(u,c,l){if(u==="click"||u=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=h[u]=h[u]||{refCount:0};if(!f.handler){const d=hu(t);f.handler=d,o.call(this,u,d,l)}f.refCount++}catch{}return o.call(this,u,c,l)}}),Xt(i,"removeEventListener",function(o){return function(u,c,l){if(u==="click"||u=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},f=h[u];f&&(f.refCount--,f.refCount<=0&&(o.call(this,u,f.handler,l),f.handler=void 0,delete h[u]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,u,c,l)}}))})}function Dm(t){if(t.type!==ra)return!1;try{if(!t.target||t.target._sentryId!==ia)return!1}catch{}return!0}function Nm(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function hu(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Im(n);if(Nm(n.type,r))return;zt(n,"_sentryCaptured",!0),r&&!r._sentryId&&zt(r,"_sentryId",te());const i=n.type==="keypress"?"input":n.type;Dm(n)||(t({event:n,name:i,global:e}),ra=n.type,ia=r?r._sentryId:void 0),clearTimeout(lu),lu=it.setTimeout(()=>{ia=void 0,ra=void 0},Pm)}}function Im(t){try{return t.target}catch{return null}}let mi;function Ha(t){const e="history";Ve(e,t),Xe(e,km)}function km(){if(it.addEventListener("popstate",()=>{const e=it.location.href,n=mi;if(mi=e,n===e)return;Zt("history",{from:n,to:e})}),!Qp())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const i=mi,s=Rm(String(r));if(mi=s,i===s)return e.apply(this,n);Zt("history",{from:i,to:s})}return e.apply(this,n)}}Xt(it.history,"pushState",t),Xt(it.history,"replaceState",t)}function Rm(t){try{return new URL(t,it.location.origin).toString()}catch{return t}}const Ii={};function Lm(t){const e=Ii[t];if(e)return e;let n=it[t];if(Qs(n))return Ii[t]=n.bind(it);const r=it.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s!=null&&s[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){Vr&&H.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(Ii[t]=n.bind(it))}function Gm(t){Ii[t]=void 0}const kn="__sentry_xhr_v3__";function Hl(t){Ve("xhr",t),Xe("xhr",Om)}function Om(){if(!it.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=Dt()*1e3,a=Se(r[0])?r[0].toUpperCase():void 0,o=Fm(r[1]);if(!a||!o)return e.apply(n,r);n[kn]={method:a,url:o,request_headers:{}},a==="POST"&&o.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const u=()=>{const c=n[kn];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const l={endTimestamp:Dt()*1e3,startTimestamp:s,xhr:n,virtualError:i};Zt("xhr",l)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,l,h){return u(),c.apply(l,h)}}):n.addEventListener("readystatechange",u),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,l,h){const[f,d]=h,g=l[kn];return g&&Se(f)&&Se(d)&&(g.request_headers[f.toLowerCase()]=d),c.apply(l,h)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[kn];if(!i)return e.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:Dt()*1e3,xhr:n};return Zt("xhr",s),e.apply(n,r)}})}function Fm(t){if(Se(t))return t;try{return t.toString()}catch{}}function jm(t){let e;try{e=t.getAllResponseHeaders()}catch(n){return Vr&&H.error(n,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return s&&(n[i.toLowerCase()]=s),n},{}):{}}const Ms=[],ki=new Map,Dn=new Map,Bm=60;function $m(){if(Zr()&&Jt()){const e=qm();return()=>{e()}}return()=>{}}const sa={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function qm(){return z2(Um)}const Um=({metric:t})=>{if(t.value==null)return;const e=Mt(t.value);if(e>Bm)return;const n=t.entries.find(g=>g.duration===t.value&&sa[g.name]);if(!n)return;const{interactionId:r}=n,i=sa[n.name],s=Mt(Jt()+n.startTime),a=Kt(),o=a?Ft(a):void 0,u=r!=null?ki.get(r):void 0,c=(u==null?void 0:u.span)||o,l=c?dt(c).description:Et().getScopeData().transactionName,h=(u==null?void 0:u.elementName)||ne(n.target),f={[Ct]:"auto.http.browser.inp",[Te]:`ui.interaction.${i}`,[nr]:n.duration},d=Ua({name:h,transaction:l,attributes:f,startTime:s});d&&(d.addEvent("inp",{[zr]:"millisecond",[Wr]:t.value}),d.end(s+e))};function Hm(){const t=Object.keys(sa);c2()&&t.forEach(i=>{it.addEventListener(i,e,{capture:!0,passive:!0})});function e(i){const s=i.target;if(!s)return;const a=ne(s),o=Math.round(i.timeStamp);if(Dn.set(o,a),Dn.size>50){const u=Dn.keys().next().value;u!==void 0&&Dn.delete(u)}}function n(i){const s=Math.round(i.startTime);let a=Dn.get(s);if(!a)for(let o=-5;o<=5;o++){const u=Dn.get(s+o);if(u){a=u;break}}return a||"<unknown>"}const r=({entries:i})=>{const s=Kt(),a=s&&Ft(s);i.forEach(o=>{if(!Y2(o))return;const u=o.interactionId;if(u==null||ki.has(u))return;const c=o.target?ne(o.target):n(o);if(Ms.length>10){const l=Ms.shift();ki.delete(l)}Ms.push(u),ki.set(u,{span:a,elementName:c})})};Vn("event",r),Vn("first-input",r)}const zm=40;function Wm(t,e=Lm("fetch")){let n=0,r=0;async function i(s){const a=s.body.length;n+=a,r++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const u=await e(t.url,o);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw Gm("fetch"),u}finally{n-=a,r--}}return Zd(t,i,Ga(t.bufferSize||zm))}const re=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vm=30,Xm=50;function aa(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?dn:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const Jm=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Km=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ym=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qm=/at (.+?) ?\(data:(.+?),/,Zm=t=>{const e=t.match(Qm);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=Jm.exec(t);if(n){const[,i,s,a]=n;return aa(i,dn,+s,+a)}const r=Km.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const o=Ym.exec(r[2]);o&&(r[2]=o[1],r[3]=o[2],r[4]=o[3])}const[s,a]=zl(r[1]||dn,r[2]);return aa(a,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},tg=[Vm,Zm],eg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ng=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rg=t=>{const e=eg.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=ng.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||dn;return[i,r]=zl(i,r),aa(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},ig=[Xm,rg],sg=[tg,ig],ag=Sc(...sg),zl=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:dn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},gi=1024,og="Breadcrumbs",ug=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:og,setup(n){e.console&&Rp(fg(n)),e.dom&&Tm(hg(n,e.dom)),e.xhr&&Hl(dg(n)),e.fetch&&xl(pg(n)),e.history&&Ha(mg(n)),e.sentry&&n.on("beforeSendEvent",lg(n))}}}),cg=ug;function lg(t){return function(n){_t()===t&&pn({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:on(n)},{event:n})}}function hg(t,e){return function(r){if(_t()!==t)return;let i,s,a=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>gi&&(re&&H.warn(`\`dom.maxStringLength\` cannot exceed ${gi}, but a value of ${o} was configured. Sentry will use ${gi} instead.`),o=gi),typeof a=="string"&&(a=[a]);try{const c=r.event,l=gg(c)?c.target:c;i=ne(l,{keyAttrs:a,maxStringLength:o}),s=Cc(l)}catch{i="<unknown>"}if(i.length===0)return;const u={category:`ui.${r.name}`,message:i};s&&(u.data={"ui.component_name":s}),pn(u,{event:r.event,name:r.name,global:r.global})}}function fg(t){return function(n){if(_t()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Gp(n.level),message:So(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${So(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;pn(r,{input:n.args,level:n.level})}}function dg(t){return function(n){if(_t()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[kn];if(!r||!i||!s)return;const{method:a,url:o,status_code:u,body:c}=s,l={method:a,url:o,status_code:u},h={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},f={category:"xhr",data:l,type:"http",level:wl(u)};t.emit("beforeOutgoingRequestBreadcrumb",f,h),pn(f,h)}}function pg(t){return function(n){if(_t()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,a={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i},o={category:"fetch",data:s,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",o,a),pn(o,a)}else{const s=n.response,a={...n.fetchData,status_code:s==null?void 0:s.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s==null||s.status;const o={input:n.args,response:s,startTimestamp:r,endTimestamp:i},u={category:"fetch",data:a,type:"http",level:wl(a.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",u,o),pn(u,o)}}}function mg(t){return function(n){if(_t()!==t)return;let r=n.from,i=n.to;const s=fn(ft.location.href);let a=r?fn(r):void 0;const o=fn(i);a!=null&&a.path||(a=s),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),pn({category:"navigation",data:{from:r,to:i}})}}function gg(t){return!!t&&!!t.target}const yg=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],_g="BrowserApiErrors",vg=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:_g,setupOnce(){e.setTimeout&&Xt(ft,"setTimeout",fu),e.setInterval&&Xt(ft,"setInterval",fu),e.requestAnimationFrame&&Xt(ft,"requestAnimationFrame",bg),e.XMLHttpRequest&&"XMLHttpRequest"in ft&&Xt(XMLHttpRequest.prototype,"send",Sg);const n=e.eventTarget;n&&(Array.isArray(n)?n:yg).forEach(i=>wg(i,e))}}}),Eg=vg;function fu(t){return function(...e){const n=e[0];return e[0]=Wn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${xe(t)}`}}),t.apply(this,e)}}function bg(t){return function(e){return t.apply(this,[Wn(e,{mechanism:{data:{handler:xe(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Sg(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Xt(n,i,function(s){const a={mechanism:{data:{handler:xe(s)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},o=Ma(s);return o&&(a.mechanism.data.handler=xe(o)),Wn(s,a)})}),t.apply(this,e)}}function wg(t,e){var i,s;const r=(i=ft[t])==null?void 0:i.prototype;(s=r==null?void 0:r.hasOwnProperty)!=null&&s.call(r,"addEventListener")&&(Xt(r,"addEventListener",function(a){return function(o,u,c){try{xg(u)&&(u.handleEvent=Wn(u.handleEvent,{mechanism:{data:{handler:xe(u),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&Mg(this,o,u),a.apply(this,[o,Wn(u,{mechanism:{data:{handler:xe(u),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),c])}}),Xt(r,"removeEventListener",function(a){return function(o,u,c){try{const l=u.__sentry_wrapped__;l&&a.call(this,o,l,c)}catch{}return a.call(this,o,u,c)}}))}function xg(t){return typeof t.handleEvent=="function"}function Mg(t,e,n){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,n)}const Ag=()=>({name:"BrowserSession",setupOnce(){if(typeof ft.document>"u"){re&&H.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Uo({ignoreDuration:!0}),Ho(),Ha(({from:t,to:e})=>{t!==void 0&&t!==e&&(Uo({ignoreDuration:!0}),Ho())})}}),Pg="GlobalHandlers",Tg=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Pg,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(Dg(n),du("onerror")),e.onunhandledrejection&&(Ng(n),du("onunhandledrejection"))}}}),Cg=Tg;function Dg(t){xc(e=>{const{stackParser:n,attachStacktrace:r}=Wl();if(_t()!==t||Al())return;const{msg:i,url:s,line:a,column:o,error:u}=e,c=Rg(Ba(n,u||i,void 0,r,!1),s,a,o);c.level="error",rl(c,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Ng(t){Mc(e=>{const{stackParser:n,attachStacktrace:r}=Wl();if(_t()!==t||Al())return;const i=Ig(e),s=$n(i)?kg(i):Ba(n,i,void 0,r,!0);s.level="error",rl(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Ig(t){if($n(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function kg(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Rg(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],a=s[0]=s[0]||{},o=a.stacktrace=a.stacktrace||{},u=o.frames=o.frames||[],c=r,l=n,h=Lg(e)??$r();return u.length===0&&u.push({colno:c,filename:h,function:dn,in_app:!0,lineno:l}),t}function du(t){re&&H.log(`Global Handler attached: ${t}`)}function Wl(){const t=_t();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function Lg(t){if(!(!Se(t)||t.length===0))return t.startsWith("data:")?`<${Fe(t,!1)}>`:t}const Gg=()=>({name:"HttpContext",preprocessEvent(t){var r;if(!ft.navigator&&!ft.location&&!ft.document)return;const e=Oa(),n={...e.headers,...(r=t.request)==null?void 0:r.headers};t.request={...e,...t.request,headers:n}}}),Og="cause",Fg=5,jg="LinkedErrors",Bg=((t={})=>{const e=t.limit||Fg,n=t.key||Og;return{name:jg,preprocessEvent(r,i,s){const a=s.getOptions();kp(Fa,a.stackParser,n,e,r,i)}}}),$g=Bg;function qg(){return Ug()?(re&&Qn(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Ug(){var s;if(typeof ft.window>"u")return!1;const t=ft;if(t.nw)return!1;const e=t.chrome||t.browser;if(!((s=e==null?void 0:e.runtime)!=null&&s.id))return!1;const n=$r(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ft===ft.top&&r.some(a=>n.startsWith(`${a}://`)))}function Hg(t){return[Mp(),bp(),zp(),Eg(),cg(),Cg(),$g(),jp(),Gg(),Ag()]}function zg(t={}){const e=!t.skipBrowserExtensionCheck&&qg();let n=t.defaultIntegrations==null?Hg():t.defaultIntegrations;const r={...t,enabled:e?!1:t.enabled,stackParser:Cf(t.stackParser||ag),integrations:Bd({integrations:t.integrations,defaultIntegrations:n}),transport:t.transport||Wm};return lp(w2,r)}function Wg(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function Vl(t){try{return new URL(t,ft.location.origin).href}catch{return}}function Vg(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Xl(t){try{return new Headers(t)}catch{return}}const pu=new WeakMap,As=new Map,Jl={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Xg(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:s,enableHTTPTimings:a,tracePropagationTargets:o,onRequestSpanStart:u,onRequestSpanEnd:c}={...Jl,...e},l=typeof s=="function"?s:g=>!0,h=g=>Jg(g,o),f={},d=t.getOptions().propagateTraceparent;n&&(t.addEventProcessor(g=>(g.type==="transaction"&&g.spans&&g.spans.forEach(b=>{if(b.op==="http.client"){const y=As.get(b.span_id);y&&(b.timestamp=y/1e3,As.delete(b.span_id))}}),g)),i&&e2(g=>{if(g.response){const b=pu.get(g.response);b&&g.endTimestamp&&As.set(b,g.endTimestamp)}}),xl(g=>{const b=Wp(g,l,h,f,{propagateTraceparent:d,onRequestSpanEnd:c});if(g.response&&g.fetchData.__span&&pu.set(g.response,g.fetchData.__span),b){const y=Vl(g.fetchData.url),A=y?fn(y).host:void 0;b.setAttributes({"http.url":y?Fe(y):void 0,"server.address":A}),a&&mu(b),u==null||u(b,{headers:g.headers})}})),r&&Hl(g=>{var y;const b=Kg(g,l,h,f,d,c);b&&(a&&mu(b),u==null||u(b,{headers:Xl((y=g.xhr.__sentry_xhr_v3__)==null?void 0:y.request_headers)}))})}function mu(t){const{url:e}=dt(t).data;if(!e||typeof e!="string")return;const n=Vn("resource",({entries:r})=>{r.forEach(i=>{Vg(i)&&i.name.endsWith(e)&&(t.setAttributes(Ul(i)),setTimeout(n))})})}function Jg(t,e){const n=$r();if(n){let r,i;try{r=new URL(t,n),i=new URL(n).origin}catch{return!1}const s=r.origin===i;return e?Oe(r.toString(),e)||s&&Oe(r.pathname,e):s}else{const r=!!t.match(/^\/(?!\/)/);return e?Oe(t,e):r}}function Kg(t,e,n,r,i,s){const a=t.xhr,o=a==null?void 0:a[kn];if(!a||a.__sentry_own_request__||!o)return;const{url:u,method:c}=o,l=ue()&&e(u);if(t.endTimestamp&&l){const A=a.__sentry_xhr_span_id__;if(!A)return;const w=r[A];w&&o.status_code!==void 0&&(Lc(w,o.status_code),w.end(),s==null||s(w,{headers:Xl(jm(a)),error:t.error}),delete r[A]);return}const h=Vl(u),f=fn(h||u),d=Fe(pp(u)),g=!!Kt(),b=l&&g?ir({name:`${c} ${d}`,attributes:{url:Fe(u),type:"xhr","http.method":c,"http.url":h?Fe(h):void 0,"server.address":f==null?void 0:f.host,[Ct]:"auto.http.browser",[Te]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new qe;a.__sentry_xhr_span_id__=b.spanContext().spanId,r[a.__sentry_xhr_span_id__]=b,n(u)&&Yg(a,ue()&&g?b:void 0,i);const y=_t();return y&&y.emit("beforeOutgoingRequestSpan",b,t),b}function Yg(t,e,n){const{"sentry-trace":r,baggage:i,traceparent:s}=El({span:e,propagateTraceparent:n});r&&Qg(t,r,i,s)}function Qg(t,e,n,r){var s;const i=(s=t.__sentry_xhr_v3__)==null?void 0:s.request_headers;if(!(i!=null&&i["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),r&&!(i!=null&&i.traceparent)&&t.setRequestHeader("traceparent",r),n){const a=i==null?void 0:i.baggage;(!a||!Wg(a))&&t.setRequestHeader("baggage",n)}}catch{}}function Zg(){ft.document?ft.document.addEventListener("visibilitychange",()=>{const t=Kt();if(!t)return;const e=Ft(t);if(ft.document.hidden&&e){const n="cancelled",{op:r,status:i}=dt(e);re&&H.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:Tt,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):re&&H.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const t1=3600,Kl="sentry_previous_trace",e1="sentry.previous_trace";function n1(t,{linkPreviousTrace:e,consistentTraceSampling:n}){const r=e==="session-storage";let i=r?s1():void 0;t.on("spanStart",a=>{if(Ft(a)!==a)return;const o=Et().getPropagationContext();i=r1(i,a,o),r&&i1(i)});let s=!0;n&&t.on("beforeSampling",a=>{if(!i)return;const o=Et(),u=o.getPropagationContext();if(s&&u.parentSpanId){s=!1;return}o.setPropagationContext({...u,dsc:{...u.dsc,sample_rate:String(i.sampleRate),sampled:String(oa(i.spanContext))},sampleRand:i.sampleRand}),a.parentSampled=oa(i.spanContext),a.parentSampleRate=i.sampleRate,a.spanAttributes={...a.spanAttributes,[Rc]:i.sampleRate}})}function r1(t,e,n){const r=dt(e);function i(){var o,u;try{return Number((o=n.dsc)==null?void 0:o.sample_rate)??Number((u=r.data)==null?void 0:u[Aa])}catch{return 0}}const s={spanContext:e.spanContext(),startTimestamp:r.start_timestamp,sampleRate:i(),sampleRand:n.sampleRand};if(!t)return s;const a=t.spanContext;return a.traceId===r.trace_id?t:(Date.now()/1e3-t.startTimestamp<=t1&&(re&&H.log(`Adding previous_trace \`${JSON.stringify(a)}\` link to span \`${JSON.stringify({op:r.op,...e.spanContext()})}\``),e.addLink({context:a,attributes:{[r0]:"previous_trace"}}),e.setAttribute(e1,`${a.traceId}-${a.spanId}-${oa(a)?1:0}`)),s)}function i1(t){try{ft.sessionStorage.setItem(Kl,JSON.stringify(t))}catch(e){re&&H.warn("Could not store previous trace in sessionStorage",e)}}function s1(){var t;try{const e=(t=ft.sessionStorage)==null?void 0:t.getItem(Kl);return JSON.parse(e)}catch{return}}function oa(t){return t.traceFlags===1}const a1="BrowserTracing",o1={...Ti,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Jl},u1=((t={})=>{const e={name:void 0,source:void 0},n=ft.document,{enableInp:r,enableElementTiming:i,enableLongTask:s,enableLongAnimationFrame:a,_experiments:{enableInteractions:o,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:c},beforeStartSpan:l,idleTimeout:h,finalTimeout:f,childSpanTimeout:d,markBackgroundSpan:g,traceFetch:b,traceXHR:y,trackFetchStreamPerformance:A,shouldCreateSpanForRequest:w,enableHTTPTimings:M,ignoreResourceSpans:D,ignorePerformanceApiSpans:N,instrumentPageLoad:P,instrumentNavigation:x,detectRedirects:F,linkPreviousTrace:v,consistentTraceSampling:_,enableReportPageLoaded:T,onRequestSpanStart:I,onRequestSpanEnd:k}={...o1,...t};let R,W,Y;function V(G,$,j=!0){const O=$.op==="pageload",Q=$.name,Z=l?l($):$,K=Z.attributes||{};if(Q!==Z.name&&(K[pe]="custom",Z.attributes=K),!j){const ot=_n();ir({...Z,startTime:ot}).end(ot);return}e.name=Z.name,e.source=K[pe];const X=nl(Z,{idleTimeout:h,finalTimeout:f,childSpanTimeout:d,disableAutoFinish:O,beforeSpanEnd:ot=>{R==null||R(),dm(ot,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!c,ignoreResourceSpans:D,ignorePerformanceApiSpans:N}),yu(G,void 0);const et=Et(),ct=et.getPropagationContext();et.setPropagationContext({...ct,traceId:X.spanContext().traceId,sampled:Je(X),dsc:$e(ot)}),O&&(Y=void 0)},trimIdleSpanEndTimestamp:!T});O&&T&&(Y=X),yu(G,X);function at(){n&&["interactive","complete"].includes(n.readyState)&&G.emit("idleSpanEnableAutoFinish",X)}O&&!T&&n&&(n.addEventListener("readystatechange",()=>{at()}),at())}return{name:a1,setup(G){if(k0(),R=am({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:c||!1,client:G}),r&&$m(),i&&Mm(),a&&ht.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?um():s&&om(),o&&cm(),F&&n){const j=()=>{W=Dt()};addEventListener("click",j,{capture:!0}),addEventListener("keydown",j,{capture:!0,passive:!0})}function $(){const j=Lr(G);j&&!dt(j).timestamp&&(re&&H.log(`[Tracing] Finishing current active span with op: ${dt(j).op}`),j.setAttribute(Nr,"cancelled"),j.end())}G.on("startNavigationSpan",(j,O)=>{if(_t()!==G)return;if(O!=null&&O.isRedirect){re&&H.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),V(G,{op:"navigation.redirect",...j},!1);return}W=void 0,$(),Ce().setPropagationContext({traceId:Ae(),sampleRand:Math.random(),propagationSpanId:ue()?void 0:we()});const Q=Et();Q.setPropagationContext({traceId:Ae(),sampleRand:Math.random(),propagationSpanId:ue()?void 0:we()}),Q.setSDKProcessingMetadata({normalizedRequest:void 0}),V(G,{op:"navigation",...j,parentSpan:null,forceTransaction:!0})}),G.on("startPageLoadSpan",(j,O={})=>{if(_t()!==G)return;$();const Q=O.sentryTrace||gu("sentry-trace"),Z=O.baggage||gu("baggage"),K=x0(Q,Z),X=Et();X.setPropagationContext(K),ue()||(X.getPropagationContext().propagationSpanId=we()),X.setSDKProcessingMetadata({normalizedRequest:Oa()}),V(G,{op:"pageload",...j})}),G.on("endPageloadSpan",()=>{T&&Y&&(Y.setAttribute(Nr,"reportPageLoaded"),Y.end())})},afterAllSetup(G){let $=$r();if(v!=="off"&&n1(G,{linkPreviousTrace:v,consistentTraceSampling:_}),ft.location){if(P){const j=Jt();c1(G,{name:ft.location.pathname,startTime:j?j/1e3:void 0,attributes:{[pe]:"url",[Ct]:"auto.pageload.browser"}})}x&&Ha(({to:j,from:O})=>{if(O===void 0&&($==null?void 0:$.indexOf(j))!==-1){$=void 0;return}$=void 0;const Q=_l(j),Z=Lr(G),K=Z&&F&&f1(Z,W);l1(G,{name:(Q==null?void 0:Q.pathname)||ft.location.pathname,attributes:{[pe]:"url",[Ct]:"auto.navigation.browser"}},{url:j,isRedirect:K})})}g&&Zg(),o&&h1(G,h,f,d,e),r&&Hm(),Xg(G,{traceFetch:b,traceXHR:y,trackFetchStreamPerformance:A,tracePropagationTargets:G.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:M,onRequestSpanStart:I,onRequestSpanEnd:k})}}});function c1(t,e,n){t.emit("startPageLoadSpan",e,n),Et().setTransactionName(e.name);const r=Lr(t);return r&&t.emit("afterStartPageLoadSpan",r),r}function l1(t,e,n){const{url:r,isRedirect:i}=n||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:i}),t.emit("startNavigationSpan",e,{isRedirect:i});const s=Et();return s.setTransactionName(e.name),r&&!i&&s.setSDKProcessingMetadata({normalizedRequest:{...Oa(),url:r}}),Lr(t)}function gu(t){const e=ft.document,n=e==null?void 0:e.querySelector(`meta[name=${t}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function h1(t,e,n,r,i){const s=ft.document;let a;const o=()=>{const u="ui.action.click",c=Lr(t);if(c){const l=dt(c).op;if(["navigation","pageload"].includes(l)){re&&H.warn(`[Tracing] Did not create ${u} span because a pageload or navigation span is in progress.`);return}}if(a&&(a.setAttribute(Nr,"interactionInterrupted"),a.end(),a=void 0),!i.name){re&&H.warn(`[Tracing] Did not create ${u} transaction because _latestRouteName is missing.`);return}a=nl({name:i.name,op:u,attributes:{[pe]:i.source||"url"}},{idleTimeout:e,finalTimeout:n,childSpanTimeout:r})};s&&addEventListener("click",o,{capture:!0})}const Yl="_sentry_idleSpan";function Lr(t){return t[Yl]}function yu(t,e){zt(t,Yl,e)}const _u=1.5;function f1(t,e){const n=dt(t),r=_n(),i=n.start_timestamp;return!(r-i>_u||e&&r-e<=_u)}function d1(t){const e={...t};return vl(e,"react"),Id("react",{version:B.version}),zg(e)}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ql=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},u)=>B.createElement("svg",{ref:u,...m1,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Ql("lucide",i),...o},[...a.map(([c,l])=>B.createElement(c,l)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,e)=>{const n=B.forwardRef(({className:r,...i},s)=>B.createElement(g1,{ref:s,iconNode:e,className:Ql(`lucide-${p1(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=gt("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=gt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=gt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=gt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=gt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=gt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=gt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=gt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=gt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=gt("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=gt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=gt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=gt("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=gt("LocateOff",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["path",{d:"M7.11 7.11C5.83 8.39 5 10.1 5 12c0 3.87 3.13 7 7 7 1.9 0 3.61-.83 4.89-2.11",key:"1oh7ia"}],["path",{d:"M18.71 13.96c.19-.63.29-1.29.29-1.96 0-3.87-3.13-7-7-7-.67 0-1.33.1-1.96.29",key:"3qdecy"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=gt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=gt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=gt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=gt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=gt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=gt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=gt("Pentagon",[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=gt("Spline",[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=gt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=gt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function $1({theme:t,onThemeChange:e}){const n=()=>{const i=["light","dark","system"],a=(i.indexOf(t)+1)%i.length,o=i[a];o&&e(o)},r=t==="dark"?G1:t==="light"?O1:L1;return S.jsxs("header",{className:"flex h-10 shrink-0 items-center justify-between border-b border-neutral-200 bg-white px-3 md:h-14 md:px-4 dark:border-neutral-800 dark:bg-neutral-900",children:[S.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[S.jsx("h1",{className:"text-lg font-semibold text-primary-600 md:text-xl dark:text-primary-400",children:"GeoFiddle"}),S.jsx("span",{className:"rounded bg-primary-100 px-1 py-0.5 text-[10px] font-medium text-primary-700 md:px-1.5 md:text-xs dark:bg-primary-900 dark:text-primary-300",children:"v2"})]}),S.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[S.jsx("button",{onClick:n,className:"rounded-md p-1.5 text-neutral-600 hover:bg-neutral-100 md:p-2 dark:text-neutral-400 dark:hover:bg-neutral-800","aria-label":`Current theme: ${t}. Click to change.`,children:S.jsx(r,{className:"h-4 w-4 md:h-5 md:w-5"})}),S.jsxs("a",{href:"https://github.com/ruipinge/geofiddle",target:"_blank",rel:"noopener noreferrer",className:"hidden items-center gap-1 rounded-md px-2 py-1.5 text-sm text-neutral-600 hover:bg-neutral-100 md:flex dark:text-neutral-400 dark:hover:bg-neutral-800","aria-label":"View source on GitHub",children:[S.jsx("span",{children:"GitHub"}),S.jsx(M1,{className:"h-4 w-4"})]})]})]})}function q1({left:t,right:e,leftWidthPercent:n,minLeftWidthPercent:r,maxLeftWidthPercent:i,onLeftWidthPercentChange:s}){const[a,o]=B.useState(!1),[u,c]=B.useState(0),l=B.useRef(null);B.useEffect(()=>{const d=l.current;if(!d)return;const g=()=>{c(d.getBoundingClientRect().width)};g();const b=new ResizeObserver(g);return b.observe(d),()=>{b.disconnect()}},[]);const h=B.useCallback(()=>{o(!0)},[]);B.useEffect(()=>{if(!a)return;const d=b=>{if(!l.current)return;const y=l.current.getBoundingClientRect(),w=(b.clientX-y.left)/y.width*100,M=Math.min(i,Math.max(r,w));s(M)},g=()=>{o(!1)};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",g)}},[a,r,i,s]);const f=u>0?n/100*u:0;return S.jsxs("main",{id:"main-content",ref:l,className:"flex flex-1 overflow-hidden",role:"main",children:[S.jsx("section",{style:{width:f},className:"shrink-0 overflow-hidden","aria-label":"Input and conversion panel",children:t}),S.jsx("div",{onMouseDown:h,role:"separator","aria-orientation":"vertical","aria-label":"Resize panels",tabIndex:0,onKeyDown:d=>{d.key==="ArrowLeft"?s(Math.max(r,n-2)):d.key==="ArrowRight"&&s(Math.min(i,n+2))},className:`w-1 shrink-0 cursor-col-resize bg-neutral-200 transition-colors hover:bg-primary-400 focus-visible:bg-primary-500 focus-visible:outline-none dark:bg-neutral-700 dark:hover:bg-primary-500 ${a?"bg-primary-500 dark:bg-primary-500":""}`}),S.jsx("section",{className:"flex-1 overflow-hidden","aria-label":"Map view",children:e})]})}function U1({children:t,onFileDrop:e,accept:n}){const[r,i]=B.useState(!1),s=B.useCallback(c=>{c.preventDefault(),c.stopPropagation(),i(!0)},[]),a=B.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.currentTarget===c.target&&i(!1)},[]),o=B.useCallback(c=>{c.preventDefault(),c.stopPropagation()},[]),u=B.useCallback(c=>{var f;c.preventDefault(),c.stopPropagation(),i(!1);const l=c.dataTransfer.files[0];if(!l)return;if(n&&n.length>0){const d=`.${((f=l.name.split(".").pop())==null?void 0:f.toLowerCase())??""}`;if(!n.includes(d)&&!n.includes("*")){console.warn(`File type ${d} not accepted`);return}}const h=new FileReader;h.onload=d=>{var b;const g=(b=d.target)==null?void 0:b.result;typeof g=="string"&&e(g,l.name)},h.onerror=()=>{console.error("Failed to read file")},h.readAsText(l)},[e,n]);return S.jsxs("div",{onDragEnter:s,onDragLeave:a,onDragOver:o,onDrop:u,className:"relative",children:[t,r&&S.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center rounded-md border-2 border-dashed border-primary-500 bg-primary-50/90 dark:bg-primary-950/90",children:[S.jsx(j1,{className:"mb-2 h-8 w-8 text-primary-500"}),S.jsx("p",{className:"text-sm font-medium text-primary-700 dark:text-primary-300",children:"Drop file to load"}),S.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400",children:"GeoJSON, WKT, CSV, KML, GPX"})]})]})}function H1({value:t,onChange:e,placeholder:n}){const r=B.useCallback(a=>{e(a.target.value)},[e]),i=B.useCallback(a=>{a.preventDefault();const o=a.dataTransfer.files[0];if(o){const u=new FileReader;u.onload=c=>{var h;const l=(h=c.target)==null?void 0:h.result;typeof l=="string"&&e(l)},u.readAsText(o)}},[e]),s=B.useCallback(a=>{a.preventDefault()},[]);return S.jsx("textarea",{value:t,onChange:r,onDrop:i,onDragOver:s,placeholder:n,"aria-label":"Geometry input",className:"h-48 w-full resize-none rounded-md border border-neutral-300 bg-white p-3 font-mono text-sm text-neutral-900 placeholder:text-neutral-400 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-800 dark:text-neutral-100 dark:placeholder:text-neutral-500",spellCheck:!1})}const bu=[{value:"auto",label:"Auto-detect"},{value:"geojson",label:"GeoJSON"},{value:"wkt",label:"WKT"},{value:"ewkt",label:"EWKT"},{value:"csv",label:"CSV"},{value:"kml",label:"KML"},{value:"gpx",label:"GPX"},{value:"polyline5",label:"Polyline (5)"},{value:"polyline6",label:"Polyline (6)"}];function z1({value:t,onChange:e,detectedValue:n,label:r}){var s;const i=t==="auto"&&n?`Auto (${n.toUpperCase()})`:((s=bu.find(a=>a.value===t))==null?void 0:s.label)??t;return S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"label",children:r}),S.jsx("select",{value:t,onChange:a=>{e(a.target.value)},className:"input","aria-label":`${r}: ${i}`,children:bu.map(a=>S.jsx("option",{value:a.value,children:a.label},a.value))})]})}const Su=[{value:"auto",label:"Auto-detect"},{value:"EPSG:4326",label:"WGS84 (EPSG:4326)"},{value:"EPSG:3857",label:"Web Mercator (EPSG:3857)"},{value:"EPSG:27700",label:"British National Grid (EPSG:27700)"}];function W1({value:t,onChange:e,detectedValue:n,label:r}){var s;const i=t==="auto"&&n?`Auto (${n})`:((s=Su.find(a=>a.value===t))==null?void 0:s.label)??t;return S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"label",children:r}),S.jsx("select",{value:t,onChange:a=>{e(a.target.value)},className:"input","aria-label":`${r}: ${i}`,children:Su.map(a=>S.jsx("option",{value:a.value,children:a.label},a.value))})]})}const wu=t=>{let e;const n=new Set,r=(c,l)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=l??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(d=>d(e,f))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=e=t(r,i,o);return o},V1=(t=>t?wu(t):wu),X1=t=>t;function J1(t,e=X1){const n=ci.useSyncExternalStore(t.subscribe,ci.useCallback(()=>e(t.getState()),[t,e]),ci.useCallback(()=>e(t.getInitialState()),[t,e]));return ci.useDebugValue(n),n}const xu=t=>{const e=V1(t),n=r=>J1(e,r);return Object.assign(n,e),n},ti=(t=>t?xu(t):xu),Mu={rawText:"",inputFormat:"auto",inputProjection:"auto",detectedFormat:null,detectedProjection:null,features:[],parseError:null,coordinateError:null,isParsing:!1,selectedFeatureId:null,hoveredFeatureId:null},le=ti(t=>({...Mu,setRawText:e=>{t({rawText:e})},setInputFormat:e=>{t({inputFormat:e})},setInputProjection:e=>{t({inputProjection:e})},setFeatures:e=>{t({features:e,parseError:null})},setParseError:e=>{t({parseError:e,features:[]})},setCoordinateError:e=>{t({coordinateError:e})},setIsParsing:e=>{t({isParsing:e})},setSelectedFeatureId:e=>{t({selectedFeatureId:e})},setHoveredFeatureId:e=>{t({hoveredFeatureId:e})},setDetectedFormat:e=>{t({detectedFormat:e})},setDetectedProjection:e=>{t({detectedProjection:e})},reset:()=>{t(Mu)}}));function K1(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var mn=1,gn=2,jn=3,Y1=4,ua=5,Au=6378137,Q1=6356752314e-3,Pu=.0066943799901413165,Mr=484813681109536e-20,L=Math.PI/2,Z1=.16666666666666666,ty=.04722222222222222,ey=.022156084656084655,U=1e-10,xt=.017453292519943295,Ht=57.29577951308232,pt=Math.PI/4,Gr=Math.PI*2,At=3.14159265359,Wt={};Wt.greenwich=0;Wt.lisbon=-9.131906111111;Wt.paris=2.337229166667;Wt.bogota=-74.080916666667;Wt.madrid=-3.687938888889;Wt.rome=12.452333333333;Wt.bern=7.439583333333;Wt.jakarta=106.807719444444;Wt.ferro=-17.666666666667;Wt.brussels=4.367975;Wt.stockholm=18.058277777778;Wt.athens=23.7163375;Wt.oslo=10.722916666667;const ny={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Tu=/[\s_\-\/\(\)]/g;function He(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(Tu,""),i=-1,s,a;++i<n.length;)if(s=n[i],a=s.toLowerCase().replace(Tu,""),a===r)return t[s]}function ca(t){var e={},n=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,u){var c=u.split("=");return c.push(!0),o[c[0].toLowerCase()]=c[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*xt},lat_1:function(o){e.lat1=o*xt},lat_2:function(o){e.lat2=o*xt},lat_ts:function(o){e.lat_ts=o*xt},lon_0:function(o){e.long0=o*xt},lon_1:function(o){e.long1=o*xt},lon_2:function(o){e.long2=o*xt},alpha:function(o){e.alpha=parseFloat(o)*xt},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*xt},lonc:function(o){e.longc=o*xt},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(u){return parseFloat(u)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var u=He(ny,o);u&&(e.to_meter=u.to_meter)},from_greenwich:function(o){e.from_greenwich=o*xt},pm:function(o){var u=He(Wt,o);e.from_greenwich=(u||parseFloat(o))*xt},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var u="ewnsud";o.length===3&&u.indexOf(o.substr(0,1))!==-1&&u.indexOf(o.substr(1,1))!==-1&&u.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class rh{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:a}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),u=this.convertUnit(o);return{name:n,direction:r,unit:u,order:a}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,n.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const r=e.find(f=>Array.isArray(f)&&f[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);n.coordinate_system.unit=f}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const s=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(s){const f=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=f:n.datum=f;const d=e.find(g=>Array.isArray(g)&&g[0]==="PRIMEM");d&&d[1]!=="Greenwich"&&(f.prime_meridian={name:d[1],longitude:parseFloat(d[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const a=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");a&&(n.accuracy=parseFloat(a[1]));const o=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");o&&(n.ellipsoid=this.convert(o)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const u=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(u){const f=u.find(d=>Array.isArray(d));n.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(d=>Array.isArray(d));n.target_crs=f?this.convert(f):null}const l=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");l?n.transformation=this.convert(l):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const f=n.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:h});break;default:n.keyword=e[0];break}return n}}class ry extends rh{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class iy extends rh{static convert(e,n={}){super.convert(e,n);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(u=>Array.isArray(u)&&u[0]==="SCOPE"),a=i.find(u=>Array.isArray(u)&&u[0]==="AREA"),o=i.find(u=>Array.isArray(u)&&u[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),a&&(n.usage.area=a[1]),o&&(n.usage.bbox=o.slice(1))}return n}}function sy(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function ay(t){return(sy(t)==="2019"?iy:ry).convert(t)}function oy(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Or=1,ih=2,sh=3,Xi=4,ah=5,za=-1,uy=/\s/,cy=/[A-Za-z]/,ly=/[A-Za-z84_]/,ls=/[,\]]/,oh=/[\d\.E\-\+]/;function De(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Or}De.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Xi)for(;uy.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Or:return this.neutral(t);case ih:return this.keyword(t);case Xi:return this.quoted(t);case ah:return this.afterquote(t);case sh:return this.number(t);case za:return}};De.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Xi;return}if(ls.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};De.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Or;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Or,this.currentObject=this.stack.pop(),this.currentObject||(this.state=za);return}};De.prototype.number=function(t){if(oh.test(t)){this.word+=t;return}if(ls.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};De.prototype.quoted=function(t){if(t==='"'){this.state=ah;return}this.word+=t};De.prototype.keyword=function(t){if(ly.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Or;return}if(ls.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};De.prototype.neutral=function(t){if(cy.test(t)){this.word=t,this.state=ih;return}if(t==='"'){this.word="",this.state=Xi;return}if(oh.test(t)){this.word=t,this.state=sh;return}if(ls.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};De.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===za)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function hy(t){var e=new De(t);return e.output()}function Ps(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,a){return Rn(a,s),s},r);e&&(t[e]=i)}function Rn(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Rn(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Rn(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Rn(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Ps(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Ps(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Rn(t,e[n]);return Ps(e,n,t)}}var fy=.017453292519943295;function ae(t){return t*fy}function uh(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=ae(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=ae(t.lat0>0?90:-90),delete t.lat1)}function Cu(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Du(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Nu(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Du(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Du(t.ellipsoid.semi_minor_axis))))}function Ji(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(Ji(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Nu(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Nu(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=Cu(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=Cu(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":Ji(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),uh(e),e)}var dy=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function py(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function ch(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];dy.indexOf(i)!==-1&&my(t[i]),typeof t[i]=="object"&&ch(t[i])}}function my(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=ae(t.rectified_grid_angle));function o(l){var h=t.to_meter||1;return l*h}var u=function(l){return py(t,l)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ae],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ae],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",ae],["lat0","latitude_of_origin",ae],["lat0","standard_parallel_1",ae],["lat1","standard_parallel_1",ae],["lat2","standard_parallel_2",ae],["azimuth","Azimuth"],["alpha","azimuth",ae],["srsCode","name"]];c.forEach(u),uh(t)}function Ki(t){if(typeof t=="object")return Ji(t);const e=oy(t);var n=hy(t);if(e==="WKT2"){const s=ay(n);return Ji(s)}var r=n[0],i={};return Rn(n,i),ch(i),i[r]}function It(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?It[t]=ca(arguments[1]):It[t]=Ki(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?It[t]=Ki(arguments[1]):(It[t]=n,n||delete It[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?It.apply(e,r):It(r)});if(typeof t=="string"){if(t in It)return It[t]}else"EPSG"in t?It["EPSG:"+t.EPSG]=t:"ESRI"in t?It["ESRI:"+t.ESRI]=t:"IAU2000"in t?It["IAU2000:"+t.IAU2000]=t:console.log(t);return}}K1(It);function gy(t){return typeof t=="string"}function yy(t){return t in It}function _y(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var vy=["3857","900913","3785","102113"];function Ey(t){var e=He(t,"authority");if(e){var n=He(e,"epsg");return n&&vy.indexOf(n)>-1}}function by(t){var e=He(t,"extension");if(e)return He(e,"proj4")}function Sy(t){return t[0]==="+"}function wy(t){if(gy(t)){if(yy(t))return It[t];if(_y(t)){var e=Ki(t);if(Ey(e))return It["EPSG:3857"];var n=by(e);return n?ca(n):e}if(Sy(t))return ca(t)}else return"projName"in t?t:Ki(t)}function Iu(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function me(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function ei(t){return t<0?-1:1}function z(t,e){return e||Math.abs(t)<=At?t:t-ei(t)*Gr}function ce(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(L-e))/r}function Fr(t,e){for(var n=.5*t,r,i,s=L-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(s),i=L-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function xy(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function My(t){var e=t.x,n=t.y;if(n*Ht>90&&n*Ht<-90&&e*Ht>180&&e*Ht<-180)return null;var r,i;if(Math.abs(Math.abs(n)-L)<=U)return null;if(this.sphere)r=this.x0+this.a*this.k0*z(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(pt+.5*n));else{var s=Math.sin(n),a=ce(this.e,n,s);r=this.x0+this.a*this.k0*z(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return t.x=r,t.y=i,t}function Ay(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=L-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=Fr(this.e,s),i===-9999)return null}return r=z(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var Py=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Ty={init:xy,forward:My,inverse:Ay,names:Py};function Cy(){}function ku(t){return t}var lh=["longlat","identity"];const Dy={init:Cy,forward:ku,inverse:ku,names:lh};var Ny=[Ty,Dy],sn={},Ln=[];function hh(t,e){var n=Ln.length;return t.names?(Ln[n]=t,t.names.forEach(function(r){sn[r.toLowerCase()]=n}),this):(console.log(e),!0)}function fh(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Iy(t){if(!t)return!1;var e=t.toLowerCase();if(typeof sn[e]<"u"&&Ln[sn[e]]||(e=fh(e),e in sn&&Ln[sn[e]]))return Ln[sn[e]]}function ky(){Ny.forEach(hh)}const Ry={start:ky,add:hh,get:Iy};var dh={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Ly=dh.WGS84;function Gy(t,e,n,r){var i=t*t,s=e*e,a=(i-s)/i,o=0;r?(t*=1-a*(Z1+a*(ty+a*ey)),i=t*t,a=0):o=Math.sqrt(a);var u=(i-s)/s;return{es:a,e:o,ep2:u}}function Oy(t,e,n,r,i){if(!t){var s=He(dh,r);s||(s=Ly),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<U)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var Ri={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Fy in Ri){var Ts=Ri[Fy];Ts.datumName&&(Ri[Ts.datumName]=Ts)}function jy(t,e,n,r,i,s,a){var o={};return t===void 0||t==="none"?o.datum_type=ua:o.datum_type=Y1,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=mn),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=gn,o.datum_params[3]*=Mr,o.datum_params[4]*=Mr,o.datum_params[5]*=Mr,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=jn,o.grids=a),o.a=n,o.b=r,o.es=i,o.ep2=s,o}var Wa={};function By(t,e,n){return e instanceof ArrayBuffer?$y(t,e,n):{ready:qy(t,e)}}function $y(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=zy(i),a=Wy(i,s),o=Vy(i,a,s,r),u={header:a,subgrids:o};return Wa[t]=u,u}async function qy(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,u=[s.getWidth(),s.getHeight()],c=s.getBoundingBox().map(Ru),l=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Ru),h=c[0]+(u[0]-1)*l[0],f=c[3]-(u[1]-1)*l[1],d=o[0],g=o[1],b=[];for(let w=u[1]-1;w>=0;w--)for(let M=u[0]-1;M>=0;M--){var y=w*u[0]+M;b.push([-Le(g[y]),Le(d[y])])}n.push({del:l,lim:u,ll:[-h,f],cvs:b})}var A={header:{nSubgrids:r},subgrids:n};return Wa[t]=A,A}function Uy(t){if(t===void 0)return null;var e=t.split(",");return e.map(Hy)}function Hy(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Wa[t]||null,isNull:!1}}function Ru(t){return t*Math.PI/180}function Le(t){return t/3600*Math.PI/180}function zy(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Wy(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:la(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function la(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Vy(t,e,n,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Jy(t,i,n),u=Ky(t,i,o,n,r),c=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Le(o.lowerLongitude),Le(o.lowerLatitude)],del:[Le(o.longitudeInterval),Le(o.latitudeInterval)],lim:[c,l],count:o.gridNodeCount,cvs:Xy(u)});var h=16;r===!1&&(h=8),i+=176+o.gridNodeCount*h}return s}function Xy(t){return t.map(function(e){return[Le(e.longitudeShift),Le(e.latitudeShift)]})}function Jy(t,e,n){return{name:la(t,e+8,e+16).trim(),parent:la(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Ky(t,e,n,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],u=0;u<n.gridNodeCount;u++){var c={latitudeShift:t.getFloat32(s+u*a,r),longitudeShift:t.getFloat32(s+u*a+4,r)};i!==!1&&(c.latitudeAccuracy=t.getFloat32(s+u*a+8,r),c.longitudeAccuracy=t.getFloat32(s+u*a+12,r)),o.push(c)}return o}function ee(t,e){if(!(this instanceof ee))return new ee(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var n=wy(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=ee.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=He(Ri,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=Oy(n.a,n.b,n.rf,n.ellps,n.sphere),a=Gy(s.a,s.b,s.rf,n.R_A),o=Uy(n.nadgrids),u=n.datum||jy(n.datumCode,n.datum_params,s.a,s.b,a.es,a.ep2,o);Iu(this,n),Iu(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}ee.projections=Ry;ee.projections.start();function Yy(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===mn?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===gn?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function ph(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,a,o,u,c;if(i<-L&&i>-1.001*L)i=-L;else if(i>L&&i<1.001*L)i=L;else{if(i<-L)return{x:-1/0,y:-1/0,z:t.z};if(i>L)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),c=Math.cos(i),u=o*o,a=n/Math.sqrt(1-e*u),{x:(a+s)*c*Math.cos(r),y:(a+s)*c*Math.sin(r),z:(a*(1-e)+s)*o}}function mh(t,e,n,r){var i=1e-12,s=i*i,a=30,o,u,c,l,h,f,d,g,b,y,A,w,M,D=t.x,N=t.y,P=t.z?t.z:0,x,F,v;if(o=Math.sqrt(D*D+N*N),u=Math.sqrt(D*D+N*N+P*P),o/n<i){if(x=0,u/n<i)return F=L,v=-r,{x:t.x,y:t.y,z:t.z}}else x=Math.atan2(N,D);c=P/u,l=o/u,h=1/Math.sqrt(1-e*(2-e)*l*l),g=l*(1-e)*h,b=c*h,M=0;do M++,d=n/Math.sqrt(1-e*b*b),v=o*g+P*b-d*(1-e*b*b),f=e*d/(d+v),h=1/Math.sqrt(1-f*(2-f)*l*l),y=l*(1-f)*h,A=c*h,w=A*g-y*b,g=y,b=A;while(w*w>s&&M<a);return F=Math.atan(A/Math.abs(y)),{x,y:F,z:v}}function Qy(t,e,n){if(e===mn)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===gn){var r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=n[5],c=n[6];return{x:c*(t.x-u*t.y+o*t.z)+r,y:c*(u*t.x+t.y-a*t.z)+i,z:c*(-o*t.x+a*t.y+t.z)+s}}}function Zy(t,e,n){if(e===mn)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===gn){var r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],u=n[5],c=n[6],l=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-s)/c;return{x:l+u*h-o*f,y:-u*l+h+a*f,z:o*l-a*h+f}}}function yi(t){return t===mn||t===gn}function t_(t,e,n){if(Yy(t,e)||t.datum_type===ua||e.datum_type===ua)return n;var r=t.a,i=t.es;if(t.datum_type===jn){var s=Lu(t,!1,n);if(s!==0)return;r=Au,i=Pu}var a=e.a,o=e.b,u=e.es;if(e.datum_type===jn&&(a=Au,o=Q1,u=Pu),i===u&&r===a&&!yi(t.datum_type)&&!yi(e.datum_type))return n;if(n=ph(n,i,r),yi(t.datum_type)&&(n=Qy(n,t.datum_type,t.datum_params)),yi(e.datum_type)&&(n=Zy(n,e.datum_type,e.datum_params)),n=mh(n,u,a,o),e.datum_type===jn){var c=Lu(e,!0,n);if(c!==0)return}return n}function Lu(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];t:for(var a=0;a<t.grids.length;a++){var o=t.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var u=o.grid.subgrids,c=0,l=u.length;c<l;c++){var h=u[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,d=h.ll[0]-f,g=h.ll[1]-f,b=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(g>r.y||d>r.x||y<r.y||b<r.x)&&(i=e_(r,e,h),!isNaN(i.x)))break t}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Ht+" "+r.y*Ht+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function e_(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=z(i.x-Math.PI)+Math.PI;var s=Gu(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,u,c;do{if(c=Gu(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=u.x,s.y+=u.y}while(a--&&Math.abs(u.x)>o&&Math.abs(u.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=z(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function Gu(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var u={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var c={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var l={x:e.cvs[a][0],y:e.cvs[a][1]},h=i.x*i.y,f=i.x*(1-i.y),d=(1-i.x)*(1-i.y),g=(1-i.x)*i.y;return s.x=d*o.x+f*u.x+g*l.x+h*c.x,s.y=d*o.y+f*u.y+g*l.y+h*c.y,s}function Ou(t,e,n){var r=n.x,i=n.y,s=n.z||0,a,o,u,c={};for(u=0;u<3;u++)if(!(e&&u===2&&n.z===void 0))switch(u===0?(a=r,"ew".indexOf(t.axis[u])!==-1?o="x":o="y"):u===1?(a=i,"ns".indexOf(t.axis[u])!==-1?o="y":o="x"):(a=s,o="z"),t.axis[u]){case"e":c[o]=a;break;case"w":c[o]=-a;break;case"n":c[o]=a;break;case"s":c[o]=-a;break;case"u":n[o]!==void 0&&(c.z=a);break;case"d":n[o]!==void 0&&(c.z=-a);break;default:return null}return c}function gh(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function n_(t){Fu(t.x),Fu(t.y)}function Fu(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function r_(t,e){return(t.datum.datum_type===mn||t.datum.datum_type===gn||t.datum.datum_type===jn)&&e.datumCode!=="WGS84"||(e.datum.datum_type===mn||e.datum.datum_type===gn||e.datum.datum_type===jn)&&t.datumCode!=="WGS84"}function Yi(t,e,n,r){var i;Array.isArray(n)?n=gh(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(n_(n),t.datum&&e.datum&&r_(t,e)&&(i=new ee("WGS84"),n=Yi(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=Ou(t,!1,n)),t.projName==="longlat")n={x:n.x*xt,y:n.y*xt,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=t_(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Ht,y:n.y*Ht,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?Ou(e,!0,n):(n&&!s&&delete n.z,n)}var ju=ee("WGS84");function Cs(t,e,n,r){var i,s,a;return Array.isArray(n)?(i=Yi(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=Yi(t,e,n,r),a=Object.keys(n),a.length===2||a.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=n[o]}),s)}function _i(t){return t instanceof ee?t:typeof t=="object"&&"oProj"in t?t.oProj:ee(t)}function i_(t,e,n){var r,i,s=!1,a;return typeof e>"u"?(i=_i(t),r=ju,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=_i(t),r=ju,s=!0),r||(r=_i(t)),i||(i=_i(e)),n?Cs(r,i,n):(a={forward:function(o,u){return Cs(r,i,o,u)},inverse:function(o,u){return Cs(i,r,o,u)}},s&&(a.oProj=i),a)}var Bu=6,yh="AJSAJS",_h="AFAFAF",Gn=65,qt=73,Qt=79,Er=86,br=90;const s_={forward:vh,inverse:a_,toPoint:Eh};function vh(t,e){return e=e||5,c_(o_({lat:t[1],lon:t[0]}),e)}function a_(t){var e=Va(Sh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Eh(t){var e=Va(Sh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ds(t){return t*(Math.PI/180)}function $u(t){return 180*(t/Math.PI)}function o_(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,a,o,u,c,l,h,f,d=Ds(e),g=Ds(n),b,y;y=Math.floor((n+180)/6)+1,n===180&&(y=60),e>=56&&e<64&&n>=3&&n<12&&(y=32),e>=72&&e<84&&(n>=0&&n<9?y=31:n>=9&&n<21?y=33:n>=21&&n<33?y=35:n>=33&&n<42&&(y=37)),a=(y-1)*6-180+3,b=Ds(a),o=i/(1-i),u=r/Math.sqrt(1-i*Math.sin(d)*Math.sin(d)),c=Math.tan(d)*Math.tan(d),l=o*Math.cos(d)*Math.cos(d),h=Math.cos(d)*(g-b),f=r*((1-i/4-3*i*i/64-5*i*i*i/256)*d-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*d)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*d)-35*i*i*i/3072*Math.sin(6*d));var A=s*u*(h+(1-c+l)*h*h*h/6+(5-18*c+c*c+72*l-58*o)*h*h*h*h*h/120)+5e5,w=s*(f+u*Math.tan(d)*(h*h/2+(5-c+9*l+4*l*l)*h*h*h*h/24+(61-58*c+c*c+600*l-330*o)*h*h*h*h*h*h/720));return e<0&&(w+=1e7),{northing:Math.round(w),easting:Math.round(A),zoneNumber:y,zoneLetter:u_(e)}}function Va(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,u,c=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),l,h,f,d,g,b,y,A,w,M=n-5e5,D=e;r<"N"&&(D-=1e7),y=(i-1)*6-180+3,u=o/(1-o),b=D/s,A=b/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),w=A+(3*c/2-27*c*c*c/32)*Math.sin(2*A)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*A)+151*c*c*c/96*Math.sin(6*A),l=a/Math.sqrt(1-o*Math.sin(w)*Math.sin(w)),h=Math.tan(w)*Math.tan(w),f=u*Math.cos(w)*Math.cos(w),d=a*(1-o)/Math.pow(1-o*Math.sin(w)*Math.sin(w),1.5),g=M/(l*s);var N=w-l*Math.tan(w)/d*(g*g/2-(5+3*h+10*f-4*f*f-9*u)*g*g*g*g/24+(61+90*h+298*f+45*h*h-252*u-3*f*f)*g*g*g*g*g*g/720);N=$u(N);var P=(g-(1+2*h+f)*g*g*g/6+(5-2*f+28*h-3*f*f+8*u+24*h*h)*g*g*g*g*g/120)/Math.cos(w);P=y+$u(P);var x;if(t.accuracy){var F=Va({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:F.lat,right:F.lon,bottom:N,left:P}}else x={lat:N,lon:P};return x}function u_(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function c_(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+l_(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function l_(t,e,n){var r=bh(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return h_(i,s,r)}function bh(t){var e=t%Bu;return e===0&&(e=Bu),e}function h_(t,e,n){var r=n-1,i=yh.charCodeAt(r),s=_h.charCodeAt(r),a=i+t-1,o=s+e,u=!1;a>br&&(a=a-br+Gn-1,u=!0),(a===qt||i<qt&&a>qt||(a>qt||i<qt)&&u)&&a++,(a===Qt||i<Qt&&a>Qt||(a>Qt||i<Qt)&&u)&&(a++,a===qt&&a++),a>br&&(a=a-br+Gn-1),o>Er?(o=o-Er+Gn-1,u=!0):u=!1,(o===qt||s<qt&&o>qt||(o>qt||s<qt)&&u)&&o++,(o===Qt||s<Qt&&o>Qt||(o>Qt||s<Qt)&&u)&&(o++,o===qt&&o++),o>Er&&(o=o-Er+Gn-1);var c=String.fromCharCode(a)+String.fromCharCode(o);return c}function Sh(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;n=t.substring(s,s+=2);for(var u=bh(a),c=f_(n.charAt(0),u),l=d_(n.charAt(1),u);l<p_(o);)l+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,d=0,g=0,b,y,A,w,M;return f>0&&(b=1e5/Math.pow(10,f),y=t.substring(s,s+f),d=parseFloat(y)*b,A=t.substring(s+f),g=parseFloat(A)*b),w=d+c,M=g+l,{easting:w,northing:M,zoneLetter:o,zoneNumber:a,accuracy:b}}function f_(t,e){for(var n=yh.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===qt&&n++,n===Qt&&n++,n>br){if(i)throw"Bad character: "+t;n=Gn,i=!0}r+=1e5}return r}function d_(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=_h.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===qt&&n++,n===Qt&&n++,n>Er){if(i)throw"Bad character: "+t;n=Gn,i=!0}r+=1e5}return r}function p_(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Xn(t,e,n){if(!(this instanceof Xn))return new Xn(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Xn.fromMGRS=function(t){return new Xn(Eh(t))};Xn.prototype.toMGRS=function(t){return vh([this.x,this.y],t)};var m_=1,g_=.25,qu=.046875,Uu=.01953125,Hu=.01068115234375,y_=.75,__=.46875,v_=.013020833333333334,E_=.007120768229166667,b_=.3645833333333333,S_=.005696614583333333,w_=.3076171875;function Xa(t){var e=[];e[0]=m_-t*(g_+t*(qu+t*(Uu+t*Hu))),e[1]=t*(y_-t*(qu+t*(Uu+t*Hu)));var n=t*t;return e[2]=n*(__-t*(v_+t*E_)),n*=t,e[3]=n*(b_-t*S_),e[4]=n*t*w_,e}function or(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var x_=20;function Ja(t,e,n){for(var r=1/(1-e),i=t,s=x_;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(or(i,a,Math.cos(i),n)-t)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<U)return i}return i}function M_(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Xa(this.es),this.ml0=or(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function A_(t){var e=t.x,n=t.y,r=z(e-this.long0,this.over),i,s,a,o=Math.sin(n),u=Math.cos(n);if(this.es){var l=u*r,h=Math.pow(l,2),f=this.ep2*Math.pow(u,2),d=Math.pow(f,2),g=Math.abs(u)>U?Math.tan(n):0,b=Math.pow(g,2),y=Math.pow(b,2);i=1-this.es*Math.pow(o,2),l=l/Math.sqrt(i);var A=or(n,o,u,this.en);s=this.a*(this.k0*l*(1+h/6*(1-b+f+h/20*(5-18*b+y+14*f-58*b*f+h/42*(61+179*y-y*b-479*b)))))+this.x0,a=this.a*(this.k0*(A-this.ml0+o*r*l/2*(1+h/12*(5-b+9*f+4*d+h/30*(61+y-58*b+270*f-330*b*f+h/56*(1385+543*y-y*b-3111*b))))))+this.y0}else{var c=u*Math.sin(r);if(Math.abs(Math.abs(c)-1)<U)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,a=u*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(a),c>=1){if(c-1>U)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=s,t.y=a,t}function P_(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=Ja(e,this.es,this.en),Math.abs(n)<L){var h=Math.sin(n),f=Math.cos(n),d=Math.abs(f)>U?Math.tan(n):0,g=this.ep2*Math.pow(f,2),b=Math.pow(g,2),y=Math.pow(d,2),A=Math.pow(y,2);e=1-this.es*Math.pow(h,2);var w=s*Math.sqrt(e)/this.k0,M=Math.pow(w,2);e=e*d,r=n-e*M/(1-this.es)*.5*(1-M/12*(5+3*y-9*g*y+g-4*b-M/30*(61+90*y-252*g*y+45*A+46*g-M/56*(1385+3633*y+4095*A+1574*A*y)))),i=z(this.long0+w*(1-M/6*(1+2*y+g-M/20*(5+28*y+24*A+8*g*y+6*g-M/42*(61+662*y+1320*A+720*A*y))))/f,this.over)}else r=L*ei(a),i=0;else{var o=Math.exp(s/this.k0),u=.5*(o-1/o),c=this.lat0+a/this.k0,l=Math.cos(c);e=Math.sqrt((1-Math.pow(l,2))/(1+Math.pow(u,2))),r=Math.asin(e),a<0&&(r=-r),u===0&&l===0?i=0:i=z(Math.atan2(u,l)+this.long0,this.over)}return t.x=i,t.y=r,t}var T_=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Li={init:M_,forward:A_,inverse:P_,names:T_};function wh(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ut(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function C_(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function D_(t){var e=Math.abs(t);return e=C_(e*(1+e/(Ut(1,e)+1))),t<0?-e:e}function Ka(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return e+a*Math.sin(2*e)}function N_(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,a;--r>=0;)a=-s+n*i+t[r],s=i,i=a;return Math.sin(e)*a}function I_(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function xh(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=wh(n),a=I_(n),o=2*i*a,u=-2*r*s,c=t.length-1,l=t[c],h=0,f=0,d=0,g,b;--c>=0;)g=f,b=h,f=l,h=d,l=-g+o*f-u*h+t[c],d=-b+u*f+o*h;return o=r*a,u=i*s,[o*l-u*d,o*d+u*l]}function k_(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Li.init.apply(this),this.forward=Li.forward,this.inverse=Li.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=Ka(this.cbg,this.lat0);this.Zb=-this.Qn*(r+N_(this.gtu,2*r))}function R_(t){var e=z(t.x-this.long0,this.over),n=t.y;n=Ka(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(s*i,Ut(r,i*a)),e=D_(Math.tan(e));var o=xh(this.gtu,2*n,2*e);n=n+o[0],e=e+o[1];var u,c;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(u=1/0,c=1/0),t.x=u,t.y=c,t}function L_(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=xh(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(wh(e));var a=Math.sin(n),o=Math.cos(n),u=Math.sin(e),c=Math.cos(e);n=Math.atan2(a*c,Ut(u,c*o)),e=Math.atan2(u,c*o),r=z(e+this.long0,this.over),i=Ka(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var G_=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Gi={init:k_,forward:R_,inverse:L_,names:G_};function O_(t,e){if(t===void 0){if(t=Math.floor((z(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var F_="etmerc";function j_(){var t=O_(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*xt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Gi.init.apply(this),this.forward=Gi.forward,this.inverse=Gi.inverse}var B_=["Universal Transverse Mercator System","utm"];const $_={init:j_,names:B_,dependsOn:F_};function Ya(t,e){return Math.pow((1-t)/(1+t),e)}var q_=20;function U_(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pt)/(Math.pow(Math.tan(.5*this.lat0+pt),this.C)*Ya(this.e*t,this.ratexp))}function H_(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+pt),this.C)*Ya(this.e*Math.sin(n),this.ratexp))-L,t.x=this.C*e,t}function z_(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+pt)/this.K,1/this.C),s=q_;s>0&&(r=2*Math.atan(i*Ya(this.e*Math.sin(t.y),-.5*this.e))-L,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}const Qa={init:U_,forward:H_,inverse:z_};function W_(){Qa.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function V_(t){var e,n,r,i;return t.x=z(t.x-this.long0,this.over),Qa.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function X_(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Ut(t.x,t.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Qa.inverse.apply(this,[t]),t.x=z(t.x+this.long0,this.over),t}var J_=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const K_={init:W_,forward:V_,inverse:X_,names:J_};function Za(t,e,n){return e*=n,Math.tan(.5*(L+t))*Math.pow((1-e)/(1+e),.5*n)}function Y_(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=U&&(this.k0=.5*(1+ei(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=U&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=U&&Math.abs(Math.cos(this.lat_ts))>U&&(this.k0=.5*this.cons*me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ce(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=me(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Za(this.lat0,this.sinlat0,this.e))-L,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Q_(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,a,o,u,c,l,h=z(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=U&&Math.abs(n+this.lat0)<=U?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(h)),t.x=this.a*s*i*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(h))+this.y0,t):(a=2*Math.atan(Za(n,r,this.e))-L,u=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=U?(c=ce(this.e,n*this.con,this.con*r),l=2*this.a*this.k0*c/this.cons,t.x=this.x0+l*Math.sin(e-this.long0),t.y=this.y0-this.con*l*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<U?(s=2*this.a*this.k0/(1+u*Math.cos(h)),t.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*u*Math.cos(h))),t.y=s*(this.cosX0*o-this.sinX0*u*Math.cos(h))+this.y0),t.x=s*u*Math.sin(h)+this.x0,t))}function Z_(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=U?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<U?this.lat0>0?e=z(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=z(this.long0+Math.atan2(t.x,t.y),this.over):e=z(this.long0+Math.atan2(t.x*Math.sin(o),a*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=U){if(a<=U)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*Fr(this.e,r),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=U?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=z(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*Fr(this.e,Math.tan(.5*(L+s)));return t.x=e,t.y=n,t}var tv=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const ev={init:Y_,forward:Q_,inverse:Z_,names:tv,ssfn_:Za};function nv(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*u+this.alpha*a/2*c}function rv(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t}function iv(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,u=0,c=s,l=-1e3,h=0;Math.abs(c-l)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),l=c,c=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=o,t.y=c,t}var sv=["somerc"];const av={init:nv,forward:rv,inverse:iv,names:sv};var Nn=1e-7;function ov(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(fh(n))!==-1}function uv(){var t,e,n,r,i,s,a,o,u,c,l=0,h,f=0,d=0,g=0,b=0,y=0,A=0;this.no_off=ov(this),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),w&&(A=this.alpha),M&&(l=this.rectified_grid_angle),w||M)f=this.longc;else if(d=this.long1,b=this.lat1,g=this.long2,y=this.lat2,Math.abs(b-y)<=Nn||(t=Math.abs(b))<=Nn||Math.abs(t-L)<=Nn||Math.abs(Math.abs(this.lat0)-L)<=Nn||Math.abs(Math.abs(y)-L)<=Nn)throw new Error;var D=1-this.es;e=Math.sqrt(D),Math.abs(this.lat0)>U?(o=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*o*o,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/D),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(ce(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),w||M?(w?(h=Math.asin(Math.sin(A)/r),M||(l=A)):(h=l,A=Math.asin(r*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(ce(this.e,b,Math.sin(b)),this.B),a=Math.pow(ce(this.e,y,Math.sin(y)),this.B),i=this.E/s,u=(a-s)/(a+s),c=this.E*this.E,c=(c-a*s)/(c+a*s),t=d-g,t<-Math.PI?g-=Gr:t>Math.PI&&(g+=Gr),this.lam0=z(.5*(d+g)-Math.atan(c*Math.tan(.5*this.B*(d-g))/u)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*z(d-this.lam0,this.over))/(i-1/i)),l=A=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(l),this.cosrot=Math.cos(l),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(A))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(pt-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(pt+i))}function cv(t){var e={},n,r,i,s,a,o,u,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-L)>U){if(a=this.E/Math.pow(ce(this.e,t.y,Math.sin(t.y)),this.B),o=1/a,n=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<U)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*t.x),Math.abs(o)<Nn?u=this.A*t.x:u=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,o)}else c=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=c):(u-=this.u_0,e.x=c*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function lv(t){var e,n,r,i,s,a,o,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<U)u.x=0,u.y=o<0?-L:L;else{if(u.y=this.E/Math.sqrt((1+o)/(1-o)),u.y=Fr(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var hv=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const fv={init:uv,forward:cv,inverse:lv,names:hv};function dv(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<U)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=me(this.e,e,n),i=ce(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=me(this.e,s,a),u=ce(this.e,this.lat2,s),c=Math.abs(Math.abs(this.lat0)-L)<U?0:ce(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>U?this.ns=Math.log(r/o)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function pv(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=U&&(n=ei(n)*(L-2*U));var r=Math.abs(Math.abs(n)-L),i,s;if(r>U)i=ce(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var a=this.ns*z(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,t}function mv(t){var e,n,r,i,s,a=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),n=1):(e=-Math.sqrt(a*a+o*o),n=-1);var u=0;if(e!==0&&(u=Math.atan2(n*a,n*o)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=Fr(this.e,r),i===-9999)return null}else i=-L;return s=z(u/this.ns+this.long0,this.over),t.x=s,t.y=i,t}var gv=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const yv={init:dv,forward:pv,inverse:mv,names:gv};function _v(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function vv(t){var e,n,r,i,s,a,o,u=t.x,c=t.y,l=z(u-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-l*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=o*Math.cos(a)/1,t.x=o*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Ev(t){var e,n,r,i,s,a,o,u,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,u=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(u=1),o=t.y,l+=1;while(u===0&&l<15);return l>=15?null:t}var bv=["Krovak","krovak"];const Sv={init:_v,forward:vv,inverse:Ev,names:bv};function Ot(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function ni(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ri(t){return .375*t*(1+.25*t*(1+.46875*t))}function ii(t){return .05859375*t*t*(1+.75*t)}function si(t){return t*t*t*(35/3072)}function to(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Ke(t){return Math.abs(t)<L?t:t-ei(t)*Math.PI}function Qi(t,e,n,r,i){var s,a;s=t/e;for(var o=0;o<15;o++)if(a=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function wv(){this.sphere||(this.e0=ni(this.es),this.e1=ri(this.es),this.e2=ii(this.es),this.e3=si(this.es),this.ml0=this.a*Ot(this.e0,this.e1,this.e2,this.e3,this.lat0))}function xv(t){var e,n,r=t.x,i=t.y;if(r=z(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=to(this.a,this.e,s),u=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),l=c*c,h=this.es*a*a/(1-this.es),f=this.a*Ot(this.e0,this.e1,this.e2,this.e3,i);e=o*c*(1-l*u*(1/6-(8-u+8*h)*l/120)),n=f-this.ml0+o*s/a*l*(.5+(5-u+6*h)*l/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Mv(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+n,o=Qi(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-L)<=U)return t.x=this.long0,t.y=L,n<0&&(t.y*=-1),t;var u=to(this.a,this.e,Math.sin(o)),c=u*u*u/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(o),2),h=e*this.a/u,f=h*h;r=o-u*Math.tan(o)/c*h*h*(.5-(1+3*l)*h*h/24),i=h*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(o)}return t.x=z(i+this.long0,this.over),t.y=Ke(r),t}var Av=["Cassini","Cassini_Soldner","cass"];const Pv={init:wv,forward:xv,inverse:Mv,names:Av};function Be(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var ha=1,fa=2,da=3,Oi=4;function Tv(){var t=Math.abs(this.lat0);if(Math.abs(t-L)<U?this.mode=this.lat0<0?ha:fa:Math.abs(t)<U?this.mode=da:this.mode=Oi,this.es>0){var e;switch(this.qp=Be(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ov(this.es),this.mode){case fa:this.dd=1;break;case ha:this.dd=1;break;case da:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Oi:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Be(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Oi&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Cv(t){var e,n,r,i,s,a,o,u,c,l,h=t.x,f=t.y;if(h=z(h-this.long0,this.over),this.sphere){if(s=Math.sin(f),l=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+l*r:1+this.sinph0*s+this.cosph0*l*r,n<=U)return null;n=Math.sqrt(2/n),e=n*l*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*l*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<U)return null;n=pt-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(o=0,u=0,c=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(f),a=Be(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,u=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:c=1+this.sinb1*o+this.cosb1*u*r;break;case this.EQUIT:c=1+u*r;break;case this.N_POLE:c=L+f,a=this.qp-a;break;case this.S_POLE:c=f-L,a=this.qp+a;break}if(Math.abs(c)<U)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*o-this.sinb1*u*r):n=(c=Math.sqrt(2/(1+u*r)))*o*this.ymf,e=this.xmf*c*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function Dv(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,a,o,u,c;if(this.sphere){var l=0,h,f=0;if(h=Math.sqrt(e*e+n*n),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),l=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=U?0:Math.asin(n*f/h),e*=f,n=l*h;break;case this.OBLIQ:i=Math.abs(h)<=U?this.lat0:Math.asin(l*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(l-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:n=-n,i=L-i;break;case this.S_POLE:i-=L;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,u=Math.sqrt(e*e+n*n),u<U)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*u/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(c=s*this.sinb1+n*a*this.cosb1/u,o=this.qp*c,n=u*this.cosb1*s-n*this.sinb1*a):(c=n*a/u,o=this.qp*c,n=u*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),o=e*e+n*n,!o)return t.x=this.long0,t.y=this.lat0,t;c=1-o/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=Fv(Math.asin(c),this.apa)}return t.x=z(this.long0+r,this.over),t.y=i,t}var Nv=.3333333333333333,Iv=.17222222222222222,kv=.10257936507936508,Rv=.06388888888888888,Lv=.0664021164021164,Gv=.016415012942191543;function Ov(t){var e,n=[];return n[0]=t*Nv,e=t*t,n[0]+=e*Iv,n[1]=e*Rv,e*=t,n[0]+=e*kv,n[1]+=e*Lv,n[2]=e*Gv,n}function Fv(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var jv=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Bv={init:Tv,forward:Cv,inverse:Dv,names:jv,S_POLE:ha,N_POLE:fa,EQUIT:da,OBLIQ:Oi};function ze(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function $v(){Math.abs(this.lat1+this.lat2)<U||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=me(this.e3,this.sin_po,this.cos_po),this.qs1=Be(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=me(this.e3,this.sin_po,this.cos_po),this.qs2=Be(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Be(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>U?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function qv(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Be(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*z(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return t.x=a,t.y=o,t}function Uv(t){var e,n,r,i,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),s=z(i/this.ns0+this.long0,this.over),t.x=s,t.y=a,t}function Hv(t,e){var n,r,i,s,a,o=ze(.5*e);if(t<U)return o;for(var u=t*t,c=1;c<=25;c++)if(n=Math.sin(o),r=Math.cos(o),i=t*n,s=1-i*i,a=.5*s*s/r*(e/(1-u)-n/s+.5/t*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var zv=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Wv={init:$v,forward:qv,inverse:Uv,names:zv,phi1z:Hv};function Vv(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Xv(t){var e,n,r,i,s,a,o,u,c=t.x,l=t.y;return r=z(c-this.long0,this.over),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,a>0||Math.abs(a)<=U?(o=this.x0+this.a*s*n*Math.sin(r)/a,u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/a):(o=this.x0+this.infinity_dist*n*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=u,t}function Jv(t){var e,n,r,i,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=ze(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=z(this.long0+s,this.over)):(a=this.phic0,s=0),t.x=s,t.y=a,t}var Kv=["gnom"];const Yv={init:Vv,forward:Xv,inverse:Jv,names:Kv};function Qv(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*L:L;for(var r=Math.asin(.5*e),i,s,a,o,u=0;u<30;u++)if(s=Math.sin(r),a=Math.cos(r),o=t*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Zv(){this.sphere||(this.k0=me(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function t4(t){var e=t.x,n=t.y,r,i,s=z(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=Be(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return t.x=r,t.y=i,t}function e4(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Qv(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var n4=["cea"];const r4={init:Zv,forward:t4,inverse:e4,names:n4};function i4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function s4(t){var e=t.x,n=t.y,r=z(e-this.long0,this.over),i=Ke(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function a4(t){var e=t.x,n=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=Ke(this.lat0+(n-this.y0)/this.a),t}var o4=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const u4={init:i4,forward:s4,inverse:a4,names:o4};var zu=20;function c4(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ni(this.es),this.e1=ri(this.es),this.e2=ii(this.es),this.e3=si(this.es),this.ml0=this.a*Ot(this.e0,this.e1,this.e2,this.e3,this.lat0)}function l4(t){var e=t.x,n=t.y,r,i,s,a=z(e-this.long0,this.over);if(s=a*Math.sin(n),this.sphere)Math.abs(n)<=U?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(Ke(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=U)r=this.a*a,i=-1*this.ml0;else{var o=to(this.a,this.e,Math.sin(n))/Math.tan(n);r=o*Math.sin(s),i=this.a*Ot(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function h4(t){var e,n,r,i,s,a,o,u,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=U)e=z(r/this.a+this.long0,this.over),n=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,u=a;var l;for(s=zu;s;--s)if(l=Math.tan(u),c=-1*(a*(u*l+1)-u-.5*(u*u+o)*l)/((u-a)/l-1),u+=c,Math.abs(c)<=U){n=u;break}e=z(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=U)n=0,e=z(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,u=a;var h,f,d,g,b;for(s=zu;s;--s)if(b=this.e*Math.sin(u),h=Math.sqrt(1-b*b)*Math.tan(u),f=this.a*Ot(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),g=f/this.a,c=(a*(h*g+1)-g-.5*h*(g*g+o))/(this.es*Math.sin(2*u)*(g*g+o-2*a*g)/(4*h)+(a-g)*(h*d-2/Math.sin(2*u))-d),u-=c,Math.abs(c)<=U){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=z(this.long0+Math.asin(r*h/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var f4=["Polyconic","American_Polyconic","poly"];const d4={init:c4,forward:l4,inverse:h4,names:f4};function p4(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function m4(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,a=i/Mr*1e-5,o=s,u=1,c=0;for(e=1;e<=10;e++)u=u*a,c=c+this.A[e]*u;var l=c,h=o,f=1,d=0,g,b,y=0,A=0;for(e=1;e<=6;e++)g=f*l-d*h,b=d*l+f*h,f=g,d=b,y=y+this.B_re[e]*f-this.B_im[e]*d,A=A+this.B_im[e]*f+this.B_re[e]*d;return t.x=A*this.a+this.x0,t.y=y*this.a+this.y0,t}function g4(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,u=1,c=0,l,h,f=0,d=0;for(e=1;e<=6;e++)l=u*a-c*o,h=c*a+u*o,u=l,c=h,f=f+this.C_re[e]*u-this.C_im[e]*c,d=d+this.C_im[e]*u+this.C_re[e]*c;for(var g=0;g<this.iterations;g++){var b=f,y=d,A,w,M=a,D=o;for(e=2;e<=6;e++)A=b*f-y*d,w=y*f+b*d,b=A,y=w,M=M+(e-1)*(this.B_re[e]*b-this.B_im[e]*y),D=D+(e-1)*(this.B_im[e]*b+this.B_re[e]*y);b=1,y=0;var N=this.B_re[1],P=this.B_im[1];for(e=2;e<=6;e++)A=b*f-y*d,w=y*f+b*d,b=A,y=w,N=N+e*(this.B_re[e]*b-this.B_im[e]*y),P=P+e*(this.B_im[e]*b+this.B_re[e]*y);var x=N*N+P*P;f=(M*N+D*P)/x,d=(D*N-M*P)/x}var F=f,v=d,_=1,T=0;for(e=1;e<=9;e++)_=_*F,T=T+this.D[e]*_;var I=this.lat0+T*Mr*1e5,k=this.long0+v;return t.x=k,t.y=I,t}var y4=["New_Zealand_Map_Grid","nzmg"];const _4={init:p4,forward:m4,inverse:g4,names:y4};function v4(){}function E4(t){var e=t.x,n=t.y,r=z(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function b4(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var S4=["Miller_Cylindrical","mill"];const w4={init:v4,forward:E4,inverse:b4,names:S4};var x4=20;function M4(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Xa(this.es)}function A4(t){var e,n,r=t.x,i=t.y;if(r=z(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=x4;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<U)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),c=Math.cos(i);n=this.a*or(i,u,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t}function P4(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=ze((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ze(Math.sin(e)/this.n)),r=z(r+this.long0,this.over),e=Ke(e)):(e=Ja(t.y/this.a,this.es,this.en),i=Math.abs(e),i<L?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=z(n,this.over)):i-U<L&&(r=this.long0)),t.x=r,t.y=e,t}var T4=["Sinusoidal","sinu"];const C4={init:M4,forward:A4,inverse:P4,names:T4};function D4(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function N4(t){for(var e=t.x,n=t.y,r=z(e-this.long0,this.over),i=n,s=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<U)break}i/=2,Math.PI/2-Math.abs(n)<U&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=o,t.y=u,t}function I4(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var k4=["Mollweide","moll"];const R4={init:D4,forward:N4,inverse:I4,names:k4};function L4(){Math.abs(this.lat1+this.lat2)<U||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ni(this.es),this.e1=ri(this.es),this.e2=ii(this.es),this.e3=si(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=me(this.e,this.sin_phi,this.cos_phi),this.ml1=Ot(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<U?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=me(this.e,this.sin_phi,this.cos_phi),this.ml2=Ot(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ot(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function G4(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Ot(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*z(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return t.x=a,t.y=o,t}function O4(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=z(this.long0+s/this.ns,this.over),r=Ke(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Qi(a,this.e0,this.e1,this.e2,this.e3),i=z(this.long0+s/this.ns,this.over),t.x=i,t.y=r,t}var F4=["Equidistant_Conic","eqdc"];const j4={init:L4,forward:G4,inverse:O4,names:F4};function B4(){this.R=this.a}function $4(t){var e=t.x,n=t.y,r=z(e-this.long0,this.over),i,s;Math.abs(n)<=U&&(i=this.x0+this.R*r,s=this.y0);var a=ze(2*Math.abs(n/Math.PI));(Math.abs(r)<=U||Math.abs(Math.abs(n)-L)<=U)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),u=o*o,c=Math.sin(a),l=Math.cos(a),h=l/(c+l-1),f=h*h,d=h*(2/c-1),g=d*d,b=Math.PI*this.R*(o*(h-g)+Math.sqrt(u*(h-g)*(h-g)-(g+u)*(f-g)))/(g+u);r<0&&(b=-b),i=this.x0+b;var y=u+h;return b=Math.PI*this.R*(d*y-o*Math.sqrt((g+u)*(u+1)-y*y))/(g+u),n>=0?s=this.y0+b:s=this.y0-b,t.x=i,t.y=s,t}function q4(t){var e,n,r,i,s,a,o,u,c,l,h,f,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,u=-2*a+1+2*i*i+s*s,d=i*i/u+(2*o*o*o/u/u/u-9*a*o/u/u)/27,c=(a-o*o/3/u)/u,l=2*Math.sqrt(-c/3),h=3*d/c/l,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-l*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI:n=-(-l*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI,Math.abs(r)<U?e=this.long0:e=z(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),t.x=e,t.y=n,t}var U4=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const H4={init:B4,forward:$4,inverse:q4,names:U4};function z4(t,e,n,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(t)),u=Math.atan((1-s)*Math.tan(n)),c=Math.sin(o),l=Math.cos(o),h=Math.sin(u),f=Math.cos(u);let d=a,g,b=100,y,A,w,M,D,N,P,x,F,v,_,T,I,k;do{if(y=Math.sin(d),A=Math.cos(d),w=Math.sqrt(f*y*(f*y)+(l*h-c*f*A)*(l*h-c*f*A)),w===0)return{azi1:0,s12:0};M=c*h+l*f*A,D=Math.atan2(w,M),N=l*f*y/w,P=1-N*N,x=P!==0?M-2*c*h/P:0,F=s/16*P*(4+s*(4-3*P)),g=d,d=a+(1-F)*s*N*(D+F*w*(x+F*M*(-1+2*x*x)))}while(Math.abs(d-g)>1e-12&&--b>0);return b===0?{azi1:NaN,s12:NaN}:(v=P*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),_=1+v/16384*(4096+v*(-768+v*(320-175*v))),T=v/1024*(256+v*(-128+v*(74-47*v))),I=T*w*(x+T/4*(M*(-1+2*x*x)-T/6*x*(-3+4*w*w)*(-3+4*x*x))),k=i*(1-s)*_*(D-I),{azi1:Math.atan2(f*y,l*h-c*f*A),s12:k})}function W4(t,e,n,r,i,s){const a=Math.atan((1-s)*Math.tan(t)),o=Math.sin(a),u=Math.cos(a),c=Math.sin(n),l=Math.cos(n),h=Math.atan2(o,u*l),f=u*c,d=1-f*f,g=d*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),b=1+g/16384*(4096+g*(-768+g*(320-175*g))),y=g/1024*(256+g*(-128+g*(74-47*g)));let A=r/(i*(1-s)*b),w,M=100,D,N,P,x;do D=Math.cos(2*h+A),N=Math.sin(A),P=Math.cos(A),x=y*N*(D+y/4*(P*(-1+2*D*D)-y/6*D*(-3+4*N*N)*(-3+4*D*D))),w=A,A=r/(i*(1-s)*b)+x;while(Math.abs(A-w)>1e-12&&--M>0);if(M===0)return{lat2:NaN,lon2:NaN};const F=o*N-u*P*l,v=Math.atan2(o*P+u*N*l,(1-s)*Math.sqrt(f*f+F*F)),_=Math.atan2(N*c,u*P-o*N*l),T=s/16*d*(4+s*(4-3*d)),I=_-(1-T)*s*f*(A+T*N*(D+T*P*(-1+2*D*D))),k=e+I;return{lat2:v,lon2:k}}function V4(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function X4(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=z(e-this.long0,this.over),a,o,u,c,l,h,f,d,g,b,y;return this.sphere?Math.abs(this.sin_p12-1)<=U?(t.x=this.x0+this.a*(L-n)*Math.sin(s),t.y=this.y0-this.a*(L-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=U?(t.x=this.x0+this.a*(L+n)*Math.sin(s),t.y=this.y0+this.a*(L+n)*Math.cos(s),t):(g=this.sin_p12*r+this.cos_p12*i*Math.cos(s),f=Math.acos(g),d=f?f/Math.sin(f):1,t.x=this.x0+this.a*d*i*Math.sin(s),t.y=this.y0+this.a*d*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(a=ni(this.es),o=ri(this.es),u=ii(this.es),c=si(this.es),Math.abs(this.sin_p12-1)<=U?(l=this.a*Ot(a,o,u,c,L),h=this.a*Ot(a,o,u,c,n),t.x=this.x0+(l-h)*Math.sin(s),t.y=this.y0-(l-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=U?(l=this.a*Ot(a,o,u,c,L),h=this.a*Ot(a,o,u,c,n),t.x=this.x0+(l+h)*Math.sin(s),t.y=this.y0+(l+h)*Math.cos(s),t):Math.abs(e)<U&&Math.abs(n-this.lat0)<U?(t.x=t.y=0,t):(b=z4(this.lat0,this.long0,n,e,this.a,this.f),y=b.azi1,t.x=b.s12*Math.sin(y),t.y=b.s12*Math.cos(y),t))}function J4(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,a,o,u,c,l,h,f,d,g,b,y;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*L*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=U?a=this.lat0:(a=ze(i*this.sin_p12+t.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-L,Math.abs(o)<=U?this.lat0>=0?s=z(this.long0+Math.atan2(t.x,-t.y),this.over):s=z(this.long0-Math.atan2(-t.x,t.y),this.over):s=z(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=s,t.y=a,t)):(u=ni(this.es),c=ri(this.es),l=ii(this.es),h=si(this.es),Math.abs(this.sin_p12-1)<=U?(f=this.a*Ot(u,c,l,h,L),e=Math.sqrt(t.x*t.x+t.y*t.y),d=f-e,a=Qi(d/this.a,u,c,l,h),s=z(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=U?(f=this.a*Ot(u,c,l,h,L),e=Math.sqrt(t.x*t.x+t.y*t.y),d=e-f,a=Qi(d/this.a,u,c,l,h),s=z(this.long0+Math.atan2(t.x,t.y),this.over),t.x=s,t.y=a,t):(g=Math.atan2(t.x,t.y),b=Math.sqrt(t.x*t.x+t.y*t.y),y=W4(this.lat0,this.long0,g,b,this.a,this.f),t.x=y.lon2,t.y=y.lat2,t))}var K4=["Azimuthal_Equidistant","aeqd"];const Y4={init:V4,forward:X4,inverse:J4,names:K4};function Q4(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Z4(t){var e,n,r,i,s,a,o,u,c=t.x,l=t.y;return r=z(c-this.long0,this.over),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*n*i,s=1,(a>0||Math.abs(a)<=U)&&(o=this.a*s*n*Math.sin(r),u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=u,t}function tE(t){var e,n,r,i,s,a,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=ze(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=U?(o=this.lat0,t.x=a,t.y=o,t):(o=ze(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-L,Math.abs(s)<=U?(this.lat0>=0?a=z(this.long0+Math.atan2(t.x,-t.y),this.over):a=z(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=a,t.y=o,t):(a=z(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=a,t.y=o,t))}var eE=["ortho"];const nE={init:Q4,forward:Z4,inverse:tE,names:eE};var wt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function rE(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=L-pt/2?this.face=wt.TOP:this.lat0<=-(L-pt/2)?this.face=wt.BOTTOM:Math.abs(this.long0)<=pt?this.face=wt.FRONT:Math.abs(this.long0)<=L+pt?this.face=this.long0>0?wt.RIGHT:wt.LEFT:this.face=wt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function iE(t){var e={x:0,y:0},n,r,i,s,a,o,u={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===wt.TOP)s=L-n,r>=pt&&r<=L+pt?(u.value=mt.AREA_0,i=r-L):r>L+pt||r<=-(L+pt)?(u.value=mt.AREA_1,i=r>0?r-At:r+At):r>-(L+pt)&&r<=-pt?(u.value=mt.AREA_2,i=r+L):(u.value=mt.AREA_3,i=r);else if(this.face===wt.BOTTOM)s=L+n,r>=pt&&r<=L+pt?(u.value=mt.AREA_0,i=-r+L):r<pt&&r>=-pt?(u.value=mt.AREA_1,i=-r):r<-pt&&r>=-(L+pt)?(u.value=mt.AREA_2,i=-r-L):(u.value=mt.AREA_3,i=r>0?-r+At:-r-At);else{var c,l,h,f,d,g,b;this.face===wt.RIGHT?r=Bn(r,+L):this.face===wt.BACK?r=Bn(r,+At):this.face===wt.LEFT&&(r=Bn(r,-L)),f=Math.sin(n),d=Math.cos(n),g=Math.sin(r),b=Math.cos(r),c=d*b,l=d*g,h=f,this.face===wt.FRONT?(s=Math.acos(c),i=vi(s,h,l,u)):this.face===wt.RIGHT?(s=Math.acos(l),i=vi(s,h,-c,u)):this.face===wt.BACK?(s=Math.acos(-c),i=vi(s,h,-l,u)):this.face===wt.LEFT?(s=Math.acos(-l),i=vi(s,h,c,u)):(s=i=0,u.value=mt.AREA_0)}return o=Math.atan(12/At*(i+Math.acos(Math.sin(i)*Math.cos(pt))-L)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),u.value===mt.AREA_1?o+=L:u.value===mt.AREA_2?o+=At:u.value===mt.AREA_3&&(o+=1.5*At),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function sE(t){var e={lam:0,phi:0},n,r,i,s,a,o,u,c,l,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=mt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=mt.AREA_1,n-=L):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=mt.AREA_2,n=n<0?n+At:n-At):(h.value=mt.AREA_3,n+=L),l=At/12*Math.tan(n),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(n),s=Math.tan(r),u=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),u<-1?u=-1:u>1&&(u=1),this.face===wt.TOP)c=Math.acos(u),e.phi=L-c,h.value===mt.AREA_0?e.lam=o+L:h.value===mt.AREA_1?e.lam=o<0?o+At:o-At:h.value===mt.AREA_2?e.lam=o-L:e.lam=o;else if(this.face===wt.BOTTOM)c=Math.acos(u),e.phi=c-L,h.value===mt.AREA_0?e.lam=-o+L:h.value===mt.AREA_1?e.lam=-o:h.value===mt.AREA_2?e.lam=-o-L:e.lam=o<0?-o-At:-o+At;else{var f,d,g;f=u,l=f*f,l>=1?g=0:g=Math.sqrt(1-l)*Math.sin(o),l+=g*g,l>=1?d=0:d=Math.sqrt(1-l),h.value===mt.AREA_1?(l=d,d=-g,g=l):h.value===mt.AREA_2?(d=-d,g=-g):h.value===mt.AREA_3&&(l=d,d=g,g=-l),this.face===wt.RIGHT?(l=f,f=-d,d=l):this.face===wt.BACK?(f=-f,d=-d):this.face===wt.LEFT&&(l=f,f=d,d=-l),e.phi=Math.acos(-g)-L,e.lam=Math.atan2(d,f),this.face===wt.RIGHT?e.lam=Bn(e.lam,-L):this.face===wt.BACK?e.lam=Bn(e.lam,-At):this.face===wt.LEFT&&(e.lam=Bn(e.lam,+L))}if(this.es!==0){var b,y,A;b=e.phi<0?1:0,y=Math.tan(e.phi),A=this.b/Math.sqrt(y*y+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-A*A)/(this.one_minus_f*A)),b&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function vi(t,e,n,r){var i;return t<U?(r.value=mt.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=pt?r.value=mt.AREA_0:i>pt&&i<=L+pt?(r.value=mt.AREA_1,i-=L):i>L+pt||i<=-(L+pt)?(r.value=mt.AREA_2,i=i>=0?i-At:i+At):(r.value=mt.AREA_3,i+=L)),i}function Bn(t,e){var n=t+e;return n<-At?n+=Gr:n>+At&&(n-=Gr),n}var aE=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const oE={init:rE,forward:iE,inverse:sE,names:aE};var pa=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Sr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mh=.8487,Ah=1.3523,Ph=Ht/5,uE=1/Ph,On=18,Zi=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},cE=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function lE(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function hE(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function fE(t){var e=z(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*Ph);r<0?r=0:r>=On&&(r=On-1),n=Ht*(n-uE*r);var i={x:Zi(pa[r],n)*e,y:Zi(Sr[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Mh+this.x0,i.y=i.y*this.a*Ah+this.y0,i}function dE(t){var e={x:(t.x-this.x0)/(this.a*Mh),y:Math.abs(t.y-this.y0)/(this.a*Ah)};if(e.y>=1)e.x/=pa[On][0],e.y=t.y<0?-L:L;else{var n=Math.floor(e.y*On);for(n<0?n=0:n>=On&&(n=On-1);;)if(Sr[n][0]>e.y)--n;else if(Sr[n+1][0]<=e.y)++n;else break;var r=Sr[n],i=5*(e.y-r[0])/(Sr[n+1][0]-r[0]);i=lE(function(s){return(Zi(r,s)-e.y)/cE(r,s)},i,U,100),e.x/=Zi(pa[n],i),e.y=(5*n+i)*xt,t.y<0&&(e.y=-e.y)}return e.x=z(e.x+this.long0,this.over),e}var pE=["Robinson","robin"];const mE={init:hE,forward:fE,inverse:dE,names:pE};function gE(){this.name="geocent"}function yE(t){var e=ph(t,this.es,this.a);return e}function _E(t){var e=mh(t,this.es,this.a,this.b);return e}var vE=["Geocentric","geocentric","geocent","Geocent"];const EE={init:gE,forward:yE,inverse:_E,names:vE};var Lt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},gr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function bE(){if(Object.keys(gr).forEach((function(n){if(typeof this[n]>"u")this[n]=gr[n].def;else{if(gr[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);gr[n].num&&(this[n]=parseFloat(this[n]))}gr[n].degrees&&(this[n]=this[n]*xt)}).bind(this)),Math.abs(Math.abs(this.lat0)-L)<U?this.mode=this.lat0<0?Lt.S_POLE:Lt.N_POLE:Math.abs(this.lat0)<U?this.mode=Lt.EQUIT:(this.mode=Lt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function SE(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case Lt.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case Lt.EQUIT:s=n*r;break;case Lt.S_POLE:s=-e;break;case Lt.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case Lt.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case Lt.EQUIT:s*=e;break;case Lt.N_POLE:s*=-(n*r);break;case Lt.S_POLE:s*=n*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,t.x=i*this.a,t.y=s*this.a,t}function wE(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=Ut(t.x,t.y);if(Math.abs(s)<U)e.x=0,e.y=t.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Lt.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*o*this.cosph0/s),t.y=(a-this.sinph0*Math.sin(e.y))*s,t.x*=o*this.cosph0;break;case Lt.EQUIT:e.y=Math.asin(t.y*o/s),t.y=a*s,t.x*=o;break;case Lt.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case Lt.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var xE=["Tilted_Perspective","tpers"];const ME={init:bE,forward:SE,inverse:wE,names:xE};function AE(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function PE(t){var e=t.x,n=t.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var o=this.radius_p/Ut(this.radius_p*Math.cos(n),Math.sin(n));if(i=o*Math.cos(e)*Math.cos(n),s=o*Math.sin(e)*Math.cos(n),a=o*Math.sin(n),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/Ut(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/Ut(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/Ut(a,r)),t.y=this.radius_g_1*Math.atan(a/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(a/Ut(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function TE(t){var e=-1,n=0,r=0,i,s,a,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Ut(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Ut(1,n));var u=r/this.radius_p;if(i=n*n+u*u+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,n*=o,r*=o,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,n*=o,r*=o,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var CE=["Geostationary Satellite View","Geostationary_Satellite","geos"];const DE={init:AE,forward:PE,inverse:TE,names:CE};var Ar=1.340264,Pr=-.081106,Tr=893e-6,Cr=.003796,ts=Math.sqrt(3)/2;function NE(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function IE(t){var e=z(t.x-this.long0,this.over),n=t.y,r=Math.asin(ts*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(ts*(Ar+3*Pr*i+s*(7*Tr+9*Cr*i))),t.y=r*(Ar+Pr*i+s*(Tr+Cr*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function kE(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,a,o,u,c;for(c=0;c<n&&(i=r*r,s=i*i*i,a=r*(Ar+Pr*i+s*(Tr+Cr*i))-t.y,o=Ar+3*Pr*i+s*(7*Tr+9*Cr*i),r-=u=a/o,!(Math.abs(u)<e));++c);return i=r*r,s=i*i*i,t.x=ts*t.x*(Ar+3*Pr*i+s*(7*Tr+9*Cr*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/ts),t.x=z(t.x+this.long0,this.over),t}var RE=["eqearth","Equal Earth","Equal_Earth"];const LE={init:NE,forward:IE,inverse:kE,names:RE};var jr=1e-10;function GE(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<jr)throw new Error;this.es?(this.en=Xa(this.es),this.m1=or(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=FE,this.forward=OE):(Math.abs(this.phi1)+jr>=L?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=BE,this.forward=jE)}function OE(t){var e=z(t.x-(this.long0||0),this.over),n=t.y,r,i,s;return r=this.am1+this.m1-or(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function FE(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=Ut(t.x,t.y=this.am1-t.y),i=Ja(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<L)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-L)<=jr)r=0;else throw new Error;return t.x=z(r+(this.long0||0),this.over),t.y=Ke(i),t}function jE(t){var e=z(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>jr?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function BE(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=Ut(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>L)throw new Error;return Math.abs(Math.abs(n)-L)<=jr?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=z(e+(this.long0||0),this.over),t.y=Ke(n),t}var $E=["bonne","Bonne (Werner lat_1=90)"];const qE={init:GE,names:$E},Wu={OBLIQUE:{forward:VE,inverse:JE},TRANSVERSE:{forward:XE,inverse:KE}},es={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function UE(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=lh.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=ee(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(es),i=o=>{if(typeof this[o]>"u")return;const u=parseFloat(this[o])*xt;if(isNaN(u))throw new Error("Invalid value for "+o+": "+this[o]);return u};for(let o=0;o<r.length;o++){const u=r[o],c=es[u],l=Object.entries(c);if(l.some(([f])=>typeof this[f]<"u")){n=c;for(let f=0;f<l.length;f++){const[d,g]=l[f],b=i(d);if(typeof b>"u")throw new Error("Missing parameter: "+d+".");this[g]=b}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=WE(this,n);this.lamp=s,Math.abs(a)>U?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=Wu.OBLIQUE):this.projectionType=Wu.TRANSVERSE}function HE(t){return this.projectionType.forward(this,t)}function zE(t){return this.projectionType.inverse(this,t)}function WE(t,e){let n,r;if(e===es.ROTATE){let i=t.oLongC,s=t.oLatC,a=t.oAlpha;if(Math.abs(Math.abs(s)-L)<=U)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===es.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,s=t.oLat1,a=t.oLong2,o=t.oLat2,u=Math.abs(s);if(Math.abs(s)>L-U)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(o)>L-U)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(s-o)<U)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(u<U)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:n}}function VE(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),s=Math.sin(r),a=Math.cos(r);e.x=z(Math.atan2(a*Math.sin(n),t.sphip*a*i+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*a*i);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Ht,o.y*=Ht),o}function XE(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),s=Math.cos(n);e.x=z(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*s);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=Ht,a.y*=Ht),a}function JE(t,e){t.isIdentity&&(e.x*=xt,e.y*=xt);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),t.sphip*o*s-t.cphip*a),e.y=Math.asin(t.sphip*a+t.cphip*o*s)}return e.x=z(e.x+t.long0),e}function KE(t,e){t.isIdentity&&(e.x*=xt,e.y*=xt);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=t.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=z(e.x+t.long0),e}var YE=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const QE={init:UE,forward:HE,inverse:zE,names:YE};function ZE(t){t.Proj.projections.add(Li),t.Proj.projections.add(Gi),t.Proj.projections.add($_),t.Proj.projections.add(K_),t.Proj.projections.add(ev),t.Proj.projections.add(av),t.Proj.projections.add(fv),t.Proj.projections.add(yv),t.Proj.projections.add(Sv),t.Proj.projections.add(Pv),t.Proj.projections.add(Bv),t.Proj.projections.add(Wv),t.Proj.projections.add(Yv),t.Proj.projections.add(r4),t.Proj.projections.add(u4),t.Proj.projections.add(d4),t.Proj.projections.add(_4),t.Proj.projections.add(w4),t.Proj.projections.add(C4),t.Proj.projections.add(R4),t.Proj.projections.add(j4),t.Proj.projections.add(H4),t.Proj.projections.add(Y4),t.Proj.projections.add(nE),t.Proj.projections.add(oE),t.Proj.projections.add(mE),t.Proj.projections.add(EE),t.Proj.projections.add(ME),t.Proj.projections.add(DE),t.Proj.projections.add(LE),t.Proj.projections.add(qE),t.Proj.projections.add(QE)}const Ne=Object.assign(i_,{defaultDatum:"WGS84",Proj:ee,WGS84:new ee("WGS84"),Point:Xn,toPoint:gh,defs:It,nadgrid:By,transform:Yi,mgrs:s_,version:"__VERSION__"});ZE(Ne);Ne.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");Ne.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs");Ne.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs");const Th={"EPSG:4326":"WGS84 (lon/lat)","EPSG:3857":"Web Mercator","EPSG:27700":"British National Grid"};function an(t,e,n){if(e===n)return t;const r=t[0]??0,i=t[1]??0,s=t[2],a=Ne(e,n,[r,i]),o=a[0]??0,u=a[1]??0;return s!==void 0?[o,u,s]:[o,u]}function We(t,e,n){if(e===n)return t;switch(t.type){case"Point":return{type:"Point",coordinates:an(t.coordinates,e,n)};case"MultiPoint":return{type:"MultiPoint",coordinates:t.coordinates.map(r=>an(r,e,n))};case"LineString":return{type:"LineString",coordinates:t.coordinates.map(r=>an(r,e,n))};case"MultiLineString":return{type:"MultiLineString",coordinates:t.coordinates.map(r=>r.map(i=>an(i,e,n)))};case"Polygon":return{type:"Polygon",coordinates:t.coordinates.map(r=>r.map(i=>an(i,e,n)))};case"MultiPolygon":return{type:"MultiPolygon",coordinates:t.coordinates.map(r=>r.map(i=>i.map(s=>an(s,e,n))))};case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(r=>We(r,e,n))};default:return t}}function Ch(t){const e=t[0],n=t[1];return e===void 0||n===void 0?!1:e>=-180&&e<=180&&n>=-90&&n<=90}function Dh(t){for(const e of t)if(!Ch(e))return{valid:!1,invalidCoord:e};return{valid:!0}}const Ns={WGS84_MAX:180,BNG_MAX:13e5,WEB_MERCATOR_MAX:2003750834e-2};function ai(t){if(t.length===0)return"EPSG:4326";let e=0;for(const n of t){const r=n[0],i=n[1];r!==void 0&&(e=Math.max(e,Math.abs(r))),i!==void 0&&(e=Math.max(e,Math.abs(i)))}return e<=Ns.WGS84_MAX?"EPSG:4326":e<=Ns.BNG_MAX?"EPSG:27700":e<=Ns.WEB_MERCATOR_MAX?"EPSG:3857":"EPSG:4326"}const t3=Object.freeze(Object.defineProperty({__proto__:null,detectProjectionFromCoordinates:ai,isValidWGS84Coordinate:Ch,proj4:Ne,projectionLabels:Th,transformCoordinate:an,transformGeometry:We,validateWGS84Coordinates:Dh},Symbol.toStringTag,{value:"Module"})),e3={geojson:"GeoJSON",wkt:"WKT",ewkt:"EWKT",csv:"CSV",kml:"KML",gpx:"GPX",polyline5:"Polyline5",polyline6:"Polyline6",shapefile:"Shapefile"};function n3({error:t}){const[e,n]=B.useState(!1),r=B.useCallback(()=>{n(a=>!a)},[]),i=B.useCallback(()=>{n(!0)},[]),s=B.useCallback(()=>{n(!1)},[]);return S.jsxs("span",{className:"relative inline-flex items-center",children:[S.jsx("button",{type:"button",onClick:r,onMouseEnter:i,onMouseLeave:s,className:"inline-flex items-center","aria-label":"Show error details",children:S.jsx(w1,{className:"h-4 w-4 text-red-600 dark:text-red-400"})}),e&&S.jsx("div",{className:"absolute left-0 top-full z-50 mt-1 max-w-xs whitespace-normal rounded-md border border-red-200 bg-red-50 p-2 text-xs text-red-700 shadow-lg dark:border-red-800 dark:bg-red-950 dark:text-red-300",children:t})]})}function r3(){const{inputFormat:t,inputProjection:e,detectedFormat:n,detectedProjection:r,parseError:i,coordinateError:s,isParsing:a,features:o,rawText:u}=le(),c=t==="auto",l=e==="auto",h=i||s,f=u.trim().length>0,d=o.length>0;if(a)return S.jsx("span",{className:"inline-flex items-center gap-1 text-xs text-neutral-500 dark:text-neutral-400",children:S.jsx(D1,{className:"h-3 w-3 animate-spin"})});if(!f)return null;const g=n?e3[n]:null,b=r?Th[r]:null,y=!h&&d,A=i||s;return S.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[y&&S.jsx(b1,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),A&&S.jsx(n3,{error:A}),c&&g&&S.jsx("span",{className:"rounded bg-neutral-100 px-1.5 py-0.5 text-xs font-medium text-neutral-600 dark:bg-neutral-700 dark:text-neutral-300",children:g}),l&&b&&S.jsx("span",{className:"rounded bg-neutral-100 px-1.5 py-0.5 text-xs font-medium text-neutral-600 dark:bg-neutral-700 dark:text-neutral-300",children:b})]})}const i3=[".json",".geojson",".wkt",".csv",".kml",".gpx",".txt"];function s3(){const{rawText:t,inputFormat:e,inputProjection:n,detectedFormat:r,detectedProjection:i,setRawText:s,setInputFormat:a,setInputProjection:o}=le(),u=B.useCallback((h,f)=>{s(h)},[s]),c=B.useCallback(()=>{s("")},[s]),l=B.useCallback(async()=>{await navigator.clipboard.writeText(window.location.href)},[]);return S.jsxs("div",{className:"border-b border-neutral-200 p-3 md:p-4 dark:border-neutral-700",children:[S.jsxs("div",{className:"mb-2 flex items-center gap-2 md:mb-3",children:[S.jsx("h2",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Input Geometry"}),S.jsx(r3,{}),S.jsxs("div",{className:"ml-auto flex gap-1",children:[t&&S.jsx("button",{onClick:l,className:"rounded p-1 text-neutral-400 transition-colors hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300",title:"Copy link to clipboard","aria-label":"Copy shareable link to clipboard",children:S.jsx(C1,{className:"h-4 w-4"})}),t&&S.jsx("button",{onClick:c,className:"rounded p-1 text-neutral-400 transition-colors hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300",title:"Clear input","aria-label":"Clear input",children:S.jsx(F1,{className:"h-4 w-4"})})]})]}),S.jsxs("div",{className:"mb-2 flex gap-2 md:mb-3",children:[S.jsx(z1,{value:e,onChange:a,detectedValue:r,label:"Format"}),S.jsx(W1,{value:n,onChange:o,detectedValue:i,label:"Projection"})]}),S.jsx(U1,{onFileDrop:u,accept:i3,children:S.jsx(H1,{value:t,onChange:s,placeholder:"Paste or drop GeoJSON, WKT, CSV, KML, GPX..."})})]})}const oi=ti(t=>({outputFormat:"geojson",outputProjection:"EPSG:4326",setOutputFormat:e=>{t({outputFormat:e})},setOutputProjection:e=>{t({outputProjection:e})}}));var Is={};function a3(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ei={exports:{}};const o3={},u3=Object.freeze(Object.defineProperty({__proto__:null,default:o3},Symbol.toStringTag,{value:"Module"})),Vu=df(u3);var Xu;function c3(){return Xu||(Xu=1,(function(t,e){var n=(function(){var r=function(A,w,M,D){for(M=M||{},D=A.length;D--;M[A[D]]=w);return M},i=[1,12],s=[1,13],a=[1,9],o=[1,10],u=[1,11],c=[1,14],l=[1,15],h=[14,18,22,24],f=[18,22],d=[22,24],g={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(w,M,D,N,P,x,F){var v=x.length-1;switch(P){case 1:this.$=w.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(w);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=x[v-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=x[v-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[x[v-2],x[v]];break;case 16:this.$={},this.$[x[v][0]]=x[v][1];break;case 17:this.$=x[v-2],x[v-2][x[v][0]]!==void 0&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(x[v][0])),x[v-2][x[v][0]]=x[v][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[x[v]];break;case 21:this.$=x[v-2],x[v-2].push(x[v]);break}},table:[{3:5,4:i,5:6,6:s,7:3,8:a,9:4,10:o,11:u,12:1,13:2,15:7,16:8,17:c,23:l},{1:[3]},{14:[1,16]},r(h,[2,7]),r(h,[2,8]),r(h,[2,9]),r(h,[2,10]),r(h,[2,11]),r(h,[2,12]),r(h,[2,3]),r(h,[2,4]),r(h,[2,5]),r([14,18,21,22,24],[2,1]),r(h,[2,2]),{3:20,4:i,18:[1,17],19:18,20:19},{3:5,4:i,5:6,6:s,7:3,8:a,9:4,10:o,11:u,13:23,15:7,16:8,17:c,23:l,24:[1,21],25:22},{1:[2,6]},r(h,[2,13]),{18:[1,24],22:[1,25]},r(f,[2,16]),{21:[1,26]},r(h,[2,18]),{22:[1,28],24:[1,27]},r(d,[2,20]),r(h,[2,14]),{3:20,4:i,20:29},{3:5,4:i,5:6,6:s,7:3,8:a,9:4,10:o,11:u,13:30,15:7,16:8,17:c,23:l},r(h,[2,19]),{3:5,4:i,5:6,6:s,7:3,8:a,9:4,10:o,11:u,13:31,15:7,16:8,17:c,23:l},r(f,[2,17]),r(f,[2,15]),r(d,[2,21])],defaultActions:{16:[2,6]},parseError:function(w,M){if(M.recoverable)this.trace(w);else{let D=function(N,P){this.message=N,this.hash=P};throw D.prototype=Error,new D(w,M)}},parse:function(w){var M=this,D=[0],N=[null],P=[],x=this.table,F="",v=0,_=0,T=2,I=1,k=P.slice.call(arguments,1),R=Object.create(this.lexer),W={yy:{}};for(var Y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Y)&&(W.yy[Y]=this.yy[Y]);R.setInput(w,W.yy),W.yy.lexer=R,W.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var V=R.yylloc;P.push(V);var G=R.options&&R.options.ranges;typeof W.yy.parseError=="function"?this.parseError=W.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var $=function(){var J;return J=R.lex()||I,typeof J!="number"&&(J=M.symbols_[J]||J),J},j,O,Q,Z,K={},X,at,ot,et;;){if(O=D[D.length-1],this.defaultActions[O]?Q=this.defaultActions[O]:((j===null||typeof j>"u")&&(j=$()),Q=x[O]&&x[O][j]),typeof Q>"u"||!Q.length||!Q[0]){var ct="";et=[];for(X in x[O])this.terminals_[X]&&X>T&&et.push("'"+this.terminals_[X]+"'");R.showPosition?ct="Parse error on line "+(v+1)+`:
`+R.showPosition()+`
Expecting `+et.join(", ")+", got '"+(this.terminals_[j]||j)+"'":ct="Parse error on line "+(v+1)+": Unexpected "+(j==I?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(ct,{text:R.match,token:this.terminals_[j]||j,line:R.yylineno,loc:V,expected:et})}if(Q[0]instanceof Array&&Q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+O+", token: "+j);switch(Q[0]){case 1:D.push(j),N.push(R.yytext),P.push(R.yylloc),D.push(Q[1]),j=null,_=R.yyleng,F=R.yytext,v=R.yylineno,V=R.yylloc;break;case 2:if(at=this.productions_[Q[1]][1],K.$=N[N.length-at],K._$={first_line:P[P.length-(at||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(at||1)].first_column,last_column:P[P.length-1].last_column},G&&(K._$.range=[P[P.length-(at||1)].range[0],P[P.length-1].range[1]]),Z=this.performAction.apply(K,[F,_,v,W.yy,Q[1],N,P].concat(k)),typeof Z<"u")return Z;at&&(D=D.slice(0,-1*at*2),N=N.slice(0,-1*at),P=P.slice(0,-1*at)),D.push(this.productions_[Q[1]][0]),N.push(K.$),P.push(K._$),ot=x[D[D.length-2]][D[D.length-1]],D.push(ot);break;case 3:return!0}}return!0}},b=(function(){var A={EOF:1,parseError:function(M,D){if(this.yy.parser)this.yy.parser.parseError(M,D);else throw new Error(M)},setInput:function(w,M){return this.yy=M||this.yy||{},this._input=w,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var w=this._input[0];this.yytext+=w,this.yyleng++,this.offset++,this.match+=w,this.matched+=w;var M=w.match(/(?:\r\n?|\n).*/g);return M?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),w},unput:function(w){var M=w.length,D=w.split(/(?:\r\n?|\n)/g);this._input=w+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var N=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),D.length-1&&(this.yylineno-=D.length-1);var P=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:D?(D.length===N.length?this.yylloc.first_column:0)+N[N.length-D.length].length-D[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[P[0],P[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(w){this.unput(this.match.slice(w))},pastInput:function(){var w=this.matched.substr(0,this.matched.length-this.match.length);return(w.length>20?"...":"")+w.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var w=this.match;return w.length<20&&(w+=this._input.substr(0,20-w.length)),(w.substr(0,20)+(w.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var w=this.pastInput(),M=new Array(w.length+1).join("-");return w+this.upcomingInput()+`
`+M+"^"},test_match:function(w,M){var D,N,P;if(this.options.backtrack_lexer&&(P={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(P.yylloc.range=this.yylloc.range.slice(0))),N=w[0].match(/(?:\r\n?|\n).*/g),N&&(this.yylineno+=N.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:N?N[N.length-1].length-N[N.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+w[0].length},this.yytext+=w[0],this.match+=w[0],this.matches=w,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(w[0].length),this.matched+=w[0],D=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),D)return D;if(this._backtrack){for(var x in P)this[x]=P[x];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var w,M,D,N;this._more||(this.yytext="",this.match="");for(var P=this._currentRules(),x=0;x<P.length;x++)if(D=this._input.match(this.rules[P[x]]),D&&(!M||D[0].length>M[0].length)){if(M=D,N=x,this.options.backtrack_lexer){if(w=this.test_match(D,P[x]),w!==!1)return w;if(this._backtrack){M=!1;continue}else return!1}else if(!this.options.flex)break}return M?(w=this.test_match(M,P[N]),w!==!1?w:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var M=this.next();return M||this.lex()},begin:function(M){this.conditionStack.push(M)},popState:function(){var M=this.conditionStack.length-1;return M>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(M){return M=this.conditionStack.length-1-Math.abs(M||0),M>=0?this.conditionStack[M]:"INITIAL"},pushState:function(M){this.begin(M)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(M,D,N,P){switch(N){case 0:break;case 1:return 6;case 2:return D.yytext=D.yytext.substr(1,D.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return A})();g.lexer=b;function y(){this.yy={}}return y.prototype=g,g.Parser=y,new y})();typeof a3<"u"&&(e.parser=n,e.Parser=n.Parser,e.parse=function(){return n.parse.apply(n,arguments)},e.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),process.exit(1));var s=Vu.readFileSync(Vu.normalize(i[1]),"utf8");return e.parser.parse(s)},require.main===t&&e.main(process.argv.slice(1)))})(Ei,Ei.exports)),Ei.exports}var ks={},Rs,Ju;function l3(){if(Ju)return Rs;Ju=1;function t(r){var i=0;if(r.length>2)for(var s,a,o=0;o<r.length-1;o++)s=r[o],a=r[o+1],i+=(a[0]-s[0])*(a[1]+s[1]);return i>=0}function e(r){if(r&&r.length>0){if(t(r[0]))return!1;var i=r.slice(1,r.length);if(!i.every(t))return!1}return!0}function n(r){if(r.type==="Polygon")return e(r.coordinates);if(r.type==="MultiPolygon")return r.coordinates.every(e)}return Rs=function(i,s){n(i)||s.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:i.__line__})},Rs}var Ku;function h3(){if(Ku)return ks;Ku=1;var t=l3();function e(n,r){var i=[],s=0,a=10,o=6;function u(_){if((!r||r.noDuplicateMembers!==!1)&&_.__duplicateProperties__&&i.push({message:"An object contained duplicate members, making parsing ambigous: "+_.__duplicateProperties__.join(", "),line:_.__line__}),!l(_,"type","string"))if(F[_.type])_&&F[_.type](_);else{var T=v[_.type.toLowerCase()];T!==void 0?i.push({message:"Expected "+T+" but got "+_.type+" (case sensitive)",line:_.__line__}):i.push({message:"The type "+_.type+" is unknown",line:_.__line__})}}function c(_,T){return _.every(function(I){return I!==null&&typeof I===T})}function l(_,T,I){if(typeof _[T]>"u")return i.push({message:'"'+T+'" member required',line:_.__line__});if(I==="array"){if(!Array.isArray(_[T]))return i.push({message:'"'+T+'" member should be an array, but is an '+typeof _[T]+" instead",line:_.__line__})}else{if(I==="object"&&_[T]&&_[T].constructor!==Object)return i.push({message:'"'+T+'" member should be '+I+", but is an "+_[T].constructor.name+" instead",line:_.__line__});if(I&&typeof _[T]!==I)return i.push({message:'"'+T+'" member should be '+I+", but is an "+typeof _[T]+" instead",line:_.__line__})}}function h(_){if(g(_),_.properties!==void 0&&i.push({message:'FeatureCollection object cannot contain a "properties" member',line:_.__line__}),_.coordinates!==void 0&&i.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:_.__line__}),!l(_,"features","array")){if(!c(_.features,"object"))return i.push({message:"Every feature must be an object",line:_.__line__});_.features.forEach(x)}}function f(_,T){if(!Array.isArray(_))return i.push({message:"position should be an array, is a "+typeof _+" instead",line:_.__line__||T});if(_.length<2)return i.push({message:"position must have 2 or more elements",line:_.__line__||T});if(_.length>3)return i.push({message:"position should not have more than 3 elements",level:"message",line:_.__line__||T});if(!c(_,"number"))return i.push({message:"each element in a position must be a number",line:_.__line__||T});if(r&&r.precisionWarning){if(s===a)return s+=1,i.push({message:"truncated warnings: we've encountered coordinate precision warning "+a+" times, no more warnings will be reported",level:"message",line:_.__line__||T});s<a&&_.forEach(function(I){var k=0,R=String(I).split(".")[1];if(R!==void 0&&(k=R.length),k>o)return s+=1,i.push({message:"precision of coordinates should be reduced",level:"message",line:_.__line__||T})})}}function d(_,T,I,k){if(k===void 0&&_.__line__!==void 0&&(k=_.__line__),I===0)return f(_,k);if(I===1&&T){if(T==="LinearRing"){if(!Array.isArray(_[_.length-1]))return i.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:k}),!0;if(_.length<4&&i.push({message:"a LinearRing of coordinates needs to have four or more positions",line:k}),_.length&&(_[_.length-1].length!==_[0].length||!_[_.length-1].every(function(W,Y){return _[0][Y]===W})))return i.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:k}),!0}else if(T==="Line"&&_.length<2)return i.push({message:"a line needs to have two or more coordinates to be valid",line:k})}if(!Array.isArray(_))i.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:k});else{var R=_.map(function(W){return d(W,T,I-1,W.__line__||k)});return R.some(function(W){return W})}}function g(_){if(_.bbox){if(Array.isArray(_.bbox))return c(_.bbox,"number")||i.push({message:"each element in a bbox member must be a number",line:_.bbox.__line__}),_.bbox.length===4||_.bbox.length===6||i.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:_.bbox.__line__}),i.length;i.push({message:"bbox member must be an array of numbers, but is a "+typeof _.bbox,line:_.__line__})}}function b(_){_.properties!==void 0&&i.push({message:'geometry object cannot contain a "properties" member',line:_.__line__}),_.geometry!==void 0&&i.push({message:'geometry object cannot contain a "geometry" member',line:_.__line__}),_.features!==void 0&&i.push({message:'geometry object cannot contain a "features" member',line:_.__line__})}function y(_){g(_),b(_),l(_,"coordinates","array")||f(_.coordinates)}function A(_){g(_),!l(_,"coordinates","array")&&(d(_.coordinates,"LinearRing",2)||r&&r.ignoreRightHandRule===!0||t(_,i))}function w(_){g(_),!l(_,"coordinates","array")&&(d(_.coordinates,"LinearRing",3)||r&&r.ignoreRightHandRule===!0||t(_,i))}function M(_){g(_),l(_,"coordinates","array")||d(_.coordinates,"Line",1)}function D(_){g(_),l(_,"coordinates","array")||d(_.coordinates,"Line",2)}function N(_){g(_),l(_,"coordinates","array")||d(_.coordinates,"",1)}function P(_){g(_),l(_,"geometries","array")||(c(_.geometries,"object")||i.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:_.__line__}),_.geometries.length===1&&i.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:_.geometries.__line__}),_.geometries.forEach(function(T){T&&(T.type==="GeometryCollection"&&i.push({message:"GeometryCollection should avoid nested geometry collections",line:_.geometries.__line__}),u(T))}))}function x(_){g(_),_.id!==void 0&&typeof _.id!="string"&&typeof _.id!="number"&&i.push({message:'Feature "id" member must have a string or number value',line:_.__line__}),_.features!==void 0&&i.push({message:'Feature object cannot contain a "features" member',line:_.__line__}),_.coordinates!==void 0&&i.push({message:'Feature object cannot contain a "coordinates" member',line:_.__line__}),_.type!=="Feature"&&i.push({message:"GeoJSON features must have a type=feature member",line:_.__line__}),l(_,"properties","object"),l(_,"geometry","object")||_.geometry&&u(_.geometry)}var F={Point:y,Feature:x,MultiPoint:N,LineString:M,MultiLineString:D,FeatureCollection:h,GeometryCollection:P,Polygon:A,MultiPolygon:w},v=Object.keys(F).reduce(function(_,T){return _[T.toLowerCase()]=T,_},{});return typeof n!="object"||n===null||n===void 0?(i.push({message:"The root of a GeoJSON object must be an object.",line:0}),i):(u(n),i.forEach(function(_){({}).hasOwnProperty.call(_,"line")&&_.line===void 0&&delete _.line}),i)}return ks.hint=e,ks}var Yu;function f3(){if(Yu)return Is;Yu=1;var t=c3(),e=h3();function n(r,i){var s,a=[];if(typeof r=="object")s=r;else if(typeof r=="string")try{s=t.parse(r)}catch(c){var o=c.message.match(/line (\d+)/),u=parseInt(o[1],10);return[{line:u-1,message:c.message,error:c}]}else return[{message:"Expected string or object as input",line:0}];return a=a.concat(e.hint(s,i)),a}return Is.hint=n,Is}var d3=f3();function Nh(t){const e=[];let n=0,r=-1;for(let i=0;i<t.length;i++){const s=t[i];s==="{"?(n===0&&(r=i),n++):s==="}"&&(n--,n===0&&r!==-1&&(e.push(t.slice(r,i+1)),r=-1))}return e}function p3(t){let e;try{e=JSON.parse(t)}catch(r){return{features:[],errors:[{message:r instanceof Error?r.message:"Invalid JSON"}]}}const n=d3.hint(e);return n.length>0?{features:[],errors:n.map(r=>({message:r.message,line:r.line}))}:{features:g3(e),errors:[]}}function m3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"geojson"};const n=Nh(e);if(n.length===0)return{features:[],errors:[{message:"No valid JSON objects found"}]};const r=[],i=[];for(let s=0;s<n.length;s++){const a=n[s];if(!a)continue;const o=p3(a);if(o.errors.length>0){const u=n.length>1?`Object ${String(s+1)}: `:"";i.push(...o.errors.map(c=>({...c,message:u+c.message})))}else r.push(...o.features)}return r.length>0?{features:y3(r),errors:i,detectedFormat:"geojson"}:{features:[],errors:i.length>0?i:[{message:"No features found in GeoJSON"}]}}function g3(t){switch(t.type){case"FeatureCollection":return t.features;case"Feature":return[t];case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":return[{type:"Feature",geometry:t,properties:{}}];default:return[]}}function y3(t){return t.map((e,n)=>{var r;return{...e,id:((r=e.id)==null?void 0:r.toString())??`feature-${String(n)}`,properties:e.properties??{}}})}function _3(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function v3(t){const e=t.trim();if(!e.startsWith("{"))return!1;const n=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection"],r=Nh(e);if(r.length===0)return!1;try{const i=r[0];if(!i)return!1;const s=JSON.parse(i);return typeof s.type=="string"&&n.includes(s.type)}catch{return!1}}const Ih={name:"geojson",parse:m3,format:_3,detect:v3};var yr={exports:{}},Qu;function E3(){if(Qu)return yr.exports;Qu=1,yr.exports=n,yr.exports.parse=n,yr.exports.stringify=r;var t=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,e=new RegExp("^"+t.source+"(\\s"+t.source+"){1,}");function n(i){var s=i.split(";"),a=s.pop(),o=(s.shift()||"").split("=").pop(),u=0;function c(P){var x=a.substring(u).match(P);return x?(u+=x[0].length,x[0]):null}function l(P){return P&&o.match(/\d+/)&&(P.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+o}}),P}function h(){c(/^\s*/)}function f(){h();for(var P=0,x=[],F=[x],v=x,_;_=c(/^(\()/)||c(/^(\))/)||c(/^(,)/)||c(e);){if(_==="(")F.push(v),v=[],F[F.length-1].push(v),P++;else if(_===")"){if(v.length===0||(v=F.pop(),!v))return null;if(P--,P===0)break}else if(_===",")v=[],F[F.length-1].push(v);else if(!_.split(/\s/g).some(isNaN))Array.prototype.push.apply(v,_.split(/\s/g).map(parseFloat));else return null;h()}return P!==0?null:x}function d(){for(var P=[],x,F;F=c(e)||c(/^(,)/);)F===","?(P.push(x),x=[]):F.split(/\s/g).some(isNaN)||(x||(x=[]),Array.prototype.push.apply(x,F.split(/\s/g).map(parseFloat))),h();if(x)P.push(x);else return null;return P.length?P:null}function g(){if(!c(/^(point(\sz)?)/i)||(h(),!c(/^(\()/)))return null;var P=d();return!P||(h(),!c(/^(\))/))?null:{type:"Point",coordinates:P[0]}}function b(){if(!c(/^(multipoint)/i))return null;h();var P=a.substring(a.indexOf("(")+1,a.length-1).replace(/\(/g,"").replace(/\)/g,"");a="MULTIPOINT ("+P+")";var x=f();return x?(h(),{type:"MultiPoint",coordinates:x}):null}function y(){if(!c(/^(multilinestring)/i))return null;h();var P=f();return P?(h(),{type:"MultiLineString",coordinates:P}):null}function A(){if(!c(/^(linestring(\sz)?)/i)||(h(),!c(/^(\()/)))return null;var P=d();return!P||!c(/^(\))/)?null:{type:"LineString",coordinates:P}}function w(){if(!c(/^(polygon(\sz)?)/i))return null;h();var P=f();return P?{type:"Polygon",coordinates:P}:null}function M(){if(!c(/^(multipolygon)/i))return null;h();var P=f();return P?{type:"MultiPolygon",coordinates:P}:null}function D(){var P=[],x;if(!c(/^(geometrycollection)/i)||(h(),!c(/^(\()/)))return null;for(;x=N();)P.push(x),h(),c(/^(,)/),h();return c(/^(\))/)?{type:"GeometryCollection",geometries:P}:null}function N(){return g()||A()||w()||b()||y()||M()||D()}return l(N())}function r(i){i.type==="Feature"&&(i=i.geometry);function s(l){return l.join(" ")}function a(l){return l.map(s).join(", ")}function o(l){return l.map(a).map(c).join(", ")}function u(l){return l.map(o).map(c).join(", ")}function c(l){return"("+l+")"}switch(i.type){case"Point":return"POINT ("+s(i.coordinates)+")";case"LineString":return"LINESTRING ("+a(i.coordinates)+")";case"Polygon":return"POLYGON ("+o(i.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+a(i.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+u(i.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+o(i.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+i.geometries.map(r).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return yr.exports}var kh=E3();function Rh(t){var s;const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"wkt"};const n=e.split(/\n\s*\n/).filter(a=>a.trim()),r=[],i=[];for(let a=0;a<n.length;a++){const o=(s=n[a])==null?void 0:s.trim();if(o)try{const u=kh.parse(o);u?r.push({type:"Feature",id:`feature-${String(a)}`,geometry:u,properties:{}}):i.push({message:`Failed to parse WKT at block ${String(a+1)}`})}catch(u){i.push({message:u instanceof Error?u.message:`Invalid WKT at block ${String(a+1)}`})}}return{features:r,errors:i,detectedFormat:"wkt"}}function b3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"ewkt"};let n,r=e;const i=/^SRID=(\d+);/i.exec(e);if(i){const a=parseInt(i[1]??"0",10);switch(r=e.slice(i[0].length),a){case 4326:n="EPSG:4326";break;case 3857:n="EPSG:3857";break;case 27700:n="EPSG:27700";break}}return{...Rh(r),detectedFormat:"ewkt",detectedProjection:n}}function Lh(t){return t.map(e=>kh.stringify(e.geometry)).filter(Boolean).join(`

`)}function S3(t,e=4326){const n=Lh(t);return n?n.split(`

`).map(r=>`SRID=${String(e)};${r}`).join(`

`):""}function w3(t){const e=t.trim().toUpperCase();return["POINT","LINESTRING","POLYGON","MULTIPOINT","MULTILINESTRING","MULTIPOLYGON","GEOMETRYCOLLECTION"].some(r=>e.startsWith(r))}function x3(t){return/^SRID=\d+;/i.test(t.trim())}const Gh={name:"wkt",parse:Rh,format:Lh,detect:w3},Oh={name:"ewkt",parse:b3,format:(t,e)=>{const n={"EPSG:4326":4326,"EPSG:3857":3857,"EPSG:27700":27700},r=e!=null&&e.projection?n[e.projection]??4326:4326;return S3(t,r)},detect:x3};function M3(t){return t.trim().replace(/(?:\r\n|\r|\n)/g," ").replace(/\s+/g," ")}function A3(t){const e=M3(t);if(!e)return[];const n=e.split(/[#&\\:/|;,\s]/),r=[];for(const i of n){if(!i)continue;const s=Number(i);if(Number.isNaN(s))throw new Error(`Invalid number: ${i}`);r.push(s)}return r}function P3(t){const e=t.trim();if(!e)return[];const n=e.split(/[#&\\:/|;,\t ]+/),r=[];for(const i of n){if(!i)continue;const s=Number(i);if(Number.isNaN(s))throw new Error(`Invalid number: ${i}`);r.push(s)}return r}function T3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"csv"};try{const n=e.split(/\r?\n/).filter(i=>i.trim()),r=[];for(let i=0;i<n.length;i++){const s=n[i];if(!s)continue;const a=P3(s);if(a.length===0)continue;if(a.length%2!==0)return{features:[],errors:[{message:`Line ${String(i+1)}: Odd number of coordinates - expected pairs of x,y (lon,lat)`}]};const o=[];for(let c=0;c<a.length;c+=2){const l=a[c]??0,h=a[c+1]??0;o.push([l,h])}const u=C3(o,i);r.push(u)}return r.length===0?{features:[],errors:[{message:"No coordinates found in input"}]}:{features:r,errors:[],detectedFormat:"csv"}}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Failed to parse CSV"}]}}}function C3(t,e){const n=`feature-${String(e)}`;if(t.length===1){const o=t[0];if(!o)throw new Error("Expected coordinate at index 0");return{type:"Feature",id:n,geometry:{type:"Point",coordinates:o},properties:{index:e}}}const r=t[0],i=t[t.length-1];return r&&i&&r[0]===i[0]&&r[1]===i[1]&&t.length>3?{type:"Feature",id:n,geometry:{type:"Polygon",coordinates:[t]},properties:{index:e}}:{type:"Feature",id:n,geometry:{type:"LineString",coordinates:t},properties:{index:e}}}function D3(t){const e=[];for(const n of t){const r=Fh(n.geometry);if(r.length>0){const i=r.map(([s,a])=>`${String(s)},${String(a)}`).join(",");e.push(i)}}return e.join(`
`)}function Fh(t){switch(t.type){case"Point":return[[t.coordinates[0]??0,t.coordinates[1]??0]];case"MultiPoint":case"LineString":return t.coordinates.map(e=>[e[0]??0,e[1]??0]);case"MultiLineString":case"Polygon":return t.coordinates.flat().map(e=>[e[0]??0,e[1]??0]);case"MultiPolygon":return t.coordinates.flat(2).map(e=>[e[0]??0,e[1]??0]);case"GeometryCollection":return t.geometries.flatMap(e=>Fh(e));default:return[]}}function N3(t){const e=t.trim();if(e.startsWith("{")||e.startsWith("[")||e.toUpperCase().startsWith("POINT")||e.toUpperCase().startsWith("LINESTRING")||e.toUpperCase().startsWith("POLYGON")||e.toUpperCase().startsWith("SRID=")||e.startsWith("<"))return!1;try{const n=A3(e);return n.length>=2&&n.length%2===0}catch{return!1}}const jh={name:"csv",parse:T3,format:D3,detect:N3};function Zu(t,e=5){const n=Math.pow(10,e),r=[];let i=0,s=0,a=0;for(;i<t.length;){let o=0,u=0,c;do c=t.charCodeAt(i++)-63,u|=(c&31)<<o,o+=5;while(c>=32);s+=(u&1)!==0?~(u>>1):u>>1,o=0,u=0;do c=t.charCodeAt(i++)-63,u|=(c&31)<<o,o+=5;while(c>=32);a+=(u&1)!==0?~(u>>1):u>>1,r.push([a/n,s/n])}return r}function I3(t,e=5){const n=Math.pow(10,e);let r="",i=0,s=0;for(const a of t){const o=a[0]??0,u=a[1]??0,c=Math.round(u*n),l=Math.round(o*n);r+=tc(c-i),r+=tc(l-s),i=c,s=l}return r}function tc(t){let e="",n=t<0?~(t<<1):t<<1;for(;n>=32;)e+=String.fromCharCode((32|n&31)+63),n>>=5;return e+=String.fromCharCode(n+63),e}function Bh(t){const e=`polyline${String(t)}`;function n(s){const a=s.trim();if(!a)return{features:[],errors:[],detectedFormat:e};try{const o=Zu(a,t);return o.length===0?{features:[],errors:[{message:"No coordinates decoded from polyline"}]}:{features:[{type:"Feature",id:"feature-0",geometry:{type:"LineString",coordinates:o},properties:{pointCount:o.length}}],errors:[],detectedFormat:e,detectedProjection:"EPSG:4326"}}catch(o){return{features:[],errors:[{message:o instanceof Error?o.message:"Failed to decode polyline"}]}}}function r(s){const a=[];for(const o of s){const u=$h(o.geometry);a.push(...u)}return a.length===0?"":I3(a,t)}function i(s){const a=s.trim();if(a.startsWith("{")||a.startsWith("[")||a.startsWith("<")||/[\s,;:]/.test(a)||!/^[?-~]+$/.test(a))return!1;try{const o=Zu(a,t);if(o.length<2)return!1;for(const[u,c]of o)if(c===void 0||u===void 0||c<-90||c>90||u<-180||u>180)return!1;return!0}catch{return!1}}return{name:e,parse:n,format:r,detect:i}}function $h(t){switch(t.type){case"Point":return[t.coordinates];case"MultiPoint":case"LineString":return t.coordinates;case"MultiLineString":case"Polygon":return t.coordinates.flat();case"MultiPolygon":return t.coordinates.flat(2);case"GeometryCollection":return t.geometries.flatMap(e=>$h(e));default:return[]}}const qh=Bh(5),Uh=Bh(6);var Ls={exports:{}},_r={},Ee={},rn={},ec;function hs(){if(ec)return rn;ec=1;function t(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var u=0;u<s.length;u++)if(Object.prototype.hasOwnProperty.call(s,u)){var c=s[u];if(a.call(void 0,c,u,s))return c}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function n(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var r=e({HTML:"text/html",isHTML:function(s){return s===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return rn.assign=n,rn.find=t,rn.freeze=e,rn.MIME_TYPE=r,rn.NAMESPACE=i,rn}var nc;function Hh(){if(nc)return Ee;nc=1;var t=hs(),e=t.find,n=t.NAMESPACE;function r(p){return p!==""}function i(p){return p?p.split(/[\t\n\f\r ]+/).filter(r):[]}function s(p,m){return p.hasOwnProperty(m)||(p[m]=!0),p}function a(p){if(!p)return[];var m=i(p);return Object.keys(m.reduce(s,{}))}function o(p){return function(m){return p&&p.indexOf(m)!==-1}}function u(p,m){for(var E in p)Object.prototype.hasOwnProperty.call(p,E)&&(m[E]=p[E])}function c(p,m){var E=p.prototype;if(!(E instanceof m)){let C=function(){};C.prototype=m.prototype,C=new C,u(E,C),p.prototype=E=C}E.constructor!=p&&(typeof p!="function"&&console.error("unknown Class:"+p),E.constructor=p)}var l={},h=l.ELEMENT_NODE=1,f=l.ATTRIBUTE_NODE=2,d=l.TEXT_NODE=3,g=l.CDATA_SECTION_NODE=4,b=l.ENTITY_REFERENCE_NODE=5,y=l.ENTITY_NODE=6,A=l.PROCESSING_INSTRUCTION_NODE=7,w=l.COMMENT_NODE=8,M=l.DOCUMENT_NODE=9,D=l.DOCUMENT_TYPE_NODE=10,N=l.DOCUMENT_FRAGMENT_NODE=11,P=l.NOTATION_NODE=12,x={},F={};x.INDEX_SIZE_ERR=(F[1]="Index size error",1),x.DOMSTRING_SIZE_ERR=(F[2]="DOMString size error",2);var v=x.HIERARCHY_REQUEST_ERR=(F[3]="Hierarchy request error",3);x.WRONG_DOCUMENT_ERR=(F[4]="Wrong document",4),x.INVALID_CHARACTER_ERR=(F[5]="Invalid character",5),x.NO_DATA_ALLOWED_ERR=(F[6]="No data allowed",6),x.NO_MODIFICATION_ALLOWED_ERR=(F[7]="No modification allowed",7);var _=x.NOT_FOUND_ERR=(F[8]="Not found",8);x.NOT_SUPPORTED_ERR=(F[9]="Not supported",9);var T=x.INUSE_ATTRIBUTE_ERR=(F[10]="Attribute in use",10);x.INVALID_STATE_ERR=(F[11]="Invalid state",11),x.SYNTAX_ERR=(F[12]="Syntax error",12),x.INVALID_MODIFICATION_ERR=(F[13]="Invalid modification",13),x.NAMESPACE_ERR=(F[14]="Invalid namespace",14),x.INVALID_ACCESS_ERR=(F[15]="Invalid access",15);function I(p,m){if(m instanceof Error)var E=m;else E=this,Error.call(this,F[p]),this.message=F[p],Error.captureStackTrace&&Error.captureStackTrace(this,I);return E.code=p,m&&(this.message=this.message+": "+m),E}I.prototype=Error.prototype,u(x,I);function k(){}k.prototype={length:0,item:function(p){return p>=0&&p<this.length?this[p]:null},toString:function(p,m){for(var E=[],C=0;C<this.length;C++)ye(this[C],E,p,m);return E.join("")},filter:function(p){return Array.prototype.filter.call(this,p)},indexOf:function(p){return Array.prototype.indexOf.call(this,p)}};function R(p,m){this._node=p,this._refresh=m,W(this)}function W(p){var m=p._node._inc||p._node.ownerDocument._inc;if(p._inc!==m){var E=p._refresh(p._node);if(fr(p,"length",E.length),!p.$$length||E.length<p.$$length)for(var C=E.length;C in p;C++)Object.prototype.hasOwnProperty.call(p,C)&&delete p[C];u(E,p),p._inc=m}}R.prototype.item=function(p){return W(this),this[p]||null},c(R,k);function Y(){}function V(p,m){for(var E=p.length;E--;)if(p[E]===m)return E}function G(p,m,E,C){if(C?m[V(m,C)]=E:m[m.length++]=E,p){E.ownerElement=p;var q=p.ownerDocument;q&&(C&&at(q,p,C),X(q,p,E))}}function $(p,m,E){var C=V(m,E);if(C>=0){for(var q=m.length-1;C<q;)m[C]=m[++C];if(m.length=q,p){var rt=p.ownerDocument;rt&&(at(rt,p,E),E.ownerElement=null)}}else throw new I(_,new Error(p.tagName+"@"+E))}Y.prototype={length:0,item:k.prototype.item,getNamedItem:function(p){for(var m=this.length;m--;){var E=this[m];if(E.nodeName==p)return E}},setNamedItem:function(p){var m=p.ownerElement;if(m&&m!=this._ownerElement)throw new I(T);var E=this.getNamedItem(p.nodeName);return G(this._ownerElement,this,p,E),E},setNamedItemNS:function(p){var m=p.ownerElement,E;if(m&&m!=this._ownerElement)throw new I(T);return E=this.getNamedItemNS(p.namespaceURI,p.localName),G(this._ownerElement,this,p,E),E},removeNamedItem:function(p){var m=this.getNamedItem(p);return $(this._ownerElement,this,m),m},removeNamedItemNS:function(p,m){var E=this.getNamedItemNS(p,m);return $(this._ownerElement,this,E),E},getNamedItemNS:function(p,m){for(var E=this.length;E--;){var C=this[E];if(C.localName==m&&C.namespaceURI==p)return C}return null}};function j(){}j.prototype={hasFeature:function(p,m){return!0},createDocument:function(p,m,E){var C=new K;if(C.implementation=this,C.childNodes=new k,C.doctype=E||null,E&&C.appendChild(E),m){var q=C.createElementNS(p,m);C.appendChild(q)}return C},createDocumentType:function(p,m,E){var C=new wn;return C.name=p,C.nodeName=p,C.publicId=m||"",C.systemId=E||"",C}};function O(){}O.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(p,m){return jt(this,p,m)},replaceChild:function(p,m){jt(this,p,m,ie),m&&this.removeChild(m)},removeChild:function(p){return et(this,p)},appendChild:function(p){return this.insertBefore(p,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(p){return Qe(this.ownerDocument||this,this,p)},normalize:function(){for(var p=this.firstChild;p;){var m=p.nextSibling;m&&m.nodeType==d&&p.nodeType==d?(this.removeChild(m),p.appendData(m.data)):(p.normalize(),p=m)}},isSupported:function(p,m){return this.ownerDocument.implementation.hasFeature(p,m)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(p){for(var m=this;m;){var E=m._nsMap;if(E){for(var C in E)if(Object.prototype.hasOwnProperty.call(E,C)&&E[C]===p)return C}m=m.nodeType==f?m.ownerDocument:m.parentNode}return null},lookupNamespaceURI:function(p){for(var m=this;m;){var E=m._nsMap;if(E&&Object.prototype.hasOwnProperty.call(E,p))return E[p];m=m.nodeType==f?m.ownerDocument:m.parentNode}return null},isDefaultNamespace:function(p){var m=this.lookupPrefix(p);return m==null}};function Q(p){return p=="<"&&"&lt;"||p==">"&&"&gt;"||p=="&"&&"&amp;"||p=='"'&&"&quot;"||"&#"+p.charCodeAt()+";"}u(l,O),u(l,O.prototype);function Z(p,m){if(m(p))return!0;if(p=p.firstChild)do if(Z(p,m))return!0;while(p=p.nextSibling)}function K(){this.ownerDocument=this}function X(p,m,E){p&&p._inc++;var C=E.namespaceURI;C===n.XMLNS&&(m._nsMap[E.prefix?E.localName:""]=E.value)}function at(p,m,E,C){p&&p._inc++;var q=E.namespaceURI;q===n.XMLNS&&delete m._nsMap[E.prefix?E.localName:""]}function ot(p,m,E){if(p&&p._inc){p._inc++;var C=m.childNodes;if(E)C[C.length++]=E;else{for(var q=m.firstChild,rt=0;q;)C[rt++]=q,q=q.nextSibling;C.length=rt,delete C[C.length]}}}function et(p,m){var E=m.previousSibling,C=m.nextSibling;return E?E.nextSibling=C:p.firstChild=C,C?C.previousSibling=E:p.lastChild=E,m.parentNode=null,m.previousSibling=null,m.nextSibling=null,ot(p.ownerDocument,p),m}function ct(p){return p&&(p.nodeType===O.DOCUMENT_NODE||p.nodeType===O.DOCUMENT_FRAGMENT_NODE||p.nodeType===O.ELEMENT_NODE)}function J(p){return p&&(lt(p)||st(p)||nt(p)||p.nodeType===O.DOCUMENT_FRAGMENT_NODE||p.nodeType===O.COMMENT_NODE||p.nodeType===O.PROCESSING_INSTRUCTION_NODE)}function nt(p){return p&&p.nodeType===O.DOCUMENT_TYPE_NODE}function lt(p){return p&&p.nodeType===O.ELEMENT_NODE}function st(p){return p&&p.nodeType===O.TEXT_NODE}function vt(p,m){var E=p.childNodes||[];if(e(E,lt)||nt(m))return!1;var C=e(E,nt);return!(m&&C&&E.indexOf(C)>E.indexOf(m))}function Nt(p,m){var E=p.childNodes||[];function C(rt){return lt(rt)&&rt!==m}if(e(E,C))return!1;var q=e(E,nt);return!(m&&q&&E.indexOf(q)>E.indexOf(m))}function ut(p,m,E){if(!ct(p))throw new I(v,"Unexpected parent node type "+p.nodeType);if(E&&E.parentNode!==p)throw new I(_,"child not in parent");if(!J(m)||nt(m)&&p.nodeType!==O.DOCUMENT_NODE)throw new I(v,"Unexpected node type "+m.nodeType+" for parent node type "+p.nodeType)}function he(p,m,E){var C=p.childNodes||[],q=m.childNodes||[];if(m.nodeType===O.DOCUMENT_FRAGMENT_NODE){var rt=q.filter(lt);if(rt.length>1||e(q,st))throw new I(v,"More than one element or text in fragment");if(rt.length===1&&!vt(p,E))throw new I(v,"Element in fragment can not be inserted before doctype")}if(lt(m)&&!vt(p,E))throw new I(v,"Only one element can be added and only after doctype");if(nt(m)){if(e(C,nt))throw new I(v,"Only one doctype is allowed");var St=e(C,lt);if(E&&C.indexOf(St)<C.indexOf(E))throw new I(v,"Doctype can only be inserted before an element");if(!E&&St)throw new I(v,"Doctype can not be appended since element is present")}}function ie(p,m,E){var C=p.childNodes||[],q=m.childNodes||[];if(m.nodeType===O.DOCUMENT_FRAGMENT_NODE){var rt=q.filter(lt);if(rt.length>1||e(q,st))throw new I(v,"More than one element or text in fragment");if(rt.length===1&&!Nt(p,E))throw new I(v,"Element in fragment can not be inserted before doctype")}if(lt(m)&&!Nt(p,E))throw new I(v,"Only one element can be added and only after doctype");if(nt(m)){if(e(C,function(se){return nt(se)&&se!==E}))throw new I(v,"Only one doctype is allowed");var St=e(C,lt);if(E&&C.indexOf(St)<C.indexOf(E))throw new I(v,"Doctype can only be inserted before an element")}}function jt(p,m,E,C){ut(p,m,E),p.nodeType===O.DOCUMENT_NODE&&(C||he)(p,m,E);var q=m.parentNode;if(q&&q.removeChild(m),m.nodeType===N){var rt=m.firstChild;if(rt==null)return m;var St=m.lastChild}else rt=St=m;var Bt=E?E.previousSibling:p.lastChild;rt.previousSibling=Bt,St.nextSibling=E,Bt?Bt.nextSibling=rt:p.firstChild=rt,E==null?p.lastChild=St:E.previousSibling=St;do{rt.parentNode=p;var se=p.ownerDocument||p;kt(rt,se)}while(rt!==St&&(rt=rt.nextSibling));return ot(p.ownerDocument||p,p),m.nodeType==N&&(m.firstChild=m.lastChild=null),m}function kt(p,m){if(p.ownerDocument!==m){if(p.ownerDocument=m,p.nodeType===h&&p.attributes)for(var E=0;E<p.attributes.length;E++){var C=p.attributes.item(E);C&&(C.ownerDocument=m)}for(var q=p.firstChild;q;)kt(q,m),q=q.nextSibling}}function yt(p,m){m.parentNode&&m.parentNode.removeChild(m),m.parentNode=p,m.previousSibling=p.lastChild,m.nextSibling=null,m.previousSibling?m.previousSibling.nextSibling=m:p.firstChild=m,p.lastChild=m,ot(p.ownerDocument,p,m);var E=p.ownerDocument||p;return kt(m,E),m}K.prototype={nodeName:"#document",nodeType:M,doctype:null,documentElement:null,_inc:1,insertBefore:function(p,m){if(p.nodeType==N){for(var E=p.firstChild;E;){var C=E.nextSibling;this.insertBefore(E,m),E=C}return p}return jt(this,p,m),kt(p,this),this.documentElement===null&&p.nodeType===h&&(this.documentElement=p),p},removeChild:function(p){return this.documentElement==p&&(this.documentElement=null),et(this,p)},replaceChild:function(p,m){jt(this,p,m,ie),kt(p,this),m&&this.removeChild(m),lt(p)&&(this.documentElement=p)},importNode:function(p,m){return Pn(this,p,m)},getElementById:function(p){var m=null;return Z(this.documentElement,function(E){if(E.nodeType==h&&E.getAttribute("id")==p)return m=E,!0}),m},getElementsByClassName:function(p){var m=a(p);return new R(this,function(E){var C=[];return m.length>0&&Z(E.documentElement,function(q){if(q!==E&&q.nodeType===h){var rt=q.getAttribute("class");if(rt){var St=p===rt;if(!St){var Bt=a(rt);St=m.every(o(Bt))}St&&C.push(q)}}}),C})},createElement:function(p){var m=new bt;m.ownerDocument=this,m.nodeName=p,m.tagName=p,m.localName=p,m.childNodes=new k;var E=m.attributes=new Y;return E._ownerElement=m,m},createDocumentFragment:function(){var p=new Ye;return p.ownerDocument=this,p.childNodes=new k,p},createTextNode:function(p){var m=new En;return m.ownerDocument=this,m.appendData(p),m},createComment:function(p){var m=new bn;return m.ownerDocument=this,m.appendData(p),m},createCDATASection:function(p){var m=new Sn;return m.ownerDocument=this,m.appendData(p),m},createProcessingInstruction:function(p,m){var E=new Mn;return E.ownerDocument=this,E.tagName=E.nodeName=E.target=p,E.nodeValue=E.data=m,E},createAttribute:function(p){var m=new ge;return m.ownerDocument=this,m.name=p,m.nodeName=p,m.localName=p,m.specified=!0,m},createEntityReference:function(p){var m=new xn;return m.ownerDocument=this,m.nodeName=p,m},createElementNS:function(p,m){var E=new bt,C=m.split(":"),q=E.attributes=new Y;return E.childNodes=new k,E.ownerDocument=this,E.nodeName=m,E.tagName=m,E.namespaceURI=p,C.length==2?(E.prefix=C[0],E.localName=C[1]):E.localName=m,q._ownerElement=E,E},createAttributeNS:function(p,m){var E=new ge,C=m.split(":");return E.ownerDocument=this,E.nodeName=m,E.name=m,E.namespaceURI=p,E.specified=!0,C.length==2?(E.prefix=C[0],E.localName=C[1]):E.localName=m,E}},c(K,O);function bt(){this._nsMap={}}bt.prototype={nodeType:h,hasAttribute:function(p){return this.getAttributeNode(p)!=null},getAttribute:function(p){var m=this.getAttributeNode(p);return m&&m.value||""},getAttributeNode:function(p){return this.attributes.getNamedItem(p)},setAttribute:function(p,m){var E=this.ownerDocument.createAttribute(p);E.value=E.nodeValue=""+m,this.setAttributeNode(E)},removeAttribute:function(p){var m=this.getAttributeNode(p);m&&this.removeAttributeNode(m)},appendChild:function(p){return p.nodeType===N?this.insertBefore(p,null):yt(this,p)},setAttributeNode:function(p){return this.attributes.setNamedItem(p)},setAttributeNodeNS:function(p){return this.attributes.setNamedItemNS(p)},removeAttributeNode:function(p){return this.attributes.removeNamedItem(p.nodeName)},removeAttributeNS:function(p,m){var E=this.getAttributeNodeNS(p,m);E&&this.removeAttributeNode(E)},hasAttributeNS:function(p,m){return this.getAttributeNodeNS(p,m)!=null},getAttributeNS:function(p,m){var E=this.getAttributeNodeNS(p,m);return E&&E.value||""},setAttributeNS:function(p,m,E){var C=this.ownerDocument.createAttributeNS(p,m);C.value=C.nodeValue=""+E,this.setAttributeNode(C)},getAttributeNodeNS:function(p,m){return this.attributes.getNamedItemNS(p,m)},getElementsByTagName:function(p){return new R(this,function(m){var E=[];return Z(m,function(C){C!==m&&C.nodeType==h&&(p==="*"||C.tagName==p)&&E.push(C)}),E})},getElementsByTagNameNS:function(p,m){return new R(this,function(E){var C=[];return Z(E,function(q){q!==E&&q.nodeType===h&&(p==="*"||q.namespaceURI===p)&&(m==="*"||q.localName==m)&&C.push(q)}),C})}},K.prototype.getElementsByTagName=bt.prototype.getElementsByTagName,K.prototype.getElementsByTagNameNS=bt.prototype.getElementsByTagNameNS,c(bt,O);function ge(){}ge.prototype.nodeType=f,c(ge,O);function fe(){}fe.prototype={data:"",substringData:function(p,m){return this.data.substring(p,p+m)},appendData:function(p){p=this.data+p,this.nodeValue=this.data=p,this.length=p.length},insertData:function(p,m){this.replaceData(p,0,m)},appendChild:function(p){throw new Error(F[v])},deleteData:function(p,m){this.replaceData(p,m,"")},replaceData:function(p,m,E){var C=this.data.substring(0,p),q=this.data.substring(p+m);E=C+E+q,this.nodeValue=this.data=E,this.length=E.length}},c(fe,O);function En(){}En.prototype={nodeName:"#text",nodeType:d,splitText:function(p){var m=this.data,E=m.substring(p);m=m.substring(0,p),this.data=this.nodeValue=m,this.length=m.length;var C=this.ownerDocument.createTextNode(E);return this.parentNode&&this.parentNode.insertBefore(C,this.nextSibling),C}},c(En,fe);function bn(){}bn.prototype={nodeName:"#comment",nodeType:w},c(bn,fe);function Sn(){}Sn.prototype={nodeName:"#cdata-section",nodeType:g},c(Sn,fe);function wn(){}wn.prototype.nodeType=D,c(wn,O);function ui(){}ui.prototype.nodeType=P,c(ui,O);function ur(){}ur.prototype.nodeType=y,c(ur,O);function xn(){}xn.prototype.nodeType=b,c(xn,O);function Ye(){}Ye.prototype.nodeName="#document-fragment",Ye.prototype.nodeType=N,c(Ye,O);function Mn(){}Mn.prototype.nodeType=A,c(Mn,O);function cr(){}cr.prototype.serializeToString=function(p,m,E){return lr.call(p,m,E)},O.prototype.toString=lr;function lr(p,m){var E=[],C=this.nodeType==9&&this.documentElement||this,q=C.prefix,rt=C.namespaceURI;if(rt&&q==null){var q=C.lookupPrefix(rt);if(q==null)var St=[{namespace:rt,prefix:null}]}return ye(this,E,p,m,St),E.join("")}function hr(p,m,E){var C=p.prefix||"",q=p.namespaceURI;if(!q||C==="xml"&&q===n.XML||q===n.XMLNS)return!1;for(var rt=E.length;rt--;){var St=E[rt];if(St.prefix===C)return St.namespace!==q}return!0}function An(p,m,E){p.push(" ",m,'="',E.replace(/[<>&"\t\n\r]/g,Q),'"')}function ye(p,m,E,C,q){if(q||(q=[]),C)if(p=C(p),p){if(typeof p=="string"){m.push(p);return}}else return;switch(p.nodeType){case h:var rt=p.attributes,St=rt.length,Rt=p.firstChild,Bt=p.tagName;E=n.isHTML(p.namespaceURI)||E;var se=Bt;if(!E&&!p.prefix&&p.namespaceURI){for(var Ie,_e=0;_e<rt.length;_e++)if(rt.item(_e).name==="xmlns"){Ie=rt.item(_e).value;break}if(!Ie)for(var Ze=q.length-1;Ze>=0;Ze--){var tn=q[Ze];if(tn.prefix===""&&tn.namespace===p.namespaceURI){Ie=tn.namespace;break}}if(Ie!==p.namespaceURI)for(var Ze=q.length-1;Ze>=0;Ze--){var tn=q[Ze];if(tn.namespace===p.namespaceURI){tn.prefix&&(se=tn.prefix+":"+Bt);break}}}m.push("<",se);for(var en=0;en<St;en++){var de=rt.item(en);de.prefix=="xmlns"?q.push({prefix:de.localName,namespace:de.value}):de.nodeName=="xmlns"&&q.push({prefix:"",namespace:de.value})}for(var en=0;en<St;en++){var de=rt.item(en);if(hr(de,E,q)){var nn=de.prefix||"",dr=de.namespaceURI;An(m,nn?"xmlns:"+nn:"xmlns",dr),q.push({prefix:nn,namespace:dr})}ye(de,m,E,C,q)}if(Bt===se&&hr(p,E,q)){var nn=p.prefix||"",dr=p.namespaceURI;An(m,nn?"xmlns:"+nn:"xmlns",dr),q.push({prefix:nn,namespace:dr})}if(Rt||E&&!/^(?:meta|link|img|br|hr|input)$/i.test(Bt)){if(m.push(">"),E&&/^script$/i.test(Bt))for(;Rt;)Rt.data?m.push(Rt.data):ye(Rt,m,E,C,q.slice()),Rt=Rt.nextSibling;else for(;Rt;)ye(Rt,m,E,C,q.slice()),Rt=Rt.nextSibling;m.push("</",se,">")}else m.push("/>");return;case M:case N:for(var Rt=p.firstChild;Rt;)ye(Rt,m,E,C,q.slice()),Rt=Rt.nextSibling;return;case f:return An(m,p.name,p.value);case d:return m.push(p.data.replace(/[<&>]/g,Q));case g:return m.push("<![CDATA[",p.data,"]]>");case w:return m.push("<!--",p.data,"-->");case D:var co=p.publicId,Tn=p.systemId;if(m.push("<!DOCTYPE ",p.name),co)m.push(" PUBLIC ",co),Tn&&Tn!="."&&m.push(" ",Tn),m.push(">");else if(Tn&&Tn!=".")m.push(" SYSTEM ",Tn,">");else{var lo=p.internalSubset;lo&&m.push(" [",lo,"]"),m.push(">")}return;case A:return m.push("<?",p.target," ",p.data,"?>");case b:return m.push("&",p.nodeName,";");default:m.push("??",p.nodeName)}}function Pn(p,m,E){var C;switch(m.nodeType){case h:C=m.cloneNode(!1),C.ownerDocument=p;case N:break;case f:E=!0;break}if(C||(C=m.cloneNode(!1)),C.ownerDocument=p,C.parentNode=null,E)for(var q=m.firstChild;q;)C.appendChild(Pn(p,q,E)),q=q.nextSibling;return C}function Qe(p,m,E){var C=new m.constructor;for(var q in m)if(Object.prototype.hasOwnProperty.call(m,q)){var rt=m[q];typeof rt!="object"&&rt!=C[q]&&(C[q]=rt)}switch(m.childNodes&&(C.childNodes=new k),C.ownerDocument=p,C.nodeType){case h:var St=m.attributes,Bt=C.attributes=new Y,se=St.length;Bt._ownerElement=C;for(var Ie=0;Ie<se;Ie++)C.setAttributeNode(Qe(p,St.item(Ie),!0));break;case f:E=!0}if(E)for(var _e=m.firstChild;_e;)C.appendChild(Qe(p,_e,E)),_e=_e.nextSibling;return C}function fr(p,m,E){p[m]=E}try{if(Object.defineProperty){let p=function(m){switch(m.nodeType){case h:case N:var E=[];for(m=m.firstChild;m;)m.nodeType!==7&&m.nodeType!==8&&E.push(p(m)),m=m.nextSibling;return E.join("");default:return m.nodeValue}};Object.defineProperty(R.prototype,"length",{get:function(){return W(this),this.$$length}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return p(this)},set:function(m){switch(this.nodeType){case h:case N:for(;this.firstChild;)this.removeChild(this.firstChild);(m||String(m))&&this.appendChild(this.ownerDocument.createTextNode(m));break;default:this.data=m,this.value=m,this.nodeValue=m}}}),fr=function(m,E,C){m["$$"+E]=C}}}catch{}return Ee.DocumentType=wn,Ee.DOMException=I,Ee.DOMImplementation=j,Ee.Element=bt,Ee.Node=O,Ee.NodeList=k,Ee.XMLSerializer=cr,Ee}var vr={},Gs={},rc;function k3(){return rc||(rc=1,(function(t){var e=hs().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(Gs)),Gs}var bi={},ic;function R3(){if(ic)return bi;ic=1;var t=hs().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+n.source+"*(?::"+e.source+n.source+"*)?$"),i=0,s=1,a=2,o=3,u=4,c=5,l=6,h=7;function f(v,_){this.message=v,this.locator=_,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function d(){}d.prototype={parse:function(v,_,T){var I=this.domBuilder;I.startDocument(),D(_,_={}),g(v,_,T,I,this.errorHandler),I.endDocument()}};function g(v,_,T,I,k){function R(yt){if(yt>65535){yt-=65536;var bt=55296+(yt>>10),ge=56320+(yt&1023);return String.fromCharCode(bt,ge)}else return String.fromCharCode(yt)}function W(yt){var bt=yt.slice(1,-1);return Object.hasOwnProperty.call(T,bt)?T[bt]:bt.charAt(0)==="#"?R(parseInt(bt.substr(1).replace("x","0x"))):(k.error("entity not found:"+yt),yt)}function Y(yt){if(yt>K){var bt=v.substring(K,yt).replace(/&#?\w+;/g,W);O&&V(K),I.characters(bt,0,yt-K),K=yt}}function V(yt,bt){for(;yt>=$&&(bt=j.exec(v));)G=bt.index,$=G+bt[0].length,O.lineNumber++;O.columnNumber=yt-G+1}for(var G=0,$=0,j=/.*(?:\r\n?|\n)|.*$/g,O=I.locator,Q=[{currentNSMap:_}],Z={},K=0;;){try{var X=v.indexOf("<",K);if(X<0){if(!v.substr(K).match(/^\s*$/)){var at=I.doc,ot=at.createTextNode(v.substr(K));at.appendChild(ot),I.currentElement=ot}return}switch(X>K&&Y(X),v.charAt(X+1)){case"/":var ut=v.indexOf(">",X+3),et=v.substring(X+2,ut).replace(/[ \t\n\r]+$/g,""),ct=Q.pop();ut<0?(et=v.substring(X+2).replace(/[\s<].*/,""),k.error("end tag name: "+et+" is not complete:"+ct.tagName),ut=X+1+et.length):et.match(/\s</)&&(et=et.replace(/[\s<].*/,""),k.error("end tag name: "+et+" maybe not complete"),ut=X+1+et.length);var J=ct.localNSMap,nt=ct.tagName==et,lt=nt||ct.tagName&&ct.tagName.toLowerCase()==et.toLowerCase();if(lt){if(I.endElement(ct.uri,ct.localName,et),J)for(var st in J)Object.prototype.hasOwnProperty.call(J,st)&&I.endPrefixMapping(st);nt||k.fatalError("end tag name: "+et+" is not match the current start tagName:"+ct.tagName)}else Q.push(ct);ut++;break;case"?":O&&V(X),ut=P(v,X,I);break;case"!":O&&V(X),ut=N(v,X,I,k);break;default:O&&V(X);var vt=new x,Nt=Q[Q.length-1].currentNSMap,ut=y(v,X,vt,Nt,W,k),he=vt.length;if(!vt.closed&&M(v,ut,vt.tagName,Z)&&(vt.closed=!0,T.nbsp||k.warning("unclosed xml attribute")),O&&he){for(var ie=b(O,{}),jt=0;jt<he;jt++){var kt=vt[jt];V(kt.offset),kt.locator=b(O,{})}I.locator=ie,A(vt,I,Nt)&&Q.push(vt),I.locator=O}else A(vt,I,Nt)&&Q.push(vt);t.isHTML(vt.uri)&&!vt.closed?ut=w(v,ut,vt.tagName,W,I):ut++}}catch(yt){if(yt instanceof f)throw yt;k.error("element parse error: "+yt),ut=-1}ut>K?K=ut:Y(Math.max(X,K)+1)}}function b(v,_){return _.lineNumber=v.lineNumber,_.columnNumber=v.columnNumber,_}function y(v,_,T,I,k,R){function W(O,Q,Z){T.attributeNames.hasOwnProperty(O)&&R.fatalError("Attribute "+O+" redefined"),T.addValue(O,Q.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,k),Z)}for(var Y,V,G=++_,$=i;;){var j=v.charAt(G);switch(j){case"=":if($===s)Y=v.slice(_,G),$=o;else if($===a)$=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if($===o||$===s)if($===s&&(R.warning('attribute value must after "="'),Y=v.slice(_,G)),_=G+1,G=v.indexOf(j,_),G>0)V=v.slice(_,G),W(Y,V,_-1),$=c;else throw new Error("attribute value no end '"+j+"' match");else if($==u)V=v.slice(_,G),W(Y,V,_),R.warning('attribute "'+Y+'" missed start quot('+j+")!!"),_=G+1,$=c;else throw new Error('attribute value must after "="');break;case"/":switch($){case i:T.setTagName(v.slice(_,G));case c:case l:case h:$=h,T.closed=!0;case u:case s:break;case a:T.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return R.error("unexpected end of input"),$==i&&T.setTagName(v.slice(_,G)),G;case">":switch($){case i:T.setTagName(v.slice(_,G));case c:case l:case h:break;case u:case s:V=v.slice(_,G),V.slice(-1)==="/"&&(T.closed=!0,V=V.slice(0,-1));case a:$===a&&(V=Y),$==u?(R.warning('attribute "'+V+'" missed quot(")!'),W(Y,V,_)):((!t.isHTML(I[""])||!V.match(/^(?:disabled|checked|selected)$/i))&&R.warning('attribute "'+V+'" missed value!! "'+V+'" instead!!'),W(V,V,_));break;case o:throw new Error("attribute value missed!!")}return G;case"":j=" ";default:if(j<=" ")switch($){case i:T.setTagName(v.slice(_,G)),$=l;break;case s:Y=v.slice(_,G),$=a;break;case u:var V=v.slice(_,G);R.warning('attribute "'+V+'" missed quot(")!!'),W(Y,V,_);case c:$=l;break}else switch($){case a:T.tagName,(!t.isHTML(I[""])||!Y.match(/^(?:disabled|checked|selected)$/i))&&R.warning('attribute "'+Y+'" missed value!! "'+Y+'" instead2!!'),W(Y,Y,_),_=G,$=s;break;case c:R.warning('attribute space is required"'+Y+'"!!');case l:$=s,_=G;break;case o:$=u,_=G;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}G++}}function A(v,_,T){for(var I=v.tagName,k=null,j=v.length;j--;){var R=v[j],W=R.qName,Y=R.value,O=W.indexOf(":");if(O>0)var V=R.prefix=W.slice(0,O),G=W.slice(O+1),$=V==="xmlns"&&G;else G=W,V=null,$=W==="xmlns"&&"";R.localName=G,$!==!1&&(k==null&&(k={},D(T,T={})),T[$]=k[$]=Y,R.uri=t.XMLNS,_.startPrefixMapping($,Y))}for(var j=v.length;j--;){R=v[j];var V=R.prefix;V&&(V==="xml"&&(R.uri=t.XML),V!=="xmlns"&&(R.uri=T[V||""]))}var O=I.indexOf(":");O>0?(V=v.prefix=I.slice(0,O),G=v.localName=I.slice(O+1)):(V=null,G=v.localName=I);var Q=v.uri=T[V||""];if(_.startElement(Q,G,I,v),v.closed){if(_.endElement(Q,G,I),k)for(V in k)Object.prototype.hasOwnProperty.call(k,V)&&_.endPrefixMapping(V)}else return v.currentNSMap=T,v.localNSMap=k,!0}function w(v,_,T,I,k){if(/^(?:script|textarea)$/i.test(T)){var R=v.indexOf("</"+T+">",_),W=v.substring(_+1,R);if(/[&<]/.test(W))return/^script$/i.test(T)?(k.characters(W,0,W.length),R):(W=W.replace(/&#?\w+;/g,I),k.characters(W,0,W.length),R)}return _+1}function M(v,_,T,I){var k=I[T];return k==null&&(k=v.lastIndexOf("</"+T+">"),k<_&&(k=v.lastIndexOf("</"+T)),I[T]=k),k<_}function D(v,_){for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(_[T]=v[T])}function N(v,_,T,I){var k=v.charAt(_+2);switch(k){case"-":if(v.charAt(_+3)==="-"){var R=v.indexOf("-->",_+4);return R>_?(T.comment(v,_+4,R-_-4),R+3):(I.error("Unclosed comment"),-1)}else return-1;default:if(v.substr(_+3,6)=="CDATA["){var R=v.indexOf("]]>",_+9);return T.startCDATA(),T.characters(v,_+9,R-_-9),T.endCDATA(),R+3}var W=F(v,_),Y=W.length;if(Y>1&&/!doctype/i.test(W[0][0])){var V=W[1][0],G=!1,$=!1;Y>3&&(/^public$/i.test(W[2][0])?(G=W[3][0],$=Y>4&&W[4][0]):/^system$/i.test(W[2][0])&&($=W[3][0]));var j=W[Y-1];return T.startDTD(V,G,$),T.endDTD(),j.index+j[0].length}}return-1}function P(v,_,T){var I=v.indexOf("?>",_);if(I){var k=v.substring(_,I).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return k?(k[0].length,T.processingInstruction(k[1],k[2]),I+2):-1}return-1}function x(){this.attributeNames={}}x.prototype={setTagName:function(v){if(!r.test(v))throw new Error("invalid tagName:"+v);this.tagName=v},addValue:function(v,_,T){if(!r.test(v))throw new Error("invalid attribute:"+v);this.attributeNames[v]=this.length,this[this.length++]={qName:v,value:_,offset:T}},length:0,getLocalName:function(v){return this[v].localName},getLocator:function(v){return this[v].locator},getQName:function(v){return this[v].qName},getURI:function(v){return this[v].uri},getValue:function(v){return this[v].value}};function F(v,_){var T,I=[],k=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(k.lastIndex=_,k.exec(v);T=k.exec(v);)if(I.push(T),T[1])return I}return bi.XMLReader=d,bi.ParseError=f,bi}var sc;function L3(){if(sc)return vr;sc=1;var t=hs(),e=Hh(),n=k3(),r=R3(),i=e.DOMImplementation,s=t.NAMESPACE,a=r.ParseError,o=r.XMLReader;function u(y){return y.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c(y){this.options=y||{locator:{}}}c.prototype.parseFromString=function(y,A){var w=this.options,M=new o,D=w.domBuilder||new h,N=w.errorHandler,P=w.locator,x=w.xmlns||{},F=/\/x?html?$/.test(A),v=F?n.HTML_ENTITIES:n.XML_ENTITIES;P&&D.setDocumentLocator(P),M.errorHandler=l(N,D,P),M.domBuilder=w.domBuilder||D,F&&(x[""]=s.HTML),x.xml=x.xml||s.XML;var _=w.normalizeLineEndings||u;return y&&typeof y=="string"?M.parse(_(y),x,v):M.errorHandler.error("invalid doc source"),D.doc};function l(y,A,w){if(!y){if(A instanceof h)return A;y=A}var M={},D=y instanceof Function;w=w||{};function N(P){var x=y[P];!x&&D&&(x=y.length==2?function(F){y(P,F)}:y),M[P]=x&&function(F){x("[xmldom "+P+"]	"+F+d(w))}||function(){}}return N("warning"),N("error"),N("fatalError"),M}function h(){this.cdata=!1}function f(y,A){A.lineNumber=y.lineNumber,A.columnNumber=y.columnNumber}h.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(y,A,w,M){var D=this.doc,N=D.createElementNS(y,w||A),P=M.length;b(this,N),this.currentElement=N,this.locator&&f(this.locator,N);for(var x=0;x<P;x++){var y=M.getURI(x),F=M.getValue(x),w=M.getQName(x),v=D.createAttributeNS(y,w);this.locator&&f(M.getLocator(x),v),v.value=v.nodeValue=F,N.setAttributeNode(v)}},endElement:function(y,A,w){var M=this.currentElement;M.tagName,this.currentElement=M.parentNode},startPrefixMapping:function(y,A){},endPrefixMapping:function(y){},processingInstruction:function(y,A){var w=this.doc.createProcessingInstruction(y,A);this.locator&&f(this.locator,w),b(this,w)},ignorableWhitespace:function(y,A,w){},characters:function(y,A,w){if(y=g.apply(this,arguments),y){if(this.cdata)var M=this.doc.createCDATASection(y);else var M=this.doc.createTextNode(y);this.currentElement?this.currentElement.appendChild(M):/^\s*$/.test(y)&&this.doc.appendChild(M),this.locator&&f(this.locator,M)}},skippedEntity:function(y){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(y){(this.locator=y)&&(y.lineNumber=0)},comment:function(y,A,w){y=g.apply(this,arguments);var M=this.doc.createComment(y);this.locator&&f(this.locator,M),b(this,M)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(y,A,w){var M=this.doc.implementation;if(M&&M.createDocumentType){var D=M.createDocumentType(y,A,w);this.locator&&f(this.locator,D),b(this,D),this.doc.doctype=D}},warning:function(y){console.warn("[xmldom warning]	"+y,d(this.locator))},error:function(y){console.error("[xmldom error]	"+y,d(this.locator))},fatalError:function(y){throw new a(y,this.locator)}};function d(y){if(y)return`
@`+(y.systemId||"")+"#[line:"+y.lineNumber+",col:"+y.columnNumber+"]"}function g(y,A,w){return typeof y=="string"?y.substr(A,w):y.length>=A+w||A?new java.lang.String(y,A,w)+"":y}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(y){h.prototype[y]=function(){return null}});function b(y,A){y.currentElement?y.currentElement.appendChild(A):y.doc.appendChild(A)}return vr.__DOMHandler=h,vr.normalizeLineEndings=u,vr.DOMParser=c,vr}var ac;function G3(){if(ac)return _r;ac=1;var t=Hh();return _r.DOMImplementation=t.DOMImplementation,_r.XMLSerializer=t.XMLSerializer,_r.DOMParser=L3().DOMParser,_r}var oc;function O3(){return oc||(oc=1,(function(t,e){var n=(function(){var r=/\s*/g,i=/^\s*|\s*$/g,s=/\s+/;function a(v){if(!v||!v.length)return 0;for(var _=0,T=0;_<v.length;_++)T=(T<<5)-T+v.charCodeAt(_)|0;return T}function o(v,_){return v.getElementsByTagName(_)}function u(v,_){return v.getAttribute(_)}function c(v,_){return parseFloat(u(v,_))}function l(v,_){var T=o(v,_);return T.length?T[0]:null}function h(v){return v.normalize&&v.normalize(),v}function f(v){for(var _=0,T=[];_<v.length;_++)T[_]=parseFloat(v[_]);return T}function d(v){return v&&h(v),v&&v.textContent||""}function g(v,_){var T={},I,k;for(k=0;k<_.length;k++)I=l(v,_[k]),I&&(T[_[k]]=d(I));return T}function b(v,_){for(var T in _)v[T]=_[T]}function y(v){return f(v.replace(r,"").split(","))}function A(v){for(var _=v.replace(i,"").split(s),T=[],I=0;I<_.length;I++)T.push(y(_[I]));return T}function w(v){var _=[c(v,"lon"),c(v,"lat")],T=l(v,"ele"),I=l(v,"gpxtpx:hr")||l(v,"hr"),k=l(v,"time"),R;return T&&(R=parseFloat(d(T)),isNaN(R)||_.push(R)),{coordinates:_,time:k?d(k):null,heartRate:I?parseFloat(d(I)):null}}function M(){return{type:"FeatureCollection",features:[]}}var D;if(typeof XMLSerializer<"u")D=new XMLSerializer;else{var N=typeof process=="object"&&!process.browser,P=typeof Titanium=="object";if(N||P)D=new(G3()).XMLSerializer;else throw new Error("Unable to initialize serializer")}function x(v){return v.xml!==void 0?v.xml:D.serializeToString(v)}var F={kml:function(v){for(var _=M(),T={},I={},k={},R=["Polygon","LineString","Point","Track","gx:Track"],W=o(v,"Placemark"),Y=o(v,"Style"),V=o(v,"StyleMap"),G=0;G<Y.length;G++){var $=a(x(Y[G])).toString(16);T["#"+u(Y[G],"id")]=$,I[$]=Y[G]}for(var j=0;j<V.length;j++){T["#"+u(V[j],"id")]=a(x(V[j])).toString(16);for(var O=o(V[j],"Pair"),Q={},Z=0;Z<O.length;Z++)Q[d(l(O[Z],"key"))]=d(l(O[Z],"styleUrl"));k["#"+u(V[j],"id")]=Q}for(var K=0;K<W.length;K++)_.features=_.features.concat(ct(W[K]));function X(J){var nt,lt;return J=J||"",J.substr(0,1)==="#"&&(J=J.substr(1)),(J.length===6||J.length===3)&&(nt=J),J.length===8&&(lt=parseInt(J.substr(0,2),16)/255,nt="#"+J.substr(6,2)+J.substr(4,2)+J.substr(2,2)),[nt,isNaN(lt)?void 0:lt]}function at(J){return f(J.split(" "))}function ot(J){var nt=o(J,"coord"),lt=[],st=[];nt.length===0&&(nt=o(J,"gx:coord"));for(var vt=0;vt<nt.length;vt++)lt.push(at(d(nt[vt])));for(var Nt=o(J,"when"),ut=0;ut<Nt.length;ut++)st.push(d(Nt[ut]));return{coords:lt,times:st}}function et(J){var nt,lt,st,vt,Nt,ut=[],he=[];if(l(J,"MultiGeometry"))return et(l(J,"MultiGeometry"));if(l(J,"MultiTrack"))return et(l(J,"MultiTrack"));if(l(J,"gx:MultiTrack"))return et(l(J,"gx:MultiTrack"));for(st=0;st<R.length;st++)if(lt=o(J,R[st]),lt){for(vt=0;vt<lt.length;vt++)if(nt=lt[vt],R[st]==="Point")ut.push({type:"Point",coordinates:y(d(l(nt,"coordinates")))});else if(R[st]==="LineString")ut.push({type:"LineString",coordinates:A(d(l(nt,"coordinates")))});else if(R[st]==="Polygon"){var ie=o(nt,"LinearRing"),jt=[];for(Nt=0;Nt<ie.length;Nt++)jt.push(A(d(l(ie[Nt],"coordinates"))));ut.push({type:"Polygon",coordinates:jt})}else if(R[st]==="Track"||R[st]==="gx:Track"){var kt=ot(nt);ut.push({type:"LineString",coordinates:kt.coords}),kt.times.length&&he.push(kt.times)}}return{geoms:ut,coordTimes:he}}function ct(J){var nt=et(J),lt,st={},vt=d(l(J,"name")),Nt=d(l(J,"address")),ut=d(l(J,"styleUrl")),he=d(l(J,"description")),ie=l(J,"TimeSpan"),jt=l(J,"TimeStamp"),kt=l(J,"ExtendedData"),yt=l(J,"LineStyle"),bt=l(J,"PolyStyle"),ge=l(J,"visibility");if(!nt.geoms.length)return[];if(vt&&(st.name=vt),Nt&&(st.address=Nt),ut){ut[0]!=="#"&&(ut="#"+ut),st.styleUrl=ut,T[ut]&&(st.styleHash=T[ut]),k[ut]&&(st.styleMapHash=k[ut],st.styleHash=T[k[ut].normal]);var fe=I[st.styleHash];if(fe){yt||(yt=l(fe,"LineStyle")),bt||(bt=l(fe,"PolyStyle"));var En=l(fe,"IconStyle");if(En){var bn=l(En,"Icon");if(bn){var Sn=d(l(bn,"href"));Sn&&(st.icon=Sn)}}}}if(he&&(st.description=he),ie){var wn=d(l(ie,"begin")),ui=d(l(ie,"end"));st.timespan={begin:wn,end:ui}}if(jt&&(st.timestamp=d(l(jt,"when"))),yt){var ur=X(d(l(yt,"color"))),xn=ur[0],Ye=ur[1],Mn=parseFloat(d(l(yt,"width")));xn&&(st.stroke=xn),isNaN(Ye)||(st["stroke-opacity"]=Ye),isNaN(Mn)||(st["stroke-width"]=Mn)}if(bt){var cr=X(d(l(bt,"color"))),lr=cr[0],hr=cr[1],An=d(l(bt,"fill")),ye=d(l(bt,"outline"));lr&&(st.fill=lr),isNaN(hr)||(st["fill-opacity"]=hr),An&&(st["fill-opacity"]=An==="1"?st["fill-opacity"]||1:0),ye&&(st["stroke-opacity"]=ye==="1"?st["stroke-opacity"]||1:0)}if(kt){var Pn=o(kt,"Data"),Qe=o(kt,"SimpleData");for(lt=0;lt<Pn.length;lt++)st[Pn[lt].getAttribute("name")]=d(l(Pn[lt],"value"));for(lt=0;lt<Qe.length;lt++)st[Qe[lt].getAttribute("name")]=d(Qe[lt])}ge&&(st.visibility=d(ge)),nt.coordTimes.length&&(st.coordTimes=nt.coordTimes.length===1?nt.coordTimes[0]:nt.coordTimes);var fr={type:"Feature",geometry:nt.geoms.length===1?nt.geoms[0]:{type:"GeometryCollection",geometries:nt.geoms},properties:st};return u(J,"id")&&(fr.id=u(J,"id")),[fr]}return _},gpx:function(v){var _,T=o(v,"trk"),I=o(v,"rte"),k=o(v,"wpt"),R=M(),W;for(_=0;_<T.length;_++)W=G(T[_]),W&&R.features.push(W);for(_=0;_<I.length;_++)W=$(I[_]),W&&R.features.push(W);for(_=0;_<k.length;_++)R.features.push(j(k[_]));function Y(Z,K){for(var X=0;X<K;X++)Z.push(null);return Z}function V(Z,K){var X=o(Z,K),at=[],ot=[],et=[],ct=X.length;if(ct<2)return{};for(var J=0;J<ct;J++){var nt=w(X[J]);at.push(nt.coordinates),nt.time&&ot.push(nt.time),(nt.heartRate||et.length)&&(et.length||Y(et,J),et.push(nt.heartRate||null))}return{line:at,times:ot,heartRates:et}}function G(Z){for(var K=o(Z,"trkseg"),X=[],at=[],ot=[],et,ct=0;ct<K.length;ct++)if(et=V(K[ct],"trkpt"),et&&(et.line&&X.push(et.line),et.times&&et.times.length&&at.push(et.times),ot.length||et.heartRates&&et.heartRates.length)){if(!ot.length)for(var J=0;J<ct;J++)ot.push(Y([],X[J].length));et.heartRates&&et.heartRates.length?ot.push(et.heartRates):ot.push(Y([],et.line.length||0))}if(X.length!==0){var nt=Q(Z);return b(nt,O(l(Z,"extensions"))),at.length&&(nt.coordTimes=X.length===1?at[0]:at),ot.length&&(nt.heartRates=X.length===1?ot[0]:ot),{type:"Feature",properties:nt,geometry:{type:X.length===1?"LineString":"MultiLineString",coordinates:X.length===1?X[0]:X}}}}function $(Z){var K=V(Z,"rtept");if(K.line){var X=Q(Z);b(X,O(l(Z,"extensions")));var at={type:"Feature",properties:X,geometry:{type:"LineString",coordinates:K.line}};return at}}function j(Z){var K=Q(Z);return b(K,g(Z,["sym"])),{type:"Feature",properties:K,geometry:{type:"Point",coordinates:w(Z).coordinates}}}function O(Z){var K={};if(Z){var X=l(Z,"line");if(X){var at=d(l(X,"color")),ot=parseFloat(d(l(X,"opacity"))),et=parseFloat(d(l(X,"width")));at&&(K.stroke=at),isNaN(ot)||(K["stroke-opacity"]=ot),isNaN(et)||(K["stroke-width"]=et*96/25.4)}}return K}function Q(Z){var K=g(Z,["name","cmt","desc","type","time","keywords"]),X=o(Z,"link");X.length&&(K.links=[]);for(var at=0,ot;at<X.length;at++)ot={href:u(X[at],"href")},b(ot,g(X[at],["text","type"])),K.links.push(ot);return K}return R}};return F})();t.exports=n})(Ls)),Ls.exports}var zh=O3();function F3(t){const e=[],n=t.split(/<\/kml>/i);for(const r of n){const i=r.trim();if(!i)continue;const s=i.match(/<\?xml[^?]*\?>/i),a=i.match(/<kml[^>]*>/i);if(a){const o=a.index??0;let u=i.slice(o)+"</kml>";s&&(s.index??0)<o&&(u=s[0]+`
`+u),e.push(u)}}return e}function j3(t,e){const r=new DOMParser().parseFromString(t,"text/xml"),i=r.querySelector("parsererror");if(i)return{features:[],errors:[{message:"Invalid XML: "+i.textContent}]};const s=zh.kml(r);return s.features.length===0?{features:[],errors:[]}:{features:s.features.map((o,u)=>{var f;const c=o.properties??{},l=typeof c.name=="string"?c.name:void 0,h=typeof c.description=="string"?c.description:void 0;return{type:"Feature",id:((f=o.id)==null?void 0:f.toString())??`feature-${String(e+u)}`,geometry:o.geometry,properties:{...c,name:l,description:h}}}),errors:[]}}function B3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"kml"};try{const n=F3(e);n.length===0&&n.push(e);const r=[],i=[];for(let s=0;s<n.length;s++){const a=n[s];if(!a)continue;const o=j3(a,r.length);if(o.errors.length>0){const u=n.length>1?`Document ${String(s+1)}: `:"";i.push(...o.errors.map(c=>({message:u+c.message})))}else r.push(...o.features)}return r.length>0?{features:r,errors:i,detectedFormat:"kml",detectedProjection:"EPSG:4326"}:{features:[],errors:i.length>0?i:[{message:"No features found in KML"}]}}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Failed to parse KML"}]}}}function $3(t){return`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
${t.map((n,r)=>{const i=n.properties,s=i?i.name:void 0,a=typeof s=="string"?s:`Feature ${String(r+1)}`,o=n.geometry;let u="";if(o.type==="Point"){const[c,l,h]=o.coordinates;u=`<Point><coordinates>${String(c)},${String(l)}${h!==void 0?","+String(h):""}</coordinates></Point>`}else o.type==="LineString"?u=`<LineString><coordinates>${o.coordinates.map(l=>`${String(l[0])},${String(l[1])}${l[2]!==void 0?","+String(l[2]):""}`).join(" ")}</coordinates></LineString>`:o.type==="Polygon"&&(u=`<Polygon>${o.coordinates.map((l,h)=>{const f=l.map(g=>`${String(g[0])},${String(g[1])}${g[2]!==void 0?","+String(g[2]):""}`).join(" "),d=h===0?"outerBoundaryIs":"innerBoundaryIs";return`<${d}><LinearRing><coordinates>${f}</coordinates></LinearRing></${d}>`}).join("")}</Polygon>`);return`<Placemark><name>${q3(a)}</name>${u}</Placemark>`}).join(`
`)}
</Document>
</kml>`}function q3(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function U3(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<kml")?!1:/<kml/i.test(e)}const Wh={name:"kml",parse:B3,format:$3,detect:U3};function H3(t){const e=[],n=t.split(/<\/gpx>/i);for(const r of n){const i=r.trim();if(!i)continue;const s=i.match(/<\?xml[^?]*\?>/i),a=i.match(/<gpx[^>]*>/i);if(a){const o=a.index??0;let u=i.slice(o)+"</gpx>";s&&(s.index??0)<o&&(u=s[0]+`
`+u),e.push(u)}}return e}function z3(t,e){const r=new DOMParser().parseFromString(t,"text/xml"),i=r.querySelector("parsererror");if(i)return{features:[],errors:[{message:"Invalid XML: "+i.textContent}]};const s=zh.gpx(r);return s.features.length===0?{features:[],errors:[]}:{features:s.features.map((o,u)=>{var f;const c=o.properties??{},l=typeof c.name=="string"?c.name:void 0,h=typeof c.desc=="string"?c.desc:void 0;return{type:"Feature",id:((f=o.id)==null?void 0:f.toString())??`feature-${String(e+u)}`,geometry:o.geometry,properties:{...c,name:l,description:h}}}),errors:[]}}function W3(t){const e=t.trim();if(!e)return{features:[],errors:[],detectedFormat:"gpx"};try{const n=H3(e);n.length===0&&n.push(e);const r=[],i=[];for(let s=0;s<n.length;s++){const a=n[s];if(!a)continue;const o=z3(a,r.length);if(o.errors.length>0){const u=n.length>1?`Document ${String(s+1)}: `:"";i.push(...o.errors.map(c=>({message:u+c.message})))}else r.push(...o.features)}return r.length>0?{features:r,errors:i,detectedFormat:"gpx",detectedProjection:"EPSG:4326"}:{features:[],errors:i.length>0?i:[{message:"No features found in GPX"}]}}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Failed to parse GPX"}]}}}function V3(t){const e=[];for(const n of t){const r=n.properties,i=r?r.name:void 0,s=typeof i=="string"?i:"",a=n.geometry;if(a.type==="Point"){const[o,u,c]=a.coordinates;e.push(`<wpt lat="${String(u)}" lon="${String(o)}">${s?`<name>${Os(s)}</name>`:""}${c!==void 0?`<ele>${String(c)}</ele>`:""}</wpt>`)}else if(a.type==="LineString"){const o=a.coordinates.map(u=>{const[c,l,h]=u;return`<trkpt lat="${String(l)}" lon="${String(c)}">${h!==void 0?`<ele>${String(h)}</ele>`:""}</trkpt>`}).join(`
        `);e.push(`<trk>${s?`<name>${Os(s)}</name>`:""}<trkseg>
        ${o}
      </trkseg></trk>`)}else if(a.type==="MultiLineString"){const o=a.coordinates.map(u=>`<trkseg>
        ${u.map(l=>{const[h,f,d]=l;return`<trkpt lat="${String(f)}" lon="${String(h)}">${d!==void 0?`<ele>${String(d)}</ele>`:""}</trkpt>`}).join(`
        `)}
      </trkseg>`).join(`
      `);e.push(`<trk>${s?`<name>${Os(s)}</name>`:""}${o}</trk>`)}}return`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="GeoFiddle" xmlns="http://www.topografix.com/GPX/1/1">
  ${e.join(`
  `)}
</gpx>`}function Os(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function X3(t){const e=t.trim();return!e.startsWith("<?xml")&&!e.toLowerCase().startsWith("<gpx")?!1:/<gpx/i.test(e)}const Vh={name:"gpx",parse:W3,format:V3,detect:X3};var Xh,uc=()=>new DecompressionStream("deflate-raw");try{uc(),Xh=async t=>{let e=uc(),n=e.writable.getWriter(),r=e.readable.getReader(),i,s=[],a=0,o=0,u;for(n.write(t),n.close();!(u=await r.read()).done;)i=u.value,s.push(i),a+=i.length;return!s[1]&&i||(i=new Uint8Array(a),s.map(c=>(i.set(c,o),o+=c.length))),i}}catch{}var J3=new TextDecoder,Fs=t=>{throw new Error("but-unzip~"+t)},cc=t=>J3.decode(t);function*K3(t,e=Xh){let n=t.length-20,r=Math.max(n-65516,2);for(;(n=t.lastIndexOf(80,n-1))!==-1&&!(t[n+1]===75&&t[n+2]===5&&t[n+3]===6)&&n>r;);n===-1&&Fs(2);let i=(c,l)=>t.subarray(n+=c,n+=l),s=new DataView(t.buffer,t.byteOffset),a=c=>s.getUint16(c+n,!0),o=c=>s.getUint32(c+n,!0),u=a(10);for(u!==a(8)&&Fs(3),n=o(16);u--;){let c=a(10),l=a(30),h=a(32),f=o(20),d=o(42),g=cc(i(46,a(28))),b=cc(i(l,h)),y=n,A;n=d,A=i(30+a(26)+a(28),f),yield{filename:g,comment:b,read:()=>c&8?e(A):c?Fs(1):A},n=y}}const Y3=/.+\.(shp|dbf|json|prj|cpg)$/i,Q3=async t=>{const e={},n=[];for(const s of K3(t))Y3.test(s.filename)&&n.push(Promise.resolve(s.read()).then(a=>e[s.filename]=a));await Promise.all(n);const r={},i=new TextDecoder;for(const[s,a]of Object.entries(e))s.slice(-3).toLowerCase()==="shp"||s.slice(-3).toLowerCase()==="dbf"?r[s]=new DataView(a.buffer,a.byteOffset,a.byteLength):r[s]=i.decode(a);return r},Z3=globalThis.URL,tb=(t,e)=>{if(!e)return t;const n=new Z3(t);return n.pathname=`${n.pathname}.${e}`,n.href};async function Br(t,e){const n=tb(t,e),r=e==="prj"||e==="cpg";try{const i=await fetch(n);if(i.status>399)throw new Error(i.statusText);if(r)return i.text();const s=await i.arrayBuffer();return new DataView(s)}catch(i){if(r||e==="dbf")return!1;throw i}}function eb(t){let e=0,n=1;const r=t.length;let i,s;const a=[t[0][0],t[0][1],t[0][0],t[0][1]];for(;n<r;)i=s||t[0],s=t[n],e+=(s[0]-i[0])*(s[1]+i[1]),n++,s[0]<a[0]&&(a[0]=s[0]),s[1]<a[1]&&(a[1]=s[1]),s[0]>a[2]&&(a[2]=s[0]),s[1]>a[3]&&(a[3]=s[1]);return{ring:t,clockWise:e>0,bbox:a,children:[]}}function lc(t,e){return!(t.bbox[0]>e.bbox[0]||t.bbox[1]>e.bbox[1]||t.bbox[2]<e.bbox[2]||t.bbox[3]<e.bbox[3])}function Jh(t,e=!1){const n=[],r=[];for(const a of t){const o=eb(a);o.clockWise!==e?n.push(o):r.push(o)}const i=[];for(const a of r){let o;for(const u of n)lc(u,a)&&(o?lc(o,u)&&(o=u):o=u);o?o.children.push(a.ring):i.push(a)}if(e)return{outers:n,orphens:i};if(i.length&&!e){const a=Jh(t,!0);if(a.orphens.length===0){const o=[];for(const u of a.outers)o.push([u.ring.toReversed()].concat(u.children.map(c=>c.toReversed())));return o}}const s=[];for(const a of n)s.push([a.ring].concat(a.children));return s}Pt.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}};Pt.prototype.parseZPoint=function(t){const e=this.parsePoint(t);return e.coordinates.push(t.getFloat64(16,!0)),e};Pt.prototype.parsePointArray=function(t,e,n){const r=[];let i=0;for(;i<n;)r.push(this.parseCoord(t,e)),e+=16,i++;return r};Pt.prototype.parseZPointArray=function(t,e,n,r){let i=0;for(;i<n;)r[i].push(t.getFloat64(e,!0)),i++,e+=8;return r};Pt.prototype.parseArrayGroup=function(t,e,n,r,i){const s=[];let a=0,o,u=0,c;for(;a<r;)a++,n+=4,o=u,a===r?u=i:u=t.getInt32(n,!0),c=u-o,c&&(s.push(this.parsePointArray(t,e,c)),e+=c<<4);return s};Pt.prototype.parseZArrayGroup=function(t,e,n,r){let i=0;for(;i<n;)r[i]=this.parseZPointArray(t,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r};Pt.prototype.parseMultiPoint=function(t){const e={},n=t.getInt32(32,!0);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];const s=36;return n===1?(e.type="Point",e.coordinates=this.parseCoord(t,s)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,s,n)),e};Pt.prototype.parseZMultiPoint=function(t){const e=this.parseMultiPoint(t);if(!e)return null;let n;if(e.type==="Point")return e.coordinates.push(t.getFloat64(72,!0)),e;n=e.coordinates.length;const r=52+(n<<4);return e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e};Pt.prototype.parsePolyline=function(t){const e={},n=t.getInt32(32,!0);if(!n)return null;const r=this.parseCoord(t,0),i=this.parseCoord(t,16);e.bbox=[r[0],r[1],i[0],i[1]];const s=t.getInt32(36,!0);let a,o;return n===1?(e.type="LineString",a=44,e.coordinates=this.parsePointArray(t,a,s)):(e.type="MultiLineString",a=40+(n<<2),o=40,e.coordinates=this.parseArrayGroup(t,a,o,n,s)),e};Pt.prototype.parseZPolyline=function(t){const e=this.parsePolyline(t);if(!e)return null;const n=e.coordinates.length;let r;return e.type==="LineString"?(r=60+(n<<4),e.coordinates=this.parseZPointArray(t,r,n,e.coordinates),e):(r=56+(e.coordinates.reduce(function(s,a){return s+a.length},0)<<4)+(n<<2),e.coordinates=this.parseZArrayGroup(t,r,n,e.coordinates),e)};Pt.prototype.polyFuncs=function(t){return t&&(t.type==="LineString"?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=Jh(t.coordinates),t.coordinates.length===1?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t)))};Pt.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))};Pt.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};const hc={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function nb(t){return t?function(e,n){const r=[e.getFloat64(n,!0),e.getFloat64(n+8,!0)];return t.inverse(r)}:function(e,n){return[e.getFloat64(n,!0),e.getFloat64(n+8,!0)]}}function Pt(t,e){if(!(this instanceof Pt))return new Pt(t,e);this.buffer=t,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}Pt.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in hc))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[hc[e]],this.parseCoord=nb(t)};Pt.prototype.getShpCode=function(){return this.parseHeader().shpCode};Pt.prototype.parseHeader=function(){const t=this.buffer;return{length:t.getInt32(24)<<1,version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}};Pt.prototype.getRows=function(){let t=100;const e=this.buffer.byteLength-8,n=[];let r;for(;t<=e&&(r=this.getRow(t),!!r);)t+=8,t+=r.len,r.type?n.push(this.parseFunc(r.data)):n.push(null);return n};Pt.prototype.getRow=function(t){const e=this.buffer.getInt32(t),n=this.buffer.getInt32(t+4)<<1;if(n===0)return{id:e,len:n,type:0};if(!(t+n+8>this.buffer.byteLength))return{id:e,len:n,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+t+12,n-4),type:this.buffer.getInt32(t+8,!0)}};function eo(t,e){return new Pt(t,e).rows}var rb=/^(?:ANSI\s)?(\d+)$/m;function Kh(t,e){if(!t)return r;try{new TextDecoder(t.trim())}catch{var n=rb.exec(t);return n&&!e?Kh("windows-"+n[1],!0):(t=void 0,r)}return r;function r(i){var s=new TextDecoder(t||void 0),a=s.decode(i,{stream:!0})+s.decode();return a.replace(/\0/g,"").trim()}}function ib(t){var e={};return e.lastUpdated=new Date(t.getUint8(1)+1900,t.getUint8(2),t.getUint8(3)),e.records=t.getUint32(4,!0),e.headerLen=t.getUint16(8,!0),e.recLen=t.getUint16(10,!0),e}function sb(t,e,n){for(var r=[],i=32;i<e&&(r.push({name:n(new Uint8Array(t.buffer.slice(t.byteOffset+i,t.byteOffset+i+11))),dataType:String.fromCharCode(t.getUint8(i+11)),len:t.getUint8(i+16),decimal:t.getUint8(i+17)}),t.getUint8(i+32)!==13);)i+=32;return r}function ab(t,e,n,r,i){const s=new Uint8Array(t.buffer.slice(t.byteOffset+e,t.byteOffset+e+n));var a=i(s);switch(r){case"N":case"F":case"O":return parseFloat(a,10);case"D":return new Date(a.slice(0,4),parseInt(a.slice(4,6),10)-1,a.slice(6,8));case"L":return a.toLowerCase()==="y"||a.toLowerCase()==="t";default:return a}}function ob(t,e,n,r){for(var i={},s=0,a=n.length,o,u;s<a;)u=n[s],o=ab(t,e,u.len,u.dataType,r),e+=u.len,typeof o<"u"&&(i[u.name]=o),s++;return i}function no(t,e){for(var n=Kh(e),r=ib(t),i=sb(t,r.headerLen-1,n),s=(i.length+1<<5)+2,a=r.recLen,o=r.records,u=[];o;)u.push(ob(t,s,i,n)),s+=a,o--;return u}const ub=globalThis.URL,cb=t=>{if(!t)throw new Error("forgot to pass buffer");if(Jn(t))return new Uint8Array(t);if(Jn(t.buffer))return t.BYTES_PER_ELEMENT===1?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")},lb=new TextDecoder,Yh=t=>{if(t){if(typeof t=="string")return t;if(Jn(t)||ArrayBuffer.isView(t)||ro(t))return lb.decode(t)}},Qh=t=>{if(!t)throw new Error("forgot to pass buffer");if(ro(t))return t;if(Jn(t))return new DataView(t);if(Jn(t.buffer))return new DataView(t.buffer,t.byteOffset,t.byteLength);throw new Error("invalid buffer like object")};function Jn(t){return t instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]"}function ro(t){return t instanceof globalThis.DataView||Object.prototype.toString.call(t)==="[object DataView]"}const io=function([t,e]){const n={};n.type="FeatureCollection",n.features=[];let r=0;const i=t.length;for(e||(e=[]);r<i;)n.features.push({type:"Feature",geometry:t[r],properties:e[r]||{}}),r++;return n},Zh=async function(t,e){let n;t=cb(t);const r=await Q3(t),i=[];e=e||[];for(n in r)n.indexOf("__MACOSX")===-1&&(n.slice(-4).toLowerCase()===".shp"?(i.push(n.slice(0,-4)),r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]):n.slice(-4).toLowerCase()===".prj"?r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=Ne(r[n]):n.slice(-5).toLowerCase()===".json"||e.indexOf(n.split(".").pop())>-1?i.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):(n.slice(-4).toLowerCase()===".dbf"||n.slice(-4).toLowerCase()===".cpg")&&(r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]));if(!i.length)throw new Error("no layers founds");const s=i.map(function(a){let o,u;const c=a.lastIndexOf(".");return c>-1&&a.slice(c).indexOf("json")>-1?(o=JSON.parse(r[a]),o.fileName=a.slice(0,c)):e.indexOf(a.slice(c+1))>-1?(o=r[a],o.fileName=a):(r[a+".dbf"]&&(u=no(r[a+".dbf"],r[a+".cpg"])),o=io([eo(r[a+".shp"],r[a+".prj"]),u]),o.fileName=a),o});return s.length===1?s[0]:s};async function hb(t,e){const n=await Br(t);return Zh(n,e)}const fb=async t=>{const e=await Promise.all([Br(t,"shp"),Br(t,"prj")]);let n=!1;try{e[1]&&(n=Ne(e[1]))}catch{n=!1}return eo(e[0],n)},db=async t=>{const[e,n]=await Promise.all([Br(t,"dbf"),Br(t,"cpg")]);if(e)return no(e,n)},fc=(t,e)=>{var r;return new ub(t,(r=globalThis==null?void 0:globalThis.document)==null?void 0:r.location).pathname.slice(-4).toLowerCase()===e},pb=({shp:t,dbf:e,cpg:n,prj:r})=>{const i=[gb(t,r)];return e&&i.push(yb(e,n)),io(i)},mb=async function(t,e){if(typeof t!="string"){if(Jn(t)||ArrayBuffer.isView(t)||ro(t))return Zh(t);if(t.shp)return pb(t);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(fc(t,".zip"))return hb(t,e);fc(t,".shp")&&(t=t.slice(0,-4));const n=await Promise.all([fb(t),db(t)]);return io(n)},gb=function(t,e){if(t=Qh(t),e=Yh(e),typeof e=="string")try{e=Ne(e)}catch{e=!1}return eo(t,e)},yb=function(t,e){return t=Qh(t),e=Yh(e),no(t,e)};async function _b(t){var e;try{let n;if(typeof t=="string"){if(t.trim()==="")return{features:[],errors:[],detectedFormat:"shapefile"};const o=t.replace(/^data:.*?;base64,/,""),u=atob(o),c=new Uint8Array(u.length);for(let l=0;l<u.length;l++)c[l]=u.charCodeAt(l);n=c.buffer}else n=t;const r=await mb(n),i=Array.isArray(r)?r:[r],s=[];let a=0;for(const o of i)for(const u of o.features)s.push({type:"Feature",id:((e=u.id)==null?void 0:e.toString())??`feature-${String(a)}`,geometry:u.geometry,properties:u.properties??{}}),a++;return s.length===0?{features:[],errors:[{message:"No features found in shapefile"}]}:{features:s,errors:[],detectedFormat:"shapefile",detectedProjection:"EPSG:4326"}}catch(n){return{features:[],errors:[{message:n instanceof Error?n.message:"Failed to parse shapefile"}]}}}function vb(t){return t.trim()?{features:[],errors:[{message:"Shapefile parsing requires async operation. Use parseShapefile() instead."}]}:{features:[],errors:[],detectedFormat:"shapefile"}}function Eb(t){return JSON.stringify({type:"FeatureCollection",features:t},null,2)}function bb(t){const e=t.trim();return!!(e.startsWith("data:application/zip")||e.startsWith("data:application/octet-stream")||e.startsWith("data:application/x-zip")||e.startsWith("UEs")||e.startsWith("UEsD"))}const tf={name:"shapefile",parse:vb,parseAsync:_b,format:Eb,detect:bb},so={geojson:Ih,ewkt:Oh,wkt:Gh,kml:Wh,gpx:Vh,shapefile:tf,polyline6:Uh,polyline5:qh,csv:jh};function ma(t,e){const n=so[e];return n?n.parse(t):{features:[],errors:[{message:`Unsupported format: ${e}`}]}}function un(t,e,n){const r=so[e];if(!r)throw new Error(`Unsupported format: ${e}`);return r.format(t,n)}function ef(t){const e=t.trim();if(!e)return null;for(const[n,r]of Object.entries(so))if(r.detect(e))return n;return null}const Sb=Object.freeze(Object.defineProperty({__proto__:null,csvParser:jh,detectFormat:ef,ewktParser:Oh,format:un,geojsonParser:Ih,gpxParser:Vh,kmlParser:Wh,parse:ma,polyline5Parser:qh,polyline6Parser:Uh,shapefileParser:tf,wktParser:Gh},Symbol.toStringTag,{value:"Module"}));function wb(t){const e=[],n=r=>{if(!r)return;if(r.type==="GeometryCollection"){for(const s of r.geometries)n(s);return}const i=s=>{if(Array.isArray(s))if(typeof s[0]=="number"&&typeof s[1]=="number")e.push(s);else for(const a of s)i(a)};i(r.coordinates)};for(const r of t)n(r.geometry);return e}function xb(){const{features:t,isParsing:e,inputProjection:n,detectedProjection:r}=le(),{outputFormat:i,outputProjection:s}=oi(),a=B.useMemo(()=>{if(n!=="auto")return n;if(r)return r;if(t.length>0){const c=wb(t);return ai(c)}return"EPSG:4326"},[n,r,t]),o=B.useMemo(()=>{if(t.length===0)return"";try{const c=a===s?t:t.map(l=>({...l,geometry:We(l.geometry,a,s)}));return un(c,i,{projection:s})}catch{return""}},[t,i,a,s]),u=B.useCallback(async()=>{o&&await navigator.clipboard.writeText(o)},[o]);return e?S.jsxs("div",{className:"mb-3 flex items-center gap-2 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:[S.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Parsing..."]}):S.jsxs("div",{className:"relative mb-3",children:[S.jsx("pre",{className:"max-h-48 min-h-[3rem] overflow-auto rounded-md border border-neutral-200 bg-neutral-100 p-3 pr-10 font-mono text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100",children:o||" "}),o&&S.jsx("button",{onClick:u,className:"absolute right-2 top-2 flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Copy to clipboard","aria-label":"Copy converted geometry to clipboard",children:S.jsx(Zl,{className:"h-4 w-4"})})]})}var Gt=63710088e-1,Mb={centimeters:Gt*100,centimetres:Gt*100,degrees:360/(2*Math.PI),feet:Gt*3.28084,inches:Gt*39.37,kilometers:Gt/1e3,kilometres:Gt/1e3,meters:Gt,metres:Gt,miles:Gt/1609.344,millimeters:Gt*1e3,millimetres:Gt*1e3,nauticalmiles:Gt/1852,radians:1,yards:Gt*1.0936};function ga(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Ab(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return ga({type:"LineString",coordinates:t},e,n)}function ya(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Pb(t,e="kilometers"){const n=Mb[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Si(t){return t%360*Math.PI/180}function dc(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Tb(t,e,n={}){var r=dc(t),i=dc(e),s=Si(i[1]-r[1]),a=Si(i[0]-r[0]),o=Si(r[1]),u=Si(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(o)*Math.cos(u);return Pb(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function ao(t,e,n){if(t!==null)for(var r,i,s,a,o,u,c,l=0,h=0,f,d=t.type,g=d==="FeatureCollection",b=d==="Feature",y=g?t.features.length:1,A=0;A<y;A++){c=g?t.features[A].geometry:b?t.geometry:t,f=c?c.type==="GeometryCollection":!1,o=f?c.geometries.length:1;for(var w=0;w<o;w++){var M=0,D=0;if(a=f?c.geometries[w]:c,a!==null){u=a.coordinates;var N=a.type;switch(l=0,N){case null:break;case"Point":if(e(u,h,A,M,D)===!1)return!1;h++,M++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(e(u[r],h,A,M,D)===!1)return!1;h++,N==="MultiPoint"&&M++}N==="LineString"&&M++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-l;i++){if(e(u[r][i],h,A,M,D)===!1)return!1;h++}N==="MultiLineString"&&M++,N==="Polygon"&&D++}N==="Polygon"&&M++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(D=0,i=0;i<u[r].length;i++){for(s=0;s<u[r][i].length-l;s++){if(e(u[r][i][s],h,A,M,D)===!1)return!1;h++}D++}M++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(ao(a.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function nf(t,e){var n,r,i,s,a,o,u,c,l,h,f=0,d=t.type==="FeatureCollection",g=t.type==="Feature",b=d?t.features.length:1;for(n=0;n<b;n++){for(o=d?t.features[n].geometry:g?t.geometry:t,c=d?t.features[n].properties:g?t.properties:{},l=d?t.features[n].bbox:g?t.bbox:void 0,h=d?t.features[n].id:g?t.id:void 0,u=o?o.type==="GeometryCollection":!1,a=u?o.geometries.length:1,i=0;i<a;i++){if(s=u?o.geometries[i]:o,s===null){if(e(null,f,c,l,h)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,f,c,l,h)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],f,c,l,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function Cb(t,e,n){var r=n;return nf(t,function(i,s,a,o,u){r=e(r,i,s,a,o,u)}),r}function Db(t,e){nf(t,function(n,r,i,s,a){var o=n===null?null:n.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(ga(n,i,{bbox:s,id:a}),r,0)===!1?!1:void 0}var u;switch(o){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var l=n.coordinates[c],h={type:u,coordinates:l};if(e(ga(h,i),r,c)===!1)return!1}})}function Nb(t,e){Db(t,function(n,r,i){var s=0;if(n.geometry){var a=n.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var o,u=0,c=0,l=0;if(ao(n,function(h,f,d,g,b){if(o===void 0||r>u||g>c||b>l){o=h,u=r,c=g,l=b,s=0;return}var y=Ab([o,h],n.properties);if(e(y,r,i,b,s)===!1)return!1;s++,o=h})===!1)return!1}}})}function Ib(t,e,n){var r=n,i=!1;return Nb(t,function(s,a,o,u,c){i===!1&&n===void 0?r=s:r=e(r,s,a,o,u,c),i=!0}),r}function kb(t){return Cb(t,(e,n)=>e+Rb(n),0)}function Rb(t){let e=0,n;switch(t.type){case"Polygon":return pc(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=pc(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function pc(t){let e=0;if(t&&t.length>0){e+=Math.abs(mc(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(mc(t[n]))}return e}var Lb=Gt*Gt/2,js=Math.PI/180;function mc(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],a=t[r+2>=e?(r+2)%e:r+2],o=i[0]*js,u=s[1]*js,c=a[0]*js;n+=(c-o)*Math.sin(u),r++}return n*Lb}function Fi(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return ao(t,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function Gb(t,e={}){return Ib(t,(n,r)=>{const i=r.geometry.coordinates;return n+Tb(i[0],i[1],e)},0)}const Ob={longitude:-.1276,latitude:51.5074,zoom:10},oo=ti(t=>({viewState:Ob,basemap:"osm",panToFeatureId:null,isEnvelopeHovered:!1,setViewState:e=>{t({viewState:e})},setBasemap:e=>{t({basemap:e})},panToFeature:e=>{t({panToFeatureId:e})},clearPanToFeature:()=>{t({panToFeatureId:null})},setEnvelopeHovered:e=>{t({isEnvelopeHovered:e})}}));function Fb(t){const e=[],n=r=>{if(!r)return;if(r.type==="GeometryCollection"){for(const s of r.geometries)n(s);return}const i=s=>{if(Array.isArray(s))if(typeof s[0]=="number"&&typeof s[1]=="number")e.push(s);else for(const a of s)i(a)};i(r.coordinates)};for(const r of t)n(r.geometry);return e}function Re(t,e){const n=e==="EPSG:4326"?6:2;return t.toFixed(n)}function jb(){const{features:t,inputProjection:e,detectedProjection:n}=le(),{outputProjection:r}=oi(),{setEnvelopeHovered:i}=oo(),s=B.useMemo(()=>{if(e!=="auto")return e;if(n)return n;if(t.length>0){const d=Fb(t);return ai(d)}return"EPSG:4326"},[e,n,t]),a=B.useMemo(()=>{if(t.length===0)return null;try{const d=s==="EPSG:4326"?t:t.map(k=>({...k,geometry:We(k.geometry,s,"EPSG:4326")})),g=ya(d),b=Fi(g);if(!b.every(k=>isFinite(k)))return null;const[y,A,w,M]=b,D={type:"Polygon",coordinates:[[[y,A],[w,A],[w,M],[y,M],[y,A]]]},P=(r!=="EPSG:4326"?We(D,"EPSG:4326",r):D).coordinates[0];if(!P||P.length<4)return null;const x=P[0],F=P[2];if(!x||!F||x.length<2||F.length<2)return null;const v=x[0],_=x[1],T=F[0],I=F[1];return v===void 0||_===void 0||T===void 0||I===void 0?null:{sw:{x:v,y:_},ne:{x:T,y:I},wgs84Bbox:b}}catch{return null}},[t,s,r]),o=B.useCallback(async()=>{if(!a)return;const d=`SW: ${Re(a.sw.x,r)}, ${Re(a.sw.y,r)}
NE: ${Re(a.ne.x,r)}, ${Re(a.ne.y,r)}`;await navigator.clipboard.writeText(d)},[a,r]),u=B.useCallback(()=>{i(!0)},[i]),c=B.useCallback(()=>{i(!1)},[i]);if(!a)return null;const l=r==="EPSG:4326",h=l?"Lon":"E",f=l?"Lat":"N";return S.jsxs("div",{className:"mb-3 flex items-center justify-between rounded-md border border-neutral-200 bg-neutral-50 px-3 py-2 text-xs dark:border-neutral-700 dark:bg-neutral-800",onMouseEnter:u,onMouseLeave:c,children:[S.jsxs("div",{className:"flex flex-col gap-0.5 font-mono text-neutral-700 dark:text-neutral-300",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"SW: "}),h," ",Re(a.sw.x,r),", ",f," ",Re(a.sw.y,r)]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"NE: "}),h," ",Re(a.ne.x,r),", ",f," ",Re(a.ne.y,r)]})]}),S.jsx("button",{onClick:o,className:"flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Copy to clipboard","aria-label":"Copy envelope coordinates to clipboard",children:S.jsx(Zl,{className:"h-4 w-4"})})]})}function Bb(t){const e=[],n=r=>{if(!r)return;if(r.type==="GeometryCollection"){for(const s of r.geometries)n(s);return}const i=s=>{if(Array.isArray(s))if(typeof s[0]=="number"&&typeof s[1]=="number")e.push(s);else for(const a of s)i(a)};i(r.coordinates)};for(const r of t)n(r.geometry);return e}function $b(t){switch(t){case"geojson":return"application/geo+json";case"wkt":case"ewkt":case"csv":return"text/plain";case"polyline5":case"polyline6":return"text/plain";default:return"text/plain"}}function qb(t){switch(t){case"geojson":return"geojson";case"wkt":return"wkt";case"ewkt":return"ewkt";case"csv":return"csv";case"polyline5":case"polyline6":return"txt";default:return"txt"}}function Ub(){const{features:t,inputProjection:e,detectedProjection:n}=le(),{outputFormat:r,outputProjection:i}=oi(),s=B.useMemo(()=>{if(e!=="auto")return e;if(n)return n;if(t.length>0){const c=Bb(t);return ai(c)}return"EPSG:4326"},[e,n,t]),a=B.useMemo(()=>{if(t.length===0)return"";try{const c=s===i?t:t.map(l=>({...l,geometry:We(l.geometry,s,i)}));return un(c,r,{projection:i})}catch{return""}},[t,r,s,i]),o=B.useCallback(()=>{if(!a)return;const c=$b(r),l=qb(r),h=new Blob([a],{type:c}),f=URL.createObjectURL(h),d=document.createElement("a");d.href=f,d.download=`geometry.${l}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(f)},[a,r]),u=!a;return S.jsx("button",{onClick:o,disabled:u,className:"flex h-7 w-7 items-center justify-center rounded text-neutral-500 transition-colors hover:bg-neutral-200 hover:text-neutral-700 disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:hover:text-neutral-200",title:"Download","aria-label":"Download converted geometry",children:S.jsx(x1,{className:"h-4 w-4"})})}const Hb=[{value:"geojson",label:"GeoJSON"},{value:"wkt",label:"WKT"},{value:"ewkt",label:"EWKT"},{value:"csv",label:"CSV"},{value:"polyline5",label:"Polyline (5)"},{value:"polyline6",label:"Polyline (6)"}],zb=[{value:"EPSG:4326",label:"WGS84 (EPSG:4326)"},{value:"EPSG:3857",label:"Web Mercator (EPSG:3857)"},{value:"EPSG:27700",label:"British National Grid (EPSG:27700)"}];function Wb(){const{outputFormat:t,outputProjection:e,setOutputFormat:n,setOutputProjection:r}=oi(),{features:i}=le(),s=i.length>0;return S.jsxs("div",{className:"flex-1 p-3 md:p-4",children:[S.jsxs("div",{className:"mb-2 flex items-center justify-between md:mb-3",children:[S.jsx("h2",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Conversion"}),s&&S.jsx(Ub,{})]}),S.jsxs("div",{className:"mb-2 flex gap-2 md:mb-3",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"label",children:"Format"}),S.jsx("select",{value:t,onChange:a=>{n(a.target.value)},className:"input",children:Hb.map(a=>S.jsx("option",{value:a.value,children:a.label},a.value))})]}),S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"label",children:"Projection"}),S.jsx("select",{value:e,onChange:a=>{r(a.target.value)},className:"input",children:zb.map(a=>S.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),S.jsx(xb,{}),s&&S.jsx(jb,{})]})}function Vb(t){if(!t||t.type!=="Polygon"&&t.type!=="MultiPolygon")return null;try{return kb({type:"Feature",geometry:t,properties:{}})}catch{return null}}function Xb(t){if(!t||t.type!=="LineString"&&t.type!=="MultiLineString")return null;try{return Gb({type:"Feature",geometry:t,properties:{}},{units:"meters"})}catch{return null}}function rf(t){if(!t)return 0;switch(t.type){case"Point":return 1;case"MultiPoint":case"LineString":return t.coordinates.length;case"MultiLineString":case"Polygon":return t.coordinates.reduce((e,n)=>e+n.length,0);case"MultiPolygon":return t.coordinates.reduce((e,n)=>e+n.reduce((r,i)=>r+i.length,0),0);case"GeometryCollection":return t.geometries.reduce((e,n)=>e+rf(n),0);default:return 0}}function Jb(t){return t?t.replace(/([A-Z])/g," $1").trim():"Unknown"}function Kb(t){return t===null?"-":t>=1e6?`${(t/1e6).toFixed(2)} km`:t>=1e4?`${(t/1e4).toFixed(2)} ha`:`${t.toFixed(2)} m`}function Yb(t){return t===null?"-":t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(2)} m`}const Qb="geofiddle-geocode",Zb=1,Kn="geocode-results",tS=10080*60*1e3;let wi=null;function sf(){return wi||(wi=new Promise((t,e)=>{const n=indexedDB.open(Qb,Zb);n.onerror=()=>{var r;e(new Error(((r=n.error)==null?void 0:r.message)??"Failed to open IndexedDB"))},n.onsuccess=()=>{t(n.result)},n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(Kn)||i.createObjectStore(Kn,{keyPath:"key"})}}),wi)}function eS(t,e){const n=Math.round(t*1e3)/1e3,r=Math.round(e*1e3)/1e3;return`${String(n)},${String(r)}`}async function nS(t){try{const e=await sf();return await new Promise(n=>{const s=e.transaction(Kn,"readonly").objectStore(Kn).get(t);s.onsuccess=()=>{const a=s.result;a&&Date.now()-a.timestamp<tS?n(a.location):n(null)},s.onerror=()=>{n(null)}})}catch{return null}}async function rS(t,e){try{const n=await sf();await new Promise(r=>{const i=n.transaction(Kn,"readwrite"),s=i.objectStore(Kn),a={key:t,location:e,timestamp:Date.now()};s.put(a),i.oncomplete=()=>{r()},i.onerror=()=>{r()}})}catch{}}const iS="https://nominatim.openstreetmap.org/reverse",sS=1e3;let gc=0;const Bs=new Map;function aS(t){if(!t.address)return null;const{city:e,town:n,village:r,municipality:i,county:s,state:a,country:o}=t.address,u=e??n??r??i??s;return u&&o?`${u}, ${o}`:a&&o?`${a}, ${o}`:o||null}async function oS(t,e){const n=eS(t,e),r=Bs.get(n);if(r)return r;const i=await nS(n);if(i)return i;const a=Date.now()-gc,o=Math.max(0,sS-a),u=new Promise(c=>{setTimeout(()=>{gc=Date.now(),(async()=>{try{const h=new URL(iS);h.searchParams.set("lat",String(t)),h.searchParams.set("lon",String(e)),h.searchParams.set("format","json"),h.searchParams.set("zoom","10");const f=await fetch(h.toString(),{headers:{"User-Agent":"GeoFiddle/2.0 (https://geofiddle.com)"}});if(!f.ok)return null;const d=await f.json(),g=aS(d);return g&&await rS(n,g),g}catch{return null}finally{Bs.delete(n)}})().then(c).catch(()=>{c(null)})},o)});return Bs.set(n,u),u}function uS(t,e){const[n,r]=B.useState(null),[i,s]=B.useState(!1),a=B.useRef(!1);return B.useEffect(()=>{if(t===null||e===null){r(null),s(!1);return}if(t<-90||t>90||e<-180||e>180){r(null),s(!1);return}return a.current=!1,s(!0),oS(t,e).then(o=>{a.current||(r(o),s(!1))}).catch(()=>{a.current||(r(null),s(!1))}),()=>{a.current=!0}},[t,e]),{location:n,isLoading:i}}function af(t){if(!t||typeof t!="object")return null;const e=t;if(e.type==="GeometryCollection"&&Array.isArray(e.geometries)){for(const a of e.geometries){const o=af(a);if(o)return o}return null}if(!e.coordinates)return null;const n=[],r=a=>{if(Array.isArray(a))if(typeof a[0]=="number"&&typeof a[1]=="number")n.push([a[0],a[1]]);else for(const o of a)r(o)};if(r(e.coordinates),n.length===0)return null;let i=0,s=0;for(const[a,o]of n)i+=a,s+=o;return{lon:i/n.length,lat:s/n.length}}function cS(t){switch(t){case"Point":return vu;case"MultiPoint":return S1;case"LineString":return Eu;case"MultiLineString":return Eu;case"Polygon":return nh;case"MultiPolygon":return T1;case"GeometryCollection":return y1;default:return vu}}function lS(t){return t==null?"":typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"?String(t):JSON.stringify(t)}function hS({feature:t,calculations:e}){const{geometry:n,properties:r}=t,i=B.useMemo(()=>af(n),[n]),{location:s,isLoading:a}=uS((i==null?void 0:i.lat)??null,(i==null?void 0:i.lon)??null),o=e.area!==null&&e.area>0,u=e.length!==null&&e.length>0,c=B.useMemo(()=>Object.entries(r).filter(([l])=>l!=="name").filter(([,l])=>l!=null),[r]);return S.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 border-t border-neutral-200 pt-2 text-xs dark:border-neutral-700",children:[S.jsxs("div",{className:"col-span-2 flex items-center gap-1.5 text-neutral-600 dark:text-neutral-400",children:[S.jsx(th,{className:"h-3.5 w-3.5 shrink-0"}),a?S.jsx("span",{className:"animate-pulse text-neutral-400",children:"Loading location..."}):s?S.jsx("span",{className:"truncate",title:s,children:s}):S.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Location unavailable"})]}),S.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[S.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Points:"})," ",e.pointCount]}),o&&S.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[S.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Area:"})," ",e.formattedArea]}),u&&S.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[S.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:n.type.includes("Polygon")?"Perimeter:":"Length:"})," ",e.formattedLength]}),i&&S.jsxs("div",{className:"col-span-2 text-neutral-500 dark:text-neutral-400",children:[S.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:"Centroid:"})," ",i.lat.toFixed(6),", ",i.lon.toFixed(6)]}),c.length>0&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"col-span-2 mt-2 border-t border-neutral-200 pt-2 font-medium text-neutral-700 dark:border-neutral-700 dark:text-neutral-300",children:"Properties"}),c.map(([l,h])=>S.jsxs("div",{className:"col-span-2 text-neutral-500 dark:text-neutral-400",children:[S.jsxs("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:[l,":"]})," ",S.jsx("span",{className:"break-all",children:lS(h)})]},l))]})]})}function fS({feature:t,index:e,isSelected:n,onSelect:r,onHover:i}){const[s,a]=B.useState(!1),{geometry:o,properties:u}=t,c=()=>{i(!0)},l=()=>{i(!1)},h=B.useMemo(()=>{const w=Vb(o),M=Xb(o),D=rf(o),N=Jb(o.type);return{area:w,length:M,pointCount:D,typeLabel:N,formattedArea:Kb(w),formattedLength:Yb(M)}},[o]),f=u.name,d=typeof f=="string"&&f.trim()?f:`Feature ${String(e+1)}`,g=cS(o.type),b=w=>{w.stopPropagation(),a(M=>!M)},y=w=>{w.key==="Enter"?(w.preventDefault(),r()):w.key===" "&&(w.preventDefault(),a(M=>!M))},A=B.useMemo(()=>{const w=[h.typeLabel];return h.pointCount>1&&w.push(`${String(h.pointCount)} pts`),h.area!==null&&h.area>0?w.push(h.formattedArea):h.length!==null&&h.length>0&&w.push(h.formattedLength),w.join("  ")},[h]);return S.jsxs("div",{onClick:r,onKeyDown:y,onMouseEnter:c,onMouseLeave:l,tabIndex:0,role:"button","aria-expanded":s,"aria-selected":n,className:`cursor-pointer border-b border-neutral-200 px-3 py-2 transition-colors hover:bg-neutral-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary-500 dark:border-neutral-700 dark:hover:bg-neutral-800 ${n?"bg-blue-50 hover:bg-blue-100 dark:bg-blue-950 dark:hover:bg-blue-900":"bg-white dark:bg-neutral-900"}`,children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("button",{onClick:b,className:"flex h-6 w-6 shrink-0 items-center justify-center rounded text-neutral-400 hover:bg-neutral-200 hover:text-neutral-600 dark:hover:bg-neutral-700 dark:hover:text-neutral-300","aria-label":s?"Collapse details":"Expand details",children:s?S.jsx(v1,{className:"h-4 w-4"}):S.jsx(E1,{className:"h-4 w-4"})}),S.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${n?"bg-primary-100 text-primary-600 dark:bg-primary-900 dark:text-primary-400":"bg-neutral-100 text-neutral-500 dark:bg-neutral-800 dark:text-neutral-400"}`,children:S.jsx(g,{className:"h-4 w-4"})}),S.jsxs("div",{className:"min-w-0 flex-1",children:[S.jsx("div",{className:"truncate text-sm font-medium text-neutral-900 dark:text-neutral-100",children:d}),S.jsx("div",{className:"truncate text-xs text-neutral-500 dark:text-neutral-400",children:A})]}),S.jsxs("div",{className:"shrink-0 text-xs font-medium text-neutral-400 dark:text-neutral-500",children:["#",e+1]})]}),s&&S.jsx(hS,{feature:t,calculations:h})]})}function dS({onPanToFeature:t}){const{features:e,selectedFeatureId:n,setSelectedFeatureId:r,setHoveredFeatureId:i}=le(),s=B.useCallback(o=>{n===o?r(null):(r(o),t==null||t(o))},[n,r,t]),a=B.useCallback(o=>{i(o)},[i]);return e.length===0?S.jsx("div",{className:"rounded-md border border-neutral-200 bg-neutral-50 p-4 text-center text-sm text-neutral-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:"No geometries to display"}):S.jsxs("div",{className:"overflow-hidden rounded-md border border-neutral-200 dark:border-neutral-700",children:[S.jsx("div",{className:"max-h-80 overflow-auto",children:e.map((o,u)=>S.jsx(fS,{feature:o,index:u,isSelected:n===o.id,onSelect:()=>{s(o.id)},onHover:c=>{a(c?o.id:null)}},o.id))}),S.jsxs("div",{className:"border-t border-neutral-200 bg-neutral-50 px-3 py-2 text-xs text-neutral-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-400",children:[e.length," ",e.length===1?"geometry":"geometries"]})]})}function of(){const t=oo(e=>e.panToFeature);return S.jsxs("div",{className:"flex h-full flex-col overflow-y-auto bg-neutral-50 dark:bg-neutral-900",children:[S.jsx(s3,{}),S.jsxs("div",{className:"border-t border-neutral-200 p-3 md:p-4 dark:border-neutral-700",children:[S.jsx("h3",{className:"mb-2 text-sm font-medium text-neutral-700 md:mb-3 dark:text-neutral-300",children:"Geometries"}),S.jsx(dS,{onPanToFeature:t})]}),S.jsx(Wb,{})]})}const pS=wr(()=>import("./maplibre-gl-DEIozrAN.js").then(t=>t.m),__vite__mapDeps([0,1]),import.meta.url),mS=B.forwardRef(function(e,n){return pf(e,n,pS)}),gS=mf,Vt=yf,_a=gf,yS={id:"geometry-fill",type:"fill",source:"geometry-source",paint:{"fill-color":"#3b82f6","fill-opacity":.2},filter:["==","$type","Polygon"]},_S={id:"geometry-line",type:"line",source:"geometry-source",paint:{"line-color":"#2563eb","line-width":2},filter:["in","$type","LineString","Polygon"]},vS={id:"geometry-point",type:"circle",source:"geometry-source",paint:{"circle-radius":6,"circle-color":"#2563eb","circle-stroke-color":"#ffffff","circle-stroke-width":2},filter:["==","$type","Point"]},ES={id:"geometry-fill-hover",type:"fill",source:"geometry-source",paint:{"fill-color":"#8b5cf6","fill-opacity":.3}},bS={id:"geometry-line-hover",type:"line",source:"geometry-source",paint:{"line-color":"#7c3aed","line-width":3}},SS={id:"geometry-point-hover",type:"circle",source:"geometry-source",paint:{"circle-radius":8,"circle-color":"#8b5cf6","circle-stroke-color":"#ffffff","circle-stroke-width":2}},wS={id:"geometry-fill-selected",type:"fill",source:"geometry-source",paint:{"fill-color":"#f97316","fill-opacity":.4}},xS={id:"geometry-line-selected",type:"line",source:"geometry-source",paint:{"line-color":"#ea580c","line-width":4}},MS={id:"geometry-point-selected",type:"circle",source:"geometry-source",paint:{"circle-radius":10,"circle-color":"#f97316","circle-stroke-color":"#ffffff","circle-stroke-width":3}},AS={id:"envelope-fill",type:"fill",source:"envelope-source",paint:{"fill-color":"#10b981","fill-opacity":.1}},PS={id:"envelope-line",type:"line",source:"envelope-source",paint:{"line-color":"#059669","line-width":2,"line-dasharray":[4,2]}};function TS({features:t,selectedFeatureId:e,hoveredFeatureId:n,isEnvelopeHovered:r,envelope:i}){const s=B.useMemo(()=>{const g=e?["==","id",e]:null,b=n&&n!==e?["==","id",n]:null;let y;return e&&n&&n!==e?y=["all",["!=","id",e],["!=","id",n]]:e?y=["!=","id",e]:n&&(y=["!=","id",n]),{selectedFilter:g,hoverFilter:b,baseExcludeFilter:y}},[e,n]),a=B.useMemo(()=>{if(!r||!i)return null;const[g,b,y,A]=i;return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[[[g,b],[y,b],[y,A],[g,A],[g,b]]]},properties:{}}]}},[r,i]);if(t.length===0)return null;const o={type:"FeatureCollection",features:t.map(g=>({...g,properties:{...g.properties,id:g.id}}))},{selectedFilter:u,hoverFilter:c,baseExcludeFilter:l}=s,h=l?["all",["==","$type","Polygon"],l]:["==","$type","Polygon"],f=l?["all",["in","$type","LineString","Polygon"],l]:["in","$type","LineString","Polygon"],d=l?["all",["==","$type","Point"],l]:["==","$type","Point"];return S.jsxs(S.Fragment,{children:[S.jsxs(_a,{id:"geometry-source",type:"geojson",data:o,children:[S.jsx(Vt,{...yS,filter:h}),S.jsx(Vt,{..._S,filter:f}),S.jsx(Vt,{...vS,filter:d}),c&&S.jsxs(S.Fragment,{children:[S.jsx(Vt,{...ES,filter:["all",["==","$type","Polygon"],c]}),S.jsx(Vt,{...bS,filter:["all",["in","$type","LineString","Polygon"],c]}),S.jsx(Vt,{...SS,filter:["all",["==","$type","Point"],c]})]}),u&&S.jsxs(S.Fragment,{children:[S.jsx(Vt,{...wS,filter:["all",["==","$type","Polygon"],u]}),S.jsx(Vt,{...xS,filter:["all",["in","$type","LineString","Polygon"],u]}),S.jsx(Vt,{...MS,filter:["all",["==","$type","Point"],u]})]})]}),a&&S.jsxs(_a,{id:"envelope-source",type:"geojson",data:a,children:[S.jsx(Vt,{...AS}),S.jsx(Vt,{...PS})]})]})}function CS({viewState:t,onViewStateChange:e,basemap:n,features:r,selectedFeatureId:i,hoveredFeatureId:s,isEnvelopeHovered:a,envelope:o,isDrawing:u,drawingPreview:c,onMapClick:l,children:h}){const f=B.useRef(null),d=B.useCallback(y=>{e({longitude:y.viewState.longitude,latitude:y.viewState.latitude,zoom:y.viewState.zoom})},[e]),g=B.useCallback(y=>{l({lng:y.lngLat.lng,lat:y.lngLat.lat})},[l]),b=n==="satellite"?"https://api.maptiler.com/maps/hybrid/style.json?key=get_your_own_key":"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json";return S.jsxs(mS,{ref:f,...t,onMove:d,onClick:g,mapStyle:b,style:{width:"100%",height:"100%"},cursor:u?"crosshair":void 0,children:[S.jsx(gS,{position:"top-right"}),h,c&&S.jsxs(_a,{id:"drawing-preview",type:"geojson",data:c,children:[S.jsx(Vt,{id:"drawing-preview-line",type:"line",paint:{"line-color":"#f97316","line-width":2,"line-dasharray":[2,2]},filter:["==","$type","LineString"]}),S.jsx(Vt,{id:"drawing-preview-points",type:"circle",paint:{"circle-radius":6,"circle-color":"#f97316","circle-stroke-color":"#ffffff","circle-stroke-width":2},filter:["==","$type","Point"]})]}),S.jsx(TS,{features:r,selectedFeatureId:i,hoveredFeatureId:s,isEnvelopeHovered:a,envelope:o})]})}const uf=ti(t=>({mode:"none",currentPoints:[],setMode:e=>{t({mode:e,currentPoints:[]})},addPoint:e=>{t(n=>({currentPoints:[...n.currentPoints,e]}))},clearPoints:()=>{t({currentPoints:[]})},reset:()=>{t({mode:"none",currentPoints:[]})}}));function DS(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const a=u=>u===null?null:JSON.parse(u,void 0),o=(s=n.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const va=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return va(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return va(r)(n)}}}},NS=(t,e)=>(n,r,i)=>{let s={storage:DS(()=>localStorage),partialize:y=>y,version:0,merge:(y,A)=>({...A,...y}),...e},a=!1,o=0;const u=new Set,c=new Set;let l=s.storage;if(!l)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},r,i);const h=()=>{const y=s.partialize({...r()});return l.setItem(s.name,{state:y,version:s.version})},f=i.setState;i.setState=(y,A)=>(f(y,A),h());const d=t((...y)=>(n(...y),h()),r,i);i.getInitialState=()=>d;let g;const b=()=>{var y,A;if(!l)return;const w=++o;a=!1,u.forEach(D=>{var N;return D((N=r())!=null?N:d)});const M=((A=s.onRehydrateStorage)==null?void 0:A.call(s,(y=r())!=null?y:d))||void 0;return va(l.getItem.bind(l))(s.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==s.version){if(s.migrate){const N=s.migrate(D.state,D.version);return N instanceof Promise?N.then(P=>[!0,P]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var N;if(w!==o)return;const[P,x]=D;if(g=s.merge(x,(N=r())!=null?N:d),n(g,!0),P)return h()}).then(()=>{w===o&&(M==null||M(g,void 0),g=r(),a=!0,c.forEach(D=>D(g)))}).catch(D=>{w===o&&(M==null||M(void 0,D))})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(l=y.storage)},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>a,onHydrate:y=>(u.add(y),()=>{u.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},s.skipHydration||b(),g||d},IS=NS,kS=33.33,uo=ti()(IS(t=>({theme:"system",leftPanelWidthPercent:kS,autoPanToGeometry:!0,mapProvider:"maplibre",setTheme:e=>{t({theme:e})},setLeftPanelWidthPercent:e=>{t({leftPanelWidthPercent:e})},setAutoPanToGeometry:e=>{t({autoPanToGeometry:e})},toggleAutoPanToGeometry:()=>{t(e=>({autoPanToGeometry:!e.autoPanToGeometry}))},setMapProvider:e=>{t({mapProvider:e})}}),{name:"geofiddle-preferences"}));function cf(t){const{geometry:e,rawText:n,inputFormat:r,inputProjection:i,detectedFormat:s,detectedProjection:a}=t,o=r!=="auto"?r:s??"geojson",u=i!=="auto"?i:a??"EPSG:4326",l={type:"Feature",geometry:u!=="EPSG:4326"?We(e,"EPSG:4326",u):e,properties:{}},h=n.trim();if(!h)return{newText:un([l],o,{projection:u}),effectiveFormat:o,effectiveProjection:u};const f=ma(h,o);if(f.features.length>0){const g=[...f.features,l];return{newText:un(g,o,{projection:u}),effectiveFormat:o,effectiveProjection:u}}const d=ef(h);if(d&&d!==o){const g=ma(h,d);if(g.features.length>0){const b=[...g.features,l];return{newText:un(b,d,{projection:u}),effectiveFormat:d,effectiveProjection:u}}}return{newText:un([l],o,{projection:u}),effectiveFormat:o,effectiveProjection:u}}function RS({onFitBounds:t,hasFeatures:e=!1}){const{mode:n,setMode:r,currentPoints:i,reset:s}=uf(),{rawText:a,inputFormat:o,inputProjection:u,detectedFormat:c,detectedProjection:l,setRawText:h}=le(),{autoPanToGeometry:f,toggleAutoPanToGeometry:d,mapProvider:g,setMapProvider:b}=uo(),y=B.useCallback(()=>{b(g==="maplibre"?"google":"maplibre")},[g,b]),A=B.useCallback(P=>{n===P?s():r(P)},[n,r,s]),w=B.useCallback(()=>{if(i.length===0){s();return}let P=null;const x=i[0];if(n==="point"&&i.length>=1&&x?P={type:"Point",coordinates:x}:n==="line"&&i.length>=2?P={type:"LineString",coordinates:i}:n==="polygon"&&i.length>=3&&x&&(P={type:"Polygon",coordinates:[[...i,x]]}),P){const F=cf({geometry:P,rawText:a,inputFormat:o,inputProjection:u,detectedFormat:c,detectedProjection:l});h(F.newText)}s()},[n,i,a,o,u,c,l,h,s]),M=B.useCallback(()=>{s()},[s]),D=n!=="none",N=n==="point"&&i.length>=1||n==="line"&&i.length>=2||n==="polygon"&&i.length>=3;return S.jsxs("div",{className:"absolute left-2 top-2 flex flex-col gap-1",children:[S.jsxs("div",{className:"flex gap-1 rounded bg-white p-1 shadow-md",children:[S.jsx("button",{onClick:()=>{A("point")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${n==="point"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw point","aria-label":"Draw point","aria-pressed":n==="point",children:S.jsx(th,{className:"h-4 w-4"})}),S.jsx("button",{onClick:()=>{A("line")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${n==="line"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw line","aria-label":"Draw line","aria-pressed":n==="line",children:S.jsx(R1,{className:"h-4 w-4"})}),S.jsx("button",{onClick:()=>{A("polygon")},className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${n==="polygon"?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:"Draw polygon","aria-label":"Draw polygon","aria-pressed":n==="polygon",children:S.jsx(nh,{className:"h-4 w-4"})}),S.jsx("div",{className:"mx-0.5 w-px self-stretch bg-neutral-200"}),S.jsx("button",{onClick:d,className:`flex h-8 w-8 items-center justify-center rounded transition-colors ${f?"bg-primary-500 text-white":"text-neutral-700 hover:bg-neutral-100"}`,title:f?"Auto-pan enabled (click to disable)":"Auto-pan disabled (click to enable)","aria-label":f?"Disable auto-pan to geometry":"Enable auto-pan to geometry","aria-pressed":f,children:f?S.jsx(N1,{className:"h-4 w-4"}):S.jsx(I1,{className:"h-4 w-4"})}),e&&t&&S.jsx("button",{onClick:t,className:"flex h-8 w-8 items-center justify-center rounded text-neutral-700 transition-colors hover:bg-neutral-100",title:"Fit map to geometry","aria-label":"Fit map to geometry",children:S.jsx(k1,{className:"h-4 w-4"})}),S.jsx("div",{className:"mx-0.5 w-px self-stretch bg-neutral-200"}),S.jsx("button",{onClick:y,className:"flex h-8 w-8 items-center justify-center rounded text-neutral-700 transition-colors hover:bg-neutral-100",title:g==="maplibre"?"Switch to Google Maps":"Switch to MapLibre","aria-label":g==="maplibre"?"Switch to Google Maps":"Switch to MapLibre",children:g==="maplibre"?S.jsx(eh,{className:"h-4 w-4"}):S.jsx(P1,{className:"h-4 w-4"})})]}),D&&S.jsxs("div",{className:"rounded bg-white p-2 shadow-md",children:[S.jsxs("div",{className:"mb-2 text-xs text-neutral-600",children:[n==="point"&&"Click to place point",n==="line"&&`Click to add points (${String(i.length)} added)`,n==="polygon"&&`Click to add vertices (${String(i.length)} added)`]}),S.jsxs("div",{className:"flex gap-1",children:[S.jsxs("button",{onClick:w,disabled:!N,className:"flex flex-1 items-center justify-center gap-1 rounded bg-primary-500 px-2 py-1 text-xs text-white hover:bg-primary-600 disabled:opacity-50",children:[S.jsx(_1,{className:"h-3 w-3"}),"Finish"]}),S.jsx("button",{onClick:M,className:"flex items-center justify-center rounded border border-neutral-300 px-2 py-1 text-xs text-neutral-700 hover:bg-neutral-100",children:S.jsx(B1,{className:"h-3 w-3"})})]})]})]})}const LS=B.lazy(()=>wr(()=>import("./index-Dq__27AD.js"),__vite__mapDeps([2,1]),import.meta.url).then(t=>({default:t.GoogleMap})));function yc(t){const e=[],n=r=>{if(!r)return;if(r.type==="GeometryCollection"){for(const s of r.geometries)n(s);return}const i=s=>{if(Array.isArray(s))if(typeof s[0]=="number"&&typeof s[1]=="number")e.push(s);else for(const a of s)i(a)};i(r.coordinates)};for(const r of t)n(r.geometry);return e}function GS(){return S.jsx("div",{className:"flex h-full w-full items-center justify-center bg-neutral-100",children:S.jsx("div",{className:"text-neutral-600",children:"Loading map..."})})}function lf(){const{viewState:t,setViewState:e,basemap:n,panToFeatureId:r,clearPanToFeature:i,isEnvelopeHovered:s}=oo(),{features:a,selectedFeatureId:o,hoveredFeatureId:u,rawText:c,inputFormat:l,inputProjection:h,detectedFormat:f,detectedProjection:d,setCoordinateError:g,setRawText:b}=le(),{mode:y,currentPoints:A,addPoint:w,reset:M}=uf(),{autoPanToGeometry:D,mapProvider:N}=uo(),P=B.useMemo(()=>{if(h!=="auto")return h;if(d)return d;if(a.length>0){const G=yc(a);return ai(G)}return"EPSG:4326"},[h,d,a]),{transformedFeatures:x,coordinateError:F}=B.useMemo(()=>{if(a.length===0)return{transformedFeatures:[],coordinateError:null};const G=P==="EPSG:4326"?a:a.map(O=>({...O,geometry:We(O.geometry,P,"EPSG:4326")})),$=yc(G),j=Dh($);if(!j.valid&&j.invalidCoord){const[O,Q]=j.invalidCoord;return{transformedFeatures:[],coordinateError:`Coordinates out of range for WGS84: (${String(O)}, ${String(Q)}). Longitude must be -180 to 180, latitude must be -90 to 90. Try selecting a different input projection.`}}return{transformedFeatures:G,coordinateError:null}},[a,P]);B.useEffect(()=>{g(F)},[F,g]);const v=B.useCallback(()=>{if(x.length===0)return null;const G=ya(x),$=Fi(G);if(!$.every(J=>isFinite(J)))return null;const[j,O,Q,Z]=$,K=(j+Q)/2,X=(O+Z)/2,at=Z-O,ot=Q-j,et=Math.max(at,ot);let ct=10;return et>0&&(ct=Math.floor(Math.log2(360/et))-1,ct=Math.max(1,Math.min(ct,18))),{longitude:K,latitude:X,zoom:ct}},[x]),_=B.useCallback(()=>{const G=v();G&&e(G)},[v,e]);B.useEffect(()=>{D&&_()},[D,_]),B.useEffect(()=>{if(!r)return;const G=x.find($=>$.id===r);if(!G){i();return}try{const $=Fi(G);if(!$.every(J=>isFinite(J))){i();return}const[j,O,Q,Z]=$,K=(j+Q)/2,X=(O+Z)/2,at=Z-O,ot=Q-j,et=Math.max(at,ot);let ct=14;et>0&&(ct=Math.floor(Math.log2(360/et))-1,ct=Math.max(1,Math.min(ct,18))),e({longitude:K,latitude:X,zoom:ct})}finally{i()}},[r,x,e,i]);const T=B.useCallback(G=>{if(y==="none")return;const{lng:$,lat:j}=G,O=[$,j];if(y==="point"){const Q=cf({geometry:{type:"Point",coordinates:O},rawText:c,inputFormat:l,inputProjection:h,detectedFormat:f,detectedProjection:d});b(Q.newText),M()}else w(O)},[y,c,l,h,f,d,b,w,M]),I=B.useMemo(()=>{if(y==="none"||A.length===0)return null;const G=[];if(A.forEach(($,j)=>{G.push({type:"Feature",geometry:{type:"Point",coordinates:$},properties:{index:j}})}),A.length>=2){const $=A[0],j=y==="polygon"&&A.length>=3&&$?[...A,$]:A;G.push({type:"Feature",geometry:{type:"LineString",coordinates:j},properties:{}})}return{type:"FeatureCollection",features:G}},[y,A]),k=x.length>0,R=y!=="none",W=B.useMemo(()=>{if(x.length===0)return null;try{const G=ya(x),$=Fi(G);return $.every(j=>isFinite(j))?$:null}catch{return null}},[x]),Y={viewState:t,onViewStateChange:e,basemap:n,features:x,selectedFeatureId:o,hoveredFeatureId:u,isEnvelopeHovered:s,envelope:W,isDrawing:R,drawingPreview:I,onMapClick:T},V=S.jsx(RS,{onFitBounds:_,hasFeatures:k});return N==="google"?S.jsx(B.Suspense,{fallback:S.jsx(GS,{}),children:S.jsx(LS,{...Y,children:V})}):S.jsx(CS,{...Y,children:V})}function OS(){const[t,e]=B.useState("input");return S.jsxs("main",{id:"main-content",className:"flex flex-1 flex-col overflow-hidden",role:"main",children:[S.jsx("div",{className:"flex-1 overflow-hidden",children:t==="input"?S.jsx("div",{className:"h-full overflow-y-auto",children:S.jsx(of,{})}):S.jsx(lf,{})}),S.jsxs("nav",{className:"flex shrink-0 border-t border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-900",role:"tablist","aria-label":"Main navigation",children:[S.jsxs("button",{role:"tab","aria-selected":t==="input","aria-controls":"input-panel",onClick:()=>{e("input")},className:`flex flex-1 items-center justify-center gap-1.5 py-2 text-xs font-medium transition-colors ${t==="input"?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[S.jsx(A1,{className:"h-4 w-4"}),S.jsx("span",{children:"Input"})]}),S.jsxs("button",{role:"tab","aria-selected":t==="map","aria-controls":"map-panel",onClick:()=>{e("map")},className:`flex flex-1 items-center justify-center gap-1.5 py-2 text-xs font-medium transition-colors ${t==="map"?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200"}`,children:[S.jsx(eh,{className:"h-4 w-4"}),S.jsx("span",{children:"Map"})]})]})]})}const _c=768;function FS(){const[t,e]=B.useState(()=>typeof window>"u"?!1:window.innerWidth<_c);return B.useEffect(()=>{const n=window.matchMedia(`(max-width: ${String(_c-1)}px)`),r=i=>{e(i.matches)};return e(n.matches),n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[]),t}const jS=20,BS=66.67;function $S(){const{theme:t,setTheme:e,leftPanelWidthPercent:n,setLeftPanelWidthPercent:r}=uo(),i=FS();return B.useEffect(()=>{const s=window.document.documentElement;if(s.classList.remove("light","dark"),t==="system"){const a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";s.classList.add(a)}else s.classList.add(t)},[t]),B.useEffect(()=>{if(t!=="system")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),a=o=>{const u=window.document.documentElement;u.classList.remove("light","dark"),u.classList.add(o.matches?"dark":"light")};return s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[t]),S.jsxs("div",{className:"flex h-full flex-col",children:[S.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),S.jsx($1,{theme:t,onThemeChange:e}),i?S.jsx(OS,{}):S.jsx(q1,{left:S.jsx(of,{}),right:S.jsx(lf,{}),leftWidthPercent:n,minLeftWidthPercent:jS,maxLeftWidthPercent:BS,onLeftWidthPercentChange:r})]})}function qS(t){const e=[],n=r=>{if(!r)return;if(r.type==="GeometryCollection"){for(const s of r.geometries)n(s);return}const i=s=>{if(Array.isArray(s))if(typeof s[0]=="number"&&typeof s[1]=="number")e.push(s);else for(const a of s)i(a)};"coordinates"in r&&i(r.coordinates)};for(const r of t)n(r.geometry);return e}const US=100*1024,HS=150;function zS(){const{rawText:t,inputFormat:e,inputProjection:n,setFeatures:r,setParseError:i,setDetectedFormat:s,setDetectedProjection:a,setIsParsing:o}=le(),u=B.useRef(null),c=B.useRef(0),l=B.useRef();B.useEffect(()=>()=>{u.current&&(u.current.terminate(),u.current=null),l.current&&clearTimeout(l.current)},[]);const h=B.useCallback(()=>(u.current||(u.current=new Worker(new URL(""+new URL("parser.worker-CYYFt2qn.js",import.meta.url).href,import.meta.url),{type:"module"})),u.current),[]),f=B.useCallback(g=>{const b=h(),y=++c.current;o(!0),b.onmessage=w=>{const M=w.data;M.id===c.current&&(o(!1),M.parseError?i(M.parseError):r(M.features),s(M.detectedFormat),a(M.detectedProjection))},b.onerror=w=>{o(!1),i(`Worker error: ${w.message}`)};const A={id:y,rawText:g,inputFormat:e,inputProjection:n};b.postMessage(A)},[h,e,n,r,i,s,a,o]),d=B.useCallback(async g=>{const{parse:b}=await wr(async()=>{const{parse:P}=await Promise.resolve().then(()=>Sb);return{parse:P}},void 0,import.meta.url),{detectFormat:y,detectProjection:A}=await wr(async()=>{const{detectFormat:P,detectProjection:x}=await import("./format-detection-CVSjjMAY.js");return{detectFormat:P,detectProjection:x}},__vite__mapDeps([3,1]),import.meta.url),{detectProjectionFromCoordinates:w}=await wr(async()=>{const{detectProjectionFromCoordinates:P}=await Promise.resolve().then(()=>t3);return{detectProjectionFromCoordinates:P}},void 0,import.meta.url);if(!g.trim()){r([]),s(null),a(null);return}const M=e==="auto"?y(g):e,D=e==="auto"?M:null;if(!M){i("Could not auto-detect format. Please select a format manually.");return}let N=n==="auto"?A(g,M):null;try{const P=b(g,M);if(P.errors.length>0)i(P.errors.map(x=>x.message).join(`
`));else if(r(P.features),n==="auto"&&!N&&!P.detectedProjection&&P.features.length>0){const x=qS(P.features);x.length>0&&(N=w(x))}s(D),a(N??P.detectedProjection??null)}catch(P){i(P instanceof Error?P.message:"Parsing failed")}},[e,n,r,i,s,a]);B.useEffect(()=>{if(l.current&&clearTimeout(l.current),!t.trim()){r([]),s(null),a(null),o(!1);return}return l.current=setTimeout(()=>{t.length>US?f(t):d(t)},HS),()=>{l.current&&clearTimeout(l.current)}},[t,e,n,f,d,r,s,a,o])}function WS(){const{rawText:t,inputFormat:e,inputProjection:n,setRawText:r,setInputFormat:i,setInputProjection:s}=le(),{setOutputFormat:a,setOutputProjection:o}=oi(),u=B.useRef(!0),c=B.useRef(!1);B.useEffect(()=>{const l=window.location.hash.slice(1);if(!l){u.current=!1;return}try{const h=vc(l);h.format&&(i(h.format),a(h.format==="auto"?"geojson":h.format)),h.projection&&(s(h.projection),o(h.projection==="auto"?"EPSG:4326":h.projection)),h.geometry&&(c.current=!0,r(h.geometry))}catch(h){console.warn("Failed to parse URL hash:",h)}u.current=!1},[r,i,s,a,o]),B.useEffect(()=>{if(u.current)return;if(c.current){c.current=!1;return}const l=JS({format:e,projection:n,geometry:t}),h=l?`#${l}`:window.location.pathname;window.history.replaceState(null,"",h)},[t,e,n]),B.useEffect(()=>{const l=()=>{const h=window.location.hash.slice(1);if(h)try{const f=vc(h);c.current=!0,f.format&&i(f.format),f.projection&&s(f.projection),f.geometry&&r(f.geometry)}catch(f){console.warn("Failed to parse URL hash:",f)}};return window.addEventListener("hashchange",l),()=>{window.removeEventListener("hashchange",l)}},[r,i,s])}const VS={auto:"auto","EPSG:4326":"wgs84","EPSG:27700":"bng","EPSG:3857":"web-mercator"},XS={auto:"auto",wgs84:"EPSG:4326",bng:"EPSG:27700","web-mercator":"EPSG:3857","EPSG:4326":"EPSG:4326","EPSG:27700":"EPSG:27700","EPSG:3857":"EPSG:3857"};function vc(t){const e=t.split("/"),n={};if(e[0]&&(n.format=decodeURIComponent(e[0])),e[1]){const r=decodeURIComponent(e[1]);n.projection=XS[r]??"auto"}return e[2]&&(n.geometry=decodeURIComponent(e[2])),n}function JS(t){var s;if(!((s=t.geometry)!=null&&s.trim()))return"";const e=encodeURIComponent(t.format??"auto"),n=t.projection??"auto",r=encodeURIComponent(VS[n]),i=encodeURIComponent(t.geometry);return`${e}/${r}/${i}`}function KS(){return WS(),zS(),S.jsx($S,{})}async function YS(){try{const t=await fetch("./PRIVATE.json");if(!t.ok)return;const e=await t.json();e.sentryDsn&&d1({dsn:e.sentryDsn,environment:"production",enabled:!0,integrations:[u1()],tracesSampleRate:.1})}catch{}}async function QS(){await YS();const t=document.getElementById("root");if(!t)throw new Error("Failed to find root element");bf.createRoot(t).render(S.jsx(B.StrictMode,{children:S.jsx(KS,{})}))}QS();export{ef as d,S as j};
//# sourceMappingURL=index-mRBVd40x.js.map
